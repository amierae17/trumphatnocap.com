(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{"4Fr6":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Pxqf"),a=i("96ed"),r=i("Sucz"),s=Class({download:function(e,t,i){var n=[];for(var a in e)n.push(e[a].toArray());Object(r.a)("upload/zip",{filename:t,files:n},$.proxy(this._taskCreated,this,i))},_taskCreated:function(e,t){a.a.subscribe(t.taskKey,"onZipCompleted",$.proxy(this._zipCreated,this,e))},_zipCreated:function(e,t){e(n.a.fromArray(t.tempFile),t.downloadUrl)}});(globalThis||{}).PFRepositoriesZipDownload=s},"7RFh":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("Oc5s"),a=function(){this.options=[]};a.prototype=new n.a,a.prototype.options=null,window&&((globalThis||{}).PFFormsRadioListPar=a)},"9MVb":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("97Au"),a=i("sjGI");function r(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}var s=new WeakSet,o=new WeakSet,l=new WeakSet,d=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l.add(this),o.add(this),s.add(this);var t=new n.a.Par;t.title=dlang("generator","You need more orders for mockup and print file download"),t.modalDialogClass="modal-md",t.headerFlexWrap="pf-flex-nowrap",this._modal=new n.a(t),r(this,s,c).call(this),r(this,l,p).call(this),this._modal.show()},c=function(){var e=tag("div","",[tag("div","pf-mb-0 row",[tag("img",{className:"col-5 pf-p-5",src:"/static/images/popups/mockup-generator-restricted-user-store-popup-icon.png"}),tag("div","col-7 pf-d-flex pf-flex-wrap pf-align-items-center pf-p-6 pf-mt-24",[tag("p","col-12 pf-p-0 pf-mb-0 pf-pr-4 pf-h-20",dlang("generator","Your store needs at least {ordersCount} order every {daysCount} days for you to be able to download mockups and print files.").replace("{ordersCount}","1").replace("{daysCount}","60")),tag("p",{className:"col-12 pf-p-0 pf-h-20",innerHTML:dlang("generator","<a target='_blank' href='{targetUrl}'>Learn more</a>").replace("{targetUrl}",r(this,o,h).call(this))})])])]);this._modal.setContent(e)},h=function(){return a.a.isDe()?"https://help.printful.com/hc/de/articles/360017229919-Warum-kann-ich-Mockups-und-Druckdateien-nicht-herunterladen-":a.a.isEs()?"https://help.printful.com/hc/es/articles/360017229919--Por-qué-no-puedo-descargar-maquetas-y-archivos-de-impresión-":a.a.isFr()?"https://help.printful.com/hc/fr/articles/360017229919-Pourquoi-ne-puis-je-pas-télécharger-des-maquettes-et-fichiers-d-impression-":a.a.isJp()?"https://help.printful.com/hc/ja/articles/360017229919-モックアップやデザインデータをダウンロードできないのはなぜですか-":a.a.isUs()?"https://help.printful.com/hc/en-us/articles/360017229919":void 0},p=function(){var e=tag("div",{style:{textAlign:"left"}},[tag("a",{className:"pf-btn pf-btn-primary pf-mr-16",onclick:this._modal.onCloseClick.bind(this._modal)},lang("I understand"))]);this._modal.setFooterContent(e)}},"H1/d":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("6JZw"),a=i("nF4n"),r=i("9Nv7"),s=i("D5LZ"),o=Class({customerId:0,environmentId:0,firstName:"",lastName:"",fullName:"",email:"",createdAt:0,discount:0,sampleOrdersLeft:0,sampleOrdersTotal:1,sampleItems:2,environmentValue:0,mockupGeneratorRestricted:!1,mockupGeneratorRestrictionStatus:"",location:null,leadScoringProfile:"",environmentCreatedAt:0,sellingRegionSetting:null,isLogged:function(){return this.customerId>0},isAnonymous:function(){return this.environmentId<=0},isB2cStarter:function(){return"b2cStarter"===this.leadScoringProfile},loadCustomerRestriction:function(){var e=this;return new Promise((function(t,i){Object(r.a)("user-settings/get-mockup-generator-restriction").then((function(i){a.a.O2O(e,i),t()})).catch(i)}))},abTestBgFill:function(){return PF.Customer.environmentId>3198258&&PF.Customer.environmentId%2==0}},n.a);o.fromArray=function(e){var t=new o;return e.sellingRegionSetting&&(e.sellingRegionSetting=s.b.fromArray(e.sellingRegionSetting)),a.a.O2O(t,e),t},o.MOCKUP_GENERATOR_RESTRICTED_NO_STORES="no_stores",o.MOCKUP_GENERATOR_RESTRICTED_NO_ORDERS="no_orders",window&&((globalThis||{}).PFItemsCustomerItem=o)},JM6l:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("6t3j"),a=i("Q1Td"),r=i("V5mN"),s=i("/w+P"),o=i("aUd0"),l=i("cCrT"),d=i("XLZy"),c=Class({__construct:function(e,t,i){if(this._productId=t,this._files=e,this._onSavedCallback=i,PF.Customer.isLogged()){var n=new s.b;n.callback=this._onStorePicked,this._modal=s.a.popup(n,dlang("generator","Choose store to save to…"))}else this._requireUserLogin()},_requireUserLogin:function(){var e=[];for(var t in this._files)e.push(this._files[t].toArray());sessionStorage&&(sessionStorage.setItem(c._keyFileData,JSON.stringify(e)),sessionStorage.setItem(c._keyProductId,JSON.stringify(this._productId)));var i=new l.a;i.query.completeSave=1;var n=r.a.Par;n.returnUrl=i.path+"?"+i.query.toString(),n.signUpContent=[[tag("span",{innerHTML:dlang("generator","Download print file <strong>templates </strong>and <strong>mockups</strong>")})],[tag("span",{innerHTML:dlang("generator","Store <strong>design ideas </strong>in one place")})],[tag("span",{innerHTML:dlang("generator","Get notifications about our <strong>latest products</strong>")})]],n.signInContent=[dlang("generator","Please sign in to save mockups.")],new r.a(n)},_onStorePicked:function(e){d.a.show(this._modal.getContentNode());var t=(new n.a).getCachedProductById(this._productId);(new a.a).saveToLibrary(this._files,e,t.type,this._onTaskCreated)},_onTaskCreated:function(e){this._modal.remove(),this._onSavedCallback(e)}});c.completeSave=function(e){var t=sessionStorage.getItem(c._keyFileData),i=JSON.parse(sessionStorage.getItem(c._keyProductId));if(t){sessionStorage.removeItem(c._keyFileData),sessionStorage.removeItem(c._keyProductId);var n=JSON.parse(t),a=[];for(var r in n)a.push(o.a.fromArray(n[r]));new c(a,i,(function(){e&&e(),alert(dlang("generator",'Files were saved to your library! You can access it by going to the main site and then clicking on "Print files" in the menu.'))}))}},c._keyFileData="mockupSave",c._keyProductId="mockupSaveProductId",(globalThis||{}).PFMockupGeneratorSaveFilesToLibrary=c},VKqq:function(e,t,i){"use strict";i.d(t,"a",(function(){return A}));var n=i("4Fr6"),a=i("6t3j"),r=(i("edgZ"),i("Q1Td")),s=i("pnlN"),o=i("aRUU"),l=Class({title:"",items:null,onChanged:null,generatorParams:null,designData:null,activeItems:[],inactiveItems:[],isPrintfiles:!1});(globalThis||{}).PFMockupGeneratorGeneratorPickerRowPar=l;var d=i("bvdp"),c=i("Vx67"),h=i("bRD6"),p=i("nF4n"),u=Class({_par:null,_checkbox:null,_isHidden:!1,groupItem:null,__construct:function(e){this._par=e,this._overlayContent=tag("div",{className:"generator-picker__item-overlay",onclick:this._par.overlay.callback},[tag("span","item-overlay__count","+"+this._par.overlay.itemCount),tag("span","item-overlay__link",clang("action","See all"))]),this._checkbox=tag("input",{type:"checkbox",className:"margin-right-10",prop:{checked:this.isMockup(),disabled:this._par.disabled}}),this._title=tag("span","generator-picker__subtitle",this._par.itemTitle.text.replace(/ print$/,"")),this._tooltip=tag("div","generator-picker__item-tooltip",dlang("generator","Main mockup image")),this._disabledLabel=tag("span",{className:"pf-badge pf-badge-rect pf-badge--primary pf-d-inline-block",style:{fontSize:"75%",padding:"0 14px",height:"32px",lineHeight:"32px",zIndex:"1000"}},dlang("generator","Disabled")),this.node=tag("div",{className:"generator-picker__item",onclick:this._onClickItem,style:{pointerEvents:this._par.disabled?"none":""}}),this._render()},_render:function(){if(p.a.clearNode(this.node),!this._par.isRadio&&!this._par.isMockupUpdate){this._checkbox.append(this.node);var e=(!this.isMockup()||!this._par.item.isCloseUp())&&this._checkbox.checked;this.setCheckedState(e)}0===this._par.item.isActive&&this._disabledLabel.append(this.node),this._par.content.append(this.node),this._par.itemTitle.isVisible&&this._title.append(this.node),this._par.overlay.isVisible&&this._overlayContent.append(this.node),this._par.isRadio&&this._isDefault()},_onClickItem:function(e){return!this._par.overlay.isVisible&&"item-overlay__link"!==e.target.className&&("generator-picker__item-overlay"!==e.target.className&&(this._par.isRadio||(this._checkbox.checked=!this._checkbox.checked,this._checkboxCheckedChanged()),void("function"==typeof this._par.onNodeClickCallback&&this._par.onNodeClickCallback())))},_checkboxCheckedChanged:function(){this.updateActiveState(this.isChecked()),this._onStateChanged()},updateActiveState:function(e){e?(this.removeFromInactiveItemGroup(),this.addToActiveItemGroup()):(this.addToInactiveItemGroup(),this.removeFromActiveItemGroup())},_onStateChanged:function(){d.a.trackSingleFileCheckToggle(this._par.rowTitle,this._checkbox.checked),this._par.onChangedCallback()},setGroupItem:function(e){this.groupItem=e},getGroupItem:function(){return this.groupItem},setCheckedState:function(e){this.isInActiveItemGroup()?e=!0:this.isInInactiveItemGroup()?e=!1:this.updateActiveState(e),this._checkbox.checked=e},removeFromActiveItemGroup:function(){return!!this.isInActiveItemGroup()&&(this._par.activeItems.splice(this._par.activeItems.indexOf(this._par.item),1),!0)},removeFromInactiveItemGroup:function(){return!!this.isInInactiveItemGroup()&&(this._par.inactiveItems.splice(this._par.inactiveItems.indexOf(this._par.item),1),!0)},addToActiveItemGroup:function(){this.isInActiveItemGroup()||this._par.activeItems.push(this._par.item)},addToInactiveItemGroup:function(){this.isInInactiveItemGroup()||this._par.inactiveItems.push(this._par.item)},removeGroupItemOverlay:function(){this._par.overlay.isVisible=!this._par.overlay.isVisible,this._par.itemTitle.isVisible=!this._par.itemTitle.isVisible,this._par.itemTitle.isVisible?this._title.append(this.node):p.a.removeNode(this._title),this._par.overlay.isVisible?(this._overlayContent.append(this.node),$(this.node).attr("style","pointer-events: auto")):($(this.node).attr("style","pointer-events: none"),p.a.removeNode(this._overlayContent))},isInActiveItemGroup:function(){return-1!==this._par.activeItems.indexOf(this._par.item)},isInInactiveItemGroup:function(){return-1!==this._par.inactiveItems.indexOf(this._par.item)},isChecked:function(){return this._checkbox.checked},toggleVisibility:function(e){(e=void 0!==e?e:!this.isHidden())?p.a.addClassName(this.node,"pf-d-none"):p.a.removeClassName(this.node,"pf-d-none")},isHidden:function(){return p.a.hasClassName(this.node,"pf-d-none")},getItem:function(){return this._par.item},getGeneratorVariantId:function(){return this._par.item.generatorVariantId},isPrintfile:function(){return this._par.item instanceof h.a},isMockup:function(){return this._par.item instanceof c.a},isActive:function(){return this._isActive},setActive:function(){if(this._par.isMockupUpdate)return!1;this._isActive=!0,p.a.addClassName(this.node,"generator-picker__item--selected"),this._tooltip.append(this.node)},setAsGroupActive:function(e){if(this._par.isMockupUpdate)return!1;e?(p.a.addClassName(this.node,"generator-picker__item--group-active"),this._tooltip.append(this.node)):(p.a.removeClassName(this.node,"generator-picker__item--group-active"),p.a.removeNode(this._tooltip))},removeActive:function(){this._isActive=!1,p.a.removeClassName(this.node,"generator-picker__item--selected"),p.a.removeNode(this._tooltip)},getSectionName:function(){return!!this.isMockup()&&this._par.item.option+"-"+this._par.item.size+"-"+this._par.item.color},_isDefault:function(){var e=this.getItem();return e.generatorVariantId===this._par.designData.defaultGeneratorVariantId&&(this._par.setActiveItemCallback(this),this.setActive()),e.generatorVariantId===this._par.designData.defaultGeneratorVariantId}},p.a.Base);(globalThis||{}).PFMockupGeneratorGeneratorPickerRowItem=u;var m=Class({rowTitle:"",itemTitle:{text:"",isVisible:!1},content:null,item:null,onChangedCallback:null,overlay:{},designData:{},onNodeClickCallback:null,isRadio:!1,isChecked:!1,setActiveItemCallback:null,activeItems:null,inactiveItems:null,isMockupUpdate:!1});(globalThis||{}).PFMockupGeneratorGeneratorPickerPar=m;var g=i("E17x"),f=i("Cj9M"),v=i("M3Ia"),k=i("jhOU"),b=Class({_rowItems:[],_checkbox:null,_isShowLessVisible:!1,_maxVisibleItems:6,_par:null,__construct:function(e){this._par=e,this.node=tag("div","generator-picker pf-mb-12",[this._renderHeader(),this._renderWarningBlock(),this._nodeItems=tag("div","generator-picker__wrapper"),this._showLessLink=tag("div",{className:"generator-picker__show-less hidden",onclick:this._onShowOtherItems},clang("action","Show less"))]),this._render(),this._updateCheckboxAndListState()},_render:function(){for(var e in p.a.clearNode(this._nodeItems),this._rowItems=[],this._par.items){var t,i=this._par.items[e],n="",a=parseInt(e)===this._maxVisibleItems-1&&this._par.items.length>this._maxVisibleItems;i instanceof h.a&&(n=this._allItemPlacementsTheSame()?this._getReadableSizeFromTemplate(i,this._allItemPrintfilesTheSame()):this._getReadablePlacement(i.placementId)),i instanceof c.a&&(n=i.title),t=this._getImage(i),this._overlay={itemCount:this._par.items.length-this._maxVisibleItems,callback:this._onShowOtherItems,isVisible:a};var r=new m;r.rowTitle=this._par.title,r.itemTitle.text=n,r.itemTitle.isVisible=!a,r.content=t,r.item=i,r.isRadio=!1,r.onChangedCallback=this._onRowItemChanged,r.overlay=this._overlay,r.activeItems=this._par.activeItems,r.inactiveItems=this._par.inactiveItems,r.disabled=this._par.isPrintfiles&&this.isDisabledForDownload(i),r.onNodeClickCallback=function(){};var s=new u(r);parseInt(e)>this._maxVisibleItems-1&&this._par.items.length>this._maxVisibleItems&&s.toggleVisibility(!0),this._rowItems.push(s),s.append(this._nodeItems)}},_renderHeader:function(){var e=new f.a;return e.onchange=this._onCheckboxClick,e.label=this._par.title,e.isChecked=this._par.isPrintfiles,tag("div","generator-picker__header",[this._checkbox=new v.a(e)])},_allItemPlacementsTheSame:function(){var e=null;for(var t in this._par.items){var i=this._par.items[t];if(i instanceof h.a){if(null!==e&&e!==i.placementId)return!1;e=i.placementId}}return!0},_allItemPrintfilesTheSame:function(){var e=null;for(var t in this._par.items){var i=this._par.items[t];if(i instanceof h.a){if(null!==e&&e!==i.templateId)return!1;e=i.templateId}}return!0},_getReadablePlacement:function(e){for(var t in this._par.generatorParams.availablePlacements){var i=this._par.generatorParams.availablePlacements[t];if(i.id==e)return i.title}return e},_getReadableSizeFromTemplate:function(e,t){var i=this._getSizes(e);if(1===i.length)return i[0]||this._getReadablePlacement(e.placementId);var n=this._groupTitles(i,t);return n||this._par.designData.product.title},_getSizes:function(e){return Object.values(this._par.generatorParams.generatorVariants).filter((function(t){return t.templateId===e.templateId})).map((function(e){return e.size})).filter((function(e,t,i){return i.indexOf(e)===t}))},_groupTitles:function(e,t){for(var i=null,n=[],a=0,r=e.length;a<r;a++){var s=e[a],o=e[a<r-1?a+1:a],l=s.split(" "),d=[];n.push(l);for(var c=0,h=l.length;c<h;c++)if(-1!==o.indexOf(l[c])){var p=n[a>0?a-1:a][c];n[a][c]===p&&s.indexOf(l[c])===o.indexOf(l[c])&&d.push(l[c])}d.length===l.length&&d.pop(),(!i||d.length<i.length)&&(i=d)}var u=i.join(" ");return!u||t?u:u+=" "+n.map((function(e){return e.splice(i.length,e.length).join(" ")})).join(", ")},_getImage:function(e){var t=Object(g.b)()?100:120;return this._par.designData.getMockupPreview(e,t,t)},_onCheckboxClick:function(){this._rowItems.forEach(function(e){this.isDisabledForDownload(e._par.item)||(e.updateActiveState(this._checkbox.isChecked()),e.setCheckedState(this._checkbox.isChecked()))}.bind(this)),d.a.trackFileRowCheckToggle(this._par.title,this._checkbox.isChecked()),this._onRowItemChanged(),this._updateCheckboxAndListState()},_onRowItemChanged:function(){this._checkbox.setChecked(this._getSelectedCount()>0),this._par.onChanged()},_onShowOtherItems:function(){for(var e in this._rowItems){var t=this._rowItems[e];parseInt(e)>this._maxVisibleItems-1&&t.toggleVisibility(),parseInt(e)===this._maxVisibleItems-1&&(t._par.overlay.isVisible=!t._par.overlay.isVisible,t._par.itemTitle.isVisible=!t._par.itemTitle.isVisible,t._render())}this._isShowLessVisible?p.a.addClassName(this._showLessLink,"hidden"):p.a.removeClassName(this._showLessLink,"hidden"),this._isShowLessVisible=!this._isShowLessVisible},_updateCheckboxAndListState:function(){var e=this._getSelectedCount();this._checkbox.setChecked(e>0),this._par.isPrintfiles||(e?p.a.removeClassName(this._nodeItems,"hidden"):p.a.addClassName(this._nodeItems,"hidden"))},getSelectedVariants:function(){var e=[];for(var t in this._rowItems){var i=this._rowItems[t];i.isChecked()&&i.isMockup()&&e.push(i.getItem())}return e},getSelectedTemplates:function(){var e=[];for(var t in this._rowItems){var i=this._rowItems[t];i.isChecked()&&i.isPrintfile()&&e.push(i.getItem())}return e},_getSelectedCount:function(){return this._rowItems.filter((function(e){return e.isChecked()})).length},getCount:function(){return this._rowItems.length},hasLicensedAssetLayer:function(){return Object.values(this._par.designData.templates).filter((function(e){return e.layers.filter((function(e){return e.isLicensedAssetLayer()})).length>0})).length>0},isDisabledForDownload:function(e){return e.layers.filter((function(e){return e.isLicensedAssetLayer()})).length>0},_renderWarningBlock:function(){return this._par.isPrintfiles&&this.hasLicensedAssetLayer()?tag("div","pf-mb-16 warning",[new k.a({type:"warning",heading:dlang("generator","Your design can't be downloaded as a print file"),content:dlang("generator","Designs containing Premium Images aren't available for download"),closable:!0})]):tag("div")}},p.a.Base);(globalThis||{}).PFMockupGeneratorGeneratorPickerRow=b;var w=i("sXh8"),C=Class({_par:null,_nodeInput:null,_resizeTimeout:null,_mockupMainMaxWidth:159,_mockupMainMaxHeight:159,_defaultImageBreakpoint:992,__construct:function(e){this._par=e,this._nodeInput=tag("input",{className:"pf-mr-8",type:this._par.isRadio?"radio":"checkbox",value:this._par.itemTitle.text}),this._title=tag("div","generator-picker__main-group-text text-center pf-mt-12",dlang("generator","{title} mockups").replace("{title}",this._par.itemTitle.text)),this._contentBlock=tag("div"),this.node=tag("div",{className:"generator-picker__main-group-item",onclick:this._par.onNodeClickCallback.bind(this,this.getItem())}),this._render()},_render:function(){p.a.clearNode(this.node),this._nodeInput.append(this.node),this.setCheckedState(this._par.isChecked),this._contentBlock.append(this.node),this._renderContent(),this._par.itemTitle.isVisible&&this._title.append(this.node)},_renderState:function(){var e="generator-picker__main-group-item--active";this._nodeInput.checked?p.a.addClassName(this.node,e):p.a.removeClassName(this.node,e)},_renderContent:function(){if(!this._par.mockupPreview&&!this._par.generatorVariant)return!1;p.a.clearNode(this._contentBlock),this._par.content=this._par.mockupPreview(this._par.generatorVariant,this._recalculateMockupSize()),this._par.content.append(this._contentBlock),this.setDisabledLabel(),Object(w.e)(this._par.itemTitle.text,this._contentBlock.children[0])},_onResize:function(){clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(this._renderContent(),300)},_recalculateMockupSize:function(){var e=1,t=this._mockupMainMaxWidth,i=this._mockupMainMaxHeight;return t>(window.innerWidth>=this._defaultImageBreakpoint?t:100)&&(e=t/(window.innerWidth>=this._defaultImageBreakpoint?t:100)),{maxWidth:t/e,maxHeight:i/e}},setCheckedState:function(e){this._nodeInput.checked=e,this._renderState()},isChecked:function(){return this._nodeInput.checked},getItem:function(){return this},getGroupName:function(){return this._par.itemTitle.text},getGeneratorVariantId:function(){return this._par.item.generatorVariantId},setDisabledLabel:function(){return!this._par.generatorVariant.isActive&&(this._disabledLabel=tag("span",{className:"pf-badge pf-badge-rect pf-badge--primary pf-d-inline-block",style:{fontSize:"75%",padding:"0 14px",borderRadius:"0",height:"32px",lineHeight:"32px",right:"-34px",marginTop:"-15px",zIndex:"1000"}},dlang("generator","Disabled")).append(this._contentBlock.children[0]))}},p.a.Base);(globalThis||{}).PFMockupGeneratorGeneratorPickerMainGroupItem=C;var y=i("zsu5"),I=Class({_generatorParams:null,_rows:[],_mainGroupItems:[],_activeItems:[],_inactiveItems:[],_isEmbedded:!1,__construct:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._onChange=i,this._generatorParams=t,this._designData=e,this._isEmbedded=n,this.node=tag("div","",[tag("div",{className:"whitesmoke pf-pb-40 clearfix",style:{borderBottom:"1px solid #E5E5E5"}},[this._mockupNode=tag("div","container"),this._tagInfoNode=tag("div")]),tag("div","container",[this._groupsOuterNode=tag("div"),this._groupsPrinfileNode=tag("div")])]),this._render()},_render:function(){this._renderMainMockupGroups(),this._renderMockupGroups(),Object(w.d)(this._tagInfoNode),this._isEmbedded||this._renderTemplateFiles()},_renderTemplateFiles:function(){if(p.a.clearNode(this._groupsPrinfileNode),!this._designData.product.isJewelry()){var e=new l;e.title=this._designData.isEmbroidery()?dclang("generator","type","Embroidery files"):dclang("generator","type","Print Files"),e.items=this._designData.templates,e.onChanged=this._onRowChanged,e.generatorParams=this._generatorParams,e.designData=this._designData,e.activeItems=this._activeItems,e.inactiveItems=this._inactiveItems,e.isPrintfiles=!0;var t=new b(e);this._rows.push(t),t.append(this._groupsPrinfileNode)}},_getGeneratorMockupPreview:function(e,t){return this._designData.getMockupPreview(e,t.maxWidth,t.maxHeight)},_filterMainGroup:function(e){return!!this._generatorParams.getGeneratorVariant(this._variantFilter.getDefaultGroupVariantId(e))},_mapMainGroupItems:function(e,t){var i=new m;return i.itemTitle.text=e,i.itemTitle.isVisible=!0,i.isRadio=!1,i.isChecked=0===t,i.onNodeClickCallback=this._onMockupClick,i.mockupPreview=this._getGeneratorMockupPreview,i.generatorVariant=this._generatorParams.getGeneratorVariant(this._variantFilter.getDefaultGroupVariantId(e)),i.productId=this._designData.productId,new C(i)},_renderMainMockupGroups:function(){p.a.clearNode(this._mockupNode),this._variantFilter=new y.a(this._designData,this._generatorParams),this._mainGroups=this._variantFilter.getGroupedMockupVariants(),this._mainGroupItems=Object.keys(this._mainGroups).filter(this._filterMainGroup.bind(this)).map(this._mapMainGroupItems.bind(this)),tag("div","pf-mt-16 generator-picker__main-group",this._mainGroupItems).append(this._mockupNode),window.onresize=this._onResizeMainItems},_onResizeMainItems:function(){this._mainGroupItems.map((function(e){e._onResize()}))},_renderMockupGroups:function(){p.a.clearNode(this._groupsOuterNode);var e={};this._mainGroupItems.filter((function(e){return e.isChecked()})).forEach(function(t){var i=this._mainGroups[t.getGroupName()];Object.keys(i).forEach((function(t){e[t]||(e[t]=[]),e[t]=e[t].concat(i[t])}))}.bind(this)),this._rows=Object.keys(e).map(function(t){var i=new l;return i.title=t,i.items=e[t],i.onChanged=this._onRowChanged,i.generatorParams=this._generatorParams,i.designData=this._designData,i.activeItems=this._activeItems,i.inactiveItems=this._inactiveItems,i.isPrintfiles=!1,new b(i)}.bind(this)),tag("div","",this._rows).append(this._groupsOuterNode)},_onMockupClick:function(e){for(var t in e.setCheckedState(!e.isChecked()),this._designData.generatorVariants)"template"===this._designData.generatorVariants[t].role?this._designData.defaultGeneratorVariantId=this._designData.generatorVariants[t].generatorVariantId:this._designData.defaultGeneratorVariantId=e._par.generatorVariant.generatorVariantId;this._designData.generatorVariantsIdsToSave=new y.a(this._designData,this._generatorParams).getGroupMockupVariantIds(e.getGroupName()),this._renderMockupGroups(),this._isEmbedded||this._renderTemplateFiles(),this._onMainMockupChanged()},_onMainMockupChanged:function(){this._onChange()},_onRowChanged:function(){this._onChange()},getSelectedCount:function(){return this.getSelectedTemplates().length+this.getSelectedVariants().length},getCount:function(){var e=0;return this._rows.forEach((function(t){e+=t.getCount()})),e},getSelectedTemplates:function(){var e=[];for(var t in this._rows)e=e.concat(this._rows[t].getSelectedTemplates());return e},getSelectedVariants:function(){var e=[];for(var t in this._rows)e=e.concat(this._rows[t].getSelectedVariants());return e}},p.a.Base);(globalThis||{}).PFMockupGeneratorGeneratorPicker=I;var T=i("JM6l"),S=i("2ovl"),G=Class({_input:null,_filename:"",_suffix:"",__construct:function(e,t){this._suffix=e,this._callback=t,this.node=Object(p.a)({tag:"div",className:"file-name"}),this._renderEditable()},_getFullFilename:function(){return this._filename?this._filename+"_"+this._suffix:this._suffix},_renderEditable:function(){var e;p.a.clearNode(this.node);var t="";null!==(e=this._fileItem)&&void 0!==e&&e.isSample||(t=Object(p.a)({tag:"a",className:"icon-edit edit-icons",style:{color:"#a7a7a7",position:"relative",top:"1px"},onclick:this._renderEditing,title:lang("Edit file name")}),$(t).tooltip({html:!0})),Object(p.a)({tag:"div",els:[this._getFullFilename()+" ",t]}).append(this.node)},_renderEditing:function(){p.a.clearNode(this.node),this._input=Object(p.a)({tag:"input",type:"text",value:this._filename,attr:{maxLength:100},prop:{onkeydown:this._onEditKeyDown,onkeyup:this._onEditKeyUp,onblur:this._approveEditedName},style:{height:"39px",width:"250px",display:"inline-block"}}),Object(p.a)({tag:"div",els:[this._input,{tag:"span",text:"_"+this._suffix,style:{display:"inline-block"}}]}).append(this.node),this._input.select()},_onEditKeyUp:function(e){e.stopPropagation(),27==e.keyCode&&(this._input.onblur=null,this._renderEditable())},_onEditKeyDown:function(e){e.stopPropagation(),13==e.keyCode&&(e.preventDefault(),this._input.onblur=null,this._approveEditedName())},_approveEditedName:function(){this._filename=$.trim(this._input.value),this._callback&&this._callback(this._filename),this._renderEditable()},getValue:function(){return this._filename}},p.a.Base);(globalThis||{}).PFMockupGeneratorFileName=G;var x=i("jorx"),P=i("uGFp"),M=i("7RFh"),N=i("c/9F"),D=i("XJFE"),F=i("XLZy"),L=i("xeH2"),O=i.n(L);function V(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw r}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var A=Class({_designData:null,_isCurrentlyGenerating:!1,_filesGenerated:[],_filesGeneratedByFormat:{png:[],jpg:[]},_hasAlreadyClickedGenerate:!1,_hasAlreadyClickedDownload:!1,_isEmbedded:!1,_customOnPickedChange:null,nodeFooterHolder:null,__construct:function(e,t,i,n){var r=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this._designData=e,this._editDesignCallback=i,this._generatorParams=t,this._templatePreferredGeneratorVariants=n,this._isEmbedded=s,this._customOnPickedChange=o,this._product=(new a.a).getCachedProductById(this._designData.productId,s),this._picker=new I(e,t,null!==o?o:this._onPickedChange,s),this._filenameEditor=new G("variation",this._onFilenameChanged),this.node=tag("div",null,[tag("div","whitesmoke ",[tag("div","container text-center mockup-generator__head-titles clearfix",[this._renderHideDesignPreviewWarning(),s?"":tag("h2","text-center pf-m-0",dlang("generator","Choose mockup style")),s?"":tag("h4","subheading regular",this._product.getFullTitle())])]),tag("div","pf-mb-48",[this._picker,tag("div","container",[tag("div","pf-my-16",[s?"":tag("strong",null,lang("File name")),s?"":this._filenameEditor,tag("div","pf-mt-40",[tag("strong",null,dlang("generator","Mockup format")),this._renderFileTypeList()])]),s?"":tag("div","pf-mt-64 pf-pt-32 pf-border-top",[tag("b",null,lang("All done here?")),tag("p",{innerHTML:dlang("generator",'<a href="{productUrl}" class="pf-link">Create a new product</a> or <a href="{designUrl}" class="pf-link">create a new design</a> for this product').replace("{productUrl}",langUrl("/generator")).replace("{designUrl}",this._product.getMockupGeneratorUrl())})])])]),this.nodeOverlay=tag("div","mockup-generator__overlay"),this.nodeFooterHolder=tag("div","container",[this._nodeFooter=s?"":tag("div","row no-gutters pf-px-12 pf-px-md-0",[tag("div","col-12 col-md-auto order-2 order-md-1 pf-py-8 pf-py-md-0 pf-d-block pf-d-sm-flex pf-align-items-stretch",[this._nodeGenerate=tag("a",{className:"pf-btn pf-btn-primary pf-mr-0 pf-mr-sm-12 pf-mb-12 pf-mb-sm-0 pf-w-100 pf-w-sm-auto",onclick:this._generate},dlang("generator","Generate files")),this._nodeDownload=tag("a",{className:"pf-btn pf-btn-primary pf-mr-0 pf-mr-sm-12 pf-mb-12 pf-mb-sm-0 pf-d-none pf-w-100 pf-w-sm-50 pf-w-md-auto",onclick:this._prepareZipArchive},[this._nodeDownloadInnerText=tag("span","pf-d-none pf-d-sm-inline",lang("Download files")),this._nodeDownloadMobileInnertText=tag("span","pf-d-inline pf-d-sm-none",lang("Download"))]),this._footerExpandMenu=tag("ul",{className:"mg-sticky-footer-secondary-more-menu dropdown-menu dropdown-menu-right dropdown-menu-alt pf-ui-body pf-px-0 pf-py-8 pf-rounded-0 pf-d-sm-none"},[this._footerExpandMenuFirst=tag("li","",[this._nodeButtonOrderPreviewMock=tag("a",{className:"pf-px-16 pf-py-8",onclick:function(){r._collapseMoreLinks(),r._nodeOrderPreview.onclick()}},clang("To place an order (action)","Order"))]),this._footerExpandMenuSecond=tag("li","",[this._footerButtonSaveToLibraryMock=tag("a",{className:"pf-px-16 pf-py-8",onclick:function(){r._collapseMoreLinks(),r._nodeSaveToLibrary.onclick()}},dlang("generator","Save to library"))])]),this._footerButtonMore=this._footerButtonMore=tag("a",{className:"pf-btn pf-btn-secondary pf-ml-0 pf-ml-sm-12 pf-w-100 pf-w-sm-50 pf-w-md-auto pf-d-none pf-d-sm-none",onclick:this._onMoreToggle.bind(this)},[clang("action","More"),this._footerButtonMoreCaret=tag("span","pf-i pf-i-chevron-down pf-i-24 pf-ml-12 pf-text-gray")]),this._nodeSaveToLibrary=tag("a",{className:"pf-btn pf-btn-secondary pf-mr-0 pf-mr-sm-12 pf-mb-12 pf-mb-sm-0 pf-d-none pf-w-100 pf-w-sm-50 pf-w-md-auto",onclick:this._saveToLibrary},[dlang("generator","Save to library")]),this._nodeOrderPreview=tag("a",{className:"pf-btn pf-btn-secondary pf-w-100 pf-w-sm-50 pf-w-md-auto",onclick:this._initOrderPreview},clang("To place an order (action)","Order"))]),tag("div","col-11 col-md order-1 order-md-2 pf-pt-12 pf-pt-md-0 text-left text-md-right",[tag("div",{className:"pf-text-muted pf-ui-caption",innerHTML:dlang("generator","By using our Mockup Generator you agree to Printful's {termsLinkBegin}Terms of Service{termsLinkEnd} and {policyLinkBegin}Privacy Policy{policyLinkEnd}.").replace("{termsLinkBegin}",'<a class="pf-link" href="'+langUrl("/policies/terms-of-service")+'" target="_blank">').replace("{termsLinkEnd}","</a>").replace("{policyLinkBegin}",'<a class="pf-link" href="'+langUrl("/policies/privacy")+'" target="_blank">').replace("{policyLinkEnd}","</a>")})])])])]),d.a.trackViewDownloadPage(),s||(window.removeEventListener("resize",this._collapseMoreLinks,!1),window.addEventListener("resize",this._collapseMoreLinks,!1),setTimeout((function(){r._setupMoreDropdown(!1)}),0))},_setupMoreDropdown:function(e){var t=O()(this._footerExpandMenu).parents(".dynamic-sticky-footer__second-wrap");if(p.a.hasClassName(this._footerExpandMenu,"__is-init")||(t.find(".mg-sticky-footer-more-menu").remove(),t.find(".mg-sticky-footer-secondary-more-menu").remove(),t.prepend(this._footerExpandMenu),p.a.addClassName(this._footerExpandMenu,"__is-init")),e){var i,n=this._footerButtonMore.getBoundingClientRect(),a=null===(i=document.querySelector(".dynamic-sticky-footer__second-wrap"))||void 0===i?void 0:i.getBoundingClientRect(),r=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);if(t.css("overflow","visible"),this._footerExpandMenu.style.right=(a?a.right:r)-n.right+"px",a){var s=1+n.top-a.top;this._footerExpandMenu.style.top="".concat(s,"px")}}else t.css("overflow","hidden")},_expandMoreLinks:function(){var e=this;this._setupMoreDropdown(!0),p.a.hasClassName(this._nodeSaveToLibrary,"disabled")?p.a.addClassName(this._footerButtonSaveToLibraryMock,"disabled"):p.a.removeClassName(this._footerButtonSaveToLibraryMock,"disabled"),p.a.hasClassName(this._nodeOrderPreview,"disabled")?p.a.addClassName(this._nodeButtonOrderPreviewMock,"disabled"):p.a.removeClassName(this._nodeButtonOrderPreviewMock,"disabled"),p.a.addClassName(this._footerExpandMenu,"pf-d-block"),setTimeout((function(){O()(document).on("click.moreLinkOuterClick",e._outerClickFromMoreLinks.bind(e))}),0)},_outerClickFromMoreLinks:function(e){var t=this._footerExpandMenu.getBoundingClientRect(),i=e.clientX>=t.left&&e.clientX<=t.right,n=e.clientY>=t.top&&e.clientY<=t.bottom;i&&n||this._collapseMoreLinks()},_collapseMoreLinks:function(){p.a.removeClassName(this._footerExpandMenu,"pf-d-block"),this._setupMoreDropdown(!1),O()(document).off("click.moreLinkOuterClick")},_onMoreToggle:function(){p.a.hasClassName(this._footerExpandMenu,"pf-d-block")?this._collapseMoreLinks():this._expandMoreLinks()},getFooter:function(){return this._nodeFooter},_renderFileTypeList:function(){var e=new M.a;return e.name="fileType",e.options=[{value:"jpg",name:tag("div",{innerHTML:dlang("generator","<b>JPG</b> (smaller, your store will load faster)")})},{value:"png",name:tag("div",{innerHTML:dlang("generator","<b>PNG</b> (bulkier, but with a transparent background)")})}],e.value="png",e.prop={checked:"checked",onclick:this._handleFileTypeClick.bind(this)},e.isRequired=!0,this._fileTypeList=new N.a(e),this._selectedFileType="png",this._fileTypeList},_renderHideDesignPreviewWarning:function(){var e=Object.values(this._designData.templates).map((function(e){return e.placementId})),t=[c.a.ROLE_TEMPLATE,c.a.ROLE_ADVANCED_TEMPLATE];if(!Object.values(this._generatorParams.generatorVariants).filter((function(i){return-1===t.indexOf(i.role)&&-1!==e.indexOf(i.placementId)})).every((function(e){return e.hideDesignPreview||!e.mockupPosition.width})))return"";var i=tag("div","pf-my-8 text-left");return new PFComponentsBanner({type:"info",heading:dlang("generator","Mockup preview is not available for this product"),content:dlang("generator","Worry not! The files you download will have your design on them. We just can’t show it here for now.")}).append(i),i},_handleFileTypeClick:function(){this._selectedFileType!==this._fileTypeList.getValue()&&(this._filesGeneratedByFormat[this._selectedFileType]=this._filesGenerated,this._filesGenerated=this._filesGeneratedByFormat[this._fileTypeList.getValue()],this._selectedFileType=this._fileTypeList.getValue(),null!==this._customOnPickedChange?this._customOnPickedChange():this._onPickedChange())},_initOrderPreview:function(){var e=new s.a,t=new P.a;p.a.O2O(t,this._designData),e.designData=t,e.designData.generatorVariants=this._templatePreferredGeneratorVariants,e.generatorParams=this._generatorParams,e.editDesignCallback=this._editDesignCallback,new o.a(e)},_saveToLibrary:function(){this._updateFileNames();var e=this._getGeneratedAndPickedFiles();new T.a(e,this._designData.productId,this._onSavedToLibrary),this._rememberDesignData(),d.a.trackSaveToLibrary(e.length)},_onSavedToLibrary:function(){p.a.addClassName(this._nodeSaveToLibrary,"disabled"),p.a.addClassName(this._footerButtonSaveToLibraryMock,"disabled"),this._nodeSaveToLibrary.textContent=dlang("generator","Files added to library"),window.innerWidth<768&&new D.a({type:D.a.TYPE_SUCCESS,content:dlang("generator","Files added to library")})},_rememberDesignData:function(){new S.a(this._designData.productId).rememberTemplates(this._designData)},_getGeneratedAndPickedFiles:function(){var e=this._picker.getSelectedTemplates(),t=this._picker.getSelectedVariants(),i=[];this._updateFileNames();var n,a=V(this._filesGenerated);try{for(a.s();!(n=a.n()).done;){var r=n.value;r.isPrintfile?this._isFileWithinTemplates(e,r)&&i.push(r):this._isFileWithinMockups(t,r)&&i.push(r)}}catch(e){a.e(e)}finally{a.f()}return i},_updateFileNames:function(){var e=this._filenameEditor.getValue();for(var t in this._filesGenerated){var i=this._filesGenerated[t];i.filename=e+(e?"_":"")+i.generatedSuffix}},_isFileWithinTemplates:function(e,t){var i,n=V(e);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.templateId===t.templateId&&a.placementId===t.placementId)return!0}}catch(e){n.e(e)}finally{n.f()}return!1},_isFileWithinMockups:function(e,t){var i,n=V(e);try{for(n.s();!(i=n.n()).done;){if(i.value.generatorVariantId===t.generatorVariantId)return!0}}catch(e){n.e(e)}finally{n.f()}return!1},_generate:function(){F.a.show(this._nodeGenerate),p.a.addClassName(this.nodeOverlay,"overlay--active"),tag("div","spinner-block",[tag("i","pf-i pf-i-loading pf-i-spin pf-i-48"),this._nodeSpinnerStatus=tag("div","spinner-status pf-my-12 pf-ui-subheading")]).append(this.nodeOverlay),this._setGenerateProgress(x.a.PROCESSING_FILES_STATE),this._isCurrentlyGenerating=!0,(new r.a).generateMockups(this._fetchDesignData(),{onProgress:this._setGenerateProgress,onFailed:this._onGenerateFailed,onCompleted:this._onGenerationCompleted}),this._trackGenerateClick(this._designData.generatorVariantsIdsToSave.length+this._designData.templateKeysToSave.length)},_fetchDesignData:function(){var e=new P.a;p.a.O2O(e,this._designData),this._designData=e,this._designData.generatorVariantsIdsToSave=this._getGeneratorVariantIdsToGenerate(),this._designData.templateKeysToSave=this._getTemplateKeysToGenerate(),this._designData.isTransparent=this._getTransparency();var t=_.cloneDeep(this._designData);return 0===this._picker.getSelectedVariants().length&&(t.templates=this._picker.getSelectedTemplates()),t},_onGenerateFailed:function(){p.a.removeClassName(this.nodeOverlay,"overlay--active"),this._isCurrentlyGenerating=!1,this._showGenerateButtonState(),alert(dlang("generator","Generation failed, please try again. If this persists, please contact support@printful.com"))},_setGenerateProgress:function(e){if(p.a.addClassName(this._nodeGenerate,"disabled"),Object(g.b)())var t=x.a.getShortStatusMessage(e);else t=x.a.getStatusMessage(e);this._nodeGenerate.textContent=t,this._nodeSpinnerStatus.textContent=t,tag("i","pf-i pf-i-loading pf-i-spin pf-i-24 pf-ml-4").append(this._nodeGenerate)},_onGenerationCompleted:function(e){for(var t in p.a.removeClassName(this._nodeGenerate,"disabled"),p.a.removeClassName(this.nodeOverlay,"overlay--active"),p.a.clearNode(this.nodeOverlay),this._nodeGenerate.textContent=dlang("generator","Generate files"),this._isCurrentlyGenerating=!1,e)this._filesGenerated.push(e[t]);this._filesGenerated.length?this._showFilesGeneratedButtonState():alert(dlang("generator","Your mockups couldn't be generated. Please refresh this page and try again."))},_isEverythingAlreadyGenerated:function(){return this._getTemplateKeysToGenerate().length<1&&this._getGeneratorVariantIdsToGenerate().length<1},_getGeneratorVariantIdsToGenerate:function(){var e=[],t=this._picker.getSelectedVariants();for(var i in t)this._isMockupAlreadyGenerated(t[i])||e.push(t[i].generatorVariantId);return e},_getTemplateKeysToGenerate:function(){var e=[],t=this._picker.getSelectedTemplates();for(var i in t)this._isTemplateAlreadyGenerated(t[i])||e.push(t[i].getKey());return e},_getTransparency:function(){return"jpg"!==this._fileTypeList.getValue()},_isMockupAlreadyGenerated:function(e){return!!this._findGeneratedFileFromMockupOrTemplate(e)},_isTemplateAlreadyGenerated:function(e){return!!this._findGeneratedFileFromMockupOrTemplate(e)},_findGeneratedFileFromMockupOrTemplate:function(e){for(var t in this._filesGenerated){var i=this._filesGenerated[t];if(e instanceof c.a){if(i.isPrintfile)continue;if(i.generatorVariantId==e.generatorVariantId)return i}else{if(!(e instanceof h.a))throw"Unknown type given";if(!i.isPrintfile)continue;if(i.placementId!==e.placementId)continue;if(i.templateId==e.templateId||i.templateId==e.parentTemplateId)return i}}return null},_onFilenameChanged:function(){d.a.trackFilenameChanged(),this._onPickedChange()},_onPickedChange:function(){if(!this._isCurrentlyGenerating){var e=this._picker.getSelectedCount();e>0&&this._isEverythingAlreadyGenerated()?this._showFilesGeneratedButtonState():(this._showGenerateButtonState(),e?p.a.removeClassName(this._nodeGenerate,"disabled"):p.a.addClassName(this._nodeGenerate,"disabled"))}},_prepareZipArchive:function(){p.a.addClassName(this._nodeDownload,"disabled"),p.a.addClassName(this.nodeOverlay,"overlay--active"),this._nodeDownloadInnerText.textContent=lang("Creating an archive…"),this._nodeDownloadMobileInnertText.textContent="",tag("span","spinner").append(this._nodeDownloadInnerText),tag("span","spinner").append(this._nodeDownloadMobileInnertText),this._updateFileNames();var e=this._getGeneratedAndPickedFiles();(new n.a).download(e,this._filenameEditor.getValue(),this._onZipFileReady),this._trackDownloadClick(e.length)},_onZipFileReady:function(e,t){this._nodeDownloadInnerText.textContent=(dlang("generator","Download files")+" ({fileSize}M)").replace("{fileSize}",Math.round(e.size/1024/1024)),this._nodeDownloadMobileInnertText.textContent=lang("Download"),p.a.removeClassName(this._nodeDownload,"disabled"),p.a.removeClassName(this.nodeOverlay,"overlay--active"),this._nodeDownload.href=t,this._nodeDownload.onclick=null,location.href=t},_showFilesGeneratedButtonState:function(){p.a.removeClassName(this._nodeDownload,"pf-d-none"),p.a.addClassName(this._nodeGenerate,"pf-d-none"),this._picker.getSelectedTemplates().length>0?(p.a.removeClassName(this._footerButtonMore,"pf-d-none"),p.a.addClassName(this._nodeSaveToLibrary,"pf-d-sm-inline-block"),p.a.removeClassName(this._nodeSaveToLibrary,"disabled"),p.a.removeClassName(this._footerButtonSaveToLibraryMock,"disabled"),p.a.addClassName(this._nodeOrderPreview,"pf-d-none pf-d-sm-block"),this._nodeSaveToLibrary.textContent=dlang("generator","Save to library")):(p.a.addClassName(this._footerButtonMore,"pf-d-none"),p.a.removeClassName(this._nodeSaveToLibrary,"pf-d-sm-inline-block"),p.a.removeClassName(this._nodeOrderPreview,"pf-d-none"),p.a.removeClassName(this._nodeOrderPreview,"pf-d-sm-block")),1===this._picker.getSelectedCount()?(this._nodeDownload.href="javascript:",this._nodeDownload.onclick=this._downloadPickGeneratedFiles,this._nodeDownloadInnerText.textContent=lang("Download file")):(this._nodeDownload.href="javascript:",this._nodeDownload.onclick=this._prepareZipArchive,this._nodeDownloadInnerText.textContent=lang("Download files"))},_downloadPickGeneratedFiles:function(){this._updateFileNames();var e=this._getGeneratedAndPickedFiles();for(var t in e)(new r.a).getDownloadUrl(e[t],(function(e){document.location.href=e}));this._trackDownloadClick(1)},_showGenerateButtonState:function(){p.a.addClassName(this._nodeDownload,"pf-d-none"),p.a.addClassName(this._nodeSaveToLibrary,"pf-d-none"),p.a.addClassName(this._footerButtonMore,"pf-d-none"),p.a.removeClassName(this._nodeGenerate,"pf-d-none"),p.a.removeClassName(this._nodeOrderPreview,"pf-d-sm-block"),p.a.removeClassName(this._nodeOrderPreview,"pf-d-none"),this._nodeGenerate.textContent=lang("Generate files"),this._nodeDownloadInnerText.textContent=lang("Download files")},_trackDownloadClick:function(e){this._hasAlreadyClickedDownload||(this._hasAlreadyClickedDownload=!0,d.a.trackDownloadClick(e))},_trackGenerateClick:function(e){if(!this._hasAlreadyClickedGenerate){this._hasAlreadyClickedGenerate=!0,d.a.trackGenerateClick(e);var t=Math.floor(this._picker.getSelectedCount()/this._picker.getCount()*100);d.a.trackGeneratePercentClick(t)}},downloadMockups:function(e){var t=this._getGeneratedAndPickedFiles();if(1===this._picker.getSelectedCount())for(var i in t)(new r.a).getDownloadUrl(t[i],e);else(new n.a).download(t,this._filenameEditor.getValue(),(function(t,i){e(i)}));this._trackDownloadClick(t.length)},generateMockups:function(e,t){var i=this;(new r.a).generateMockups(this._fetchDesignData(),{onFailed:t,onCompleted:function(t){for(var n in t)i._filesGenerated.push(t[n]);e(i._filesGenerated.length)}}),this._trackGenerateClick(this._designData.generatorVariantsIdsToSave.length+this._designData.templateKeysToSave.length)},getSelectedCount:function(){return this._picker.getSelectedCount()}},p.a.Base);(globalThis||{}).PFMockupGeneratorDownload=A},"c/9F":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("M3Ia"),a=i("SpuH"),r=i("nF4n"),s=Class({_par:null,_radioButtons:[],_getNewInput:function(){return tag("div","",this._getRadioButtons())},getValue:function(){for(var e in this._radioButtons){var t=this._radioButtons[e];if(t.checked)return t.value}return null},_getRadioButtons:function(){var e=[];for(var t in this._radioButtons=[],this._par.options){var i,a=this._par.options[t],s={onchange:this._onchange,checked:a.value===this.value};this._par.prop&&r.a.O2O(s,this._par.prop),e.push(tag("div","radio",[i=Object(n.a)({name:this._par.name,type:"radio",labelClass:"pf-p-0",label:a.name,value:a.value,prop:s})])),this._radioButtons.push(i._nodeInput)}return e},setValue:function(e){for(var t in this._radioButtons){var i=this._radioButtons[t];i.value===e&&(i.checked=!0)}},setReadOnly:function(e){for(var t in this._radioButtons){this._radioButtons[t].disabled=!!e}},_onchange:function(e){this.triggerError(),this.onchange.call(e.target,e)}},a.a);window&&((globalThis||{}).PFFormsRadioList=s)},jTR3:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("97Au"),a=i("sjGI");function r(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}var s=new WeakSet,o=new WeakSet,l=new WeakSet,d=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l.add(this),o.add(this),s.add(this);var t=new n.a.Par;t.title=dlang("generator","Looks like you don’t have a store connected"),t.modalDialogClass="modal-md",t.headerFlexWrap="pf-flex-nowrap",this._modal=new n.a(t),r(this,s,c).call(this),r(this,o,h).call(this),this._modal.show()},c=function(){var e=tag("div","",[tag("div","pf-mb-0 row",[tag("img",{className:"col-5 pf-p-5",src:"/static/images/popups/mockup-generator-restricted-user-order-popup-icon.png"}),tag("div","col-7 pf-d-flex pf-flex-wrap pf-align-items-center pf-p-6 pf-mt-24",[tag("p","col-12 pf-p-0 pf-mb-0 pf-pr-4 pf-h-20",lang("Connect your store to your Printful account to download mockups and print files.")),tag("p",{className:"col-12 pf-p-0 pf-h-20",innerHTML:dlang("generator","<a target='_blank' href='{targetUrl}'>Learn more</a>").replace("{targetUrl}",r(this,l,p).call(this))})])])]);this._modal.setContent(e)},h=function(){var e=tag("div",{style:{textAlign:"left"}},[tag("a",{className:"pf-btn pf-btn-primary pf-mr-16",href:langUrl("/dashboard/store")},lang("Connect store")),tag("a",{className:"pf-btn pf-btn-secondary",href:langUrl("/landing/overview")},lang("Compare platforms"))]);this._modal.setFooterContent(e)},p=function(){return a.a.isDe()?"https://help.printful.com/hc/de/articles/360017229919-Warum-kann-ich-Mockups-und-Druckdateien-nicht-herunterladen-":a.a.isEs()?"https://help.printful.com/hc/es/articles/360017229919--Por-qué-no-puedo-descargar-maquetas-y-archivos-de-impresión-":a.a.isFr()?"https://help.printful.com/hc/fr/articles/360017229919-Pourquoi-ne-puis-je-pas-télécharger-des-maquettes-et-fichiers-d-impression-":a.a.isJp()?"https://help.printful.com/hc/ja/articles/360017229919-モックアップやデザインデータをダウンロードできないのはなぜですか-":a.a.isUs()?"https://help.printful.com/hc/en-us/articles/360017229919":void 0}}}]);
/*! License information is available at https://static.cdn.printful.com/dist-new/product-templates-vue.licenses.txt for portal-vue */(window.webpackJsonp=window.webpackJsonp||[]).push([[379],{"+yt1":function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return l}));var o=n("MSZa"),r=n("96ed"),a={};function s(t,e){var n;if(e&&null!=t&&t.id&&null!=t&&null!==(n=t.mainImage)&&void 0!==n&&n.pusherKey){var o=t.mainImage.pusherKey,s=t.id;a[s]||(a[s]={callbacks:[],pusherKey:o},r.a.subscribe(o,"onSuccess",u)),a[s].callbacks.push(e)}}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t&&a[t]){var n=a[t];if(e&&n.callbacks){var o=n.callbacks.indexOf(e);o>=0&&n.callbacks.splice(o,1)}else{var s=n.pusherKey;s&&(r.a.unbind(s,"onSuccess",u),delete a[t])}}}function l(t){var e=Object.values(t||{})[0];if(!e||!e.urlThumb&&!e.urlLarge)return new o.a;var n=new o.a;return n.status=o.a.STATUSES.STATUS_DONE,n.thumbnailURL=e.urlThumb||e.urlLarge,n.imageURL=e.urlLarge||e.urlThumb,n}function u(t){var e=t.templateId;((a[e]||{}).callbacks||[]).forEach((function(e){e(t)})),i(e)}},"8u8f":function(t,e,n){},A0SN:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.shouldShowGlobalLoader,expression:"shouldShowGlobalLoader"}],staticClass:"product-templates"},[n("router-view"),t._v(" "),n("div",{staticClass:"product-templates-modals"},[t.shouldShowDeleteModal?n("product-templates-delete-modal",{attrs:{items:t.deleteModalItems,"show-modal":t.shouldShowDeleteModal},on:{"update:showModal":function(e){return t.onShouldShowDeleteUpdate(e)},submit:function(e){return t.onDeleteSubmit()}}}):t._e(),t._v(" "),t.shouldShowMockupDownloadModal?n("product-templates-mockup-download-modal",{attrs:{item:t.mockupDownloadItem,"show-modal":t.shouldShowMockupDownloadModal},on:{"update:showModal":function(e){return t.onShouldShowMockupDownloadUpdate(e)}}}):t._e()],1)],1)};o._withStripped=!0;var r=n("XJFE"),a=n("Cc5H"),s=n("LvDl"),i=n.n(s),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.items&&t.items.length?n("better-modal",{attrs:{id:"product-templates-delete-modal",classes:"pf-modal product-templates-delete-modal",show:t.localShowModal},on:{"update:show":function(e){t.localShowModal=e}}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"pf-h3 pf-m-0"},[t._v(t._s(t.lang("Delete")))])]),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("h4",{staticClass:"pf-h4 pf-m-0"},[t._v("\n            "+t._s(t.contentHeading)+"\n        ")]),t._v(" "),n("div",{staticClass:"product-templates-delete-modal__items product-templates-list product-templates-list--simple-view pf-mt-24"},[n("table",{staticClass:"table"},[n("tbody",[t._l(t.truncatedItems,(function(t){return n("product-templates-list-item",{key:t.id,attrs:{item:t,"simple-view":!0}})})),t._v(" "),t.areItemsTruncated?n("tr",{staticClass:"product-templates-item product-templates-item--normal product-templates-list-item pf-ui-body pf-border-top pf-border-bottom"},[n("td",{staticClass:"pf-ui-caption pf-text-muted grow-1 pf-py-12 text-center"},[t._v("\n                            "+t._s(t.dlang("dashboard","and {number} more").replace("{number}",t.hiddenItemCount))+"\n                        ")])]):t._e()],2)])])]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("div",{staticClass:"pf-d-flex"},[n("a",{staticClass:"pf-btn pf-btn-primary pf-mr-12",on:{click:t.onSubmit}},[t._v(t._s(t.lang("Yes, delete")))]),t._v(" "),n("a",{staticClass:"pf-btn pf-btn-secondary",on:{click:t.onCancel}},[t._v(t._s(t.lang("Cancel")))])])])]):t._e()};l._withStripped=!0;var u=n("hvPi"),c={name:"ProductTemplatesDeleteModal",components:{ProductTemplatesListItem:n("hNlv").a,BetterModal:u.a},props:{items:{type:Array,required:!0,default:function(){return[]}},showModal:{type:Boolean,required:!0,default:function(){return!1}}},data:function(){return{localShowModal:!1}},computed:{contentHeading:function(){return this.truncatedItems.length>1?dlang("dashboard","Are you sure you want to delete these templates?"):dlang("dashboard","Are you sure you want to delete this template?")},hiddenItemCount:function(){var t;return((null===(t=this.items)||void 0===t?void 0:t.length)||0)-this.truncatedItems.length},areItemsTruncated:function(){return this.hiddenItemCount>=1},truncatedItems:function(){return(this.items||[]).slice(0,3)}},watch:{localShowModal:function(t){this.$emit("update:showModal",t)}},mounted:function(){this.localShowModal=this.showModal},methods:{onSubmit:function(){this.$emit("submit")},onCancel:function(){this.localShowModal=!1}}},d=n("KHd+"),p=Object(d.a)(c,l,[],!1,null,null,null);p.options.__file="resources/app/js-babel/vue-components/product-templates/modules/index/product-templates-delete-modal.vue";var h=p.exports,m=n("CXOy"),f=n("+yt1"),g=n("9eNC"),b=n("vBOC"),v=n("L2JU"),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("better-modal",{attrs:{id:"product-templates-download-mockup-modal",show:t.localShowModal,classes:"pf-modal product-templates-download-mockup-modal",size:"xl"},on:{"update:show":function(e){t.localShowModal=e}}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"pf-h3 pf-m-0"},[t._v(t._s(t.dlang("dashboard","Choose mockup style")))])]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],attrs:{slot:"content"},slot:"content"},[t.getMockupType()?t.getMockupType()===t.MOCKUP_TYPE_CUSTOM?[n("mockup-maker")]:[n("basic-mockup-download",{attrs:{item:t.item,"has-restrictions":t.hasRestrictions}})]:[n("mockup-type-picker",{attrs:{"mockup-product":t.item.productData,flow:t.MOCKUP_FLOW_DOWNLOAD,"is-modal":!0}})]],2)])};y._withStripped=!0;var w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("mockup-type-reset",{class:{container:t.isDownloadPage}}),t._v(" "),n("div",{class:"input__overlay"+(t.isInputDisabled?" input__overlay--active":"")}),t._v(" "),n("div",{attrs:{id:t.nodeId}}),t._v(" "),n("div",{staticClass:"modal-footer"},[n("div",{staticClass:"pf-d-flex"},[n("a",{staticClass:"pf-btn pf-btn-primary pf-mr-12",attrs:{disabled:t.isButtonDisabled},on:{click:function(e){return t.generate()}}},[t._v("\n                "+t._s(t.buttonText)+" "),t.isProcessing?n("i",{staticClass:"pf-i pf-i-loading pf-i-spin pf-i-24"}):t._e()])])])],1)};w._withStripped=!0;var O=n("uGFp"),S=n("VKqq"),M=n("5sNq"),_=n("9Nv7");function D(t,e,n,o,r,a,s){try{var i=t[a](s),l=i.value}catch(t){return void n(t)}i.done?e(l):Promise.resolve(l).then(o,r)}function P(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function s(t){D(a,o,r,s,i,"next",t)}function i(t){D(a,o,r,s,i,"throw",t)}s(void 0)}))}}function I(){return(I=P(regeneratorRuntime.mark((function t(e,n,o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(_.a)("product-generator/get-template-generator-params",{productId:e,colors:n,sizes:o});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var k=n("ehgC"),j=n("X5Ic"),T=n("Vx67"),C=n("H1/d"),E=n("jTR3"),$=n("9MVb"),R=n("Jkv8"),A=n("B8kU"),x=n("dQmh"),B=n("fM+x"),L=n("57Nq");function N(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){i=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw a}}}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function F(t,e,n,o,r,a,s){try{var i=t[a](s),l=i.value}catch(t){return void n(t)}i.done?e(l):Promise.resolve(l).then(o,r)}function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var K=Object(v.a)(A.a).mapGetters,V={name:"BasicMockupDownload",components:{MockupTypeReset:x.a},props:{item:{type:Object,required:!0},hasRestrictions:{type:Boolean,required:!0}},data:function(){return{buttonState:0,buttonStateTextMap:{0:dlang("dashboard","Generate mockups"),1:dlang("dashboard","Processing files..."),2:dlang("dashboard","Download mockups")},isButtonDisabled:!0,mockupDownload:null,isInputDisabled:!1,nodeId:"mockup-download",isProcessing:!0}},computed:G(G({},K({getFlag:A.b,hasCustomMockupAccess:A.d})),{},{buttonText:function(){return this.buttonStateTextMap[this.buttonState]},mainNode:function(){return document.getElementById(this.nodeId)},isDownloadPage:function(){return!this.getFlag(B.a.IS_IN_MODAL)&&this.flow===L.a}}),mounted:function(){this.hasRestrictions&&this.showMockupGeneratorRestrictionWarningPopup(),this.render()},methods:{render:function(){var t=this,e=Object(R.setPFCanvasFonts)();(function(t,e,n){return I.apply(this,arguments)})(this.item.productData.productId,this.item.colors,this.item.sizes||[]).then(function(){var n,o=(n=regeneratorRuntime.mark((function n(o){var r,a,s,i,l,u,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(l in r=new M.a,a=Object.keys(t.item.placementNames),s=[T.a.ROLE_TEMPLATE,T.a.ROLE_ADVANCED_TEMPLATE],i=[],o.generatorVariants)u=o.generatorVariants[l],a.includes(u.placementId)&&(c=T.a.fromArray(u),s.includes(u.role)?i.push(c):r.generatorVariants[l]=c);return r.variantMapping=o.variantMapping,n.next=8,e;case 8:t.mockupDownload=new S.a(t.getDesignData(r,i),r,{},[],!0,t.onPickerChange),t.mockupDownload.append(t.mainNode),t.isButtonDisabled=!1,t.isProcessing=!1;case 12:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(o,r){var a=n.apply(t,e);function s(t){F(a,o,r,s,i,"next",t)}function i(t){F(a,o,r,s,i,"throw",t)}s(void 0)}))});return function(t){return o.apply(this,arguments)}}())},getDesignData:function(t,e){var n=this,o=new O.a;o.store=new k.a,o.templates={},o.filesIdsByPlacement={};var r,a=M.a.TEMPLATE_TYPE_ADVANCED,s=1,i=N(this.item.getDesign().templates);try{var l=function(){var t=r.value;t.technique=n.item.technique,t.placementName=n.item.placementNames[t.placementId],o.templates["".concat(t.placementId,"_").concat(s++)]=t,o.filesIdsByPlacement[t.placementId]=[];var i,l=N(t.layers);try{for(l.s();!(i=l.n()).done;){var u=i.value;u.fileItem&&o.filesIdsByPlacement[t.placementId].push(u.fileItem.fileId)}}catch(t){l.e(t)}finally{l.f()}var c=e.find((function(e){return e.templateId===t.templateId})),d=(null==c?void 0:c.role)===T.a.ROLE_ADVANCED_TEMPLATE;o.forceTemplateType!==a&&d&&(o.forceTemplateType=a)};for(i.s();!(r=i.n()).done;)l()}catch(t){i.e(t)}finally{i.f()}return o.sizes=this.item.sizes,o.colors=Object.keys(this.item.colors),o.productId=this.item.productData.productId,o.product=new j.a,o.generatorVariants=Object.values(t.generatorVariants),o.productOptions=this.item.optionData,this.item.getDesign().placementOptions&&(o.rawPlacementOptions=this.item.getDesign().placementOptions.getData()),o},generate:function(){this.hasRestrictions?this.showMockupGeneratorRestrictionWarningPopup():(this.isButtonDisabled=!0,this.isInputDisabled=!0,this.isProcessing=!0,2===this.buttonState?this.mockupDownload.downloadMockups(this.onDownloadReady):(this.buttonState=1,this.mockupDownload.generateMockups(this.onGenerationSuccess,this.onGenerationFail)))},showMockupGeneratorRestrictionWarningPopup:function(){switch(PF.Customer.mockupGeneratorRestrictionStatus){case C.a.MOCKUP_GENERATOR_RESTRICTED_NO_STORES:new E.a;break;case C.a.MOCKUP_GENERATOR_RESTRICTED_NO_ORDERS:new $.a}},onGenerationFail:function(){this.buttonState=0,alert(dlang("generator","Generation failed, please try again. If this persists, please contact support@printful.com")),this.enableInput()},onGenerationSuccess:function(t){t||alert(dlang("generator","Your mockups couldn't be generated. Please refresh this page and try again.")),this.buttonState=2,this.enableInput()},onPickerChange:function(){this.buttonState=0,this.mockupDownload.getSelectedCount()>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0},enableInput:function(){this.isInputDisabled=!1,this.isButtonDisabled=!1,this.isProcessing=!1},onDownloadReady:function(t){document.location.href=t,this.enableInput()}}},W=(n("hMpR"),Object(d.a)(V,w,[],!1,null,"f4b78350",null));W.options.__file="resources/src/printful/common/designer/_/mockup/_/mockup-selector/components/BasicMockupDownload.vue";var H=W.exports,Y=n("Vho+"),J=n("KLvT"),X={name:"ProductTemplateMockupDownloadModal",components:{BetterModal:u.a,BasicMockupDownload:H},mixins:[Y.a],props:{item:{type:Object,required:!0},showModal:{type:Boolean,required:!0}},data:function(){return{isLoading:!0,hasRestrictions:!1,localShowModal:!1}},computed:{},watch:{localShowModal:function(t){this.$emit("update:showModal",t)}},mounted:function(){var t=this;this.localShowModal=this.showModal,PF.Customer.loadCustomerRestriction().then((function(){t.hasRestrictions=PF.Customer.mockupGeneratorRestricted})),this.isLoading=!1},methods:{getMockupType:function(){return Object(J.d)(A.a)?this.mockupType:null}}},Q=(n("fi+q"),Object(d.a)(X,y,[],!1,null,null,null));Q.options.__file="resources/src/printful/dashboard/product-templates/views/ProductTemplateMockupDownloadModal.vue";var Z=Q.exports;function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach((function(e){nt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ot=Object(v.a)(a.a),rt=ot.mapActions,at=ot.mapGetters,st=ot.mapMutations,it=ot.mapState,lt={name:"ProductTemplates",components:{ProductTemplatesMockupDownloadModal:Z,ProductTemplatesDeleteModal:h},computed:et(et(et({},at({getFlag:a.i})),it({stateItems:function(t){return t.itemRepository}})),{},{shouldShowGlobalLoader:function(){return!!this.getFlag(m.f.FLAG_KEYS.IS_LOADING_ASYNC_DEPS)},shouldShowDeleteModal:function(){return this.deleteModalItems.length>0},shouldShowMockupDownloadModal:function(){return null!==this.mockupDownloadItem},mockupDownloadItem:function(){var t=this.getFlag(m.f.FLAG_KEYS.SHOW_MOCKUP_DOWNLOAD_MODAL);return this.stateItems[t]||null},deleteModalItems:function(){var t=this.getFlag(m.f.FLAG_KEYS.SHOW_DELETE_MODAL);return!t||t.length<1||!this.stateItems||this.stateItems.length<1?[]:Object.values(i.a.pick(this.stateItems,t))}}),methods:et(et(et({},st({loadSavedItem:a.p,updateItemFiles:a.y,toggleDeleteModal:a.v,toggleMockupDownloadModal:a.w,setFlag:a.t})),rt({deleteItems:a.g})),{},{onShouldShowDeleteUpdate:function(t){t||this.toggleDeleteModal({show:!1})},onShouldShowMockupDownloadUpdate:function(t){t||this.toggleMockupDownloadModal({show:!1})},onDeleteSubmit:function(){var t=Object.values(i.a.mapValues(this.deleteModalItems||{},(function(t){return t.id})));if(t&&t.length){var e=1===t.length;this.deleteItems({ids:t}).then((function(){new r.a({type:r.a.TYPE_SUCCESS,content:e?dlang("dashboard","Product template deleted!"):dlang("dashboard","Product templates deleted!"),duration:6e3})})).catch((function(){new r.a({type:r.a.TYPE_ERROR,content:dlang("dashboard","Error while deleting product template/-s! Please contact support!"),duration:6e3})}))}this.toggleDeleteModal({show:!1})}}),mounted:function(){var t=this;g.n(b.a,(function(e){var n=e.item,o=void 0===n?null:n,r=e.isNewItem,a=void 0!==r&&r;o&&t.loadSavedItem({item:o,isNewItem:a})})),this.watchedMainImageIDs=[],this.itemPusherCallback=function(e){var n=e.files,o=e.templateId,r=Object(f.a)(n),a={mainImage:null};r.isDone?(a.mainImage={imageURL:r.imageURL,thumbnailURL:r.thumbnailURL},t.updateItemFiles({itemId:o,files:a})):t.updateItemFiles({itemId:o,files:a})},this.itemRepoWatcherUnwatch=this.$store.watch((function(t){return Object(a.m)(t).itemRepository}),(function(e){var n=i.a.pickBy(e,(function(t){return!!t.mainImage.pusherKey})),o=Object.keys(n),r=i.a.difference(t.watchedMainImageIDs,o),a=i.a.difference(o,t.watchedMainImageIDs),s=Object.values(i.a.pick(n,a));r&&r.length&&r.forEach((function(e){Object(f.c)(e,t.itemPusherCallback)})),s&&s.length&&s.forEach((function(e){Object(f.b)(e,t.itemPusherCallback)})),t.watchedMainImageIDs=o}),{deep:!0})},beforeDestroy:function(){this.itemRepoWatcherUnwatch&&this.itemRepoWatcherUnwatch()}},ut=Object(d.a)(lt,o,[],!1,null,null,null);ut.options.__file="resources/app/js-babel/vue-components/product-templates/product-templates.vue";e.default=ut.exports},DteH:function(t,e,n){},EEzy:function(t,e,n){},K4j9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=(o=n("oCYn"))&&"object"==typeof o&&"default"in o?o.default:o;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i="undefined"!=typeof window;function l(t,e){return e.reduce((function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e}),{})}var u={},c={},d={},p=new(r.extend({data:function(){return{transports:u,targets:c,sources:d,trackInstances:i}},methods:{open:function(t){if(i){var e=t.to,n=t.from,o=t.passengers,s=t.order,l=void 0===s?1/0:s;if(e&&n&&o){var u,c={to:e,from:n,passengers:(u=o,Array.isArray(u)||"object"===a(u)?Object.freeze(u):u),order:l};-1===Object.keys(this.transports).indexOf(e)&&r.set(this.transports,e,[]);var d,p=this.$_getTransportIndex(c),h=this.transports[e].slice(0);-1===p?h.push(c):h[p]=c,this.transports[e]=(d=function(t,e){return t.order-e.order},h.map((function(t,e){return[e,t]})).sort((function(t,e){return d(t[1],e[1])||t[0]-e[0]})).map((function(t){return t[1]})))}}},close:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.to,o=t.from;if(n&&(o||!1!==e)&&this.transports[n])if(e)this.transports[n]=[];else{var r=this.$_getTransportIndex(t);if(r>=0){var a=this.transports[n].slice(0);a.splice(r,1),this.transports[n]=a}}},registerTarget:function(t,e,n){i&&(this.trackInstances&&!n&&this.targets[t]&&console.warn("[portal-vue]: Target ".concat(t," already exists")),this.$set(this.targets,t,Object.freeze([e])))},unregisterTarget:function(t){this.$delete(this.targets,t)},registerSource:function(t,e,n){i&&(this.trackInstances&&!n&&this.sources[t]&&console.warn("[portal-vue]: source ".concat(t," already exists")),this.$set(this.sources,t,Object.freeze([e])))},unregisterSource:function(t){this.$delete(this.sources,t)},hasTarget:function(t){return!(!this.targets[t]||!this.targets[t][0])},hasSource:function(t){return!(!this.sources[t]||!this.sources[t][0])},hasContentFor:function(t){return!!this.transports[t]&&!!this.transports[t].length},$_getTransportIndex:function(t){var e=t.to,n=t.from;for(var o in this.transports[e])if(this.transports[e][o].from===n)return+o;return-1}}}))(u),h=1,m=r.extend({name:"portal",props:{disabled:{type:Boolean},name:{type:String,default:function(){return String(h++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}}},created:function(){var t=this;this.$nextTick((function(){p.registerSource(t.name,t)}))},mounted:function(){this.disabled||this.sendUpdate()},updated:function(){this.disabled?this.clear():this.sendUpdate()},beforeDestroy:function(){p.unregisterSource(this.name),this.clear()},watch:{to:function(t,e){e&&e!==t&&this.clear(e),this.sendUpdate()}},methods:{clear:function(t){var e={from:this.name,to:t||this.to};p.close(e)},normalizeSlots:function(){return this.$scopedSlots.default?[this.$scopedSlots.default]:this.$slots.default},normalizeOwnChildren:function(t){return"function"==typeof t?t(this.slotProps):t},sendUpdate:function(){var t=this.normalizeSlots();if(t){var e={from:this.name,to:this.to,passengers:s(t),order:this.order};p.open(e)}else this.clear()}},render:function(t){var e=this.$slots.default||this.$scopedSlots.default||[],n=this.tag;return e&&this.disabled?e.length<=1&&this.slim?this.normalizeOwnChildren(e)[0]:t(n,[this.normalizeOwnChildren(e)]):this.slim?t():t(n,{class:{"v-portal":!0},style:{display:"none"},key:"v-portal-placeholder"})}}),f=r.extend({name:"portalTarget",props:{multiple:{type:Boolean,default:!1},name:{type:String,required:!0},slim:{type:Boolean,default:!1},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},data:function(){return{transports:p.transports,firstRender:!0}},created:function(){var t=this;this.$nextTick((function(){p.registerTarget(t.name,t)}))},watch:{ownTransports:function(){this.$emit("change",this.children().length>0)},name:function(t,e){p.unregisterTarget(e),p.registerTarget(t,this)}},mounted:function(){var t=this;this.transition&&this.$nextTick((function(){t.firstRender=!1}))},beforeDestroy:function(){p.unregisterTarget(this.name)},computed:{ownTransports:function(){var t=this.transports[this.name]||[];return this.multiple?t:0===t.length?[]:[t[t.length-1]]},passengers:function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.reduce((function(t,n){var o=n.passengers[0],r="function"==typeof o?o(e):n.passengers;return t.concat(r)}),[])}(this.ownTransports,this.slotProps)}},methods:{children:function(){return 0!==this.passengers.length?this.passengers:this.$scopedSlots.default?this.$scopedSlots.default(this.slotProps):this.$slots.default||[]},noWrapper:function(){var t=this.slim&&!this.transition;return t&&this.children().length>1&&console.warn("[portal-vue]: PortalTarget with `slim` option received more than one child element."),t}},render:function(t){var e=this.noWrapper(),n=this.children(),o=this.transition||this.tag;return e?n[0]:this.slim&&!o?t():t(o,{props:{tag:this.transition&&this.tag?this.tag:void 0},class:{"vue-portal-target":!0}},n)}}),g=0,b=["disabled","name","order","slim","slotProps","tag","to"],v=["multiple","transition"],y=r.extend({name:"MountingPortal",inheritAttrs:!1,props:{append:{type:[Boolean,String]},bail:{type:Boolean},mountTo:{type:String,required:!0},disabled:{type:Boolean},name:{type:String,default:function(){return"mounted_"+String(g++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}},multiple:{type:Boolean,default:!1},targetSlim:{type:Boolean},targetSlotProps:{type:Object,default:function(){return{}}},targetTag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},created:function(){if("undefined"!=typeof document){var t=document.querySelector(this.mountTo);if(t){var e=this.$props;if(p.targets[e.name])e.bail?console.warn("[portal-vue]: Target ".concat(e.name," is already mounted.\n        Aborting because 'bail: true' is set")):this.portalTarget=p.targets[e.name];else{var n=e.append;if(n){var o="string"==typeof n?n:"DIV",r=document.createElement(o);t.appendChild(r),t=r}var a=l(this.$props,v);a.slim=this.targetSlim,a.tag=this.targetTag,a.slotProps=this.targetSlotProps,a.name=this.to,this.portalTarget=new f({el:t,parent:this.$parent||this,propsData:a})}}else console.error("[portal-vue]: Mount Point '".concat(this.mountTo,"' not found in document"))}},beforeDestroy:function(){var t=this.portalTarget;if(this.append){var e=t.$el;e.parentNode.removeChild(e)}t.$destroy()},render:function(t){if(!this.portalTarget)return console.warn("[portal-vue] Target wasn't mounted"),t();if(!this.$scopedSlots.manual){var e=l(this.$props,b);return t(m,{props:e,attrs:this.$attrs,on:this.$listeners,scopedSlots:this.$scopedSlots},this.$slots.default)}var n=this.$scopedSlots.manual({to:this.to});return Array.isArray(n)&&(n=n[0]),n||t()}});var w={install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.component(e.portalName||"Portal",m),t.component(e.portalTargetName||"PortalTarget",f),t.component(e.MountingPortalName||"MountingPortal",y)}};e.default=w,e.Portal=m,e.PortalTarget=f,e.MountingPortal=y,e.Wormhole=p},"fi+q":function(t,e,n){"use strict";n("8u8f")},hMpR:function(t,e,n){"use strict";n("DteH")},hvPi:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.shouldUseMountingPortal?"MountingPortal":"div",t._b({tag:"component"},"component",t.wrappingElementProps,!1),[n("div",{ref:"mainModalElement",class:t.modalClasses,attrs:{id:t.id,tabindex:"-1","aria-labelledby":t.id+"-label","aria-hidden":"true",role:"dialog"}},[n("div",{ref:"modalDialogElement",class:"modal-dialog "+(t.size?"modal-"+t.size:"")},[n("div",{staticClass:"modal-content",class:{"modal-sticky":t.stickyHeaderFooter}},[t.shouldShowHeader?n("div",{staticClass:"modal-header"},[t.shouldShowCloser?n("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.onClose()}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")]),t._v(" "),n("span",{staticClass:"sr-only"},[t._v(t._s(t.lang("Close")))])]):t._e(),t._v(" "),t._t("header")],2):t._e(),t._v(" "),n("div",{class:"modal-body "+t.bodyClasses},[t._t("content")],2),t._v(" "),t.shouldShowFooter?n("div",{staticClass:"modal-footer"},[t._t("footer")],2):t._e()])])])])};o._withStripped=!0;var r=n("K4j9"),a=n("Qrei"),s=n("rvsm"),i=n("xeH2"),l=n.n(i);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=0,h={name:"BetterModal",components:{MountingPortal:r.MountingPortal},props:{id:{type:String,required:!0,default:function(){return"better-modal-"+p++}},show:{type:Boolean,required:!0,default:function(){return!1}},size:{type:String,required:!1,default:function(){return"md"}},classes:{type:String,required:!1,default:function(){return""}},bodyClasses:{type:String,required:!1,default:function(){return""}},shouldShowCloser:{type:Boolean,required:!1,default:function(){return!0}},modalOptions:{type:Object,required:!1,default:function(){return{backdrop:!0}}},mountOn:{type:String,required:!1,default:null},stickyHeaderFooter:{type:Boolean,required:!1,default:function(){return!1}},showFooter:{type:Boolean,required:!1,default:function(){return!0}}},data:function(){return{$modalObject:null}},computed:{modalClasses:function(){var t=["modal","fade","zoom"];return this.classes&&t.push(this.classes),t},shouldShowHeader:function(){return!!this.$slots.header},shouldShowFooter:function(){return!!this.$slots.footer&&!!this.showFooter},shouldUseMountingPortal:function(){return this.mountOn&&this.mountOn.length>0},wrappingElementProps:function(){return this.shouldUseMountingPortal?{mountTo:this.mountOn,name:"".concat(this.id,"-portal"),append:!0}:{class:"better-modal-wrapper"}},validatedModalOptions:function(){return c(c({},this.modalOptions),{},{show:!1,remote:!1})}},watch:{show:function(){this.toggleModal()},validatedModalOptions:function(t){a.a.UpdateBootstrapModalOptions(this.$modalObject,t)}},mounted:function(){var t=this,e=0;!function n(o){if(!t.getMainModalElement()){if(!(e<10))throw new Error("Couldn't initialize '".concat(t.id,"' modal!"));return t.$nextTick((function(){return n(o)})),void e++}o()}((function(){t.$modalObject=l()(t.getMainModalElement()).modal(t.validatedModalOptions),t.$modalObject.on("shown.bs.modal",(function(){t.$emit("update:show",!0)})),t.$modalObject.on("hidden.bs.modal",(function(){t.$emit("update:show",!1)})),t.$modalObject.on("show.bs.modal shown.bs.modal hide.bs.modal hidden.bs.modal",(function(e){Object(s.a)(e),t.$emit(e.vueName,e)})),t.toggleModal()}))},beforeDestroy:function(){var t;this.toggleModal(!1),null===(t=this.$modalObject)||void 0===t||t.off("show.bs.modal shown.bs.modal hide.bs.modal hidden.bs.modal")},methods:{toggleModal:function(t){this.$modalObject&&((void 0!==t?!!t:this.show)?this.$modalObject.modal("show"):this.$modalObject.modal("hide"))},onClose:function(){this.toggleModal(!1)},getMainModalElement:function(){return this.$refs.mainModalElement}}},m=(n("mXnW"),n("KHd+")),f=Object(m.a)(h,o,[],!1,null,"232f119a",null);f.options.__file="resources/common/vue-components/components/better-modal.vue";e.a=f.exports},mXnW:function(t,e,n){"use strict";n("EEzy")},vBOC:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o="ProductTemplates::PRODUCT_TEMPLATE_SAVED"}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"+4EM":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6JZw"),r=i("nF4n"),a=function(){this.sizes=[]};a.prototype=new n.a,a.prototype.color="",a.prototype.colorCode="",a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},a.fromColorPair=function(e){var t=new a;return t.colorCode=e.colorCode,t.color=e.colorName,t},window&&((globalThis||{}).PFItemsGeneratorColorItem=a)},"+I3z":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("n6mh"),r=i("+erO"),a=i("X5Ic"),o=i("nF4n"),s=i("JogF"),l=(i("mmgb"),Class({fileItem:null,temporaryFileItem:null,shouldUseTempFile:!1,overrideColors:null,isCustomizable:!1,embroideryType:"",isEmbroideryAfterMigration:null,migratedToNewPicker:null,isUpscaled:null,isRemovedBg:null,isCropState:!1,removeBgPreview:null,cropPosition:null,cropShape:null,getType:function(){return l.TYPE},_getNewLayer:function(){return new l},isImageLayer:function(){return!0},getOriginalClone:function(e){var t,i=this._getNewLayer();return e||(i.uniqueId=this.uniqueId),i.fileItem=this.fileItem,i.temporaryFileItem=this.temporaryFileItem,i.overrideImage=this.overrideImage,i.overrideImagePulse=this.overrideImagePulse,i.position=this.position.getFromOriginalRatio(),i.originalPosition=this.originalPosition.getClone(),i.cropPosition=null===(t=this.cropPosition)||void 0===t?void 0:t.getFromOriginalRatio(),i.parentLayerUniqueId=this.parentLayerUniqueId,i.shouldUseTempFile=this.shouldUseTempFile,i.customizeKey=this.customizeKey,i.generatorOptions=this.generatorOptions,i.isCustomizable=this.isCustomizable,i.embroideryType=this.embroideryType,i.isEmbroideryAfterMigration=this.isEmbroideryAfterMigration,i.migratedToNewPicker=this.migratedToNewPicker,i.patternType=this.patternType,i.patternSpacing=this.patternSpacing,i.flipX=this.flipX,i.flipY=this.flipY,i.isUpscaled=this.isUpscaled,i.isRemovedBg=this.isRemovedBg,i.isCropState=this.isCropState,i.removeBgPreview=this.removeBgPreview,i.isExisting=this.isExisting,i.quickDesignId=this.quickDesignId,i.groupId=this.groupId,i.groupType=this.groupType,this.overrideColors&&(i.overrideColors={},o.a.O2O(i.overrideColors,this.overrideColors)),i},getDPI:function(e,t){if(this.isVector())return 600;var i=this.cropPosition?this.cropPosition.width/this.position.width:1,n=this.getFileItem().width*i,r=this.cropPosition||this.position,a=Math.round(n/r.getFromOriginalRatio().width);if(e&&null!=t&&t.getQualityPercent){var o=t.getQualityPercent(this),l=t.shouldSkipUpscale(this);this.isUpscaled=t.isQualityBadUpscale(o,l),this.isUpscaled&&(a*=s.k)}return a},getFileItem:function(){return this.shouldUseTempFile&&this.temporaryFileItem?this.temporaryFileItem:this.fileItem},getSourceWidth:function(){return this.fileItem.width},getSourceHeight:function(){return this.fileItem.height},getSourceDpi:function(){return this.fileItem.dpi},matchesAdvancedTemplate:function(e){var t=e.width/e.height,i=this.getSourceWidth()/this.getSourceHeight();return Math.abs(t-i)<=.01},isVector:function(){return this.fileItem?this.fileItem.isVector:this.temporaryFileItem.isVector},hasNaturalSize:function(){return!!this.fileItem.dpi},hasTransparencyIssues:function(){var e=this.fileItem&&this.fileItem.extra?this.fileItem.extra.transparency:this.temporaryFileItem&&this.temporaryFileItem.extra&&this.temporaryFileItem.extra.transparency;return!!e&&e.prediction>0},toArray:function(e){return{type:l.TYPE,fileId:this.fileItem?this.fileItem.fileId:null,url:this._getUrl(e),position:this.position?this.position.toArray():{},cropPosition:this.cropPosition?this.cropPosition.toArray():null,overrideColors:this.overrideColors,isCustomizable:this.isCustomizable?1:0,customizeKey:this.customizeKey,uniqueId:this.uniqueId,parentLayerUniqueId:this.parentLayerUniqueId,overrideImage:this.overrideImage,overrideImagePulse:this.overrideImagePulse,embroideryType:this.embroideryType,isEmbroideryAfterMigration:this.isEmbroideryAfterMigration,migratedToNewPicker:this.migratedToNewPicker,patternType:this.patternType,patternSpacing:this.patternSpacing,flipX:this.flipX,flipY:this.flipY,isUpscaled:this.isUpscaled,isRemovedBg:this.isRemovedBg,isCropState:this.isCropState,removeBgPreview:this.removeBgPreview,shouldUseTempFile:this.shouldUseTempFile,isExisting:this.isExisting,quickDesignId:this.quickDesignId,groupType:this.groupType,groupId:this.groupId}},_getUrl:function(e){var t;return t=this.temporaryFileItem&&this.shouldUseTempFile?this.temporaryFileItem.urlLarge:this.fileItem.urlPreview,e&&this.fileItem&&(t=this.fileItem.urlThumb),e&&this.temporaryFileItem&&this.shouldUseTempFile&&(t=this.temporaryFileItem.urlThumb),t},isConfigurationSame:function(e){var t=e.migratedToNewPicker!==this.migratedToNewPicker,i=this.fileItem&&e.fileItem&&this.fileItem.fileId===e.fileItem.fileId,n=JSON.stringify(e.overrideColors)===JSON.stringify(this.overrideColors),r=this.removeBgPreview===e.removeBgPreview&&this.isRemovedBg===e.isRemovedBg;return i&&n&&!t&&r},isValidForTechnique:function(e){return e!==a.a.TECHNIQUE_ENGRAVING},isPartiallyOutOfBounds:function(){return this.cropPosition?this.cropPosition.isPartiallyOutOfBounds():this.position.isPartiallyOutOfBounds()},isCropPositionUpdateNeeded:function(){return!!this.cropPosition}},n.a));l.TYPE="file",l.fromFileItem=function(e){var t=new l;return t.fileItem=e,t.originalPosition=new r.a,t.position=t.originalPosition.getClone(),t},window&&((globalThis||{}).PFComponentsGeneratorMockupImageLayer=l)},"+tIB":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ohgv"),r=i("nF4n"),a=function(e,t,i){for(var n in e=e||[],this.orders=e.reverse(),this.isHomepage=t,this.wrapperClass=i||!1,this.interval=2,this.orders)("string"==typeof this.orders[n].timestamp||this.orders[n].timestamp instanceof String)&&(this.orders[n].timestamp=parseInt(this.orders[n].timestamp)),this.orders[n].age=moment().unix()-this.orders[n].timestamp;this.node=tag("div","row"),setInterval($.proxy(this.updateAge,this),1e3*this.interval),this.render()};a.prototype=new r.a.Base,a.prototype.render=function(e){e=e||!1,r.a.clearNode(this.node);var t=this.wrapperClass||(this.isHomepage?"col-4 col-md-6 col-xl-4":"col-4");for(var i in this.orders){var a=2==i&&this.isHomepage?" pf-d-md-none pf-d-xl-flex":"",o=this.orders[i].location.toLowerCase().split(", "),s=[n.a.ucFirst(o[0]),o[1].toUpperCase()].join(", "),l=tag("div",t+a,[tag("div","pf-latest-orders__item"+(this.isHomepage?" pf-justify-content-start":""),[tag("img",{className:"img-responsive",src:"/static/images/layout/lord.png",attr:{"aria-hidden":"true",alt:dlang("site","shipment location")}}),tag("div","text-center-xs pf-mt-8 pf-ml-sm-16 pf-mt-sm-0",[tag("span","pf-h5 location",s),tag(this.wrapperClass?"":"br"),this.orders[i].ageNode=tag("span","pf-ui-body text-muted")])])]).append(this.node);e&&0==i&&($(l).css("opacity",0),$(l).animate({opacity:1},600))}this.updateAge()},a.prototype.updateAge=function(){for(var e in this.orders){this.orders[e].age=this.orders[e].age+this.interval;var t=this.orders[e].age;if(t<2)t=" "+lang("just now");else if(t<60)t=lang("{count} sec ago").replace("{count}",t);else if(t<3600)t=lang("{count} min ago").replace("{count}",Math.round(t/60));else if(t<216e3){var i=Math.round(t/60/60);t=1===i?lang("hour ago"):lang("{count} hours ago").replace("{count}",i)}else t=lang("a while ago");$(this.orders[e].ageNode).text(t)}},a.prototype.isHomepage=!1,a.prototype.wrapperClass=void 0,(globalThis||{}).PFLatestOrders=a},"/Z5U":function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return o}));var n=null;function r(e){n=e}function a(){return!!n}function o(){return n}},"/w+P":function(e,t,i){"use strict";i.d(t,"a",(function(){return x})),i.d(t,"b",(function(){return G}));var n=i("0Dcb"),r=i("ehgC"),a=i("xeH2"),o=i.n(a),s=i("SBaP"),l=i("GCEm"),c=i("XLZy"),d=i("nF4n"),u=i("97Au"),h=i("Xapb");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function f(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){g(a,n,r,o,s,"next",e)}function s(e){g(a,n,r,o,s,"throw",e)}o(void 0)}))}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=C(e);if(t){var r=C(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return b(this,i)}}function b(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function I(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function w(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var S=new WeakMap,E=new WeakMap,k=new WeakSet,O=new WeakSet,A=new WeakSet,L=new WeakSet,N=new WeakSet,D=new WeakSet,R=new WeakSet,x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,e);var t,i,n,r=y(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _(this,a),e=r.call(this),R.add(P(e)),D.add(P(e)),N.add(P(e)),L.add(P(e)),A.add(P(e)),O.add(P(e)),k.add(P(e)),S.set(P(e),{writable:!0,value:null}),E.set(P(e),{writable:!0,value:[]}),w(P(e),S,new G(t)),e.node=tag("div","store-picker"),I(P(e),S).forceCreate?(T(P(e),L,V).call(P(e)),b(e)):PF.EMBED_STORE?(l.f(PF.EMBED_STORE),I(P(e),S).callback(PF.EMBED_STORE.storeId,PF.EMBED_STORE),b(e)):(T(P(e),k,F).call(P(e)),e)}return t=a,n=[{key:"popup",value:function(e,t){var i=new u.a.Par;i.title=t,i.modalDialogClass="modal-lg",i.closeOnClick=e.closeOnClick;var n=new u.a(i),r=e.callback;return e.callback=function(e,t,i,n){e.remove(),t(i,n)}.bind(null,n,r),n.setContent(new a(e)),n.show(),n}}],(i=null)&&m(t.prototype,i),n&&m(t,n),a}(s.a),F=function(){var e=f(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.a.show(this.node,{minHeight:200}),e.next=3,l.k(I(this,S));case 3:t=e.sent,T(this,O,M).call(this,t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=f(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(this,E,t),0!==I(this,E).length){e.next=7;break}return e.next=4,l.g(l.b,!0,r.a.TYPE_NATIVE);case 4:return i=e.sent,T(this,D,U).call(this,i),e.abrupt("return");case 7:if(1!==I(this,E).length){e.next=10;break}return I(this,S).callback(I(this,E)[0].storeId,I(this,E)[0]),e.abrupt("return");case 10:c.a.hide(this.node),T(this,A,B).call(this);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),B=function(){d.a.clearNode(this.node);for(var e=[],t=0,i=I(this,E).length;t<i;t++){var r=I(this,E)[t],a="";r.hasPersonalLogo&&(a=r.isNative()?tag("span",null,dclang("dashboard","store","Manual orders only")):tag("div",null,[tag("span","pf-text-muted",[dclang("dashboard","store","Integration")+": "]),tag("div","store-logo pf-d-inline-block pf-mr-4",[new n.a({urlImage:r.urlTypeLogo})]),r.integrationName?r.integrationName:""]));var o=r.hasFlag(h.a.FLAG_IS_LIMITED_BY_DSR_SETTINGS),s=langUrl("/dashboard/settings/".concat(r.storeId,"/store"));e.push(tag("li",{attr:{role:"button",tabindex:"0"},onclick:T(this,R,z).bind(this,r.storeId,r),className:"col-md-4 col-sm-6 col-xs-12 pf-keydown-click"},[tag("div","pf-border pf-hover-shadow pf-rounded--medium",[tag("div","wrapper"+(o?" wrapper--extended":""),[tag("div","store-name data-hj-suppress",r.name),tag("div","logo-container",[new n.a({urlImage:r.urlLogo})]),tag("div","store-type pf-ui-caption",[a]),tag("div","pf-ui-caption",[tag("span","pf-text-muted",dlang("dashboard","Printful billing currency")),[": ",r.currency]]),o?tag("div","pf-banner pf-banner-warning",[tag("p",{innerHTML:dlang("dashboard","Adjust the store's {linkBegin}default selling preferences{linkEnd} to choose this variant").replace("{linkBegin}",'<a href="'.concat(s,'" class="pf-link pf-pointer pf-d-inline pf-p-0">')).replace("{linkEnd}","</a>")})]):""])])]))}tag("div",null,[tag("h6","pf-mt-0 margin-bottom-20",lang("Select store")),tag("ul","list-unstyled list-inline storeList",e),tag("div","clearfix")]).append(this.node)},V=function(){var e=this;d.a.clearNode(this.node);var t=dlang("dashboard","custom"),i=dlang("dashboard","{firstName}'s Store").replace("{firstName}",PF.Customer.firstName);I(this,S).createStoreType!==r.a.TYPE_NATIVE&&(t=I(this,S).createStoreType,i=I(this,S).createStoreType+" store"),this.errorBlock=tag("div"),this.nodeCreateInput=tag("input",{type:"text",value:i,className:"form-control pf-mr-12 pf-w-sm-50 pf-d-inline",prop:{onkeyup:function(t){13==t.keyCode&&T(e,N,j).call(e)}}}),tag("div",{className:"row",style:{minHeight:"200px"}},[tag("div","col-12 text-center form-inline",[tag("h3","pf-h3 pf-mt-32 pf-mb-12",dlang("dashboard","Create a {type} store").replace("{type}",t)),this.nodeCreateInput,tag("a",{className:"pf-btn pf-btn-primary pf-d-block pf-d-sm-inline-block pf-mt-12 pf-mt-sm-0",prop:{onclick:T(this,N,j).bind(this)}},dclang("dashboard","store","Create")),this.errorBlock])]).append(this.node),setTimeout(function(){o()(this.nodeCreateInput).focus()}.bind(this),400)},j=function(){var e=f(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=String(this.nodeCreateInput.value).trim()).length>0)){e.next=9;break}return c.a.show(this.node),e.next=5,l.g(t,!1,I(this,S).createStoreType);case 5:i=e.sent,T(this,D,U).call(this,i),e.next=11;break;case 9:tag("div","pf-mt-12 pf-text-red",dlang("dashboard","Please check the name and try again")).append(this.errorBlock);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),U=function(e){c.a.hide(this.node),w(this,E,I(this,E)||[]),I(this,E).push(e),e.storeId?T(this,R,z).call(this,e.storeId,e):alert(dlang("dashboard","Please check the name and try again"))},z=function(e,t){t.hasFlag(h.a.FLAG_IS_LIMITED_BY_DSR_SETTINGS)||I(this,S).callback(e,t)},G=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_(this,e),this.callback=t.callback||null,this.forceCreate=t.forceCreate||!1,this.type=t.type||"all",this.createStoreType=t.createStoreType||"native",this.closeOnClick=t.closeOnClick||!0,this.withAvailableProductId=t.withAvailableProductId||null,this.withAvailableVariantId=t.withAvailableVariantId||null,this.getCacheKey=function(){return this.type+"|"+(this.withAvailableProductId||"")}}},0:function(e,t){},"0Dko":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={MAX_EMBROIDERY_PREVIEW_AREA:30,EMBROIDERY_MAX_IMAGE_COLORS:8,EMBROIDERY_MAX_SELECTED_THREAD_COLORS:6,EMBROIDERY_IMAGE_COLOR_COUNT_LIMIT:32,EMBROIDERY_NONE_COLOR_BE_LCASE_VALUE:"transparent"};(globalThis||{}).PFProductPushEmbroideryCommon=n},"0nZy":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r})),i.d(t,"j",(function(){return a})),i.d(t,"i",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"e",(function(){return l})),i.d(t,"f",(function(){return c})),i.d(t,"c",(function(){return d})),i.d(t,"g",(function(){return u})),i.d(t,"h",(function(){return h}));var n="chooserOptions",r=Object.freeze({IS_PROMO_MOCKUP_PICKER_AVAILABLE:"IS_PROMO_MOCKUP_PICKER_AVAILABLE",IS_QUICK_DESIGNS_PICKER_AVAILABLE:"IS_QUICK_DESIGNS_PICKER_AVAILABLE",IS_LICENSED_ASSET_PICKER_AVAILABLE:"IS_LICENSED_ASSET_PICKER_AVAILABLE",IS_TITLE_HIDDEN:"IS_TITLE_HIDDEN",IS_MOCKUP_MAKER_MODE:"IS_MOCKUP_MAKER_MODE"}),a="validation",o=Object.freeze({FILES_UNAVAILABLE:"FILES_UNAVAILABLE",FILES_COUNT_RESTRICTION:"FILES_COUNT_RESTRICTION",CLIPARTS_UNAVAILABLE:"CLIPARTS_UNAVAILABLE",TEXTBOX_UNAVAILABLE:"TEXTBOX_UNAVAILABLE",TEXTBOX_EMBROIDERY:"TEXTBOX_EMBROIDERY",TEXTBOX_COUNT_RESTRICTION:"TEXTBOX_COUNT_RESTRICTION",LICENSED_ASSET_COUNT_RESTRICTION:"LICENSED_ASSET_COUNT_RESTRICTION",QUICKDESIGN_COUNT_RESTRICTION:"QUICKDESIGN_COUNT_RESTRICTION"}),s="mockup_prop",l="mockup_scene",c=[s,l],d="default_view",u="mockup_props",h="mockup_scenes"},"0rxu":function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return a}));var n=i("n5ho"),r={relevant:function(){return 1},is_new:function(e,t){e=e instanceof n.a?e.getCachedProduct():e,t=t instanceof n.a?t.getCachedProduct():t;var i=(e.isNew?1e6:0)+(e.isPopular?1e5:0)+(e.hasBetaAccess?1e4:0)+(e.hasClearance?-1e4:0)+e.rating;return(t.isNew?1e6:0)+(t.isPopular?1e5:0)+(t.hasBetaAccess?1e4:0)+(t.hasClearance?-1e4:0)+t.rating-i},popular:function(e,t){e=e instanceof n.a?e.getCachedProduct():e,t=t instanceof n.a?t.getCachedProduct():t;var i=(e.isPopular?1e6:0)+(e.hasBetaAccess?1e5:0)+(e.isNew?1e4:0)+(e.hasClearance?-1e4:0)+e.rating;return(t.isPopular?1e6:0)+(t.hasBetaAccess?1e5:0)+(t.isNew?1e4:0)+(t.hasClearance?-1e4:0)+t.rating-i},review:function(e,t){e=e instanceof n.a?e.getCachedProduct():e,t=t instanceof n.a?t.getCachedProduct():t;var i=0,r=0,a=0,o=0;return e.reviewRating&&(i=e.reviewRating.rating||0,a=e.reviewRating.reviewCount||0),t.reviewRating&&(r=t.reviewRating.rating||0,o=t.reviewRating.reviewCount||0),i-r==0?o-a:r-i},priceLow:function(e,t){return(e instanceof n.a?e.priceData.price:e.priceRange.minPrice)-(t instanceof n.a?t.priceData.price:t.priceRange.minPrice)},priceHigh:function(e,t){return-1*r.priceLow(e,t)},retailPriceLow:function(e,t){return(e instanceof n.a?e.priceData.retailPrice:e.priceRange.minRetailPrice)-(t instanceof n.a?t.priceData.retailPrice:t.priceRange.minRetailPrice)},retailPriceHigh:function(e,t){return-1*r.retailPriceLow(e,t)},profitLow:function(e,t){var i=e instanceof n.a?e.priceData.retailPrice:e.priceRange.minRetailPrice,r=t instanceof n.a?t.priceData.retailPrice:t.priceRange.minRetailPrice;return i-(e instanceof n.a?e.priceData.price:e.priceRange.minPrice)-(r-(t instanceof n.a?t.priceData.price:t.priceRange.minPrice))},profitHigh:function(e,t){return-1*r.profitLow(e,t)},favoritesAsc:function(e,t){return-1*this._sortFavorite(e,t)},favoritesDesc:function(e,t){return this._sortFavorite(e,t)},_sortFavorite:function(e,t){e=e instanceof n.a?e.getCachedProduct():e,t=t instanceof n.a?t.getCachedProduct():t;var i=0,r=0;return e.addedToFavoritesAt&&(i=e.addedToFavoritesAt||0),t.addedToFavoritesAt&&(r=t.addedToFavoritesAt||0),i-r}},a={retailPriceLow:function(e,t,i,r){var a=e instanceof n.a?e.priceData.price:e.priceRange.minPrice,o=t instanceof n.a?t.priceData.price:t.priceRange.minPrice;return(a+=i)-(o+=r)},retailPriceHigh:function(e,t,i,n){return-1*a.retailPriceLow(e,t,i,n)},profitLow:function(e,t,i,n){return i-n},profitHigh:function(e,t,i,n){return-1*a.profitLow(e,t,i,n)}};window&&((globalThis||{}).PFProductsPricingSortingMethods=r,(globalThis||{}).PFProductsPricingRetailSortMethods=a)},"0sIF":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={_previewStringCache:{},getPreviewString:function(e){return n._previewStringCache.hasOwnProperty(e)?n._previewStringCache[e]:""},setPreviewString:function(e,t){return n._previewStringCache[e]=t},clearPreviewStrings:function(){n._previewStringCache={}}};(globalThis||{}).PFComponentsGeneratorMockupPreviewCommon=n},"1Juc":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("bUho"),r=i("nF4n"),a=Class({_nodesByItem:{},_par:null,__construct:function(e){this._par=e,this._onValueChangedCallback=this._par.onChanged,this._nodeItems=tag("div",{className:"button-picker__list",attr:{role:"list","aria-label":this._par.ariaLabel}}),this._renderItems()},_onItemClick:function(e){this._popover&&this._popover.destroy(),this._par.sampleValuesDisabled.indexOf(e)>-1||this._par.valuesInactive.indexOf(e)>-1||this._par.valuesHidden.indexOf(e)>-1||this._par.valuesDisabled.indexOf(e)>-1?this._onValueChangedCallback(e):(this._par.activeValue=e,this._onValueChangedCallback(e),this._renderState())},setActiveValue:function(e){this._par.activeValue=e,this._renderState()},getActiveValue:function(){return this._par.activeValue},_renderItems:function(){for(var e in r.a.clearNode(this._nodeItems),this._nodesByItem={},this._par.values){var t=this._par.values[e].title,i=this._par.values[e].value,n=this._par.singleAriaLabel.replace("{title}",t),a=tag("a",{className:"pf-btn pf-btn-rectangle pf-btn-outline pf-mb-4 pf-mr-4",text:t,onclick:this._onItemClick.bind(this,i),attr:{"data-original-title":t,role:"button","aria-label":n},data:{label:n}});this._nodesByItem[i]=a,a.append(this._nodeItems)}this._renderState()},_renderState:function(){for(var e in this._nodesByItem){var t=this._nodesByItem[e];r.a.removeClassName(t,"active"),r.a.removeClassName(t,"disabled"),t.setAttribute("aria-label",t.dataset.label),(this._par.valuesDisabled.indexOf(e)>-1||this._par.sampleValuesDisabled.indexOf(e)>-1||this._par.valuesHidden.indexOf(e)>-1||this._par.valuesInactive.indexOf(e)>-1)&&(r.a.addClassName(t,"pf-btn-dashed disabled"),r.a.removeClassName(t,"active"),t.setAttribute("aria-label",dlang("site","{buttonLabel} is not available").replace("{buttonLabel}",t.dataset.label))),this._par.activeValue&&this._par.activeValue===e&&r.a.addClassName(t,"active")}},setUnavailableItems:function(e){this._par.valuesDisabled=e,this._renderState()},setHiddenItems:function(e){this._par.valuesHidden=e,this._renderState()},togglePopover:function(e,t,i){e&&(this.getInactiveItems().indexOf(e)>-1||this.getUnavailableItems().indexOf(e)>-1)&&this._showPopover(e,t,i)},_showPopover:function(e,t,i){this._popover&&this._popover.destroy(),this._popover=new n.a(this._nodesByItem[e],t,i,{modalCompatible:!0,placement:"bottom"})},getUnavailableItems:function(){return this._par.valuesDisabled},getHiddenItems:function(){return this._par.valuesHidden},getValue:function(){return this._par.activeValue},getInactiveItems:function(){return this._par.valuesInactive},setInactiveItems:function(e){this._par.valuesInactive=e,this._renderState()},setDisabledSampleSizes:function(e){this._par.sampleValuesDisabled=e,this._renderState()},getDisabledSampleSizes:function(){return this._par.sampleValuesDisabled}},r.a.Base);window&&((globalThis||{}).PFComponentsButtonPicker=a)},"1mG2":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("g357"),r=i("YBfo"),a={toggleLock:function(e){n.a.createAndDispatch(r.a.EVENT_TOGGLE_LOCK,{isLocked:e})}};(globalThis||{}).PFProductsCatalogUtilsStateHelpers=a},"1tjy":function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"e",(function(){return l})),i.d(t,"d",(function(){return c})),i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return u})),i.d(t,"f",(function(){return h}));var n=i("KLvT"),r=i("FpxJ");function a(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function o(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var o=e.apply(t,i);function s(e){a(o,n,r,s,l,"next",e)}function l(e){a(o,n,r,s,l,"throw",e)}s(void 0)}))}}var s=function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.d(r.a),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){return Object(n.a)().getters[r.d(r.c)]([e])[0]},c=function(e){return Object(n.a)().getters[r.d(r.b)](e)},d=function(e){return Object(n.a)().commit(r.d(r.h),e)},u=function(e,t){return Object(n.a)().commit(r.d(r.k),{clipartItemId:e,technique:t})},h=function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.d(r.e),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"1yrs":function(e,t,i){"use strict";i.d(t,"d",(function(){return hasCustomizableCropImageError})),i.d(t,"g",(function(){return hasCustomizableTextLayerGraphicError})),i.d(t,"e",(function(){return hasCustomizableTextLayerArcError})),i.d(t,"f",(function(){return hasCustomizableTextLayerError})),i.d(t,"h",(function(){return u})),i.d(t,"c",(function(){return h})),i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return g}));var n=i("X5Ic"),r=i("7QI8"),a=i("rF+z"),o=i("rFrQ"),s=i("pWIn"),l=i("7h5t"),c=i("tx4t"),d=i("gQ2J");function hasCustomizableCropImageError(e,t){return null==t?void 0:t.map((function(t){return h(e,t)})).some((function(e){return e.hasCustomizableLayersWithCropImage()}))}function hasCustomizableTextLayerGraphicError(e,t){return null==t?void 0:t.map((function(t){return h(e,t)})).some((function(e){return e.hasCustomizableLayersWithColorGraphicText()}))}function hasCustomizableTextLayerArcError(e,t){return null==t?void 0:t.map((function(t){return h(e,t)})).some((function(e){return e.hasCustomizableLayersWithArcText()}))}function hasCustomizableTextLayerError(e,t){return null==t?void 0:t.map((function(t){return h(e,t)})).some((function(e){return e.hasCustomizableLayersWithMultiLineText()}))}function u(e,t){var i=e.getPlacementIdsHavingFiles().concat(t.getPlacementIdsWithDesign());i=i.filter((function(e,t,i){return i.indexOf(e)===t}));var n=[r.a.TYPE_LABEL_INSIDE,r.a.TYPE_LABEL_OUTSIDE,r.a.TYPE_HANG_TAG];for(var a in i)if(i.hasOwnProperty(a)&&-1===n.indexOf(i[a]))return!1;return!0}function h(e,t){return null==e?void 0:e.getUserTemplate(null==t?void 0:t.placementId,null==t?void 0:t.templateId)}function p(e,t,i,r){var c=new a.a,d={};if(d[o.a.EMBROIDERY_LAYERS_OVERLAPPING]=!1,d[o.a.EMBROIDERY_OUT_OF_BOUNDS]=!1,d[o.a.EMBROIDERY_TEXT_TOO_SMALL]=!1,d[o.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT]=!1,r!==n.a.TYPE_EMBROIDERY)return!1;for(var u in i){var p=h(t,i[u]);if(p.technique===n.a.TECHNIQUE_EMBROIDERY)for(var g in c.setActivePlacement(p.placementId),p.areLayersOverlapping({layerTypeInstances:[s.a,l.a]})&&(d[o.a.EMBROIDERY_LAYERS_OVERLAPPING]=!0),p.layers){var f=p.layers[g];f.isTextLayerPartiallyOutOfBounds()&&(d[o.a.EMBROIDERY_OUT_OF_BOUNDS]=!0),c.setActiveLayer(f).isTextSizeValid()||(d[o.a.EMBROIDERY_TEXT_TOO_SMALL]=!0),c.setActiveLayer(f).isTextHeightOverUpperLimit()&&(d[o.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT]=!0)}}return!!d.hasOwnProperty(e)&&d[e]}function g(e,t,i,n){if(void 0===c.a.TECHNIQUE_DEPENDENT_VALIDATION[n]||-1===c.a.TECHNIQUE_DEPENDENT_VALIDATION[n].indexOf(e))return!1;var r=new a.a,s={};for(var l in i){var u=h(t,i[l]);for(var p in Object(d.a)(u)&&(s[o.a.ENGRAVING_LAYERS_OVERLAPPING]=!0),u.layers){var g=u.layers[p];g.isPartiallyOutOfBounds()&&(s[o.a.LAYER_OUT_OF_BOUNDS]=!0),r.setActiveLayer(g).isTextSizeValid()||(s[o.a.LAYER_TEXT_TOO_SMALL]=!0),r.setActiveLayer(g).isClipartSizeValid()||(s[o.a.LAYER_CLIPART_TOO_SMALL]=!0)}}return!!s.hasOwnProperty(e)&&s[e]}},"2+PC":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({values:[],allValues:[],selectedValues:[],selectedLimit:0,canDeselectLast:!0,pickerTitle:"",onChangedCallback:null,isPopoverEnabled:!1,getSelectedSizes:null,productId:null,isSizeGuideVisible:!1,designData:null,isSizeNodeTitleVisible:!0,disabledSizes:[],translatedSizes:null});n.POPOVER={DISCONTINUED:{TITLE:lang("Discontinued"),DESC:dlang("generator","Sorry, this size and color combination is discontinued. Please choose a different size and color combination."),DESC_SIZE_ONLY:dlang("generator","Sorry, this size is discontinued. Please choose a different size."),DESC_COLOR_ONLY:dlang("generator","Sorry, this color is discontinued. Please choose a different color.")},REGION:{TITLE:dlang("site","Fulfilled in {region}"),DESC:dlang("generator","Ships to locations worldwide")},UNAVAILABLE:{TITLE:lang("Out of stock"),DESC:dlang("generator","Sorry, this size and color combination is out of stock. Please choose a different size and color combination."),DESC_SIZE_ONLY:dlang("generator","Sorry, this size is out of stock. Please choose a different size"),DESC_COLOR_ONLY:dlang("generator","Sorry, this color is out of stock. Please choose a different color.")},SAMPLE:{TITLE:dlang("generator","Not available as sample"),DESC:dlang("generator","You can place it as a basic order")},DSR_LIMITED:{DESC_COLOR:dlang("products","Adjust your {linkStart} default selling preferences {linkEnd} to choose this color"),DESC_SIZE:dlang("products","Adjust your {linkStart} default selling preferences {linkEnd} to choose this size")}},window&&((globalThis||{}).PFProductPushPickersParams=n)},"2BaQ":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("n5ho"),r=Class({_variants:[],_availableVariantIds:[],__construct:function(e,t){this._availableVariantIds=e,this._variants=t},getUnavailableSampleSizes:function(){var e=[];if(0===this._availableVariantIds.length)return e;for(var t in this._variants)this._availableVariantIds.indexOf(this._variants[t].variantId)>-1||e.push(this._variants[t].size);return e},isAvailableVariant:function(e){return 0===this._availableVariantIds.length||this._availableVariantIds.indexOf(e.variantId)>-1}});r.isAvailableSyncVariant=function(e,t,i){return!i||t!==n.a.ID_CUSTOM_PRODUCT&&(0===e.length||e.indexOf(t)>-1)},r.containsDisallowedVariants=function(e,t){var i=e.product.availableSampleVariants;if(0===i.length)return!1;var n=t.variantMapping,r=e.sizes,a=[];for(var o in n)r.indexOf(n[o].size)>-1&&a.push(n[o].variantId);for(var s in a)if(!(i.indexOf(a[s])>-1))return!0;return!1},r.canBeSampleOrder=function(e){return e.generatorVariants.length<=PF.Customer.sampleItems||PF.Customer.sampleOrdersTotal<=0},(globalThis||{}).PFVariantPickerSampleVariantAvailability=r},"2Zm2":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("6JZw"),r=function(){};r.prototype=new n.a,r.prototype.toArrayKeys=["priceKey","retailPrice","title"],r.prototype.priceKey=null,r.prototype.retailPrice=null,r.prototype.title=null,window&&((globalThis||{}).PFItemsBaseGeneratorPriceItem=r)},"2dYE":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({all:0,notAdded:0,added:0,failed:0});r.fromArray=function(e){var t=r;return n.a.O2O(t,e),t},r.TYPE_ALL="all",r.TYPE_NOT_ADDED="notAdded",r.TYPE_ADDED="added",r.TYPE_FAILED="failed",r.types={},r.types[r.TYPE_ALL]=lang("All"),r.types[r.TYPE_NOT_ADDED]=lang("Not added"),r.types[r.TYPE_ADDED]=lang("Added"),r.types[r.TYPE_FAILED]=lang("Failed"),r.COUNT_PUSHABLE=100,r.AMOUNT_UNKNOWN=-1,window&&((globalThis||{}).PFProductPushSyncedProductCounts=r)},"2el7":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(){};n.prototype.storeId=null,n.prototype.orderType=null,n.prototype.categoryId=null,n.prototype.productId=null,n.prototype.productTemplateId=null,n.prototype.productSize=null,n.prototype.productColor=!1,n.prototype.productTechnique="",n.prototype.productRegion=null,n.prototype.requireLogin=!1,n.prototype.ref="",n.prototype.allowStoresWithAvailableProductId=null,n.prototype.allowStoresWithAvailableVariantId=null,(globalThis||{}).PFOrderBeginPar=n},"2ovl":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("edgZ"),r=Class({_filesByPlacement:{},addFile:function(e,t){var i=this.getFiles(e);i.push(t),this._filesByPlacement[e.id]=i},removeFile:function(e,t){var i=this.getFiles(e);for(var n in i)if(i[n].fileId==t.fileId)return i.splice(n,1),void(this._filesByPlacement[e.id]=i)},getFiles:function(e){return this._filesByPlacement[e.id]||[]},getFileIdsByPlacement:function(){var e={};for(var t in this._filesByPlacement){e[t]=e[t]||[];var i=this.getFiles({id:t});for(var n in i)e[t].push(i[n].fileId)}return e},hasFiles:function(e){return console.error("Should switch to template usage in hasFiles()"),this.getFiles(e).length>0}});window&&((globalThis||{}).PFProductPushPlacementFiles=r);var a=i("Ii6r"),o=i("bRD6"),s=i("Jkv8");function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}var c=Class({placementFiles:{},_templates:{},productId:0,_storageTemplatesKey:"mockupGeneratorTemplates",_storagePlacementFilesKey:"mockupGeneratorPlacementFiles",_storage:null,__construct:function(e){this._productId=e;try{this._storage=window.sessionStorage}catch(e){console.log("Session storage not supported!")}},loadFromStorage:function(e){var t=this._storage.getItem(this._storageTemplatesKey);if(this._storage.removeItem(this._storageTemplatesKey),t){var i=JSON.parse(t);if(i=i[this._productId]){var r={};for(var a in i){var o=i[a];for(var s in o.layers){var l=o.layers[s];r[l.fileId]=l.fileId}}(new n.a).getByIds(Object.keys(r),this._onFilesLoaded.bind(this,i,e),!1)}}},_onFilesLoaded:function(e,t){var i,n=this;return(i=regeneratorRuntime.mark((function i(){var r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(s.setPFCanvasFonts)();case 2:for(r in n._templates={},e)n._templates[r]=o.a.fromArray(e[r]);a=n._getPlacementFiles(),n._storage.removeItem(n._storagePlacementFilesKey),t(n._templates,a);case 7:case"end":return i.stop()}}),i)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))})()},rememberTemplates:function(e){this._templates=e.templates,this._placementFiles=e.filesIdsByPlacement,this._savePlacementFilesToStorage(),this._saveTemplatesToStorage()},_savePlacementFilesToStorage:function(){var e={};if(e[this._productId]=[],this._placementFiles){e[this._productId]=this._placementFiles;try{this._storage.setItem(this._storagePlacementFilesKey,JSON.stringify(e))}catch(e){this._showAlert()}}},_saveTemplatesToStorage:function(){var e=[],t={};if(t[this._productId]=[],!$.isEmptyObject(this._templates)){for(var i in this._templates)e.push(this._templates[i].toArray());t[this._productId]=e;try{this._storage.setItem(this._storageTemplatesKey,JSON.stringify(t))}catch(e){this._showAlert()}}},_getPlacementFiles:function(){var e=new r,t=this._storage.getItem(this._storagePlacementFilesKey),i=(JSON.parse(t)||{})[this._productId];for(var o in i)for(var s in i[o]){var l=new a.a;l.id=o,e.addFile(l,(new n.a).getCachedFile(i[o][s]))}return e},_clearStorage:function(){try{this._storage.setItem(this._storageTemplatesKey,JSON.stringify({})),this._storage.setItem(this._storagePlacementFilesKey,JSON.stringify({}))}catch(e){this._showAlert()}},hasPositions:function(){var e=this._storage.getItem(this._storageTemplatesKey);if(e&&JSON.parse(e)[this._productId])return!0;return!1},_showAlert:function(){alert(dlang("generator","You are in a Private/Incognito Mode. It does not support storing settings locally."))}});c._KEY_DESIGN_CACHED_IN_SESSION="designCachedInSession",c.setDesignCachedInSession=function(){try{window.sessionStorage.setItem(c._KEY_DESIGN_CACHED_IN_SESSION,"true")}catch(e){console.log("Session storage not supported!")}},c.isDesignCachedInSession=function(){try{return!!PF.Customer.isLogged()&&window.sessionStorage.getItem(c._KEY_DESIGN_CACHED_IN_SESSION)}catch(e){return console.log("Session storage not supported!"),!1}},c.unsetDesignCachedInSession=function(){try{c.isDesignCachedInSession()&&window.sessionStorage.removeItem(c._KEY_DESIGN_CACHED_IN_SESSION)}catch(e){console.log("Session storage not supported!")}},(globalThis||{}).PFMockupGeneratorMemory=c},"3Dht":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({title:"",value:"",className:"",isVisible:!0,onValueChanged:null,onSlide:null,minValue:null,maxValue:null,incrementStep:.01,defaultValue:0,fractionDigits:2,hasNumberInput:null,showNewBadge:null});window&&((globalThis||{}).PFFormsRangePar=n)},"3R2j":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=function(e){var t;if(this.selected={},this.par=e,e.selectedValues)for(t in e.selectedValues)this.selected[e.selectedValues[t]]=e.selectedValues[t];this.enableSearchAt=e.enableSearchAt||12,this.searchItemBuffer=void 0!==e.searchItemBuffer?e.searchItemBuffer:4,this.onChangeCallback=e.onChange,this.node=Object(n.a)({tag:"div",className:"checkbox-list",els:[{tag:"div",className:"checkbox-list__header",onclick:$.proxy(this.toggleItems,this),els:[{tag:"b",text:e.header||" "},this.nodeClear=Object(n.a)({tag:"a",className:"pf-link pull-right",text:clang("clear checkbox filters","Clear"),onclick:$.proxy(this.clear,this)})]},this.nodeSearch=Object(n.a)({tag:"input",type:"text",className:"checkbox-list__search form-control hidden",attr:{placeholder:lang("Searchâ€¦")},prop:{onkeyup:$.proxy(this.onSearchKeyUp,this)}}),this.nodeItems=Object(n.a)({tag:"div",className:"checkbox-list__items"})]});var i=[];for(t in e.items){var r=e.items[t];r&&("string"==typeof r&&(r={value:r,text:r}),i.push(r))}this.setItems(i)};r.prototype=new n.a.Base,r.prototype.items=null,r.prototype.selected=null,r.prototype.toggleItems=function(){$(this.node).toggleClass("checkbox-list--expanded")},r.prototype.renderItems=function(){n.a.clearNode(this.nodeItems);var e=this.items.slice();if(this.nodeSearch){var t=$.trim(this.nodeSearch.value.toLowerCase());e=e.filter((function(e){return e.text.toLowerCase().indexOf(t)>-1}))}for(var i in e){var r=e[i],a=!1;void 0===r.isActive||r.isActive||this.selected[r.value]||(a=!0);var o=!!this.selected[r.value];tag("div","checkbox",[tag("label",a?"pf-text-muted":"",[tag("input",{type:"checkbox",prop:{onchange:this.selectValue.bind(this,r.value),checked:o,disabled:a},style:{marginTop:"5px"}}),r.text])]).append(this.nodeItems)}this.checkUI(e.length)},r.prototype.checkUI=function(e){n.a.addClassName(this.nodeClear,"hidden"),n.a.addClassName(this.nodeSearch,"hidden"),this.enableSearchAt>0&&this.items.length>this.enableSearchAt&&(n.a.removeClassName(this.nodeSearch,"hidden"),this.nodeItems.style.height="auto",e>this.enableSearchAt+this.searchItemBuffer&&(this.nodeItems.style.height=25*this.enableSearchAt+"px")),this.getSelected().length&&n.a.removeClassName(this.nodeClear,"hidden")},r.prototype.setItems=function(e){this.items=e.filter((function(e){return null!==e.text&&void 0!==e.text})).map((function(e){var t=e.text.replace(/\s?\/\s?/g," / ").split(" ");return"Bulk discount"===e.text?e.text=t.map((function(e){return e.charAt(0)+e.substring(1)})).join(" "):e.text.includes("cm")?e.text=t.map((function(e){return e.charAt(0).toLowerCase()+e.substring(1).toLowerCase()})).join(" "):"shouldCapitalize"in e&&!e.shouldCapitalize||(e.text=t.map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" ")),e})),this.renderItems()},r.prototype.getSelected=function(){var e=[];for(var t in this.items){var i=this.items[t];this.selected[i.value]&&e.push(i.value)}return e},r.prototype.getSelectedItems=function(){return this.items.filter((function(e){return this.selected[e.value]}),this)},r.prototype.selectValue=function(e){this.selected[e]?delete this.selected[e]:this.par.isSingleSelect?(this.selected={},this.selected[e]=e):this.selected[e]=e,this.renderItems(),this.onChanged()},r.prototype.clear=function(e){return this.selected={},this.nodeSearch.value="",this.renderItems(),this.onChanged(),e.preventDefault(),e.stopImmediatePropagation(),!1},r.prototype.onChanged=function(){this.onChangeCallback?this.onChangeCallback(this.getSelected()):console.info("No onChangeCallback defined for checkbox list! ",this.getSelected())},r.prototype.onSearchKeyUp=function(e){27==e.keyCode&&(this.nodeSearch.value=""),this.renderItems()},r.prototype.disableItem=function(e){var t=[];this.items.map((function(i){i.value===e&&(i.isInactive=!0),t.push(i)})),this.items=t,this.renderItems()},window&&((globalThis||{}).PFComponentsCheckboxList=r)},"3Vk9":function(e,t,i){"use strict";i.d(t,"f",(function(){return a})),i.d(t,"g",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return c})),i.d(t,"e",(function(){return d})),i.d(t,"c",(function(){return u}));var n=i("Zwo4"),r="".concat(n.a,"/colorGraphics"),a="m_putColorGraphicItemsIntoRepo",o="m_setHasLoadedAllColorGraphics",s="g_hasLoadedAllColorGraphics",l="g_getColorGraphicItems",c="a_allActiveColorGraphicItems",d="a_loadColorGraphics",u=function(e){return"".concat(r,"/").concat(e)}},"3oUi":function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return s})),i.d(t,"e",(function(){return l})),i.d(t,"g",(function(){return c})),i.d(t,"j",(function(){return d})),i.d(t,"d",(function(){return u})),i.d(t,"c",(function(){return h})),i.d(t,"l",(function(){return p})),i.d(t,"h",(function(){return g})),i.d(t,"m",(function(){return f})),i.d(t,"i",(function(){return _})),i.d(t,"f",(function(){return m})),i.d(t,"k",(function(){return v}));var n=i("ehgC"),r=i("LvDl"),a=i.n(r),o="option_gender_unisex",s=Object.freeze([{value:o,title:clang("Gender picker","Unisex")},{value:"option_gender_male",title:clang("Gender picker","Men")},{value:"option_gender_female",title:clang("Gender picker","Women")}]),l=Object.freeze([n.a.TYPE_EBAY,n.a.TYPE_BONANZA,n.a.TYPE_ETSY]);function c(e){var t=a.a.includes([n.a.TYPE_AMAZON,n.a.TYPE_WEEBLY,n.a.TYPE_NATIVE,n.a.TYPE_API_3DCART,n.a.TYPE_API_LAUNCHCART,n.a.TYPE_WISH,n.a.TYPE_WIX,n.a.TYPE_WEBFLOW,n.a.TYPE_BIGCARTEL,n.a.TYPE_SQUARESPACE],e.store.type);return e.product&&e.product.sizeGuide&&(null==e?void 0:e.product.hasSizeGuide)&&!t}function d(e){return c(e)&&(null==e?void 0:e.product.newSizeGuide)&&(null==e?void 0:e.store.supportsAdvancedSizeGuide())}var u="metric",h="imperial";function p(e){if(localStorage&&!a.a.isEmpty(e))try{localStorage.setItem("pushGeneratorTags",e)}catch(e){console.log("Local storage not supported")}}function g(){try{return localStorage.getItem("pushGeneratorTags")}catch(e){return null}}function f(e){try{localStorage.setItem("sizeGuideSettings",JSON.stringify(e))}catch(e){console.log("Local storage not supported")}}function _(){try{var e=localStorage.getItem("sizeGuideSettings");if(e)return JSON.parse(e)}catch(e){console.log("Local storage not supported")}return null}function m(e){return a.a.includes(Object.freeze([n.a.TYPE_ETSY,n.a.TYPE_SHOPIFY]),e)}function v(e){return[n.a.TYPE_BIGCOMMERCE,n.a.TYPE_SHOPIFY,n.a.TYPE_ETSY].includes(e)}},"46ud":function(e,t,i){"use strict";var n;function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"f",(function(){return a})),i.d(t,"g",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"c",(function(){return l})),i.d(t,"e",(function(){return c})),i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return u})),i.d(t,"h",(function(){return h}));var a=Object.freeze({generator:1,library:2,embedded:3}),o=Object.freeze({default:1,small:2}),s=Object.freeze({CREATED_DATE_DESC:"CREATED_DATE_DESC",CREATED_DATE_ASC:"CREATED_DATE_ASC",NAME_DESC:"NAME_DESC",NAME_ASC:"NAME_ASC",SEARCH_RELEVANCE_DESC:"SEARCH_RELEVANCE_DESC"}),l=Object.freeze({CREATED_DATE_DESC:"CREATED_DATE_DESC",CREATED_DATE_ASC:"CREATED_DATE_ASC",NAME_DESC:"NAME_DESC",NAME_ASC:"NAME_ASC"}),c=Object.freeze((r(n={},s.CREATED_DATE_DESC,dclang("dashboard","sort type","Created: newest first")),r(n,s.CREATED_DATE_ASC,dclang("dashboard","sort type","Created: oldest first")),r(n,s.NAME_ASC,dclang("dashboard","sort type","Name: A to Z")),r(n,s.NAME_DESC,dclang("dashboard","sort type","Name: Z to A")),r(n,s.SEARCH_RELEVANCE_DESC,dclang("dashboard","sort type","Relevance: higher first")),n)),d=7,u={custom:{"folder-name":{required:dlang("library","The {field} is required").replace("{field}",dlang("library","Folder name")),min:dlang("library","The {field} must be at least {count} characters").replace("{field}",dlang("library","Folder name")).replace("{count}",3),max:dlang("library","The {field} may not be greater than {count} characters").replace("{field}",dlang("library","Folder name")).replace("{count}",64)}}};function h(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i={colSize:"col-12 col-sm-6 col-md-4 col-lg-3",innerColumns:[{height:t,colSize:"col-12"}]},n=e||1,r=[],a=0;a<n;a++)r.push(i);return{rows:[{columns:r}]}}},"4CFC":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return o}));var n=i("4Ru2");function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e){var t;return(r(t={},n.a.REGION_EUROPE,lang("Europe")),r(t,n.a.REGION_MEXICO,lang("Mexico")),r(t,n.a.REGION_USA,lang("USA")),r(t,n.a.REGION_JAPAN,lang("Japan")),r(t,n.a.REGION_EUROPE_SPAIN,lang("Europe/Spain")),r(t,n.a.REGION_EUROPE_LATVIA,lang("Europe/Latvia")),r(t,n.a.REGION_AUSTRALIA,lang("Australia")),r(t,n.a.REGION_CANADA,lang("Canada")),t)[e]||e}function o(e){var t;return(r(t={},n.a.REGION_EUROPE_ABBREVIATION,clang("European Union","EU")),r(t,n.a.REGION_MEXICO_ABBREVIATION,clang("Mexico","MEX")),r(t,n.a.REGION_USA_ABBREVIATION,lang("USA")),r(t,n.a.REGION_AUSTRALIA_ABBREVIATION,clang("Australia","AU")),r(t,n.a.REGION_JAPAN_ABBREVIATION,lang("JP")),r(t,n.a.REGION_CANADA_ABBREVIATION,clang("Canada","CA")),t)[e]||e}},"4Vs6":function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return r}));var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"techniques",[]),n(this,"hasNewPlacement",!1),n(this,"activeValue",""),n(this,"callback",null),n(this,"isGenerator",!1),n(this,"isMockupGenerator",!1),n(this,"isPolyPro",!1),n(this,"regions",[]),n(this,"useStrictRegionCheck",!0)};window&&((globalThis||{}).PFVariantPickerTechniquePickerPar=r)},"5OoY":function(e,t,i){"use strict";i.d(t,"a",(function(){return Ue}));var n=i("TbQS"),r=i("A9n+"),a=i("2el7"),o=i("bXkz"),s=i("+tIB"),l=i("8qnk"),c=i("HmCv"),d=i("L8zU"),u=i("ZPm7"),h=i("bGr9"),p=i("o0qH"),g={fetchSizesFromVariants:function(e){var t=[];for(var i in e){var n=e[i];n.size&&-1===t.indexOf(n.size)&&t.push(n.size)}return t}};(globalThis||{}).PFUtilsSizes=g;var f=i("md/F"),_=i("vUhP"),m=i("g357"),v=i("AUjr"),y=i("oi7h"),b=i("X5Ic"),P=i("4Vs6"),C=i("sjGI"),T=i("4Ru2"),I=i("83UL"),w=i("6t3j"),S=i("SBaP"),E=i("Yh49"),k=i("cCrT"),O=i("PPGU");function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=M(e);if(t){var r=M(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return x(this,i)}}function x(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?F(e):t}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function V(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function j(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var U=new WeakMap,z=new WeakMap,G=new WeakMap,H=new WeakMap,Y=new WeakMap,q=new WeakMap,W=new WeakMap,K=new WeakMap,Z=new WeakSet,Q=new WeakSet,X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(a,e);var t,i,n,r=R(a);function a(e){var t;return L(this,a),t=r.call(this),Q.add(F(t)),Z.add(F(t)),U.set(F(t),{writable:!0,value:null}),z.set(F(t),{writable:!0,value:null}),G.set(F(t),{writable:!0,value:null}),H.set(F(t),{writable:!0,value:null}),Y.set(F(t),{writable:!0,value:null}),q.set(F(t),{writable:!0,value:null}),W.set(F(t),{writable:!0,value:null}),K.set(F(t),{writable:!0,value:!0}),t.node=tag("div"),j(F(t),U,e),j(F(t),G,I.a.getFilteredAvailableRegions(V(F(t),U).regionData)),j(F(t),z,V(F(t),U).variants),j(F(t),H,V(F(t),U).onChanged),j(F(t),q,new k.a),j(F(t),K,V(F(t),U).shouldShowAvailabilityInfo),B(F(t),Z,J).call(F(t)),t}return t=a,(i=[{key:"setActiveRegion",value:function(e,t){V(this,Y).isVariantAvailableInRegion(t,e)||(e=T.a.DEFAULT_REGION),-1===V(this,Y).getActiveItems().indexOf(e)&&(e=V(this,Y).getFirstActiveItem()),V(this,Y).setRegion(e),j(this,W,e)}},{key:"getValueCount",value:function(){return V(this,Y).getSelectedRegionsCount()}},{key:"isValuePicked",value:function(){return!!this.getRegion()}},{key:"getRegion",value:function(){return V(this,Y).getActiveValue()}},{key:"getMatchingVariants",value:function(){if(!this.getRegion())return V(this,z);for(var e=[],t=0;t<V(this,z).length;t++){var i=V(this,z)[t];V(this,Y).isVariantAvailableInSelectedRegions(i.variantId)&&e.push(i)}return e&&e.sort(f.a.variantSortingBySizeCallback),e||[]}},{key:"getAllVariants",value:function(){return V(this,z).slice()}}])&&N(t.prototype,i),n&&N(t,n),a}(S.a),J=function(){var e=null;V(this,G).allowedSellingRegions&&(e=V(this,G).allowedSellingRegions.slice()),j(this,Y,new E.a(new E.b({regionData:V(this,G),activeValue:e,onChanged:B(this,Q,ee).bind(this),shouldShowAvailabilityInfo:V(this,K),shouldLimitPickableRegionCount:V(this,U).shouldLimitPickableRegionCount}))),V(this,Y).node.append(this.node),V(this,G).allowedSellingRegions||Object(O.a)(V(this,q),V(this,Y),V(this,z)[0].productId)},ee=function(e){V(this,Y).getInactiveItems().indexOf(e)>-1&&(e=V(this,Y).getFirstActiveRegion()),j(this,W,e),(new w.a).setLastActiveRegion(e),V(this,Y).hasSelectedValuesHaveInactiveRegions()||V(this,H).call(this,e)},te=function e(t){var i=t.variants,n=void 0===i?null:i,r=t.regionData,a=void 0===r?null:r,o=t.onChanged,s=void 0===o?null:o,l=t.shouldShowAvailabilityInfo,c=void 0===l||l,d=t.shouldLimitPickableRegionCount,u=void 0===d||d;L(this,e),this.variants=n,this.regionData=a,this.onChanged=s,this.shouldShowAvailabilityInfo=c,this.shouldLimitPickableRegionCount=u},ie=i("VpOd"),ne=i("9eNC"),re=i("nF4n"),ae=i("wy2R"),oe=i.n(ae),se=i("sEfC"),le=i.n(se),ce=i("9Nv7"),de=i("cM6b"),ue=i("FlQy"),he=i("YBfo"),pe=i("SaSb"),ge=i("Op/+"),fe=i("N6Gp"),_e=i("GGNF"),me=i("NhST"),ve=i("Kiz0"),ye=i("D5LZ"),be=i("x0He");function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Oe(e);if(t){var r=Oe(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ee(this,i)}}function Ee(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?ke(e):t}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function Le(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var Ne=new WeakMap,De=new WeakMap,Re=new WeakSet,xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(a,e);var t,i,n,r=Se(a);function a(e){var t;return Te(this,a),t=r.call(this),Re.add(ke(t)),Ne.set(ke(t),{writable:!0,value:void 0}),De.set(ke(t),{writable:!0,value:void 0}),t.node=tag("div","favorites-button-mke"),Le(ke(t),Ne,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(ke(t),Re,Fe).call(ke(t)),t}return t=a,(i=[{key:"destroy",value:function(){Ae(this,De).destroy(),Le(this,De,null)}}])&&Ie(t.prototype,i),n&&Ie(t,n),a}(S.a),Fe=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new be.b).components={"favorites-button":function(){return i.e(230).then(i.bind(null,"gMDh"))}},t.template='\n            <favorites-button\n                :is-favorite="isFavorite"\n                :is-text="isText"\n                @on-click="emitEvent(\'onClick\', $event)"\n            />\n        ',t.initialData={isFavorite:Ae(this,Ne).isFavorite,isText:Ae(this,Ne).isText},t.emitEvent=function(e,t){"onClick"===e&&(Ae(n,Ne).onClick&&Ae(n,Ne).onClick(),Ae(n,De).updateData({isFavorite:t}))},Le(this,De,new be.a(t)),Ae(this,De).append(this.node);case 7:case"end":return e.stop()}}),e,this)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Ce(a,n,r,o,s,"next",e)}function s(e){Ce(a,n,r,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),Me=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Te(this,e),this.isFavorite=t.isFavorite||!1,this.isText=t.isText||!1,this.onClick=t.onClick||void 0},Be=i("Y6pR"),Ve=i("BkRI"),je=i.n(Ve),Ue=Class({productData:null,variant:null,_sizePicker:null,_regionPicker:null,_techniquePicker:null,_latestOrderNode:null,regionData:null,_colorPicker:null,_variantAvailability:null,_isRegionUnavailable:!1,_isUpdatingPickers:!1,_estimatedDeliveryNode:null,_correspondingProductNode:"",_topOffset:0,sellingRegionSettings:null,_getTechniqueFromMemory:!1,_debounceVisibilityChangesCallback:function(){},__construct:function(e,t,i,a){var o,s=this;this.productData=e,this.regionData=e.regions,this.sellingRegionSettings=null,this.productData.sellingRegionSettings&&(this.sellingRegionSettings=ye.b.fromArray(this.productData.sellingRegionSettings)),this._onVariantChanged=t,this._variantAvailability=new h.a(this.productData.variants);var l=null;this.productData.product.fulfillmentDays&&(l=Math.round(10*this.productData.product.fulfillmentDays)/10);var d=this.getPriceListNode();this._nodePriceList=new v.a(this.productData.product),this._colorPicker=new u.a(this.productData.variants,this._onColorPicked,this.productData.product.productId,"pf-mb-24"),this._productFeatureNode=this.productData.product.isSterlingSilver?Object(re.b)("div","products-pricing-info__feature-tag pf-h5",[dclang("products","Product feature","Sterling Silver")]):"";var p=this.productData.product.availableTechniques||[];this._regionPicker=new X(new te({variants:this.productData.variants,regionData:this.productData.getRegionVariants(),onChanged:this._onRegionChanged.bind(this),shouldShowAvailabilityInfo:!this.productData.product.isAdidas(),shouldLimitPickableRegionCount:!p.includes(b.a.TYPE_EMBROIDERY)}));var g=Object(re.b)("div");if(this.node=Object(re.b)("div","pf-ui-body",[this._mobileReferenceNode=Object(re.b)("div","catalog__product__sticky-reference"),this._productFeatureNode,this._fullTitleNode=Object(re.b)("div","pf-mb-8 pf-d-flex pf-flex-column pf-flex-xs-row",[Object(re.b)("h1","pf-h3 pf-my-0 pf-mr-16",[this.productData.product.getFullTitle()])]),_.a.createPeriodicPriceDiscountAnnouncement(this.productData.product.priceRange,!0,"pf-mb-16 pf-mt-8"),Object(re.b)("div","pf-mb-24",[new r.a.getReviewRatingNode(new n.a(this.productData.product),!1,i,a)]),this.productData.product.isPersonalUseBrand()?Object(re.b)("div","pf-mb-24",[Object(re.b)("strong",null,lang("Availability")+":"),Object(re.b)("p",{className:"pf-text-muted pf-ui-caption",innerHTML:dclang("products","availability","This product can only be ordered for personal use in the US. You can't resell it because of brand restrictions.")})]):"",Object(re.b)("div","pf-mb-8",[this._dsrSettingsApplied()?Object(re.b)("p","pf-ui-body",dlang("dashboard","Available product customization based on your selling region and preferences")):this._regionPicker]),this.productData.isFulfilledAtPartnerFacility?Object(re.b)("div","pf-mt-16 pf-mb-24",[Object(re.b)("img",{src:"/static/images/custom-products/cardbox-checkbox.svg",style:{width:"36px",height:"36px"}}),Object(re.b)("span","pf-ml-8",clang("partner facility note","Fulfilled at our partner facility"))]):"",this._getPackinsBadge(),g,this.polyProInfoNode=this.productData.product.isPolyPro?this._getPolyProInfoNode():"",Object(re.b)("div","",[this._colorPicker]),this._nodeSizePicker=Object(re.b)("div","",[this._sizePicker=this._getSizePicker()]),Object(re.b)("div","row pf-bg-lighter no-gutters pf-mb-12",[Object(re.b)("div","col-6 pf-p-12",[Object(re.b)("div","",[Object(re.b)("div","pf-h5 pf-mb-2",[dlang("products","Price"),Object(re.b)("b","products-pricing-info__red",["*"])]),d,this._originalPriceNode=Object(re.b)("div","pf-mt-16",[this._nodePrice=Object(re.b)("div","pf-mb-sm-16 pf-mb-24 pf-h3")])])]),this._estimatedDeliveryNode=Object(re.b)("div","col-6 pf-p-12")]),this._referenceNode=Object(re.b)("div","catalog__product__sticky-reference"),this._originalNode=Object(re.b)("div"),this._nodeWarning=Object(re.b)("div"),ie.a.getPeriodicPriceCountdownFromPriceRange({priceRange:this.productData.product.priceRange,showTopTriangle:!0,customBlockClass:"pf-py-12",containerClass:"pf-mb-16 products-pricing-info__discount-countdown"}),this._buttonNode=Object(re.b)("div","row pf-mb-24 pf-p-12 pf-p-sm-0 catalog__product__buttons catalog__product__sticky-button-hidden",[this._orderButtons=this._getOrderButtons()]),this._stickyBlock=Object(re.b)("div","pf-d-flex catalog__product__sticky-bottom"),null!==l?Object(re.b)("div","catalog__product__shipping-container pf-mb-24",[Object(re.b)("div","pf-text-muted",[Object(re.b)("span",{innerHTML:dclang("products","fulfillment","Ready in")+" ({url})".replace("{url}",Object(re.b)("a",{className:"pf-link",href:langUrl("/faq/shipping-packaging-fulfillment/192-how-long-is-fulfillment-time-"),text:dclang("products","fulfillment","avg fulfillment"),attr:{target:"_blank"}}).outerHTML)+": "}),Object(re.b)("strong","",dnclang("products","fulfillment","{days} business day","{days} business days",Math.floor(l)).replace("{days}",l))])]):"",this._latestOrderNode=Object(re.b)("div"),this._correspondingProductNode=null!==(o=this.productData.product.correspondingProductDetails)&&void 0!==o&&o.productId?Object(re.b)("div",{id:"corresponding-product",className:"pf-my-16 pf-d-none"}):"",this._nodePriceList]),_e.a.isFavoriteProductsEnabled().then((function(e){if(e){var t=new Me;t.isFavorite=s.productData.isFavorite,t.isText=!1,t.onClick=s.openFavoritesLink;var i=new xe(t);Object(re.b)("div","pf-d-none pf-d-sm-flex pf-justify-content-center pf-flex-column",[i]).append(s._fullTitleNode)}})),$("i",this.node).tooltip(),this.productData.activeVariant&&!this.productData.activeVariant.isTemporaryOutOfStock)this._setVariant(this.productData.activeVariant);else{var f=null,m=new k.a;(m.query.color||m.query.size)&&(f=this._findVariant(m.query.color,m.query.size)),f||(f=this._getVariantForPreSelect()),f&&this._setVariant(f)}if(this._setUnavailableSizes(),this._setUnavailableColors(),this._getLatestOrderFrom(),this._onSomethingChanged(!1),this._handleStickyElements(),this._getTechniques().length>1){var y=new P.a;y.techniques=this._getTechniques(),y.hasNewPlacement=this.productData.product.hasNewPlacement,y.activeValue=this._getActiveTechnique(),y.callback=this._onTechniquePicked,y.isPolyPro=this.productData.product.isPolyPro,y.regions=this._regionPicker.getRegion(),y.useStrictRegionCheck=!this.regionData.allowedSellingRegions,this._techniquePicker=new c.a(y),this._techniquePicker.append(g)}ne.n(Ue.EVENT_VARIANT_COLOR_CHANGED,this._onVariantPickerVariantChanged)},_handleStickyElements:function(){this._isMobileWidth()?(this._changeStickyMobileButton(),this._debounceVisibilityChanges(this._mobileReferenceNode,this._changeStickyMobileButton)):(this._attachStickyPriceNode(),this._debounceVisibilityChanges(this._referenceNode,this._attachStickyPriceNode),this._topOffset=62)},_debounceVisibilityChanges:function(e,t){var i=this;this._debounceVisibilityChangesCallback=le()((function(){return i.onVisibilityChange(e,t)()}),50),["DOMContentLoaded","load ","resize","scroll"].forEach((function(e){return window.addEventListener(e,i._debounceVisibilityChangesCallback)})),ne.m(ne.a,this._removeDebounceVisibilityChanges),ne.n(ne.a,this._removeDebounceVisibilityChanges)},_removeDebounceVisibilityChanges:function(){var e=this,t=document.querySelector(".catalog__product__sticky-top");t&&t.remove(),["DOMContentLoaded","load ","resize","scroll"].forEach((function(t){return window.removeEventListener(t,e._debounceVisibilityChangesCallback)}))},_changeStickyMobileButton:function(){var e="catalog__product__sticky-button-hidden";this.isElementAboveOrInViewport(this._mobileReferenceNode)?re.a.removeClassName(this._buttonNode,e):re.a.hasClassName(this._buttonNode,e)||re.a.addClassName(this._buttonNode,e)},_attachStickyPriceNode:function(){var e=this,t="",i="";this._isTopSticky()?this._attachStickyButtonToTop():this._isBottomSticky()?(i=this._buttonNode.className,t=this._nodePrice.className,this._attachStickyButtonToBottom()):re.a.hasClassName(this._stickyBlock,"catalog__product__sticky-bottom-hidden")?this._resetStickyButtonToOriginal(t,i):(re.a.addClassName(this._stickyBlock,"catalog__product__sticky-bottom-hidden"),setTimeout((function(){e._resetStickyButtonToOriginal(t,i)}),200))},_attachStickyButtonToTop:function(){var e=document.querySelector(".pf-breadcrumbs");re.a.addClassName(e,"pf-d-flex");var t=e.querySelector(".catalog__product__sticky-top");t&&t.remove(),re.a.addClassName(this._buttonNode,"catalog__product__sticky-top"),re.a.removeClassName(this._buttonNode,"pf-mb-24"),re.a.addClassName(this._orderButton,"pf-btn-sm"),re.a.removeClassName(this._orderButton,"pf-btn-lg"),e.appendChild(this._buttonNode)},_attachStickyButtonToBottom:function(){this._buttonNode.className="row pf-my-16 catalog__product__buttons",this._buttonNode.append(this._stickyBlock),this._nodePrice.className="pf-h3 pf-ml-16 pf-mb-sm-16 pf-my-16",this._nodePrice.append(this._stickyBlock),re.a.removeClassName(this._stickyBlock,"catalog__product__sticky-bottom-hidden"),re.a.removeClassName(this._orderButton,"pf-btn-sm"),re.a.addClassName(this._orderButton,"pf-btn-lg")},_resetStickyButtonToOriginal:function(e,t){this._nodePrice.append(this._originalPriceNode),this._buttonNode.append(this._originalNode),this._nodePrice.className=e||this._nodePrice.className,this._buttonNode.className=t||this._buttonNode.className,re.a.removeClassName(this._orderButton,"pf-btn-sm"),re.a.addClassName(this._orderButton,"pf-btn-lg"),re.a.removeClassName(this._buttonNode,"catalog__product__sticky-top"),re.a.addClassName(this._buttonNode,"pf-mb-24"),re.a.removeClassName(this._nodePrice,"pf-ml-16")},_isTopSticky:function(){return this.isElementAboveViewport(this._referenceNode)&&!this._isMobileWidth()},_isBottomSticky:function(){return!this.isElementInViewport(this._referenceNode)&&!this._isMobileWidth()},_isMobileWidth:function(){return window.innerWidth<pe.a.SIZES.SM},onVisibilityChange:function(e,t){var i,n=this;return function(){var r=n.isElementInViewport(e);r!==i&&(i=r,"function"==typeof t&&t())}},isElementInViewport:function(e){var t=e.getBoundingClientRect();return t.top>=this._topOffset&&t.bottom<=window.innerHeight},isElementAboveViewport:function(e){return e.getBoundingClientRect().bottom<this._topOffset},isElementAboveOrInViewport:function(e){return e.getBoundingClientRect().bottom<=window.innerHeight},openFavoritesLink:function(){var e=this,t=(new ge.PFProductsCatalogUtilsStore).categories.getActiveCategoryId(),i=this.productData.product.favoriteCatalogCategoryId;t&&t!==fe.a.ID_FAKE_FAVORITES||(t=i||this.productData.product.mainCatalogCategoryId),Object(ce.a)("favorite-product/update-favorite-product",{productId:this.productId||this.productData.product.productId,catalogCategoryId:t}).then((function(t){t&&(e.productData.isFavorite=!e.productData.isFavorite,e.productData.product.isFavorite=e.productData.isFavorite,(new w.a).cacheProduct(e.productData.product))}))},getPriceListNode:function(){return this.productData.product.priceRange.bulkDiscountTiers?Object(re.b)("a",{className:"pf-link pf-d-inline-block",onclick:this.openPriceList},dlang("orders","Buying in bulk?")):Object(re.b)("div","pf-link pf-d-inline-block")},openPriceList:function(){this._nodePriceList._showModal("bulk")},getColorPicker:function(){return this._colorPicker},_setVariant:function(e){this._sizePicker.setVariant(e),this._colorPicker.setVariant(e)},_getVariantForPreSelect:function(){var e,t=this.productData.variants.filter((function(e){return!e.isTemporaryOutOfStock})),i=g.fetchSizesFromVariants(t),n=-1!==i.indexOf("M")?"M":i.sort(f.a.sizeSortingCallback)[0];return null!==(e=t[t.length-1])&&void 0!==e&&e.color?this._findVariant(t[t.length-1].color,n):this._findVariant(!1,n)},_findVariant:function(e,t){var i=null,n=this._regionPicker.getMatchingVariants();for(var r in n){var a=n[r],o=!t||a.size===t,s=!e||a.color===e;if(o&&s&&!a.isTemporaryOutOfStock){i=a;break}}return i},_getTechniques:function(){return this.productData.product.hasMultipleTechniques()?this.productData.product.availableTechniques.map((function(e){return{type:e,label:b.a.LABELS[e]}})):[]},_getActiveTechnique:function(){var e=this.productData.product,t=e.availableTechniques?e.availableTechniques:[];if(!this._getTechniqueFromMemory){var i,n=new k.a;if(t.includes(null===(i=n.query)||void 0===i?void 0:i.technique))return n.query.technique}var r=Object(p.a)(e.productId).getTechniqueFromMemory();return r&&t.indexOf(r)>-1?r:t.length?t.slice().shift():e.type},_onTechniquePicked:function(e){new p.a(this.productData.product.productId).rememberLastUsedTechnique(e),this._getTechniqueFromMemory=!0,this._onSomethingChanged()},_getSizePicker:function(){return new d.a(this.productData.variants,this._onSizeChanged,"pf-mb-24")},_getOrderButtons:function(){var e=this.productData.product.isStockProduct()?lang("Get yours"):lang("Start designing"),t=this.productData.product.isTemporaryOutOfStock?" disabled":"";return[Object(re.b)("div","col-12",[this._orderButton=Object(re.b)("a",{className:"pf-btn pf-btn-primary pf-btn-lg pf-btn-block pf-px-0"+t,attr:{dusk:"products-pricing-order-button"},onclick:function(){if(beginOrderTracking("catalog"),PF.Customer.isLogged()&&!PF.Customer.isB2cStarter())return this.orderProduct.call(this),!0;this._onProductChosen()}.bind(this)},[e])])]},_onProductChosen:function(){ne.l(l.a.EVENT_OPEN_DESIGNER,{productData:this.productData,variant:this.variant,node:this._orderButton})},_getLatestOrderFrom:function(){var e=this;Object(ce.a)("product-catalog/get-latest-order",{productId:this.productData.product.productId}).then((function(t){return e._getLatestOrdersFromRe(t)}))},getEstimate:function(e,t,i){var n=this;this._renderEstimateRegionDisclaimer()||Object(ce.a)("estimated-delivery-time/get",{variant:e,technique:t,region:i}).then((function(e){return n._renderEstimate(e)}))},_getDateRangeEstimateNode:function(e){var t=oe()(e.from),i=oe()(e.to),n=new me.a,r=n.format(t,i,!0),a=t.isSame(i)?"{from}":clang("estimate delivery","{from}{rangeSymbol}{to}"),o=n.shortMonthDay;return Object(re.b)("span",null,a.replace("{from}",t.format(o)).replace("{rangeSymbol}",n.symbolRange).replace("{to}",i.format(r)))},_getDayRangeEstimateNode:function(e){var t=e.fromDays===e.toDays?e.fromDays:"".concat(e.fromDays).concat((new me.a).symbolRange).concat(e.toDays);return Object(re.b)("span",null,[dclang("products",'day or days range, e.g. "2-6 days"',"{daysFromTo} days").replace("{daysFromTo}",t)])},_renderEstimate:function(e){if(re.a.clearNode(this._estimatedDeliveryNode),e.success&&e.country&&e.estimate){re.a.addClassName(this._estimatedDeliveryNode,"pf-border-left");var t,i=e.estimate,n=langUrl("/shipping"),r=dlang("products","Delivery times are approximate and may vary. {linkStart}Learn more{linkEnd}"),a=PF.Customer.isLogged()&&!PF.Customer.isB2cStarter();a&&(r=dlang("products","Estimated delivery is calculated in business days. Delivery times are approximate and may vary. {linkStart}Learn more{linkEnd}.")),r=r.replace("{linkStart}",'<a class="pf-link" href="'+n+'">').replace("{linkEnd}","</a>");var o=[Object(re.b)("div","pf-h5 pf-mb-2",dlang("products","Estimated delivery to")),Object(re.b)("div","catalog__product__estimated-delivery-container",[Object(re.b)("span","pf-ui-body",[Object(re.b)("span",{className:"flag pf-mr-4",style:{backgroundImage:"url(".concat(e.country.flag,")")}}),Object(re.b)("span","",e.country.name)])])];"ja_JP"===C.a.locale&&(o=o.reverse()),Object(re.b)("div",null,[Object(re.b)("div",null,o),Object(re.b)("div","pf-h3 pf-mt-16",[a?this._getDayRangeEstimateNode(i):this._getDateRangeEstimateNode(i),t=Object(re.b)("span",{className:"pf-i pf-i-information pf-pointer pf-i-18 pf-text-gray pf-ml-8 pf-mb-4",attr:{title:r,"data-toggle":"tooltip"}})])]).append(this._estimatedDeliveryNode),$(t).tooltip({html:!0,delay:{hide:2e3}})}},_renderEstimateRegionDisclaimer:function(){var e;if(this.sellingRegionSettings&&this._isRegionUnavailable){var t=PF.Customer.isLogged()&&!PF.Customer.isB2cStarter()?dlang("products","Adjust your {linkBegin}default selling preferences{linkEnd} to select this product"):dlang("products","Adjust your {linkBegin}default catalog and delivery preferences{linkEnd} to select this product");return t=t.replace("{linkBegin}",'<a id="dsr-disclaimer" class="pf-link pf-pointer" onclick="">').replace("{linkEnd}","</a>"),re.a.clearNode(this._estimatedDeliveryNode),re.a.addClassName(this._estimatedDeliveryNode,"pf-border-left"),Object(re.b)("div",null,[Object(re.b)("p","pf-text-bold",[Object(re.b)("strong",null,dlang("products","This product is unavailable in your region"))]),Object(re.b)("p",{innerHTML:t})]).append(this._estimatedDeliveryNode),document.querySelector("#dsr-disclaimer").addEventListener("click",(function(){Object(ve.b)()})),!0}if(!1===(null===(e=this.sellingRegionSettings)||void 0===e?void 0:e.isSingleCountry())){re.a.clearNode(this._estimatedDeliveryNode),re.a.addClassName(this._estimatedDeliveryNode,"pf-border-left");var i=lang("When selling worldwide, delivery time is based on your end-customer's location and the selected product. See delivery times {linkStart}here{linkEnd}.");this.sellingRegionSettings.isWorldwide()||(i=lang("When selling in {region}, delivery time is based on your end-customer's location and the selected product. See delivery times {linkStart}here{linkEnd}."));var n=langUrl("/shipping"),r=i.replace("{linkStart}",'<a class="pf-link" href="'.concat(n,'">')).replace("{linkEnd}","</a>").replace("{region}",this.sellingRegionSettings.getName());return Object(re.b)("p",{innerHTML:r,className:"pf-ui-body"}).append(this._estimatedDeliveryNode),!0}return!1},_getLatestOrdersFromRe:function(e){if(e&&e.length>0){var t=new s.a(e,!1,"col-12");re.a.clearNode(this._latestOrderNode),Object(re.b)("div","product-item__latest-order",[Object(re.b)("span","pf-mr-12",lang("Latest orders from:")+" "),t]).append(this._latestOrderNode)}},_renderPriceNode:function(){var e,t=this.productData.product.priceRange.getAdjustmentPrice(),i=this.productData.product.shouldShowTaxInclusion();if(this.variant)if(this.productData.product.useNewPricing){var n=new Be.b(this.productData.product,new Be.c),r=je()(this.variant.priceData),a=n.getTotal(this.variant),o=n.getTotal(this.variant,!0);r.price=a,r.originalPrice=a,r.discountedPrice=o,e=_.a.createDiscountElementFromPriceData({priceData:r,basePriceAdjustment:0,showTaxInclusion:i})}else e=_.a.createDiscountElementFromPriceData({priceData:this.variant.priceData,basePriceAdjustment:t,showTaxInclusion:i});else e=_.a.createDiscountElementFromPriceRange(this.productData.product.priceRange,t,i);re.a.clearNode(this._nodePrice),e.append(this._nodePrice),this.productData.product.hasFreeShipping&&Object(re.b)("span","product-item__detail__free-shipping",dclang("products","badge"," + free shipping")).append(this._nodePrice)},_updateShippingInfo:function(){var e=this;Object(ce.a)("product-catalog/get-shipping-info",{region:this._regionPicker.getRegion(),productId:this.productData.product.productId}).then((function(t){return e._updateShippingInfoRe(t)}))},_updateShippingInfoRe:function(e){re.a.clearNode(this._nodeShippingInfo),Object(re.b)("div",{innerHTML:e}).append(this._nodeShippingInfo)},updatePickers:function(e){re.a.clearNode(this._nodeSizePicker),this._sizePicker=this._getSizePicker(),this._sizePicker.append(this._nodeSizePicker),this._isUpdatingPickers=!0,this._setUnavailableSizes(),this._setUnavailableColors(),y.a.pushProductDataLayer(this.variant,e)},orderProduct:function(){var e,t=new a.a;t.productId=this.productData.product.productId,t.productColor=this.getSelectedColorName(),t.productTechnique=this._getActiveTechnique(),t.productRegion=this.getSelectedRegion(),t.allowStoresWithAvailableProductId=this.productData.product.productId,t.allowStoresWithAvailableVariantId=(null===(e=this.variant)||void 0===e?void 0:e.variantId)||null,this._sizePicker?t.productSize=this._sizePicker.getSize():1===this.productData.product.sizes.length&&(t.productSize=this.productData.product.sizes[0]),new o.a(t);for(var i=[this.productData.product.brand,this.productData.product.model],n="",r=0;r<i.length;r++)null!==i[r]&&(n+=i[r]+" ");(n=n.slice(0,-1))||(n=this.productData.product.title),ga("send","event","Button Clicks","Order Product Button",n)},getSelectedColorName:function(){return!!this._colorPicker&&this._colorPicker.getColor()},getSelectedRegion:function(){return!!this._regionPicker&&this._regionPicker.getRegion()},getSelectedSize:function(){return!!this._sizePicker&&this._sizePicker.getSize()},getSelectedRegionDisabledValues:function(e){return this._colorPicker.setSelectedRegionDisabledValues(this._regionPicker.getMatchingVariants(),this.productData.variants,e,this.regionData),this._colorPicker.getValueCount()>0?this._colorPicker.getSelectedRegionDisabledValues(e):[]},_onRegionChanged:function(){this._colorPicker&&this._regionPicker&&(this._techniquePicker&&this._techniquePicker.updateTechniqueAvailability(this._regionPicker.getRegion()),this._colorPicker.getValueCount()>0&&this._colorPicker.setVariantsAndDisabledRegionColors(this._regionPicker.getMatchingVariants(),this.productData.variants,this.regionData),(new w.a).setActiveStockedInRegion(this._regionPicker.getRegion(),this.variant.productId),this._onSomethingChanged())},_onColorPicked:function(){this._onSomethingChanged(!0,!0,!0)},_onSizeChanged:function(){this._onSomethingChanged()},_onVariantPickerVariantChanged:function(e){var t=e.color,i=e.size,n=this._findVariant(t,i);n&&(this._setVariant(n),this._onColorPicked())},_setUnavailableSizes:function(){var e=this.getSelectedColorName(),t=this._regionPicker.getMatchingVariants().filter((function(t){return!e||e===t.color})),i=this.productData.variants.filter((function(t){return!e||e===t.color}));if(this._sizePicker||e||0===this._colorPicker.getValueCount()){var n=this._variantAvailability.getUnavailableSizes(e||"",this._sizePicker.getSizes()),r=this._variantAvailability.getNonExistentSizes(e||"",this._sizePicker.getSizes());this._sizePicker.setSelectedRegionDisabledValues(t,i,"size",this.regionData);var a=this._sizePicker.getSelectedRegionDisabledValues("size");this._dsrSettingsApplied()?this._sizePicker.setSellingRegionLimitedSizes(a):this._sizePicker.setInactiveSizes(a),this._sizePicker.setUnavailableSizes(n),this._sizePicker.setHiddenSizes(r.concat(this._variantAvailability.getDiscontinuedSizes(e)))}},_setUnavailableColors:function(){var e=this._sizePicker.getValueCount()>0&&this._sizePicker.getSize(),t=this._regionPicker.getMatchingVariants().filter((function(t){return!e||e===t.size})),i=this.productData.variants.filter((function(t){return!e||e===t.size}));if((0!==this._sizePicker.getValueCount()&&this._sizePicker.hasAtLeastOneValue()||this.productData.product.type===b.a.TYPE_EMBROIDERY)&&this._colorPicker.hasAtLeastOneValue()){this._colorPicker.setSelectedRegionDisabledValues(t,i,"color",this.regionData);var n=this._colorPicker.getSelectedRegionDisabledValues("color"),r=this._variantAvailability.getDiscontinuedColors(e||"").concat(this._variantAvailability.getNonExistentColors(e,this._colorPicker.getAllColors()));this._colorPicker.setUnavailableColors(this._variantAvailability.getUnAvailableColors(e||"")),this._colorPicker.setDiscontinuedColors(r),this._dsrSettingsApplied()?this._colorPicker.setSellingRegionLimitedColors(n):this._colorPicker.setDisabledRegionColors(n),this._colorPicker.render()}},_onSomethingChanged:function(e,t,i){var n,r=this;this.variant=this._regionPicker.getMatchingVariants().filter(this._filterVariant.bind(this,this.getSelectedColorName(),this.getSelectedSize())).shift(),this._isRegionUnavailable=!1,this.variant||(this.variant=this._regionPicker.getAllVariants().filter(this._filterVariant.bind(this,this.getSelectedColorName(),this.getSelectedSize())).shift(),this._isRegionUnavailable=!0),this._toggleOrderAvailability(),this._renderPriceNode(),Ue.isVariantChanged=!this._isUpdatingPickers,this._isUpdatingPickers=!1,this._shouldDispatchEvent(e)&&m.a.createAndDispatch(he.a.EVENT_VARIANT_CHANGED,{productTechnique:this._getActiveTechnique(),productColor:this.getSelectedColorName(),productSize:this.getSelectedSize(),productRegion:this.getSelectedRegion(),activeProductId:this.productData.product.productId}),this._shouldCallback(t)&&this._onVariantChanged(this.variant,i),this._nodePriceList.variantChanged(this.variant,this._getActiveTechnique()),this.polyProInfoNode&&(this.polyProInfoNode.classList.add("hidden"),this._getActiveTechnique()===b.a.TYPE_T_SHIRT&&this.polyProInfoNode.classList.remove("hidden")),this._nodePriceList.variantChanged(this.variant,this._getActiveTechnique()),this.variant&&setTimeout((function(){r.getEstimate(r.variant.variantId,r._getActiveTechnique(),r.getSelectedRegion())}),1),null!==(n=this.productData.product.correspondingProductDetails)&&void 0!==n&&n.productId&&this._getCatalogPageUrlById(this.productData.product.correspondingProductDetails.productId)},_isSelectedColorInactive:function(){return this.getSelectedRegionDisabledValues("color").filter(this._filterColor.bind(this,this.getSelectedColorName())).length>0},_filterColor:function(e,t){return t===e},_mapInactiveColorDisabledSizes:function(e,t){return t.color===e&&t.size},_filterVariant:function(e,t,i){return(!e||i.color===e)&&(!t||i.size===t)},_hasValidVariant:function(){return this.variant&&!this.variant.isDisabledInPush&&this.variant.hasStock},_toggleOrderAvailability:function(){this._isOrderAvailable=this._isOrderingAvailable(),this._enableOrderButton(this._isOrderAvailable)},_isOrderingAvailable:function(){var e,t;return!(!this.variant||this._isRegionUnavailable||this.productData.product.isTemporaryOutOfStock||null!==(e=this.variant)&&void 0!==e&&e.isTemporaryOutOfStock||null!==(t=this.variant)&&void 0!==t&&t.isDisabledInPush&&!this.variant.hasStock)},_enableOrderButton:function(e){this._addOrRemoveClass("disabled",e,this._orderButton)},_shouldCallback:function(e){return!(void 0!==e&&!e)&&(this._onVariantChanged&&this.variant)},_shouldDispatchEvent:function(e){return!(void 0!==e&&!e)&&(this._isOrderAvailable&&(this.getSelectedColorName()||this.getSelectedSize()))},_addOrRemoveClass:function(e,t,i){re.a[t?"removeClassName":"addClassName"](i,e)},_getPackinsBadge:function(){var e=this.productData.warehouseItemTypes.find((function(e){return e.name===ue.b.PACKIN})),t=langUrl("/branded-packaging-inserts"),i=dlang("products","{linkStart}Pack-ins{linkEnd} are promotional materials that can be added to your customersâ€™ orders").replace("{linkStart}",'<a href="'.concat(t,'" target="_blank">')).replace("{linkEnd}","</a>"),n="",r=e?Object(re.b)("div","pf-mt-16 pf-mb-16 pf-d-flex pf-align-items-center",[Object(re.b)("img",{src:"/static/images/custom-products/warehouse-packins.svg",style:{width:"36px",height:"36px"}}),Object(re.b)("span","pf-ml-8",[dlang("products","Can be stored in warehouse and used as a pack-in"),n=Object(re.b)("span",{className:"pf-i pf-i-information pf-pointer pf-i-18 pf-text-gray pf-ml-8 pf-mb-4",attr:{title:i,"data-toggle":"tooltip","data-html":!0}})])]):"";return!PFUtilsIsTouch()&&n&&$(n).tooltip({delay:{hide:2e3}}),r},_getPolyProInfoNode:function(){return Object(re.b)("div","pf-mb-24 row no-gutters",[Object(re.b)("div","col-12",[this._getTechniques().length>1?"":Object(re.b)("div","row pf-my-8",[Object(re.b)("div","col-6",[Object(re.b)("p","pf-h5 pf-my-0",[dlang("products","Technique"),Object(re.b)("span","pf-ml-4 pf-py-2 pf-badge pf-badge-small pf-badge--primary pf-text-white",[lang("New")])])])]),Object(re.b)("div","pf-d-flex",[Object(re.b)("div","poly-pro pf-mr-8",[Object(re.b)("img",{className:"poly-pro__icon",src:"/static/images/products-catalog/poly-pro.svg"})]),Object(re.b)("div","pf-py-4 pf-pl-8",[Object(re.b)("p",{className:"pf-my-0",innerHTML:dlang("products","Printed with the innovative NeoPoly tech that offers the <b>highest possible print quality</b> on polyester")})])])])])},_updateCorrespondingProductNode:function(e){var t=this.productData.product.correspondingProductDetails,i=t.productTitles[C.a.locale],n=t.visibility[C.a.locale],r="";i&&n&&(t.type===de.a?r=dlang("products",'<b>Interested in premium quality?</b> Check out our <a href="{url}">{productName}</a>'):t.type===de.f?r=dlang("products",'<b>Interested in a womenâ€™s model?</b> Check out our <a href="{url}">{productName}</a>'):t.type===de.e&&(r=dlang("products",'<b>Interested in a menâ€™s model?</b> Check out our <a href="{url}">{productName}</a>')),r=r.replace("{url}",e).replace("{productName}",i),Object(re.b)("span",{className:"pf-ui-caption",innerHTML:r}).append(this._correspondingProductNode))},_getCatalogPageUrlById:function(e){var t=this;Object(ce.a)("products/get-catalog-page-url-by-product-id",{productId:e}).then((function(e){e.success&&t._updateCorrespondingProductNode(e.url)}))},_dsrSettingsApplied:function(){return!!this.regionData.allowedSellingRegions}},re.a.Base);Ue.isVariantChanged=!1,Ue.EVENT_VARIANT_COLOR_CHANGED="variantColorChanged",window&&((globalThis||{}).PFProductsCatalogProductInfo=Ue)},"5qBa":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("qs6/"),r=i("6JZw"),a=i("nF4n"),o=function(){};(o.prototype=new r.a).priceData=null,o.prototype.uniqueId="",o.prototype.thumbUrl="",o.prototype.productName="",o.prototype.quantity=0,o.fromArray=function(e){var t=new o;return a.a.O2O(t,e),e.priceData&&(t.priceData=n.a.fromArray(e.priceData)),t},o.fromOrderLineItem=function(e){var t=new o;return t.uniqueId=e.uniqueId,t.priceData=e.priceData,t.quantity=e.quantity,t.thumbUrl=e.getImageUrl(),t.productName=e.displayName,t},window&&((globalThis||{}).PFItemsCartOrderItem=o);var s=function(){};s.prototype=new r.a,s.prototype.items=null,s.prototype.totalProductCount=null,s.prototype.isShippingAvailable=!1,s.prototype.estimatedShippingCosts=null,s.fromArray=function(e){var t=new s;return a.a.O2O(t,e),t.items=[],e.orderItems.map((function(e){t.items.push(o.fromArray(e))})),t},s.fromOrderItem=function(e){var t=new s;return t.items=[],e.items.map((function(e){t.items.push(o.fromOrderLineItem(e))})),t},window&&((globalThis||{}).PFItemsCartItem=s)},"5sNq":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("Ii6r"),r=i("FxE2"),a=i("Vx67"),o=i("+4EM"),s=(i("X5Ic"),i("tw/D")),l=i("nF4n"),c=function(){this.colors=[],this.sizes=[],this.availablePlacements=[],this.generatorVariants={},this.variantMapping=[],this.calculatedPositions=[],this.conflictingTypes={},this.availableOrientations=[],this.orientation=[],this.regions={},this.preselectedData={},this.pushableVideos=[]};c.prototype.pushableVideos=null,c.prototype.colors=null,c.prototype.sizes=null,c.prototype.translatedSizes=null,c.prototype.variantLimit=null,c.prototype.requiredDPI=null,c.prototype.designData=null,c.prototype.availablePlacements=null,c.prototype.variantMapping=null,c.prototype.generatorVariants=null,c.prototype.calculatedPositions=null,c.prototype.conflictingTypes=null,c.prototype.placementsWithOnlyBackgroundColor=null,c.prototype.regions=null,c.prototype.availableOrientations=null,c.prototype.isCustomizerEnabled=!1,c.prototype.orientation="",c.prototype.availableTechniques=null,c.prototype.hasNewPlacement=null,c.prototype.allLabelTypesAvailable=!1,c.prototype.forceTemplateType="",c.prototype.preselectedData={},c.prototype.isAdditionalMockupPushEnabled=!1,c.prototype.areQuickDesignsAvailable=!1,c.prototype.getGeneratorVariant=function(e){for(var t in this.generatorVariants)if(this.generatorVariants[t].generatorVariantId==e)return this.generatorVariants[t];PF.DEV&&console.log("Generator variant not found: "+e)},c.prototype.getGeneratorVariantsArray=function(){return Object.values(this.generatorVariants||{})},c.prototype.layerMatchesAdvancedTemplate=function(e,t){return this.variantMapping.some((function(i){return!(!i.advancedTemplateSize||!i.advancedTemplateSize.hasOwnProperty(e))&&t.matchesAdvancedTemplate(i.advancedTemplateSize[e])}))},c.duplicateFrom=function(e){var t=new c;l.a.O2O(t,e);var i=function(e){return JSON.parse(JSON.stringify(e))};if(t.placementOptions&&(t.placementOptions=s.a.duplicateFrom(t.placementOptions)),t.colors&&(t.colors=t.colors.map((function(e){return o.a.fromArray(e)}))),t.regions&&(t.regions=i(t.regions)),t.preselectedData&&(t.preselectedData=i(t.preselectedData)),t.availablePlacements&&(t.availablePlacements=t.availablePlacements.map((function(e){return n.a.fromArray(e)}))),t.variantMapping&&(t.variantMapping=t.variantMapping.map((function(e){return r.a.fromArray(e)}))),t.generatorVariants){var d={};Object.keys(t.generatorVariants).forEach((function(e){var i=t.generatorVariants[e];i=a.a.fromArray(i),d[e]=i})),t.generatorVariants=d}if(t.conflictingTypes){var u={};Object.keys(t.conflictingTypes).forEach((function(e){var i=t.conflictingTypes[e];u[e]={placementId:i.placementId,conflictsWith:i.conflictsWith.map((function(e){return n.a.fromArray(e)}))}})),t.conflictingTypes=u}return["sizes","availableOrientations","availableTechniques"].forEach((function(e){t[e]&&t[e].length&&(t[e]=t[e].slice())})),t},c.ORIENTATION_VERTICAL="vertical",c.ORIENTATION_HORIZONTAL="horizontal",c.TEMPLATE_TYPE_SIMPLE="simple",c.TEMPLATE_TYPE_ADVANCED="advanced",(globalThis||{}).PFRepositoriesGeneratorRepositoryGeneratorParameters=c},"7OPZ":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"I",(function(){return r})),i.d(t,"O",(function(){return a})),i.d(t,"Q",(function(){return o})),i.d(t,"V",(function(){return s})),i.d(t,"T",(function(){return l})),i.d(t,"kb",(function(){return c})),i.d(t,"ab",(function(){return d})),i.d(t,"S",(function(){return u})),i.d(t,"U",(function(){return h})),i.d(t,"Z",(function(){return p})),i.d(t,"P",(function(){return g})),i.d(t,"R",(function(){return f})),i.d(t,"X",(function(){return _})),i.d(t,"ib",(function(){return m})),i.d(t,"gb",(function(){return v})),i.d(t,"bb",(function(){return y})),i.d(t,"cb",(function(){return b})),i.d(t,"eb",(function(){return P})),i.d(t,"db",(function(){return C})),i.d(t,"Y",(function(){return T})),i.d(t,"fb",(function(){return I})),i.d(t,"jb",(function(){return w})),i.d(t,"W",(function(){return S})),i.d(t,"hb",(function(){return E})),i.d(t,"C",(function(){return k})),i.d(t,"D",(function(){return O})),i.d(t,"L",(function(){return A})),i.d(t,"d",(function(){return L})),i.d(t,"e",(function(){return N})),i.d(t,"f",(function(){return D})),i.d(t,"J",(function(){return R})),i.d(t,"K",(function(){return x})),i.d(t,"c",(function(){return F})),i.d(t,"mb",(function(){return M})),i.d(t,"nb",(function(){return B})),i.d(t,"F",(function(){return V})),i.d(t,"G",(function(){return j})),i.d(t,"lb",(function(){return U})),i.d(t,"B",(function(){return z})),i.d(t,"M",(function(){return G})),i.d(t,"N",(function(){return H})),i.d(t,"E",(function(){return Y})),i.d(t,"H",(function(){return q})),i.d(t,"g",(function(){return W})),i.d(t,"h",(function(){return K})),i.d(t,"k",(function(){return Z})),i.d(t,"j",(function(){return Q})),i.d(t,"A",(function(){return X})),i.d(t,"q",(function(){return $})),i.d(t,"i",(function(){return J})),i.d(t,"o",(function(){return ee})),i.d(t,"w",(function(){return te})),i.d(t,"x",(function(){return ie})),i.d(t,"r",(function(){return ne})),i.d(t,"s",(function(){return re})),i.d(t,"u",(function(){return ae})),i.d(t,"t",(function(){return oe})),i.d(t,"p",(function(){return se})),i.d(t,"v",(function(){return le})),i.d(t,"z",(function(){return ce})),i.d(t,"y",(function(){return de})),i.d(t,"b",(function(){return ue})),i.d(t,"l",(function(){return he})),i.d(t,"m",(function(){return pe})),i.d(t,"n",(function(){return ge}));var n="fileLibrary",r="mutation/resetState",a="mutation/setCurrentDirectory",o="mutation/setDirectories",s="mutation/setFiles",l="mutation/setEditDirectory",c="mutation/setShowMore",d="mutation/setModal",u="mutation/setDirectoryLimit",h="mutation/setError",p="mutation/setMessage",g="mutation/setCurrentDirectoryOverrides",f="mutation/setDirectoriesOverrides",_="mutation/setIsSearch",m="mutation/setSearchQuery",v="mutation/setNavigationTotalFilesCount",y="mutation/setNavigationCurrentPage",b="mutation/setNavigationPageItemsLimit",P="mutation/setNavigationPageSwitchCallback",C="mutation/setNavigationPageItemsSort",T="mutation/setItemToMove",I="mutation/setNavigationShouldUseRouter",w="mutation/setSelectedFilesIds",S="mutation/setFlowData",E="mutation/setRecentlyUsedFiles",k="action/loadDirectory",O="action/loadDirectoryFiles",A="action/searchFiles",L="action/deleteDirectory",N="action/deleteFile",D="action/editDirector",R="action/saveDirectory",x="action/saveEditDirectory",F="action/cancelEditDirectory",M="action/updateEditDirectoryAvatar",B="action/updateShowMore",V="action/moveDirectory",j="action/moveFile",U="action/showModal",z="action/hideModal",G="action/selectAllItems",H="action/selectSingleItem",Y="action/loadRecentlyUsedFiles",q="action/refreshDirectoriesAndFiles",W="getter/getCurrentDirectory",K="getter/getDirectories",Z="getter/getFiles",Q="getter/getEditDirectory",X="getter/getShowMore",$="getter/getModal",J="getter/getDirectoryLimit",ee="getter/getIsSearch",te="getter/getNavigationTotalFilesCount",ie="getter/getNavigationTotalPagesCount",ne="getter/getNavigationCurrentPage",re="getter/getNavigationPageItemsLimit",ae="getter/getNavigationPageSwitchCallback",oe="getter/getNavigationPageItemsSort",se="getter/getItemToMove",le="getter/getNavigationShouldUseRouter",ce="getter/getSelectedFilesIds",de="getter/getRecentlyUsedFiles",ue="getter/breadcrumbs",he="getter/getIsAnonymousFlow",pe="getter/getIsGeneratorFlow",ge="getter/getIsLibraryFlow"},"7XA3":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({__construct:function(){this.node=tag("span",{className:"pf-d-inline-block pf-text-white pf-bg-cyan pf-ui-legal pf-bold pf-px-4 pf-mb-4",title:lang("Let your customers create personalized versions of your design in real-time on your store")},[lang("For personalization")])},show:function(){n.a.removeClassName(this.node,"pf-d-none"),n.a.addClassName(this.node,"pf-d-inline-block")},hide:function(){n.a.removeClassName(this.node,"pf-d-inline-block"),n.a.addClassName(this.node,"pf-d-none")}},n.a.Base);window&&((globalThis||{}).PFProductPushCustomizableLabel=r)},"7h5t":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("pWIn"),r=i("n6mh"),a=i("PSt6"),o=i("X5Ic"),s=i("9Vz/"),l=i("Jkv8"),c=i("GyOi");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=Class({text:"",size:0,font:null,color:"",strokeColor:null,strokeWeight:0,strokeOffset:0,shadowColor:null,shadowDistance:0,shadowAngle:0,arcAngle:0,alignment:"",lineHeight:1,letterSpacing:0,engravingStyle:null,isCustomizable:!1,resizeToPercent:null,hasMultipleLines:!1,embroideryType:"",migratedToNewPicker:null,colorGraphic:null,isGeneratorMockupTextBoxLayerInstance:!0,_getNewLayer:function(){return new u},getOriginalClone:function(e){var t=this._getNewLayer();return e||(t.uniqueId=this.uniqueId),t.text=this.text,t.size=this.size,t.font=this.font,t.color=this.color,t.strokeColor=this.strokeColor,t.strokeWeight=this.strokeWeight,t.strokeOffset=this.strokeOffset,t.shadowColor=this.shadowColor,t.shadowDistance=this.shadowDistance,t.shadowAngle=this.shadowAngle,t.alignment=this.alignment,t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.engravingStyle=this.engravingStyle,t.customizeKey=this.customizeKey,t.generatorOptions=this.generatorOptions,t.isCustomizable=this.isCustomizable,t.resizeToPercent=this.resizeToPercent,t.hasMultipleLines=this.hasMultipleLines,t.overrideImage=this.overrideImage,t.overrideImagePulse=this.overrideImagePulse,t.position=this.position.getFromOriginalRatio(),t.originalPosition=this.originalPosition,t.parentLayerUniqueId=this.parentLayerUniqueId,t.embroideryType=this.embroideryType,t.migratedToNewPicker=this.migratedToNewPicker,t.arcAngle=this.arcAngle,t.colorGraphic=this.colorGraphic,t.quickDesignId=this.quickDesignId,t.groupType=this.groupType,t.groupId=this.groupId,t},getType:function(){return u.TYPE},getDPI:function(){return 600},isVector:function(){return!0},toArray:function(e){var t="object"===d(e)&&(null==e?void 0:e.forRpc),i={type:u.TYPE,text:this.text,size:this.size,font:this.font.fontKey,fontName:this.getFontName(),fontPath:this.font["path-ttf"],color:this.color,strokeColor:this.strokeColor,strokeWeight:this.strokeWeight,strokeOffset:this.strokeOffset,shadowColor:this.shadowColor,shadowDistance:this.shadowDistance,shadowAngle:this.shadowAngle,alignment:this.alignment,lineHeight:this.lineHeight,letterSpacing:this.letterSpacing,engravingStyle:this.engravingStyle,resizeToPercent:this.resizeToPercent,hasMultipleLines:this.hasMultipleLines?1:0,position:this.position?this.position.toArray(e):{},embroideryType:this.embroideryType,migratedToNewPicker:this.migratedToNewPicker,isCustomizable:this.isCustomizable?1:0,customizeKey:this.customizeKey,uniqueId:this.uniqueId,parentLayerUniqueId:this.parentLayerUniqueId,overrideImage:this.overrideImage,overrideImagePulse:this.overrideImagePulse,originalWidth:this.originalPosition.width,arcAngle:this.arcAngle,colorGraphic:this.colorGraphic?t?{id:this.colorGraphic.id,scale:this.colorGraphic.scale}:this.colorGraphic.toArray(e):null,quickDesignId:this.quickDesignId,groupType:this.groupType,groupId:this.groupId};for(var n in i)null!==i[n]&&""!==i[n]||delete i[n];return i},isTextLayer:function(){return!0},isAlignedLeft:function(){return this.alignment===n.a.ALIGN_LEFT},isAlignedRight:function(){return this.alignment===n.a.ALIGN_RIGHT},isAlignedCenter:function(){return this.alignment===n.a.ALIGN_CENTER},getFontName:function(){var e;return(null===(e=this.font)||void 0===e?void 0:e.name)||""},isSimple:function(){return!1},copyValues:function(e){this.text=e.text,this.size=e.size,this.font=e.font,this.color=e.color,this.strokeColor=e.strokeColor,this.strokeWeight=e.strokeWeight,this.strokeOffset=e.strokeOffset,this.shadowColor=e.shadowColor,this.shadowDistance=e.shadowDistance,this.shadowAngle=e.shadowAngle,this.alignment=e.alignment,this.lineHeight=e.lineHeight,this.letterSpacing=e.letterSpacing,this.engravingStyle=e.engravingStyle,this.customizeKey=e.customizeKey,this.resizeToPercent=e.resizeToPercent,this.isCustomizable=e.isCustomizable,this.generatorOptions=e.generatorOptions,this.hasMultipleLines=e.hasMultipleLines,this.overrideImage=e.overrideImage,this.overrideImagePulse=e.overrideImagePulse,this.arcAngle=e.arcAngle,this.colorGraphic=e.colorGraphic,this.quickDesignId=e.quickDesignId,this.groupType=e.groupType,this.groupId=e.groupId},isConfigurationSame:function(e){return this.isWidthHeightRatioSame(e)&&Math.abs(this.size-e.size)<.001&&this.color===e.color&&this.strokeColor===e.strokeColor&&this.strokeWeight===e.strokeWeight&&this.strokeOffset===e.strokeOffset&&this.shadowColor===e.shadowColor&&this.shadowDistance===e.shadowDistance&&this.shadowAngle===e.shadowAngle&&this.alignment===e.alignment&&this.arcAngle===e.arcAngle&&this.migratedToNewPicker===e.migratedToNewPicker},isWidthHeightRatioSame:function(e){return this.text===e.text&&this.getFontName()===e.getFontName()&&this.alignment===e.alignment&&Math.abs(this.lineHeight-e.lineHeight)<.001&&Math.abs(this.letterSpacing-e.letterSpacing)<.001},isValid:function(){return(new a.a).setActiveLayer(this).setText(this.text).isTextValid()},getUpdateDelay:function(){return 10},setWidthInPercent:function(e){this.resizeToPercent=e},isPartiallyOutOfBounds:function(){var e=parseFloat(this.position.rotation-parseFloat(this.shadowAngle)).toFixed(2),t=Math.cos(-e*Math.PI/180)*this.shadowDistance*this.size/2,i=Math.sin(-e*Math.PI/180)*this.shadowDistance*this.size/2,n=this.position.getClone();return n.top-=i,n.left+=t,this.position.isPartiallyOutOfBounds()||n.isPartiallyOutOfBounds()},hasFillImage:function(){var e;return(null===(e=this.colorGraphic)||void 0===e?void 0:e.id)&&this.colorGraphic.scale},isValidForTechnique:function(e){return e!==o.a.TECHNIQUE_EMBROIDERY&&e!==o.a.TECHNIQUE_ENGRAVING||!this.hasFillImage()}},r.a);u.fromArray=function(e){var t=new u;if(t.text=e.text,t.font=Object(l.getPFCanvasFonts)().FONTS[e.font],t.color=e.color,t.strokeColor=e.strokeColor,t.strokeWeight=parseFloat(e.strokeWeight),t.strokeOffset=parseFloat(e.strokeOffset),t.shadowColor=e.shadowColor,t.shadowDistance=parseFloat(e.shadowDistance),t.shadowAngle=parseFloat(e.shadowAngle),t.alignment=e.alignment,t.letterSpacing=parseFloat(e.letterSpacing),t.lineHeight=parseFloat(e.lineHeight),t.size=parseFloat(e.size),t.engravingStyle=parseInt(e.engravingStyle),t.arcAngle=parseFloat(e.arcAngle),t.hasMultipleLines="true"===e.hasMultipleLines||!0===e.hasMultipleLines,e.colorGraphic){var i=parseInt(e.colorGraphic.id),n=Object(s.d)(i),r=null;n?r=Object(s.c)(i):!n&&e.colorGraphicItem&&(r=c.a.fromArray(e.colorGraphicItem),Object(s.a)([r])),r?(t.colorGraphic=r,t.colorGraphic.scale=parseFloat(e.colorGraphic.scale)):console.error("Could not read graphic info data")}return t},u.fromTextLayer=function(e){var t=new u;return t.text=e.text,t.font=e.font,t.color=e.color,t.alignment=e.alignment,t.letterSpacing=parseFloat(e.letterSpacing),t.lineHeight=parseFloat(e.lineHeight),t.size=e.size,t.engravingStyle=e.engravingStyle,t.position=e.position.getFromOriginalRatio(),t.originalPosition=e.originalPosition,t.isCustomizable=e.isCustomizable,t.resizeToPercent=e.resizeToPercent,t},u.TYPE="textbox",window&&((globalThis||{}).PFComponentsGeneratorMockupTextboxLayer=u)},"7pSD":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("nF4n"),r=i("4CFC"),a=Class({_afterShow:null,nodeError:null,_isVisible:!1,_disabledRegionValueVariants:{},regionData:{},currentDisabledVariants:{},updateErrorStatus:function(e){return e&&(this.nodeError.innerText=e),!(this.nodeError&&!n.a.hasClassName(this.node,"hidden"))||(this.isValuePicked()?(n.a.addClassName(this.nodeError,"hidden"),!0):(n.a.removeClassName(this.nodeError,"hidden"),!1))},hideError:function hideError(){n.a.addClassName(this.nodeError,"hidden")},showError:function showError(){n.a.removeClassName(this.nodeError,"hidden")},hasAtLeastOneValue:function(){return!0},isValuePicked:function(){},getValueCount:function(){},showPicker:function(){n.a.removeClassName(this.node,"hidden"),n.a.addClassName(this.node,"picker-animation--hidden"),this._isVisible=!0,setTimeout(function(){n.a.addClassName(this.node,"picker-animation"),n.a.removeClassName(this.node,"picker-animation--hidden")}.bind(this),10),setTimeout(this._afterShow,400)},hidePicker:function(){this._isVisible=!1,n.a.addClassName(this.node,"hidden")},isVisible:function(){return this._isVisible},_setAfterShow:function(e){this._afterShow=e},getVariantClicked:function(e,t){return this.currentDisabledVariants.filter((function(i){return i[t]===e}))},getAvailableAttributeRegion:function(e,t,i,n){var a=this.getVariantClicked(e,t);if(i&&n&&a.length>1){var o=this.getVariantClicked(i,n);a=a.filter((function(e){return o.indexOf(e)>-1}))}var s=this.regionData.variantsByRegion,l=Object.entries(s),c=[];return l.forEach((function(e){var t=e[0],i=e[1];a.forEach((function(e){i.indexOf(e.variantId)>-1&&c.push(Object(r.b)(t))}),this)}),this),(c=c.filter((function(e,t){return c.indexOf(e)===t}))).join(", ")},_filterValues:function(e,t){return e.filter((function(e){return null!==e[t]}))},__compare:function(e){return function(t){return 0==e.filter((function(e){return e&&e.variantId==t.variantId})).length}},setSelectedRegionDisabledValues:function(e,t,i,n){if(n&&(this.regionData=n),e&&t&&i){this.currentDisabledVariants=t.filter(this.__compare(e)),t=this._filterValues(t,i),e=this._filterValues(e,i);var r=t.filter((function(t){return!e.some((function(e){return t[i]==e[i]}))})),a=e.filter((function(e){return!t.some((function(t){return e[i]==t[i]}))})),o=r.concat(a),s={},l={};o.forEach((function(e){s[e[i]]||(l[e[i]]=e.availability,s[e[i]]=!0)})),this._disabledRegionValueVariants[i]=l}},getSelectedRegionDisabledValues:function(e){return Object.keys(this._disabledRegionValueVariants[e])},scrollToNodeError:function scrollToNodeError(e){if(this.nodeError){var t,i=$(this.node).closest(".dynamic-sticky-footer.dynamic-sticky-footer--attached").get(0),n=$(this.nodeError).closest(".modal-content").get(0),r=0;if(i)null==e||null===(t=e.getDynamicStickyFooter())||void 0===t||t.showTab(),r=(n=$(this.nodeError).closest(".dynamic-sticky-footer__drawer").get(0)).getBoundingClientRect().top;n||(n=document.documentElement||document.body);var a,o=this.nodeError.getBoundingClientRect().top-r+n.scrollTop-(i?n.offsetHeight:window.innerHeight)/2+this.nodeError.offsetHeight/2;if(i)null==e||null===(a=e.getDynamicStickyFooter())||void 0===a||a.setScrollTop(o);else $(n).animate({scrollTop:o},200)}}},n.a.Base);a.POPOVER={REGION:{TITLE:dlang("site","Fulfilled in {region}"),DESC:lang("Ships to locations worldwide")},UNAVAILABLE:{TITLE:lang("Out of stock"),DESC:dlang("generator","Sorry, this size and color combination is out of stock. Please choose a different size and color combination."),DESC_SIZE_ONLY:dlang("generator","Sorry, this size is out of stock. Please choose a different size")},SAMPLE:{TITLE:lang("Not available as sample"),DESC:lang("You can place it as a basic order")},DSR_LIMITED:{DESC_SIZE:dlang("products","Adjust your {linkStart} default selling preferences {linkEnd} to choose this size"),DESC_COLOR:dlang("products","Adjust your {linkStart} default selling preferences {linkEnd} to choose this color"),DESC_TECHNIQUE:dlang("products","Adjust your {linkStart} default selling preferences {linkEnd} to choose this technique")}},(globalThis||{}).PFVariantPickerBasePicker=a},"86cz":function(e,t,i){"use strict";i.d(t,"a",(function(){return Te}));var n=i("xeH2"),r=i.n(n),a=i("edgZ"),o=i("nF4n"),s=i("97Au"),l=i("sjGI"),c=function(e){this.guidelineLink=langUrl("/custom/embroidered/hats/yupoong-6245cm-unstructured-classic-dad-cap#guidelines"),this.node=tag("div",null,[tag("div","pf-p-16",[tag("div","alert alert-warning",[tag("p",{className:"pf-mb-0",innerHTML:dlang("library",'<strong>Please format your files according to the information below and on</strong> <a href="{url}" class="text-bold" target="_blank"> our guidelines </a> to make sure we can have them embroidered as quickly as possible.').replace("{url}",this.guidelineLink)}),tag("p","pf-mb-18",[tag("strong",null,dlang("library","If your graphic doesnâ€™t meet our requirements, we canâ€™t guarantee the quality of the end product."))]),tag("div","pf-mb-18",[tag("p","pf-mb-0",[tag("strong",null,dlang("library","Please note:"))]),tag("p",{className:"pf-mb-0",innerHTML:dlang("library","1. Highly <strong>detailed graphics </strong>that ignore our guidelines <strong>may be run stitched </strong> (see #8 below)")}),tag("p",{className:"pf-mb-0",innerHTML:dlang("library","2. Orders made with embroidery files that are otherwise defective <strong>will be put on hold</strong>")})]),tag("p",{className:"pf-mb-0",innerHTML:dlang("library",'To create more accurate designs and visualize the outcome of your product, order our <a href="{url}" class="text-bold" target="_blank">embroidery sample</a>.').replace("{url}",langUrl("/custom/hats-embroidery/231/embroidery-sample?tab=Info"))})]),tag("div","pf-mb-0",[tag("img",{className:"embroidery-image",src:"/static/images/embroidery/embroidery-warning.png"})]),tag("ol","emb-list emb-list-modal",[tag("li","",[tag("div","emb-title color_dark-red",[tag("span","number","1."),dlang("library","High profile template")])]),tag("li","",[tag("div","emb-title color_soft-green",[tag("span","number","2."),dlang("library","Low profile template")])]),tag("li","",[tag("div","emb-title color_medium-blue",[tag("span","number","3."),dlang("library","Side logo template")])]),tag("li","",[tag("div","emb-title color_soft-blue",[tag("span","number","4."),dlang("library","Flat embroidery")])]),tag("li","",[tag("div","emb-title color_black",[tag("span","number","5."),dlang("library","3D Puff embroidery")]),tag("div","emb-desc",[dlang("library","A technique where embroidery is raised. Used mostly for big shapes.")])]),tag("li","",[tag("div","emb-title color_soft-yellow",[tag("span","number","6."),dlang("library","Partial 3D Puff")]),tag("div","emb-desc",[dlang("library","A technique where both Flat embroidery and 3D Puff used in the same graphic.")])]),tag("li","",[tag("div","emb-title color_soft-brown",[tag("span","number","7."),dlang("library","Satin stitch outline")]),tag("div","emb-desc",[dlang("library","Used to outline an object or to cap a 3D Puff design. Itâ€™s a long, straight embroidery stitch that looks like satin.")])]),tag("li","",[tag("div","emb-title color_soft-grey",[tag("span","number","8."),dclang("library","The running stitch","Run stitch")]),tag("div","emb-desc",[dlang("library","The running stitch is the basic stitch embroidery. The stitch is worked by passing the needle in and out of the fabric going straight forward in a line.")])]),tag("li","",[tag("div","emb-title color_soft-pink",[tag("span","number","9."),dlang("library","Tatami fill")]),tag("div","emb-desc",[dclang("library","Tatami fill description","Used to fill large areas.")])])]),tag("h4","pf-mt-32",dlang("library","Donâ€™t skip our video tutorial")),this._videoEmbed=tag("div",{className:"video-embed pf-py-12",style:{maxWidth:"600px",marginLeft:"auto",marginRight:"auto"}},[tag("iframe",{src:l.a.isES()?"https://www.youtube.com/embed/ArcUo2jTd3U":"https://www.youtube.com/embed/aEfsyYe26Zg",attr:{width:560,height:315,frameborder:0,allowfullscreen:""}})])]),tag("label","pf-p-16 popup-label",[this.nodeCheckbox=tag("input",{type:"checkbox"})," ",dlang("library","I have reviewed the requirements, donâ€™t show this again.")]),tag("div","pf-p-16 border-top",[this.nodeAccept=tag("a",{className:"pf-btn pf-btn-primary",onclick:function(){ga("send",{hitType:"event",eventCategory:"FileLibrary",eventAction:"Accept copyright warning"}),this.nodeCheckbox.checked&&((new a.a).confirmEmbroidery(),this.rememberShown()),e()}.bind(this)},dlang("library","I accept"))])]),$([this._videoEmbed]).fitVids()};(c.prototype=new o.a.Base).storageKey="embroideryWarningSeen3",c.prototype.shouldShow=function(){return PF.Customer.isLogged()?!PF.Customer.embroidery_seen:localStorage&&"seen"!==localStorage.getItem(this.storageKey)},c.prototype.rememberShown=function(){try{PF.Customer.embroidery_seen=1,localStorage.setItem(this.storageKey,"seen")}catch(e){alert(dlang("library",'Your web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.'))}},c.showPopup=function(e){var t,i=new c((function(){t.remove()}));if(i.shouldShow()){ga("send",{hitType:"event",eventCategory:"FileLibrary",eventAction:"See embroidery warning"});var n=new s.a.Par;n.modalDialogClass="modal-dialog__embroidery-info",n.title=dlang("library","Please double check your embroidery file"),n.onClose=e,(t=new s.a(n)).setContent(i.node),t.show()}else e()},(globalThis||{}).PFFileLibraryEmbroideryWarning=c;var d=i("dJr+"),u=i("xb4v"),h=i("oixo"),p=i("Gv5l"),g=i("o0qH"),f=i("E17x"),_=i("SaSb"),m=i("gqyd"),v=i("+I3z"),y=Class({groupType:null,quickDesignId:null,uniqueId:null,onClicked:null,onRequestRemoval:null,onRequestAlign:null});window&&((globalThis||{}).PFProductPushLayerPickerGroupPar=y);var b=i("bvdp"),P=i("+erO"),C=i("n6mh"),T=i("KLvT"),I=i("gqiv"),w=i("Svo9"),S=Class({_par:null,_groupTypeItem:null,uniqueId:null,group:!0,items:[],__construct:function(e){var t=this;this._par=e,this.uniqueId=this._par.uniqueId,this.isQuickDesign()?(Object(w.h)(),Object(w.f)(this._par.quickDesignId)?this._groupTypeItem=Object(w.d)(this._par.quickDesignId):console.error("Quick design not cached, start panic!!!")):this.isLogoTemplate()&&(this._groupTypeItem=Object(T.a)().getters[I.a+I.i](this._par.quickDesignId)),this.node=tag("div",{className:"layer-picker__group pf-border-bottom",onclick:this._par.onClicked.bind(null,this),attr:{"data-group-id":this._par.uniqueId}},[tag("div","layer-picker__group__details row no-gutters",[tag("div","col-auto",[tag("div","layer-picker__group__handle-wrap pf-py-16 pf-pl-24 pf-pr-12",[tag("div","layer-picker__group__thumb pf-border",[this._thumbNode=this._getThumbNode()])])]),tag("div","col pf-ui-caption",[tag("div","layer-picker__group__handle-wrap pf-pt-16",[this._titleNode=this._getTitleNode(),this._sizeNode=this._getSizeNode(),tag("span",{className:"pf-i pf-i-information pf-i-18 pf-text-gray pf-ml-2 pf-mb-4",attr:{title:dlang("generator","These units aren't inches or cm! Use them as a reference point for your design size."),"data-toggle":"tooltip"}})]),tag("div","layer-picker__group__controls row",[tag("div","col-12 pf-mt-12",[tag("div","pf-bold pf-mb-8",lang("Align")+":"),tag("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Center vertically"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,P.a.ALIGNMENT.VERTICAL)},[tag("i","pf-i pf-i-format-vertical-align-center pf-i-18")]),tag("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Center horizontally"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,P.a.ALIGNMENT.HORIZONTAL)},[tag("i","pf-i pf-i-format-horizontal-align-center pf-i-18")]),tag("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Left"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,P.a.ALIGNMENT.LEFT)},[tag("i","pf-i pf-i-format-horizontal-align-left pf-i-18")]),tag("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Right"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,P.a.ALIGNMENT.RIGHT)},[tag("i","pf-i pf-i-format-horizontal-align-right pf-i-18")]),tag("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Top"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,P.a.ALIGNMENT.TOP)},[tag("i","pf-i pf-i-format-vertical-align-top pf-i-18")]),tag("a",{className:"btn btn-empty pf-px-12 pf-mb-8",attr:{title:dlang("generator","Bottom"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,P.a.ALIGNMENT.BOTTOM)},[tag("i","pf-i pf-i-format-vertical-align-bottom pf-i-18")])])])]),tag("span","layer-picker__group__handle",[tag("i","pf-i pf-i-drag pf-i-18")]),tag("span",{className:"layer-picker__group__delete",onclick:function(e){e.stopPropagation(),$(this.node).find('[data-toggle="tooltip"]').tooltip("hide"),this._par.onRequestRemoval(e)}.bind(this),attr:{title:lang("Delete"),"data-toggle":"tooltip"}},[tag("i","pf-i pf-i-trash-can-outline pf-i-18")]),tag("span",{className:"layer-picker__group__reset",onclick:function(e){e.stopPropagation(),$(this.node).find('[data-toggle="tooltip"]').tooltip("hide"),this._par.onRequestPositionReset(e),b.a._track("Reset position button",b.a._getCustomerLabel(),Te.TYPE_QUICKDESIGN)}.bind(this),attr:{title:dlang("dashboard","Reset"),"data-toggle":"tooltip"}},[tag("i","pf-i pf-i-restore pf-i-18")])]),tag("div","row no-gutters",[tag("div",{className:"layer-toggle col-12 pf-pt-8 pf-pb-8 accordion__header",onclick:function(e){t._accordionIcon.classList.contains("opened")?t._accordionIcon.classList.remove("opened"):t._accordionIcon.classList.add("opened")},data:{toggle:"collapse",target:"#layer-group-"+this._par.uniqueId}},[tag("div","layer-toggle__icon pf-d-inline-block text-right",[this._accordionIcon=tag("i","pf-i pf-i-menu-down pf-i-24 pf-text-gray pf-mr-8 accordion__icon")]),tag("span","pf-h5",this.isQuickDesign()?dlang("generator","Quick design layers"):dlang("generator","Logo layers"))])]),this.itemList=tag("div",{className:"nested-sortable accordion__content collapse",id:"layer-group-"+this._par.uniqueId,data:{"layer-group-id":this._par.uniqueId}})])},_getThumbNode:function(){var e=tag("div");if(this._groupTypeItem){var t=this._groupTypeItem.image;e=tag("img",{className:"layer-picker__group__image",src:t.urlThumb})}return e},_getTitleNode:function(){var e=this.isQuickDesign()?dlang("generator","Quick design"):dlang("generator","Logo");return tag("div","layer-picker__group__title pf-pr-40",[tag("span","layer-picker__group__badge",e),this._groupTypeItem.name])},isQuickDesign:function(){return this._par.groupType===C.a.GROUP_QUICK_DESIGN},isLogoTemplate:function(){return this._par.groupType===C.a.GROUP_LOGO_TEMPLATE},getGroupBBox:function(){var e=this.items.map((function(e){return e.getLayer()}));if(null!=e&&e.length){var t,i,n,r;e.forEach((function(e){var a=e.position.getBoundingBox();t=null!==t&&t<a.left?t:a.left,n=null!==n&&n>a.right?n:a.right,i=null!==i&&i<a.top?i:a.top,r=null!==r&&r>a.bottom?r:a.bottom}));var a=new P.a;return a.areaHeight=e[0].position.areaHeight,a.areaWidth=e[0].position.areaWidth,a.height=r-i,a.width=n-t,a.top=i,a.left=t,a}},_getSizeNode:function(){var e={width:0,height:0};return this.items.length&&(e=this.getGroupBBox()),tag("div","pf-mt-2 pf-d-inline-block",[tag("span","pf-bold",dlang("generator","Width:"))," "+e.width.toFixed(2)+" ",tag("span","pf-bold",dlang("dashboard","Height:"))," "+e.height.toFixed(2)])},updateDimensions:function(){o.a.clearNode(this._sizeNode),this._getSizeNode().append(this._sizeNode)},getGroupTypeItem:function(){return this._groupTypeItem},activateList:function(){this.node.classList.add("activated"),this.itemList.classList.add("in")},disableList:function(){this.node.classList.remove("activated"),this.itemList.classList.remove("in")},setActive:function(e){e?(o.a.addClassName(this.node,"active"),this.activateList()):(o.a.removeClassName(this.node,"active"),this.disableList()),this._isActive=e},append:function(e){return this.node.append(e),$(this.node).find('[data-toggle="tooltip"]').tooltip({container:document.body}).on("click",(function(e){$(this).tooltip("hide")})),$(this.node).find('[data-toggle="dropdown"]').dropdown(),this}},o.a.Base);window&&((globalThis||{}).PFProductPushLayerPickerGroup=S);var E=Class({templates:null,placements:[],activePlacementId:"",layer:null,onRequestRemoval:null,onRequestAlign:null,onRequestFlipHorizontally:null,onRequestFlipVertically:null,onRequestCropRectangle:null,onRequestPositionReset:null,onRequestRotate:null,onColorChanged:null,onClicked:null,onChangeIsCustomizable:null,onDuplicate:null,enableRemoveBg:null,onRequestRemoveBg:null,onActive:null,onEdit:null,allowCustomizableLayers:null,onRequestFilePicking:null,isAllOver:null,validateAddingLayer:null,showPatternPicker:null,fileCountLimit:null,openQualityTagPopoverOnRender:null,isActive:null,onSelectQualityTag:null,updateGroupDimensions:null,hideQualityNode:!1,showSizesInPx:!1});window&&((globalThis||{}).PFProductPushLayerPickerItemPar=E);var k=i("ohgv"),O=i("7h5t"),A=i("pWIn"),L=i("cVO5"),N=i("7XA3"),D=i("ka4h"),R=i("MW8O"),x=i("zfrb"),F=i("iQ/s"),M=i("JA1v"),B=i("3Dht"),V=i("dqhU"),j=i("up3R"),U=i("Mg/F"),z=i("9hBW"),G=i("bUho"),H=i("7QI8"),Y=i("X5Ic"),q=i("qqZP"),W=i("A+LN"),K=i("TOJy"),Z=i("GCEm"),Q=i("boP+");function X(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return J(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function ee(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function te(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){ee(a,n,r,o,s,"next",e)}function s(e){ee(a,n,r,o,s,"throw",e)}o(void 0)}))}}var ie,ne=Class({_layer:null,_customizableLabel:null,_par:null,_placementsWithMaxImages:null,_isActive:null,_colorDropdownPar:null,_colorDropdown:null,_removeBgButtonNode:null,_cropButtonNode:null,__construct:function(e){var t;this._par=e,this._layer=this._par.layer;var i=null===(t=Object(Q.a)())||void 0===t?void 0:t.isEmbroidery();this.isClipartLayer()&&(this._needsDefaultColor()&&(this._layer.fillColor=this._layer.getDefaultColor()),this._needsColorUpdate()&&this._par.onColorChanged(this._layer),this._colorDropdownPar=new U.a,this._colorDropdownPar.color=this._layer.fillColor,this._colorDropdownPar.colors=this._getColors(),this._colorDropdownPar.hideRGB=i,this._colorDropdownPar.onChange=this._onColorChanged,this._colorDropdown=new z.a(this._colorDropdownPar)),this._customizableLabel=new N.a,this._layer.isCustomizable&&e.allowCustomizableLayers||this._customizableLabel.hide();var n="";if(this._isAddingLayerCustomizationAllowed(this._layer)){var r=new L.a;r.isChecked=this._layer.isCustomizable,r.onChange=this._onChangeIsCustomizable,r.layerType=this._layer instanceof A.a?A.a.TYPE:this._layer instanceof O.a?O.a.TYPE:v.a.TYPE,n=new D.a(r)}var a=new B.a;a.title=dlang("dashboard","Rotate:"),a.className="",a.value=this._layer.position.rotation>180?this._layer.position.rotation-360:this._layer.position.rotation,a.minValue=-180,a.maxValue=180,a.fractionDigits=0,a.incrementStep=1,a.hasNumberInput=!0,a.onValueChanged=this._par.onRequestRotate,a.onSlide=this._par.onRequestRotate,a.isVisible=!this._layer.isCropState,this._rotationInput=Object(V.a)(a),this.node=Object(o.b)("div",{className:this._layer.parentLayerUniqueId?"pf-d-none":"layer-picker__item pf-border-bottom",onclick:this._par.onClicked.bind(null,this),attr:{"data-layer-id":this.getLayer().uniqueId,"data-layer-group-id":this.getLayer().groupId}},[Object(o.b)("div","row no-gutters",[Object(o.b)("div","col-auto",[Object(o.b)("div","layer-picker__item__inside",[Object(o.b)("i","pf-i pf-i-subdirectory-arrow-left pf-i-24 pf-text-gray pf-pr-8")])]),Object(o.b)("div","col-auto",[Object(o.b)("div","layer-picker__item__handle-wrap pf-py-16 pf-pr-12",[Object(o.b)("div","layer-picker__item__thumb pf-border pf-position-relative",[this._thumbNode=this._getThumbNode(),this._proIndicatorNode=this._getProIndicatorNode()])])]),Object(o.b)("div","col pf-ui-caption",[Object(o.b)("div","layer-picker__item__handle-wrap pf-py-8",[this._customizableLabel,this._titleNode=this._getTitleNode(),this._printQualityNode=this._par.hideQualityNode?"":this._getPrintQualityNode(),this._selectedEmbroideryColorsNode=i?this._getSelectedEmbroideryColors():"",this._sizeNode=this._getSizeNode(),this._par.showSizesInPx?"":Object(o.b)("span",{className:"pf-i pf-i-information pf-i-18 pf-text-gray pf-ml-2 pf-mb-4",attr:{title:dlang("generator","These units aren't inches or cm! Use them as a reference point for your design size."),"data-toggle":"tooltip"}})])])]),Object(o.b)("div","pf-pl-24",[Object(o.b)("div","layer-picker__item__controls row",[this._renderEditButton()?Object(o.b)("div","col-12 pf-mt-12",[Object(o.b)("button",{className:"pf-btn pf-btn-secondary pf-btn-block",onclick:this._par.onEdit.bind(null,this)},dlang("generator","Edit"))]):"",Object(o.b)("div","col-12 pf-mt-12",[this._rotationInput]),Object(o.b)("div","col-12 pf-mt-12 "+(this._layer.isCropState?"pf-d-none":""),[Object(o.b)("div","pf-bold pf-mb-8",lang("Align")+":"),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Center vertically"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,P.a.ALIGNMENT.VERTICAL)},[Object(o.b)("i","pf-i pf-i-format-vertical-align-center pf-i-18")]),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Center horizontally"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,P.a.ALIGNMENT.HORIZONTAL)},[Object(o.b)("i","pf-i pf-i-format-horizontal-align-center pf-i-18")]),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Left"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,P.a.ALIGNMENT.LEFT)},[Object(o.b)("i","pf-i pf-i-format-horizontal-align-left pf-i-18")]),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Right"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,P.a.ALIGNMENT.RIGHT)},[Object(o.b)("i","pf-i pf-i-format-horizontal-align-right pf-i-18")]),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Top"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,P.a.ALIGNMENT.TOP)},[Object(o.b)("i","pf-i pf-i-format-vertical-align-top pf-i-18")]),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mb-8",attr:{title:dlang("generator","Bottom"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,P.a.ALIGNMENT.BOTTOM)},[Object(o.b)("i","pf-i pf-i-format-vertical-align-bottom pf-i-18")])]),this._showFlipControls()?Object(o.b)("div","pf-d-inline-block pf-w-auto pf-mt-4 pf-px-8 pf-px-sm-12 pf-pl-lg-16",[Object(o.b)("div","pf-bold pf-mb-8",dlang("generator","Flip")+":"),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mr-8",attr:{title:dlang("generator","Flip horizontally"),"data-toggle":"tooltip"},onclick:this._par.onRequestFlipHorizontally},[Object(o.b)("i","pf-i pf-i-reflect-horizontal pf-i-18")]),Object(o.b)("a",{className:"btn btn-empty pf-px-12",attr:{title:dlang("generator","Flip vertically"),"data-toggle":"tooltip"},onclick:this._par.onRequestFlipVertically},[Object(o.b)("i","pf-i pf-i-reflect-horizontal pf-i-rotate-90 pf-i-18")])]):"",this._cropButtonNode=Object(o.b)("span"),n?Object(o.b)("div","col-12 pf-mt-12",[n]):"",this._colorDropdown?Object(o.b)("div","col-12 pf-mt-12 "+(this._needsColorDropdown()?"":"pf-d-none"),[Object(o.b)("div","pf-bold pf-mb-8",lang("Choose art color")+":"),this._colorDropdown]):"",this._renderPatternButton()?this._patternButtonNode=Object(o.b)("div","col-12 pf-mt-12",[Object(o.b)("a",{className:"btn btn-block btn-empty pf-px-8 "+(this._layer.cropPosition?"disabled":""),onclick:this._par.onEdit.bind(null,this)},[Object(o.b)("img",{className:"pf-d-inline-block",src:PF.ASSETS_URL+"/generator/pattern-halfdrop.svg",style:{height:"24px"}}),Object(o.b)("span","pf-px-4 pf-px-xs-12 pf-px-md-8 pf-px-lg-12",this._layer.patternType?dlang("generator","Edit pattern"):dlang("generator","Make a pattern"))])]):"",this._removeBgButtonNode=Object(o.b)("div","col-12"),Object(o.b)("div","col-12 pf-my-12",[this._getPlacementDropdown()])]),Object(o.b)("span","layer-picker__item__handle",[Object(o.b)("i","pf-i pf-i-drag pf-i-18")]),Object(o.b)("span",{className:"layer-picker__item__delete",onclick:function(e){e.stopPropagation(),$(this.node).find('[data-toggle="tooltip"]').tooltip("hide"),this._par.onRequestRemoval(e)}.bind(this),attr:{title:lang("Delete"),"data-toggle":"tooltip","data-trigger":"hover","data-delay":'{"show": 100, "hide": 200}'}},[Object(o.b)("i","pf-i pf-i-trash-can-outline pf-i-18")]),Object(o.b)("span",{className:"layer-picker__item__reset "+(this._layer.isCropState?"pf-d-none":""),onclick:function(e){e.stopPropagation(),$(this.node).find('[data-toggle="tooltip"]').tooltip("hide"),this._par.onRequestPositionReset(e),b.a._track("Reset position button",b.a._getCustomerLabel(),this._getType())}.bind(this),attr:{title:dlang("dashboard","Reset"),"data-toggle":"tooltip","data-trigger":"hover","data-delay":'{"show": 100, "hide": 200}'}},[Object(o.b)("i","pf-i pf-i-restore pf-i-18")])])]),this._isActive=this._par.isActive,this._par.openQualityTagPopoverOnRender&&(this.updateLayer(this._layer),this._par.openQualityTagPopoverOnRender=!1),this._renderRemoveBgButton(),this._renderCropButton()},_renderRemoveBgButton:function(){var e=this;return te(regeneratorRuntime.mark((function t(){var i,n,r,a,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.a.clearNode(e._removeBgButtonNode),t.next=3,e._canRenderRemoveBgButton();case 3:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,Object(K.d)(K.b);case 7:n=t.sent,r=!(null===(i=e._layer.fileItem.extra)||void 0===i||!i.usedRemoveBgBeta),a=PF.EMBED_STORE?"":' <a id="getProVersionTooltip" href="javascript:;">'+dlang("generator","Try for free now")+"</a>",s=dlang("generator","Unlock with Printful Pro")+"."+a,l=n||e._layer.isRemovedBg||r?e._getRemoveBgButtonErrors():[s],Object(o.b)("div","pf-mt-12 remove-background-tooltip",[Object(o.b)("a",{className:"btn btn-empty btn-block pf-px-8 "+(l.length?"disabled":""),onclick:l.length?null:e._par.onRequestRemoveBg,style:"pointer-events:all;",attr:{"data-toggle":"tooltip"}},[Object(o.b)("i",{className:"pf-i pf-i-auto-fix pf-i-24",style:{"vertical-align":"sub"}}),Object(o.b)("span","pf-px-4 pf-px-xs-12 pf-px-md-8 pf-px-lg-12",e._layer.isRemovedBg?dlang("generator","Cancel background removal"):dlang("generator","Remove background")),e._layer.isRemovedBg||r?"":Object(o.b)("span",{className:"pf-i pf-i-18 pf-i-crown pf-text-yellow-pro",style:{"vertical-align":"text-bottom"}})])]).append(e._removeBgButtonNode),l.length&&window.$(e._removeBgButtonNode).find('[data-toggle="tooltip"]').tooltip({title:l.join("<br>"),html:!0,placement:"top",container:e.node.parent,delay:{hide:1200}}).on("click",(function(e){e.preventDefault(),$(this).tooltip("show")})).on("shown.bs.tooltip",(function(){var e=document.getElementById("getProVersionTooltip");if(e){var t=function(e){e.preventDefault();var t=window.location.protocol+"//"+window.location.hostname;window.open(t+langUrl("/dashboard/settings/account-subscription-plan"),"_blank")};e.addEventListener("click",t),e.addEventListener("touchend",t)}}));case 14:case"end":return t.stop()}}),t)})))()},_renderCropButton:function(){var e=this;return te(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.a.clearNode(e._cropButtonNode),t.next=3,e._canRenderCropButton();case 3:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:e._manageCropTooltipDisplay(),Object(o.b)("div","pf-d-inline-block pf-w-auto pf-mt-4 "+(e._showFlipControls()?"":"pf-px-8 pf-px-sm-12 pf-px-lg-16"),[Object(o.b)("div","pf-bold pf-mb-8",dlang("generator","Crop")+":"),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mr-8 "+(null!==(i=e.getLayer())&&void 0!==i&&i.isCropState?"pf-border-dark ":"")+(e._layer.patternType||e._layer.isRemovedBg?"disabled ":""),attr:{title:dlang("generator","Toggle crop"),"data-toggle":"tooltip"},onclick:e._par.onRequestCropRectangle},[Object(o.b)("i","pf-i pf-i-crop pf-i-18")])]).append(e._cropButtonNode);case 7:case"end":return t.stop()}}),t)})))()},_manageCropTooltipDisplay:function(){if(this._layer.cropPosition||this._layer.patternType||this._layer.isRemovedBg){var e={"data-toggle":"tooltip","data-trigger":"hover","data-delay":'{"show": 100, "hide": 200}'};if(this._layer.isRemovedBg){var t=Object.assign({title:dclang("generator","background removal","Background Removal Tool currently doesn't work with the Crop Tool")},e);$(this._cropButtonNode).attr(t)}if(this._layer.cropPosition||this._layer.patternType){var i=Object.assign({title:dlang("generator","Patterns currently don't work with the Crop Tool")},e);this._layer.cropPosition&&$(this._patternButtonNode).attr(i),this._layer.patternType&&$(this._cropButtonNode).attr(i)}}},hasLayer:function(e){return!!this._layer&&this._layer.uniqueId===e.uniqueId},updateRotationInput:function(e){this._rotationInput&&(e>180&&(e-=360),this._rotationInput.setValue(e))},_renderEditButton:function(){var e;return this._par.onEdit&&(this.isTextLayer()||this.isImageLayer()&&((null===(e=Object(Q.a)())||void 0===e?void 0:e.isEmbroidery())||this._par.templates.getTechnique()===Y.a.TECHNIQUE_EMBROIDERY))},_renderPatternButton:function(){var e=this._par.templates.getActiveTemplate(this._par.activePlacementId).getMirroredLayer(this._layer),t=[H.a.TYPE_LABEL_INSIDE,H.a.TYPE_LABEL_OUTSIDE,H.a.TYPE_HANG_TAG].indexOf(this._par.activePlacementId)<0;return this._par.onEdit&&this._par.showPatternPicker&&!e&&t&&!this.isTextLayer()&&(this.isImageLayer()||this.isClipartLayer()||this.isLicensedAssetLayer())&&!this._layer.isCropState},_renderPlacementDropdown:function(){var e,t=this._par.templates.getActiveTemplate(this._par.activePlacementId).getMirroredLayer(this._layer),i=[H.a.TYPE_LABEL_INSIDE,H.a.TYPE_LABEL_OUTSIDE,H.a.TYPE_HANG_TAG].indexOf(this._par.activePlacementId)<0;return(this._par.isAllOver(!0)||(null===(e=Object(Q.a)())||void 0===e?void 0:e.canDublicatePlacementLayers()))&&!t&&i},_canRenderRemoveBgButton:function(){var e=this;return te(regeneratorRuntime.mark((function t(){var i,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e._layer.fileItem,t.next=3,Object(W.q)(W.j);case 3:return r=t.sent,t.abrupt("return",n&&!n.isSample&&e.isImageLayer()&&e._par.enableRemoveBg&&e._par.onRequestRemoveBg&&(r||(null===(i=n.extra)||void 0===i?void 0:i.usedRemoveBgBeta))&&n.storeId!==Z.c&&!e._layer.isCropState);case 5:case"end":return t.stop()}}),t)})))()},_canRenderCropButton:(ie=te(regeneratorRuntime.mark((function e(){var t,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._layer.fileItem||this._layer.licensedAssetItem,e.next=3,Object(W.q)(W.f);case 3:return i=e.sent,n=!this._isEmbroideryTechnique()&&!this._isLogoMakerMode()&&!this._isPromoMakerMode(),e.abrupt("return",i&&t&&!t.isSample&&(this.isImageLayer()||this.isLicensedAssetLayer())&&n);case 6:case"end":return e.stop()}}),e,this)}))),function(){return ie.apply(this,arguments)}),_getRemoveBgButtonErrors:function(){var e,t=[],i=this._layer.fileItem;return this._layer.cropPosition&&t.push(dclang("generator","background removal","Background Removal Tool currently doesn't work with the Crop Tool")),i?null!==(e=i.extra)&&void 0!==e&&e.noBackgroundFound?(t.push(dclang("generator","background removal","Background canâ€™t be removed. Please adjust the image and re-upload it or upload a different one.")),t):(i.width*i.height>=5e7&&t.push(dclang("generator","background removal","Image resolution too large. Please upload a smaller image.")),["image/png","image/jpeg"].includes(i.type)||t.push(dclang("generator","background removal","Unsupported file format. Please upload JPEG or PNG.")),i.filesize>=12e6&&t.push(dclang("generator","background removal","Your file can't be more than {maxFileSize}. Please upload a smaller file.").replace("{maxFileSize}","12&nbsp;MB")),t):t},_showFlipControls:function(){var e;return(this.isImageLayer()||this.isClipartLayer()||this.isLicensedAssetLayer())&&!(null!==(e=Object(Q.a)())&&void 0!==e&&e.isEmbroidery())&&!this._layer.isCropState},_showCropControls:function(){var e;return(this.isImageLayer()||this.isLicensedAssetLayer())&&!(null!==(e=Object(Q.a)())&&void 0!==e&&e.isEmbroidery())&&Object(W.q)(W.f)},updateLayer:function(e){var t=this;if(this._layer=e,o.a.clearNode(this._sizeNode),this._getSizeNode().append(this._sizeNode),this._par.updateGroupDimensions&&this._par.updateGroupDimensions(),!this._par.hideQualityNode)if(this.isImageLayer()||this.isLicensedAssetLayer()){o.a.clearNode(this._printQualityNode),this._getPrintQualityNode().append(this._printQualityNode),this._selectedEmbroideryColorsNode&&(o.a.clearNode(this._selectedEmbroideryColorsNode),this._getSelectedEmbroideryColors().append(this._selectedEmbroideryColorsNode));var i=this._currentQualityKey+"_"+this._layer.uniqueId;R.a.TagPopoverClosed[i],e.isExisting;this._par.openQualityTagPopoverOnRender&&setTimeout((function(){t._showQualityTagTooltip(),t._par.onSelectQualityTag(null),t._par.openQualityTagPopoverOnRender=null}),0)}else this.isClipartLayer()&&(o.a.clearNode(this._thumbNode),this._getThumbNode().append(this._thumbNode))},_requestFilePicking:function(e){var t=Object(Q.a)();t&&!e&&t.isEmbroidery()?c.showPopup(this._requestFilePicking.bind(this,!0)):this._par.onRequestFilePicking()},getLayer:function(){return this._par.layer},setActive:function(e){e?(this._par.onActive&&this._par.onActive(),o.a.addClassName(this.node,"active")):(this._colorDropdown&&this._colorDropdown.closeDropdown(),o.a.removeClassName(this.node,"active")),this._isActive=e},_onChangeIsCustomizable:function(e){e?this._customizableLabel.show():this._customizableLabel.hide(),this._par.onChangeIsCustomizable&&this._par.onChangeIsCustomizable()},isImageLayer:function(){return this._layer.isImageLayer()},isTextLayer:function(){return this._layer.isTextLayer()},isClipartLayer:function(){return this._layer.isClipartLayer()},isLicensedAssetLayer:function(){return this._layer.isLicensedAssetLayer()},_getThumbNode:function(){var e=Object(o.b)("div");if(this.isImageLayer()){var t=this._par.layer.shouldUseTempFile?this._par.layer.temporaryFileItem:this._par.layer.fileItem;e=Object(o.b)("img",{className:"layer-picker__item__image",src:t.urlThumb})}else this.isTextLayer()?e=Object(o.b)("i",{className:"pf-i pf-i-format-font pf-i-24 pf-p-12",style:{color:this._layer.color||"#000"}}):this.isClipartLayer()?e=Object(o.b)("img",{className:"layer-picker__item__image",src:this._layer.overrideImage||this._layer.clipartItem.image.urlThumb}):this.isLicensedAssetLayer()&&(e=Object(o.b)("img",{className:"layer-picker__item__image",src:this._par.layer.licensedAssetItem.previewUrl}));return e},_getProIndicatorNode:function(){var e,t,i,n,r=this.isClipartLayer()&&(null===(e=this._layer.clipartItem)||void 0===e||null===(t=e.extra)||void 0===t?void 0:t.premium),a=!(null===(i=this._layer.fileItem)||void 0===i||null===(n=i.extra)||void 0===n||!n.usedRemoveBgBeta),s=this._layer.isRemovedBg&&!a;return r||s?Object(o.b)("div",{className:"pf-position-absolute pf-bg-white pf-rounded-circle",style:{top:"-10px",right:"-10px",padding:"1px",height:"20px",width:"20px"}},[Object(o.b)("span",{className:"pf-i pf-i-18 pf-i-crown pf-text-yellow-pro",attr:{"data-toggle":"tooltip","data-container":"body",title:dlang("generator","Printful Pro feature")},style:{"vertical-align":"top"}})]):""},_getTitleNode:function(){var e="";this.isImageLayer()?e=(this._par.layer.shouldUseTempFile?this._par.layer.temporaryFileItem:this._par.layer.fileItem).filename:this.isTextLayer()?e=k.a.shortenString(this._layer.text,50):this.isClipartLayer()?e=this._layer.clipartItem.name:this.isLicensedAssetLayer()&&(e="");return Object(o.b)("div","layer-picker__item__title pf-pr-40",[Object(o.b)("span","layer-picker__item__badge",this._getType()),e])},_getPrintQualityNode:function(){var e=x.a.QUALITY_GOOD,t=dlang("generator","Vector");if(this.isImageLayer()||this.isLicensedAssetLayer()){var i=this._par.templates.getQuality();e=i.getQualityKey(i.getQualityPercent(this._layer),this._layer,this._isEmbroideryTechnique(),!1),t=this._layer.isVector()?dlang("generator","Vector"):this._layer.getDPI()+lang(" DPI")}var n=R.a.qualityMap[e];return Object(o.b)("div","layer-picker__item__quality pf-bold pf-mt-2",[Object(o.b)("span","",[dlang("generator","Print quality")+": ",Object(o.b)("span",n[0],n[1]+" / "+t)]),this._getTagByQualityKey(e),this._shouldShowTransparencyInfo()?Object(o.b)("div",{className:"pf-text-yellow-dark",innerHTML:dlang("generator",'File contains <a href="{url}" target="_blank">semi-transparent elements</a>').replace("{url}",langUrl("/transparency-in-dtg-files"))}):""])},_isEmbroideryTechnique:function(){var e;return!!(null!==(e=Object(Q.a)())&&void 0!==e&&e.isEmbroidery()||this._par.templates.getTechnique()===Y.a.TECHNIQUE_EMBROIDERY)},_isLogoMakerMode:function(){var e;return(null===(e=this._par.templates.getActiveTemplate(this._par.activePlacementId))||void 0===e?void 0:e.technique)===Y.a.TECHNIQUE_LOGO},_isPromoMakerMode:function(){var e;return(null===(e=this._par.templates.getActiveTemplate(this._par.activePlacementId))||void 0===e?void 0:e.technique)===Y.a.TECHNIQUE_PROMO},_getTagByQualityKey:function(e){return this._tagNode="",this._isEmbroideryTechnique()||(e===x.a.QUALITY_BAD_UPSCALE&&(this._tagNode=Object(o.b)("span",{className:"popover-trigger-manual layer-picker__item__tag pf-ml-4 pf-mr-12",onclick:this._beforeShowQualityTagTooltip,attr:{"data-toggle":"popover","data-content":"1"}},[Object(o.b)("i","pf-i pf-i-star-four-points pf-mx-2"),Object(o.b)("span","pf-ui-legal pf-normal pf-mr-4",dlang("generator","Adjusted"))])),this._currentQualityKey!==e&&this._tagPopover&&(this._tagPopover.destroy(),this._tagPopover=null,this._setQualityTagActive()),this._currentQualityKey=e,this._setQualityTagActive(!0)),this._tagNode},_beforeShowQualityTagTooltip:function(){this._isActive?this._showQualityTagTooltip():this._par.onSelectQualityTag&&this._par.onSelectQualityTag(this._layer.uniqueId)},_showQualityTagTooltip:function(){var e=this;if(this._tagNode&&!this._tagPopover){var t=R.a.qualityTagTextMap[this._currentQualityKey];if(t){var i=l.a.isJp()?"https://faq.printful.com/article/124":langUrl("/faq/design-tips-mockups/470-how-does-the-smart-image-tool-work-");this._tagPopover=new G.a(this._tagNode,"","",{container:"#js--product-push-designer",placement:_.a.isWindowSmallerThan(_.a.SIZES.MD)?"bottom":"right",trigger:"manual",closeOnResize:!0,template:Object(o.b)("div","popover popover--quality-tag",[Object(o.b)("div","arrow"),Object(o.b)("div","row no-gutters",[Object(o.b)("div","col-3 pf-text-center",[Object(o.b)("img",{className:"img-responsive pf-pr-12",src:PF.ASSETS_URL+"generator/upscale-image.gif"})]),Object(o.b)("div","col-8",[Object(o.b)("div","popover-header pf-h5",t.header||""),Object(o.b)("div","popover-body pf-ui-caption pf-text-muted pf-mt-16",[Object(o.b)("p","",t.content||""),Object(o.b)("a",{href:i,target:"_blank"},dlang("generator","More info"))])]),Object(o.b)("div","col-1 pf-text-center",[Object(o.b)("i",{className:"pf-i pf-i-close pf-i-18 popover__close-quality-tag",onclick:function(){return e._tagPopover.destroy(!0)}})])])])},this._onQualityTagPopoverClose)}this._tagPopover.show(),R.a.TagCurrOpenPopover=this._tagPopover,this._setQualityTagActive(!0)}},_onQualityTagPopoverClose:function(e){if(e){var t=this._currentQualityKey+"_"+this._layer.uniqueId;R.a.TagPopoverClosed[t]=!0}this._tagPopover=null,this._setQualityTagActive()},_setQualityTagActive:function(e){if(this._tagNode&&(!e||this._tagPopover)){var t=this._currentQualityKey===x.a.QUALITY_BAD_UPSCALE?"layer-picker__item__tag--active":"";t&&(e?o.a.addClassName(this._tagNode,t):o.a.removeClassName(this._tagNode,t))}},_shouldShowTransparencyInfo:function(){var e=Object(Q.a)();return e&&(e.isDtgShirt()||e.isDtgTote())&&this.isImageLayer()&&this._par.templates&&this._par.templates.getTechnique()!==Y.a.TECHNIQUE_EMBROIDERY&&this._layer.hasTransparencyIssues()},_getSelectedEmbroideryColors:function(){var e=[];if(this._layer&&this._layer.overrideColors){var t=Object.values(this._layer.overrideColors);e=t.filter((function(e,i){return e&&t.indexOf(e)==i}))}else this._layer&&this._layer.color&&e.push(this._layer.color);var i=new F.a;i.colors=e,i.nodeClass="pf-d-inline-block pf-pl-2";var n=new M.a(i);return Object(o.b)("div","pf-bold pf-mt-2",[dlang("generator","Thread colors")+": ",n])},_getSizeNode:function(){var e=this._layer.isCropPositionUpdateNeeded()?this._layer.cropPosition:this._layer.position,t=this._par.showSizesInPx?parseInt(e.width):e.width.toFixed(2),i=this._par.showSizesInPx?parseInt(e.height):e.height.toFixed(2);return Object(o.b)("div","pf-mt-2 pf-d-inline-block",[Object(o.b)("span","pf-bold",dlang("generator","Width:"))," "+t+" ",Object(o.b)("span","pf-bold",dlang("dashboard","Height:"))," "+i])},_getPlacementDropdown:function(){var e=this;if(this._layer.isCropState)return"";var t=this._renderPlacementDropdown(),i=this._getAvailablePlacementsForCopy();this._placementsWithMaxImages=[],this._layer.isImageLayer()&&i.forEach((function(t){e._par.templates.getLayersByType(v.a,t.id,!1).length>=e._par.fileCountLimit&&e._placementsWithMaxImages.push(t)})),this._layer.isLicensedAssetLayer()&&i.forEach((function(t){e._par.templates.getLayersByType(q.a,t.id,!1).length>=e._par.fileCountLimit&&e._placementsWithMaxImages.push(t)}));var n=i.map(function(e){return this._placementsWithMaxImages.filter((function(t){return t.id===e.id})).length?Object(o.b)("li","",[Object(o.b)("div",{className:"pf-pl-40 pf-py-12 pf-ui-body pf-text-muted"},[e.title,Object(o.b)("div","pf-ui-caption",dlang("generator","The limit is {number} File layers per placement.").replace("{number}",this._par.fileCountLimit))])]):Object(o.b)("li","",[Object(o.b)("a",{className:"pf-pl-40 pf-py-12 pf-ui-body",onclick:function(e,t){t.stopPropagation(),this._copyLayerToPlacements([e])}.bind(this,e)},e.title)])}.bind(this));return n.length<1&&(t=!1),Object(o.b)("div","row no-gutters dropdown",[Object(o.b)("a",{className:"btn "+(t?"col-10":"col-12")+" btn-block btn-empty "+(this._par.validateAddingLayer(this._layer)?"":"disabled"),onclick:function(e){e.stopPropagation(),this._par.onDuplicate(e)}.bind(this)},[Object(o.b)("i","pf-i pf-i-content-copy pf-i-18 pf-text-gray pf-mb-2"),Object(o.b)("span","pf-pl-4",dlang("dashboard","Duplicate"))]),t?Object(o.b)("a",{className:"btn col-2 pf-px-4 btn-empty dropdown-toggle "+(this._par.validateAddingLayer(this._layer)?"":"disabled"),onclick:function(e){e.stopPropagation()},attr:{"data-toggle":"dropdown"}},[Object(o.b)("i","pf-i pf-i-chevron-down pf-i-24 pf-text-gray")]):"",t?Object(o.b)("ul","dropdown-menu dropdown-menu-right pf-border pf-p-0 pf-m-0",[Object(o.b)("li","",[Object(o.b)("div","pf-p-12 pf-ui-caption pf-bg-lighter pf-text-muted",[Object(o.b)("span","pf-i pf-i-content-duplicate pf-i-18 pf-pr-8"),Object(o.b)("span","",dlang("generator","Duplicate onâ€¦"))])]),n.length>1?Object(o.b)("li","",[Object(o.b)(this._placementsWithMaxImages.length?"div":"a",{className:"pf-pl-40 pf-py-12 pf-ui-body"+(this._placementsWithMaxImages.length?" pf-text-muted":""),onclick:function(e){e.stopPropagation(),this._placementsWithMaxImages.length||this._copyLayerToPlacements(this._getAvailablePlacementsForCopy())}.bind(this)},[dlang("generator","All placements"),this._placementsWithMaxImages.length?Object(o.b)("div","pf-ui-caption",dlang("generator","The limit is {number} File layers per placement.").replace("{number}",this._par.fileCountLimit)):""])]):""].concat(n)):""])},_getAvailablePlacementsForCopy:function(){var e=[H.a.TYPE_LABEL_INSIDE,H.a.TYPE_LABEL_OUTSIDE,H.a.TYPE_HANG_TAG].concat(X(Object(Q.b)()));return e.indexOf(this._par.activePlacementId)<0?this._par.placements.filter(function(t){return e.concat([this._par.activePlacementId]).indexOf(t.id)<0}.bind(this)):[]},_copyLayerToPlacements:function(e){this._placementsWithMaxImages.length&&(this._layer.isImageLayer()||this._layer.isLicensedAssetLayer())&&(e=e.filter(function(e){return 0===this._placementsWithMaxImages.filter((function(t){return t.id===e.id})).length}.bind(this))),this._par.templates.copyLayerToPlacementTemplates(this._layer,e);var t=$(".modal-content").length?$(".modal-content"):$("body"),i=dlang("generator","Layer duplicated on {placements}").replace("{placements}",e.map((function(e){return e.title})).join(", "));new j.a(i,j.a.TYPE_SUCCESS,3e3).append(t[0])},_onColorChanged:function(e){this._layer.clipartItem.customizable&&(this._layer.fillColor=e,this._par.onColorChanged&&this._par.onColorChanged(this._layer))},_needsColorDropdown:function(){var e;return this._layer.clipartItem.customizable&&!(null!==(e=Object(Q.a)())&&void 0!==e&&e.isJewelry())},_needsDefaultColor:function(){return!(this._layer.fillColor&&!(this._layer.fillColor.length<1)||!this._layer.clipartItem.customizable)},_needsColorUpdate:function(){return!(this._layer.fillColor&&!(this._layer.fillColor.length<1)||this._layer.overrideImage||this._layer.overrideImagePulse||!this._par.onColorChanged||!this._layer.clipartItem.customizable)},_getColors:function(){if(this._par.isAllOver&&this._par.isAllOver())return z.a.allOverColors();var e=z.a.defaultColors(),t=Object(Q.a)();return null!=t&&t.isWhiteDtgTote()&&delete e.White,null!=t&&t.isBlackMug()&&delete e.Black,e},_getType:function(){switch(!0){case this.isClipartLayer():return dlang("generator","Clipart");case this.isTextLayer():return dlang("generator","Text");case this.isImageLayer():return dlang("generator","File");case this.isLicensedAssetLayer():return dlang("generator","Premium");default:return""}},_isAddingLayerCustomizationAllowed:function(e){return!(!this._par.allowCustomizableLayers||this.isClipartLayer()||this.isLicensedAssetLayer()||this._layer.isCropState)&&(this._par.templates.getTemplateByLayer(e).technique!==Y.a.TECHNIQUE_EMBROIDERY||this.isTextLayer())},append:function(e){var t=this;return this.node.append(e),setTimeout((function(){$(t.node).find('[data-toggle="tooltip"]').tooltip({container:document.body}).on("click",(function(e){document.querySelector(".remove-background-tooltip")||$(this).tooltip("hide")})),$(t.node).find('[data-toggle="dropdown"]').dropdown()}),0),this}},o.a.Base);window&&((globalThis||{}).PFProductPushLayerPickerItem=ne);var re=Class({callback:null,_placementTitle:"",__construct:function(e,t){this._placementTitle=t,this.callback=e,this._render()},_render:function(){var e=new s.a.Par;e.modalDialogClass="modal-md",this._modal=new s.a(e),this._modal.setHeaderContent("");var t=tag("div","",[tag("div","warning-text",[tag("h4","",dlang("generator","Are you sure?")),tag("p","",dlang("generator","The {placement_title} youâ€™re copying the design to already has a design. Do you wish to replace the existing design with the new one?").replace("{placement_title}",this._placementTitle))])]);this._modal.setContent(t);var i=tag("div",{style:{textAlign:"left"}},[tag("a",{className:"pf-btn pf-btn-primary pf-mr-16",onclick:this._callback.bind(this)},dlang("generator","Yes, replace")),tag("a",{className:"pf-btn pf-btn-secondary",onclick:this._modal.remove.bind(this._modal)},dlang("generator","Cancel"))]);this._modal.setFooterContent(i),this._modal.show()},_callback:function(){this._modal.remove(),this.callback()}});window&&((globalThis||{}).PFProductPushCopyWarningPopup=re);var ae=i("JQxb"),oe=i("CvqS"),se=i("Ii6r"),le=i("Kblr"),ce=i("qkdH"),de=i("7pSD"),ue=i("x0He"),he=i("46ud"),pe=i("v4sp"),ge=i("wo5H"),fe=i("/w+P"),_e=i("YvQZ"),me=i("0nZy");function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function be(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Pe(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){be(a,n,r,o,s,"next",e)}function s(e){be(a,n,r,o,s,"throw",e)}o(void 0)}))}}var Ce,Te=Class({fileCountLimit:5,licensedAssetCountLimit:10,groupLimit:2,_pickerItems:{},nodeError:null,_par:null,_productOptionsPicker:null,_productOptions:null,_productOptionsValues:null,_forceDisableCustomizer:!1,_templatesAvailableForLayerCopy:[],_unsubscribedFromEvents:!1,_isPopupBusy:!1,_placementLimiter:null,__construct:function(e){this._par=e,this._par.fileCountLimit&&(this.fileCountLimit=this._par.fileCountLimit),this._par.licensedAssetCountLimit&&(this.licensedAssetCountLimit=this._par.licensedAssetCountLimit),this._productOptions={},this._productOptionsValues={},o.a.O2O(this._productOptions,this._par.productOptions),this.setProductOptionsValues(this._par.productOptionsValues),this._setTemplatesAvailableForLayerCopy(),this._nodeTemplateInfo=new ae.a,this.node=tag("div","",[this._nodeTemplateInfo.node,this._nodePicker=tag("div"),this._nodeDesignFillColorPicker=PF.Customer.abTestBgFill()?tag("div","pf-mt-12 pf-pt-12 pf-border-top",[e.designFillColorPicker]):"",this._nodeLayersTitle=tag("div","pf-position-relative pf-d-none",[tag("h6","pf-border-top pf-h6 pf-mt-12 pf-mb-12 pf-pt-16 pf-h5",dlang("generator","Layers"))]),this._nodeLayersCopy=tag("div"),this._nodeLayers=tag("div","nested-sortable"),this.nodeError=tag("div","alert alert-danger text-center hidden pf-p-12 pf-mt-16",lang("Please add a design!")),this._nodePlacementOptions=tag("div","layer-picker__item__options-picker pf-mt-16")]),this._placementLimiter=new le.a(this._par.templates,this._par.placementSelector,this._par.isMockupGeneratorMode),this._subscribeTemplateEvents(),this.render()},_unsubscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().unsubscribe(this._onLayerRemoved).unsubscribe(this._updateLayers).unsubscribe(this._renderCurrentPlacement).unsubscribe(this._updateRotationInput)},_subscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().addOnLayerRemovedListener(this._onLayerRemoved).addOnTemplateResizedListener(this._updateLayers).addOnActiveLayerChanged(this._renderCurrentPlacement).addOnLayerConfigurationChanged(this._renderCurrentPlacement).addOnLayerRotatedListener(this._updateRotationInput).addOnLayerOrderChangedListener(this._renderCurrentPlacement)},_unsubscribeTemplateEventsIfNeeded:function(){return!(Object(f.a)(this.node)&&!this._unsubscribedFromEvents)&&(this._unsubscribeTemplateEvents(),this._unsubscribedFromEvents=!0,!0)},resubscribeToEvents:function(){this._unsubscribedFromEvents&&Object(f.a)(this.node)&&this._par.templates&&(this._unsubscribeTemplateEvents(),this._subscribeTemplateEvents(),this.render())},_setTemplatesAvailableForLayerCopy:function(){if(this._canCopyLayers(this._par.activePlacementId)){var e=this._par.templates.getActiveTemplate(this._par.activePlacementId),t=this._par.templates.getTemplates(),i=[];for(var n in t)for(var r in t[n])i.push(t[n][r]);this._templatesAvailableForLayerCopy=i.filter(function(t){if(e&&this._templatesMatchForCopy(e,t)&&this._canCopyLayers(t.placementId))return t.placement_title=this._par.placements.filter((function(e){if(e.id===t.placementId)return e.title})).shift().title,t}.bind(this))}},_templatesMatchForCopy:function(e,t){return e.placementId!==t.placementId&&e.width===t.width&&e.height===t.height},_canCopyLayers:function(e){var t=[H.a.TYPE_SLEEVE_LEFT,H.a.TYPE_SLEEVE_RIGHT,H.a.TYPE_LEG_LEFT,H.a.TYPE_LEG_RIGHT];return!this._par.templates.isCoverMode()&&t.indexOf(e)>-1},_onLayerRemoved:function(e,t){if(!this._unsubscribeTemplateEventsIfNeeded()){var i=this._par.getSelectedMockupVariant(),n=i?i.templateId:null,r=this._par.templates.getActiveLayer()||this._par.templates.getFirstLayer(this._par.activePlacementId,n);if(r){var a=this._par.templates.getTemplateByLayer(r);a&&a.layers.length?this._par.templates.silentlySetActiveLayer(r):o.a.clearNode(this._nodePlacementOptions)}this._renderFiles()}},_renderCurrentPlacement:function(e,t){this._unsubscribeTemplateEventsIfNeeded()||this===t||t instanceof V.a||this._renderFiles()},_getAllPickerItemsInPlacement:function(e){e||(e=this._par.activePlacementId);var t=[];return this._pickerItems[e].forEach((function(e){e.items?e.items.forEach((function(e){return t.push(e)})):t.push(e)})),t},_updateRotationInput:function(e,t){if(!(this._unsubscribeTemplateEventsIfNeeded()||t instanceof V.a)){var i=this._getAllPickerItemsInPlacement();if(i.length){var n=e.position.rotation>180?e.position.rotation-360:e.position.rotation;i.filter((function(t){return t.hasLayer(e)})).forEach((function(e){e.updateRotationInput(n)}))}}},render:function(){var e=this;return Pe(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._par.waitInitialDesignerRender();case 2:e._renderFiles(),e._renderCopyLayersTool();case 4:case"end":return t.stop()}}),t)})))()},_createSortableList:function(e,t){var i=this,n=_.a.isWindowBiggerThan(_.a.SIZES.SM);new ce.a(e,{handle:".layer-picker__item__handle, .layer-picker__group__handle"+(n?", .layer-picker__item__handle-wrap, .layer-picker__group__handle-wrap":""),group:"nested",fallbackOnBody:!0,swapThreshold:.65,onStart:function(e){var t=r()(e.item);e.item.classList.add("layer-picker__item--ghost"),t.find('[data-toggle="popover"]').popover("hide"),t.find('[data-toggle="tooltip"]').tooltip("hide")},onEnd:function(e){e.item.classList.remove("layer-picker__item--ghost")},onAdd:function(e){if(e.item.getAttribute("data-group-id"))i._renderFiles();else{var n=parseInt(e.from.getAttribute("data-layer-group-id")||0),r=parseInt(e.to.getAttribute("data-layer-group-id")||0),a=parseInt(e.item.getAttribute("data-layer-id")||0),o=i._pickerItems[i._par.activePlacementId],s=0;if(n>0&&r>0){var l=o.findIndex((function(e){return e.uniqueId===n})),c=o[l],d=o.findIndex((function(e){return e.uniqueId===r})),u=o[d],h=c.items.splice(e.oldIndex,1)[0];u.items.splice(e.newIndex,0,h);for(var p=0,g=o.length;p<g;p++)if(o[p].group){if(o[p].uniqueId===r){s+=e.newIndex;break}s+=o[p].items.length}else s++;var f=t.length-s-1,_=h.getLayer();_.addToGroupType(u.getGroupTypeItem(),u.uniqueId),i._par.templates.reorderLayer(_,f)}else if(n){var m=o.findIndex((function(e){return e.uniqueId===n})),v=o[m].items.splice(e.oldIndex,1)[0];o.splice(e.newIndex,0,v);for(var y=0,b=o.length;y<b;y++)if(o[y].group)s+=o[y].items.length;else{var P=o[y].node.getAttribute("data-layer-id");if(a&&a===parseInt(P))break;s++}var C=t.length-s-1,T=v.getLayer();T.removeFromGroupType(),i._par.templates.reorderLayer(T,C)}else if(r){var I=o.findIndex((function(e){return e.uniqueId===r})),w=o[I],S=o.splice(e.oldIndex,1)[0];w.items.splice(e.newIndex,0,S);for(var E=0,k=o.length;E<k;E++)if(o[E].group){if(o[E].uniqueId===r){s+=e.newIndex;break}s+=o[E].items.length}else s++;var O=t.length-s-1,A=S.getLayer();A.addToGroupType(w.getGroupTypeItem(),w.uniqueId),i._par.templates.reorderLayer(A,O)}}},onSort:function(e){var n=parseInt(e.from.getAttribute("data-layer-group-id")||0),r=parseInt(e.to.getAttribute("data-layer-group-id")||0),a=parseInt(e.item.getAttribute("data-layer-id")||0),o=parseInt(e.item.getAttribute("data-group-id")||0),s=i._pickerItems[i._par.activePlacementId];if(n===r){var l=0;if(n){var c=s.find((function(e){return e.uniqueId===n})),d=c.items.splice(e.oldIndex,1)[0];c.items.splice(e.newIndex,0,d);for(var u=0,h=s.length;u<h;u++)if(s[u].group){if(s[u].uniqueId===n){l+=e.newIndex;break}l+=s[u].items.length}else l++;var p=t.length-l-1,g=d.getLayer();i._par.templates.reorderLayer(g,p)}else{var f=s.splice(e.oldIndex,1)[0];s.splice(e.newIndex,0,f);for(var _=0,m=s.length;_<m;_++)if(s[_].group){if(o&&o===s[_].uniqueId)break;l+=s[_].items.length}else{var v=s[_].node.getAttribute("data-layer-id");if(a&&a===parseInt(v))break;l++}if(f.group){var y=t.length-f.items.length-l,b=f.items[f.items.length-1].getLayer();i._par.templates.reorderLayerGroup(b,y,f.items.length)}else{var P=t.length-l-1,C=f.getLayer();i._par.templates.reorderLayer(C,P)}}}}})},_removeTooltips:function(){r()(this._nodeLayers).find('[data-toggle="tooltip"]').tooltip("destroy")},_renderFiles:function(){var e;R.a.TagPopoverRemove(),this._forceDisableCustomizer=this._par.activePlacementId===H.a.TYPE_LABEL_INSIDE;var t=this._par.templates.getActiveTemplate(this._par.activePlacementId);this._removeTooltips(),o.a.clearNode(this._nodeLayers);for(var i=[],n={},r=t?t.layers:[],a=this._par.templates.getActiveLayer(),s=this._par.templates.getActiveGroupLayers(),l=r.length,c=null;l--;){var d=r[l];if(d.groupId)if(d.groupId in n)c&&c.updateDimensions(),c=n[d.groupId];else{var u=new y;u.quickDesignId=d.quickDesignId,u.groupType=d.groupType,u.uniqueId=d.groupId,u.onClicked=this._onGroupClicked.bind(this),u.onRequestRemoval=this._removeGroup.bind(this,t,d.groupId),u.onRequestPositionReset=this._resetGroupPositions.bind(this,d.groupId),u.onRequestAlign=this._alignGroup.bind(this,d.groupId),c=new S(u),n[d.groupId]=c,null!=s&&s.length&&s[0].groupId===d.groupId&&c.setActive(!0),c.append(this._nodeLayers),i.push(c)}else c=null;var h=new E;h.templates=this._par.templates,h.placements=this._par.placements,h.activePlacementId=this._par.activePlacementId,h.layer=d,h.onRequestRemoval=this._removeFile.bind(this,t,d),h.onRequestAlign=this._alignLayer.bind(this,d),h.onRequestFlipHorizontally=this._flipHorizontally.bind(this,d),h.onRequestFlipVertically=this._flipVertically.bind(this,d),h.onRequestCropRectangle=this._cropRectangle.bind(this,d),h.onRequestRotate=this._onRotate.bind(this,d),h.onRequestPositionReset=this._resetPositions.bind(this,d),h.onDuplicate=this._par.onDuplicate.bind(this,d),h.onColorChanged=this._colorChanged.bind(this,d),h.onClicked=this._onItemClicked.bind(this,d),h.onEdit=this._par.onItemEdit?this._par.onItemEdit.bind(this,d):null,h.onChangeIsCustomizable=this._onChangeIsCustomizable.bind(this,d),h.onRequestRemoveBg=this._par.onRequestRemoveBg.bind(null,d),h.enableRemoveBg=this._par.enableRemoveBg,h.allowCustomizableLayers=!this._forceDisableCustomizer&&this._par.allowCustomizableLayers,h.isAllOver=this._par.isAllOver,h.validateAddingLayer=this._par.validateAddingLayer,h.showPatternPicker=this._par.showPatternPicker,h.fileCountLimit=this._par.fileCountLimit,h.licensedAssetCountLimit=this._par.licensedAssetCountLimit,h.openQualityTagPopoverOnRender=d.uniqueId===this._par.openQTagPopoverLayerId,h.onSelectQualityTag=this._par.onSelectQualityTag.bind(this),h.updateGroupDimensions=c?c.updateDimensions:null,h.hideQualityNode=this._par.hideQualityNode,h.showSizesInPx=this._par.showSizesInPx;var p=new ne(h);a&&a.uniqueId===d.uniqueId&&(c&&c.activateList(),p.setActive(!0)),c?(p.append(c.itemList),c.items.push(p)):(p.append(this._nodeLayers),i.push(p)),c&&c.updateDimensions()}var g=[].slice.call(this.node.querySelectorAll(".nested-sortable"));for(l=0;l<g.length;l++)this._createSortableList(g[l],r);i.length>0?o.a.removeClassName(this._nodeLayersTitle,"pf-d-none"):o.a.addClassName(this._nodeLayersTitle,"pf-d-none"),this._pickerItems[this._par.activePlacementId]=i;var f=this._par.conflictCalculator.getConflictingPlacementTitles(this._par.activePlacementId),_=this._getAllPickerItemsInPlacement().filter((function(e){return!e.group&&e.isImageLayer()})),m=this._getAllPickerItemsInPlacement().filter((function(e){return e.isLicensedAssetLayer()}));if(null===(e=this._par.getLayerPickerChooser())||void 0===e||e.detach(),o.a.clearNode(this._nodePicker),f.length)tag("div",{className:"alert alert-warning",innerHTML:lang("Can't be combined with {tiles}").replace("{tiles}",f.join(", "))}).append(this._nodePicker);else if(this._placementLimiter.isLimitReached())this._renderPlacementLimitWarning();else{this._par.getLayerPickerChooser().append(this._nodePicker),Object(_e.c)({key:me.b.IS_TITLE_HIDDEN,value:!0}),this._par.nodeTemplateTypePicker&&(this._par.nodeTemplateTypePicker.append(this._nodePicker),0===r.length&&tag("hr").append(this._nodePicker));var v=_.length<this.fileCountLimit,b=dlang("dashboard","Max limit is {number} image layers. Please delete a layer if you want to add another one.").replace("{number}",String(this.fileCountLimit));Object(_e.d)({key:me.i.FILES_COUNT_RESTRICTION,value:b,shouldUnset:v}),v=m.length<this.licensedAssetCountLimit,b=dlang("dashboard","Max limit is {number} Premium image layers. Please delete a layer if you want to add another one.").replace("{number}",String(this.licensedAssetCountLimit)),Object(_e.d)({key:me.i.LICENSED_ASSET_COUNT_RESTRICTION,value:b,shouldUnset:v}),v=Object.keys(n).length<this.groupLimit,b=dlang("generator","The limit is {number} quick design groups. Please delete a group if you want to add another one.").replace("{number}",String(this.groupLimit)),Object(_e.d)({key:me.i.QUICKDESIGN_COUNT_RESTRICTION,value:b,shouldUnset:v})}i.length?Object(Q.a)()&&!this._par.isAdvancedTemplate()&&this._nodeTemplateInfo.renderGuidelineInfo():this.clearGuidelineIfo(),this._par.nodeVideoTutorial&&this._par.nodeVideoTutorial.append(this._nodePicker),i.length&&this.renderOptions()},_renderPlacementLimitWarning:function(){var e;tag("div",{className:"alert alert-warning",innerHTML:dlang("generator","You can choose max {limit} print placements for this product").replace("{limit}",this._placementLimiter.getProductPlacementLimit(null===(e=Object(Q.a)())||void 0===e?void 0:e.productId))}).append(this._nodePicker)},clearGuidelineIfo:function(){this._nodeTemplateInfo.clearGuidelineInfo()},setProductOptionsValues:function(e){return this._productOptionsValues||(this._productOptionsValues={}),o.a.O2O(this._productOptionsValues,e),this},renderOptions:function(){if(o.a.clearNode(this._nodePlacementOptions),this._par.onProductOptionsChanged){var e=new oe.a;e.inputNamePrefix="gp-",e.optionItems=this._productOptions,e.values=this._productOptionsValues,e.onChange=this._onProductOptionsChanged,this._productOptionsPicker=new h.a(e),this._productOptionsPicker.setFileTypesWithFiles(this._par.templates.getPlacementIdsHavingFiles()).setPlacementIdsWithFiles(this._par.templates.getPlacementIdsHavingFiles(v.a)),this._productOptionsPicker.setPickerGeneratorPlacements(this._par.productOptionsPlacements),this._productOptionsPicker.setSelectedPlacementId(this._par.activePlacementId),this._productOptionsPicker.append(this._nodePlacementOptions)}},_onProductOptionsChanged:function(e){var t=this._productOptionsPicker.getValues();return t.hasOwnProperty(e.getName())||(t[e.getName()]=e.getValue()),this.setProductOptionsValues(t),this._par.onProductOptionsChanged(t)},_renderCopyLayersTool:function(){if(!(this._pickerItems[this._par.activePlacementId].length<=0||this._templatesAvailableForLayerCopy.length<=0)){for(var e in o.a.addClassName(this._nodeLayersCopy,"pf-my-24"),this._templatesAvailableForLayerCopy)tag("a",{className:"pf-link-block col-12 pf-mb-8",onclick:this._onClickCopyLayers.bind(this,e)},[tag("i","pf-i pf-i-content-duplicate pf-i-18 pf-text-gray pf-mb-2"),tag("span","pf-pl-4",dlang("generator","Copy this design on the {placement_title}").replace("{placement_title}",this._templatesAvailableForLayerCopy[e].placement_title))]).append(this._nodeLayersCopy);tag("div","pf-my-24 pf-border-bottom").append(this._nodeLayersCopy)}},_onClickCopyLayers:function(e){this._templatesAvailableForLayerCopy[e].hasLayers()?this._isPopupBusy||(this._isPopupBusy=!0,setTimeout(function(){this._isPopupBusy=!1}.bind(this),1e3),new re(this._copyLayersAndShowMessage.bind(this,e),this._templatesAvailableForLayerCopy[e].placement_title)):this._copyLayersAndShowMessage(e)},_copyLayersAndShowMessage:function(e){var t=this._templatesAvailableForLayerCopy[e];this._par.templates.copyLayersBetweenTemplates(this._par.activePlacementId,t.placementId,t.templateId),this._showSuccsessMessage(dlang("generator","Layers are duplicated on the {placement_title}").replace("{placement_title}",t.placement_title))},_showSuccsessMessage:function(e){var t=r()(".modal-content");t.length<=0&&(t=r()("body")),new j.a(e,j.a.TYPE_SUCCESS,3e3).append(t[0])},_onItemClicked:function(e,t,i){i&&i.stopPropagation();var n=this._getAllPickerItemsInPlacement();for(var r in n){var a=n[r];a.setActive(t===a)}this._par.templates.setActiveLayer(e,this,!1)},_onGroupClicked:function(e,t){var i,n;if(!(null!==(i=t.target)&&void 0!==i&&i.classList.contains("layer-toggle")||null!==(n=t.target)&&void 0!==n&&n.parentElement.classList.contains("layer-toggle"))){t&&t.stopPropagation();var r=this._getAllPickerItemsInPlacement();for(var a in r){r[a].setActive(!1)}var o=e.items.map((function(e){return e.getLayer()}));this._par.templates.setActiveGroup(o,this,!1)}},_removeGroup:function(e,t){var i=new se.a;i.id=e.placementId,i.title="";var n=[];for(var r in this._pickerItems[this._par.activePlacementId]){var a,o=this._pickerItems[this._par.activePlacementId][r];if(null!==(a=o.items)&&void 0!==a&&a.length&&o.uniqueId===t){n=o.items.map((function(e){return e.getLayer()}));break}}this._par.templates.removeGroup(e,n)},_removeFile:function(e,t){var i=new se.a;i.id=e.placementId,i.title="",this._par.templates.removeLayer(e,t)},requestFilePicking:(Ce=Pe(regeneratorRuntime.mark((function e(t){var i,n,r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new d.a).onPickCallback=this._onFilePicked.bind(this,t),(r=null===(i=Object(Q.a)())||void 0===i?void 0:i.productId)&&(n.productId=r,n.technique=Object(g.a)(r).getTechniqueFromMemory()),PF.Customer.customerId?(n.storeId=this._par.storeId,n.includeSwatches=this._par.includeSamples):(n.showSearch=!1,n.allowStoreChange=!1,n.storeId=Z.a),e.next=7,Object(W.q)(W.h);case 7:if(!e.sent){e.next=15;break}if(n.storeId!==Z.a){e.next=12;break}return this.initFileLibraryModal(t,n),e.abrupt("return");case 12:(new p.a).getStoresWithPrintFiles((function(e){if(e.length)a.initFileLibraryModal(t,n);else{var i=new fe.b;i.callback=a.initFileLibraryModal.bind(a,t,n),fe.a.popup(i,dlang("library","Create a store for storing files")).hide()}})),e.next=16;break;case 15:u.a.popup(n);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return Ce.apply(this,arguments)}),registerFileLibraryState:function(){return Pe(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return Promise.all([i.e(0),i.e(54),i.e(234)]).then(i.bind(null,"JR7u"))},e.next=3,Promise.all([t]);case 3:return n=e.sent,r=ve(n,1),a=r[0],Object(T.e)("fileLibrary",pe.a,{skipIfAlreadyRegistered:!0}),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))()},initFileLibrary:function(e,t,i){var n=this;return Pe(regeneratorRuntime.mark((function r(){var a,o,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=null,o=new ue.b,r.next=4,n.registerFileLibraryState();case 4:return s=r.sent,o.components={"file-library":s},o.template='\n                <file-library\n                    :directory-limit="directoryLimit"\n                    :flow-data="flowData"\n                    @place-item="emitEvent(\'place-item\', $event)"\n                />\n            ',o.initialData={directoryLimit:999,flowData:{id:he.f.generator,isAnonymous:t.storeId===Z.a,productId:t.productId,technique:t.technique}},o.emitEvent=function(t,r){"place-item"===t&&(n._onFilePicked(e,r),i.remove())},o.plugins={store:Object(T.a)()},a=new ue.a(o),r.abrupt("return",a);case 12:case"end":return r.stop()}}),r)})))()},initFileLibraryModal:function(e,t){var i=this;return Pe(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=new s.a.Par).title=PF.Customer.customerId?dlang("library","Store's file library"):dlang("library","File library"),r.nodeClass="file-library-modal",r.modalDialogClass="modal-lg bs-modal-lx",r.deleteOnHide=!0,a=new s.a(r),n.next=8,i.initFileLibrary(e,t,a);case 8:return o=n.sent,a.setContent(o),a.show(),n.abrupt("return",a);case 12:case"end":return n.stop()}}),n)})))()},_alignGroup:function(e,t,i){var n=this;i&&i.stopPropagation();var r=null;this._pickerItems[this._par.activePlacementId].forEach((function(t){t.group&&t.uniqueId===e&&(r=t)}));var a=r.getGroupBBox(),o=a.getClone().align(t),s=a.top-o.top,l=a.left-o.left,c=r.items.map((function(e){return e.getLayer()}));c.forEach((function(e){var t=n._par.templates.getFreshLayer(e).position.getClone();t.top-=s,t.left-=l,t.canMoveOutOfBounds=!0,n._par.templates.updateLayerPosition(e,t,Te.GROUP_UPDATE)})),this._par.templates.setActiveGroup(c,this,!0)},_alignLayer:function(e,t,i){i&&i.stopPropagation();var n=e.isCropPositionUpdateNeeded(),r=this._par.templates.getFreshLayer(e),a=(n?r.cropPosition:r.position).getClone().align(t);n?this._par.templates.updateCropLayerPosition(e,a,this,ge.a):this._par.templates.updateLayerPosition(e,a,this)},_flipHorizontally:function(e,t){t&&t.stopPropagation(),e.flipX=!e.flipX,this._notifyLayerFlipChanged(e,!0,!1)},_flipVertically:function(e,t){t&&t.stopPropagation(),e.flipY=!e.flipY,this._notifyLayerFlipChanged(e,!1,!0)},_cropRectangle:function(e,t){null==t||t.stopPropagation(),e.isCropState=!e.isCropState,this._par.templates.getChangeListener().notifyLayerConfigurationChanged(e,this)},_notifyLayerFlipChanged:function(e,t,i){var n={flippedX:t,flippedY:i};if(e instanceof v.a?this._par.templates.updateImageLayer(e,this,!1,n):e instanceof m.a?this._par.templates.updateClipartLayer(e,this,n):e instanceof q.a?this._par.templates.updateLicensedAssetLayer(e,this,n):console.log("Cannot update layer flip settings!",e),e.isCropPositionUpdateNeeded()){var r=this._par.templates.recalculateBasePositionsOnFlip(e,t,i);this._par.templates.updateLayerPosition(e,r,this,!0,n)}else this._par.templates.updateLayerPosition(e,e.position,this,!0)},_resetPositions:function(e,t){t&&t.stopPropagation(),this._par.templates.resetLayer(e)},_resetGroupPositions:function(e,t){t&&t.stopPropagation(),this._alignGroup(e,P.a.ALIGNMENT.CENTER)},_onRotate:function(e,t,i){var n=e.isCropPositionUpdateNeeded(),r=this._par.templates.getFreshLayer(e),a=(n?r.cropPosition:r.position).getClone();a.rotation=parseFloat(t),n?this._par.templates.updateCropLayerPosition(e,a,i,ge.b):this._par.templates.updateLayerPosition(e,a,i)},updateLayer:function(e){var t=this._getAllPickerItemsInPlacement();for(var i in t){var n=t[i];if(n.getLayer().uniqueId===e.uniqueId){n.updateLayer(e);break}}},_updateLayers:function(e,t,i){var n=this;if(!this._unsubscribeTemplateEventsIfNeeded())return!!Object(f.a)(this.node)&&void this._getAllPickerItemsInPlacement().forEach((function(e){t&&e.getLayer().uniqueId===t.uniqueId&&e.updateLayer(n._par.templates.getFreshLayer(e.getLayer()))}))},getLayerIndexInPicker:function(e,t,i){var n=this._getAllPickerItemsInPlacement(e);for(var r in n){if(n[r].getLayer().uniqueId===t)return i?n.length-r-1:r}return-1},_colorChanged:function(e){this._par.onColorChanged&&this._par.onColorChanged(e)},_onFilePicked:function(e,t){if(!t.width||!t.height)return console.error(lang("Cannot use this file, because width or height is not known")),void this.requestFilePicking(e);this._par.onPicked&&this._par.onPicked(e,t)},getValueCount:function(){return 1},isValuePicked:function(){return this._par.templates.getPlacementIdsHavingFiles().length>0||this._par.hasAtLeastOneDesignFillColor()},hasSameProductOptionValues:function(e,t){return!this._productOptionsPicker||this._productOptionsPicker.hasSameValues(e,t)},checkProductOptionsStatus:function(){return!this._productOptionsPicker||(this._productOptionsPicker.hasValidOptions(),this._productOptionsPicker.updateErrorStatus())},getProductOptionsPicker:function(){return this._productOptionsPicker},_onChangeIsCustomizable:function(e){if(e.isCustomizable=!e.isCustomizable,this._par.templates){var t=this._par.templates.getTemplateByLayer(e);this._par.templates.changeCustomizableState(t,e,e.isCustomizable),this._par.templates.getChangeListener().notifyLayerCustomizableStateChanged([t])}this._par.onCustomizableChanged&&this._par.onCustomizableChanged(e)},hideAllExceptVuePicker:function(){o.a.addClassName(this._nodeTemplateInfo.node,"pf-d-none"),this._nodeDesignFillColorPicker&&o.a.addClassName(this._nodeDesignFillColorPicker,"pf-d-none"),o.a.addClassName(this._nodeLayersTitle,"pf-d-none"),o.a.addClassName(this._nodeLayersCopy,"pf-d-none"),o.a.addClassName(this._nodeLayers,"pf-d-none"),o.a.addClassName(this.nodeError,"pf-d-none"),o.a.addClassName(this._nodePlacementOptions,"pf-d-none")}},de.a);Te.checkForWarnings=function(e,t){var i=Object(Q.a)();i&&!e&&i.isEmbroidery()?c.showPopup(Te.checkForWarnings.bind(this,!0,t)):t()},Te.TYPE_FILE="file",Te.TYPE_TEXT="text",Te.TYPE_TEXTBOX="textbox",Te.TYPE_CLIPART="clipart",Te.TYPE_MOCKUP="mockup",Te.TYPE_QUICKDESIGN="quick_design",Te.GROUP_UPDATE="group_update",Te.LICENSED_ASSET="licensed_asset",window&&((globalThis||{}).PFProductPushLayerPicker=Te)},"8GdZ":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return a}));var n=Object.freeze({STORAGE_KEY:"generatorFonts",CACHE_VERSION:2}),r=Object.freeze({HAS_LOADED_ALL:"HAS_LOADED_ALL"}),a=Object.freeze({FONTS:"fontsJson",FONTS_JS_URLS:"fontsJsUrlsJson",FONTS_TTF_URLS:"fontsTtfUrlsJson"})},"8POG":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("l99J"),r=i("dJr+"),a=i("edgZ"),o=i("xB0w"),s=i("XLZy"),l=i("nF4n"),c=i("slIU"),d=i("y70k"),u=Class({_par:null,_library:null,_uploader:null,_dragCounter:0,_dragCounterElement:0,_countUploading:0,_enabled:!0,_enabledBeforeElementDrag:!0,__construct:function(e){u.instanceCounter+=1,this._instanceCounter=u.instanceCounter,this._par=e||new o.a,this._par.targetNode?(this.node=this._par.targetNode,this._library=new a.a,this.fileInputNode=tag("input",{tag:"input",type:"file",className:"hidden",attr:{name:"file",multiple:"multiple"}}).append(this.node),l.a.addClassName(this.node,"dropzone"),l.a.addClassName(this.node,this._getEventNamespace()),this._setupUploaderPar(),this._initUploader(),this.node.ondragleave=this._onDragLeave,this.node.ondrop=this._onDrop,this.node.removeEventListener("dragenter",this._onDragEnter),this.node.addEventListener("dragenter",this._onDragEnter),this._par.elementDropNode&&(this.nodeElementDrop=this._par.elementDropNode,this.nodeElementDrop.ondragenter=this._onDragEnterElement,this.nodeElementDrop.ondragover=this._onDragOverElement,this.nodeElementDrop.ondragleave=this._onDragLeaveElement,this.nodeElementDrop.ondrop=this._onDropElement)):console.error("DropZone doesnt have a target node!")},_getEventNamespace:function(){return"dropzone-"+this._instanceCounter},_setupUploaderPar:function(){this._par.uploaderPar||(this._par.uploaderPar=new c.a.Par),this._par.uploaderPar.uploadDataUrl||(this._par.uploaderPar.uploadDataUrl=(new r.a).uploadDataUrl),this._par.uploaderPar.uploadCallbackUrl||(this._par.uploaderPar.uploadCallbackUrl=(new r.a).uploadCallbackUrl)},_initUploader:function(){var e=this._par.uploaderPar||new c.a.Par;e.nodeDropZone=this.node,e.node=this.fileInputNode,e.onDone=this._onDone,e.onStart=this._onStart,e.onFail=this._onFail,e.getUploadExtra=this._par.getUploadExtra,e.getMaxFileLayerCount=this._par.getMaxFileLayerCount,e.validateAddingLayer=this._par.validateAddingLayer,e.enableTransparencyValidation=!0,this._uploader=new c.a(e)},_onStart:function(){if(this._enabled){var e=this.node;this._par.isPushGenerator&&(e=document.getElementsByClassName("product-push")[0]),s.a.show(e)}},_onDone:function(e){var t=this;this._par.onDone&&e.id&&this._library.getByIds([e.id],(function(e){if(e&&e.length)for(var i in e)e[i].isProcessing()?n.a.listen(e[i],t._onPostDone):t._handleProcessedFile(e[i])}))},_onFail:function(e){this._par.onFail(e)},_onPostDone:function(e){var t=d.a.fromArray(e);this._handleProcessedFile(t)},_handleProcessedFile:function(e){this._countUploading-=1,this._library.cacheFile(e),this._countUploading<1&&s.a.hide(this.node),this._par.onDone&&this._par.onDone(e,this._countUploading,this._onPostDone)},_preventDefault:function(e){e.preventDefault()},_hide:function(){this._enabled&&this._dragCounter<1&&(l.a.removeClassName(this.node,"dropzone--hover"),this._par.onDragLeave&&this._par.onDragLeave())},_show:function(){this._enabled&&1===this._dragCounter&&(l.a.addClassName(this.node,"dropzone--hover"),this._par.onDragEnter&&this._par.onDragEnter())},_onDrop:function(e){if(this._enabled&&-1!==e.dataTransfer.types.indexOf("Files")){this._dragCounter=0,this._dragCounterElement=0,this._preventDefault(e),this._hide(e);var t=e.dataTransfer.files.length||0;this._par.onDrop&&this._par.onDrop(t),this._countUploading=t}},_onDragEnter:function(e){this._enabled&&-1!==e.dataTransfer.types.indexOf("Files")&&(this._dragCounter++,this._show(e))},_onDragLeave:function(e){this._enabled&&-1!==e.dataTransfer.types.indexOf("Files")&&(this._dragCounter--,this._hide(e))},_onDragEnterElement:function(e){if(this._dragCounterElement++,1===this._dragCounterElement&&e.dataTransfer.types.indexOf("domelement")>-1){var t=this.nodeElementDrop.classList.item(0)?this.nodeElementDrop.classList.item(0):"";tag("div",t+"__dropzone-overlay").prepend(this.nodeElementDrop)}},_onDragOverElement:function(e){this._preventDefault(e)},_onDragLeaveElement:function(e){if(this._dragCounterElement>0&&this._dragCounterElement--,this._dragCounterElement<1&&e.dataTransfer.types.indexOf("domelement")>-1){var t=this.nodeElementDrop.classList.item(0)?this.nodeElementDrop.classList.item(0):"";$("."+t+"__dropzone-overlay").remove()}},_onDropElement:function(e){this._dragCounter=0,this._dragCounterElement=0,this._preventDefault(e),this._onDragLeaveElement(e),this._par.onDropElement&&this._par.onDropElement(e)},isEnabled:function(){return this._enabled},enable:function(){this._enabled=!0,this._uploader.enable()},disable:function(){this._enabled=!1,this._uploader.disable()},disableBeforeElementDrag:function(){this._enabledBeforeElementDrag=this._enabled,this.disable()},enableAfterElementDrag:function(){this._enabledBeforeElementDrag&&this.enable()}},l.a.Base);u.instanceCounter=0,window&&((globalThis||{}).PFComponentsDropZone=u)},"8l0M":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={lowestRetailPrice:.99};(globalThis||{}).PFOrderProductsRowCommon=n},"8qnk":function(e,t,i){"use strict";i.d(t,"a",(function(){return D}));var n=i("bXkz"),r=i("C00j"),a=i("vUhP"),o=i("mw8R"),s=i("FKE6"),l=i("VpOd"),c=i("9eNC"),d=i("XLZy"),u=i("nF4n"),h=i("97Au"),p=i("YBfo"),g=i("0sIF"),f=i("GCEm"),_=i("yA1d"),m=i("ehgC"),v=i("5qBa"),y=i("Q1Td"),b=i("NXHT");function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function T(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function I(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){T(a,n,r,o,s,"next",e)}function s(e){T(a,n,r,o,s,"throw",e)}o(void 0)}))}}var w,S,E,k,O,A,L,N,D=Class({orderRepository:null,productData:null,variant:null,_productCount:"200+",_cartItem:null,_cartTotal:null,_cartItemCount:0,_contentNode:null,_headerIconNode:null,_dropdownNode:null,_titleNode:null,_notificationNode:null,_itemsNode:null,_subtotalNode:null,_buttonNode:null,_estimatedShippingNode:null,_estimatedShippingCostsNode:null,_isOpen:null,_shoppingCartNodeId:"js--shopping-cart",_lastProductId:null,__construct:function(e,t,i){t&&(this._shoppingCartNodeId=t),this._initializeCart(e),this._addClickListener(),c.n(D.EVENT_ITEM_ADD,this._onVariantSelected,this),c.n(D.EVENT_OPEN_DESIGNER,this._openDesigner,this),c.n(D.EVENT_PREPARE_CART,this._prepareCart,this),c.n(D.EVENT_ITEM_GENERATED,this._onVariantItemsGenerated,this),c.l(D.EVENT_CART_CREATED)},_initializeCart:function(e){this._cartItem=v.a.fromArray(e),this._contentNode=document.getElementById(this._shoppingCartNodeId),this._contentNode.innerHTML="",this._cartTotal=this._getDiscountedTotal(),this._cartItemCount=this._cartItem.items.length,this._cartItem.totalProductCount&&(this._productCount=this._cartItem.totalProductCount),this._renderHeaderNode(),this._renderDropdownNode(),this._addFileGenerationWatcher()},_addFileGenerationWatcher:function(){var e=this._cartItem.items.find((function(e){return!e.thumbUrl.includes("_thumb")}));e&&((new y.a).afterReloadDuringGeneration(e.uniqueId,{onCompleted:this._onVariantItemsGenerated}),setTimeout(this._onVariantItemsGenerated,5e3))},_prepareCart:(N=I(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.m)({productId:t});case 2:if(i=e.sent,!P(i,1)[0]){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,Object(f.g)(f.b,!0,m.a.TYPE_NATIVE);case 9:return e.t0=this,e.next=12,Object(_.d)();case 12:e.t1=e.sent,e.t0._initializeCart.call(e.t0,e.t1);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)}),_renderHeaderNode:function(){this._headerIconNode=tag("div","pf-d-md-flex pf-mx-8 pf-flex-column pf-flex-md-row pf-align-items-center pf-position-relative",[this._renderCartIcon()]).append(this._contentNode)},_renderCartIcon:function(){return tag("a",{onclick:this._toggleDropdown.bind(this),className:""},[tag("i","header__link__icon pf-i pf-i-cart pf-i-24"),0!==this._cartItemCount?tag("span","pf-d-flex pf-align-items-center pf-justify-content-center header__link--badge text-center",this._cartItemCount):"",tag("span","pf-d-none pf-d-md-inline-block pf-ml-sm-4 header__link__text",dlang("site","My cart"))])},_renderDropdownNode:function(){this._dropdownNode=tag("div","pf-cart__menu pf-w-100 pf-w-md-auto pf-d-none",[tag("div","pf-border-bottom-0",[this._titleNode=this._renderTitleNode(),this._notificationNode=tag("div"),this._itemsNode=this._renderCartItemsNode()]),this._subtotalNode=tag("div","",[this._renderCartTotalNode()]),tag("div",{id:"estimated-shipping",className:"pf-d-none"},[this._estimatedShippingNode=tag("div","",[this._renderEstimatedShippingNode()])]),tag("div","pf-pt-12 pf-bg-gray-lighter"),this._buttonNode=tag("div","pf-p-16 pf-border-top",[this._renderButtonNode()])]).append(this._contentNode)},_openDesigner:(L=I(regeneratorRuntime.mark((function e(t){var i,n,r,a,o,s,l,c,u,h,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.productData.product.getFullTitle(),n=tag("div"),this.showModal(i,n,t.node),d.a.show(n,{minHeight:225}),e.next=6,D._loadOrderAndDesignerTypes(this);case 6:return r=e.sent,a=r.picker,o=r.pickerPar,s=r.orderLineItem,(l=new s).productId=t.productData.product.productId,l.variantId=t.variant.variantId,(c=new o).lastProductId=this._lastProductId,c.productId=t.productData.product.productId,c.isProductCatalog=!0,e.next=19,Object(f.m)({productId:c.productId});case 19:u=e.sent,h=P(u,1),g=h[0],c.storeId=g.storeId,c.isModalDesigner=!0,c.flow=p.a.TYPE_OF,c.orderLineItem=l,c.callbackWithGeneratingFiles=this.onVariantItemsGenerating.bind(this),c.setModalFooterContentCallback=this.setModalFooterContent.bind(this),c.isShoppingCart=!0,c.onFileGenerationStartedForVariantCallback=this._onVariantSelected.bind(this),this._variantPickerNode=new a(c),this.updateModalContents(this._variantPickerNode);case 32:case"end":return e.stop()}}),e,this)}))),function(e){return L.apply(this,arguments)}),setModalFooterContent:function(e){return!!this.modal&&(this.modal.setFooterContent(e),!0)},showModal:function(e,t,i){var n=new h.a.Par;n.title=e,n.accessibility=!0,n.closeOnClick=!1,n.allowEsc=!1,n.nodeClass="order-flow mg-designer-modal",n.onClose=function(){c.l(c.b),g.a.clearPreviewStrings(),i&&"function"==typeof i.focus&&i.focus()},this.modal=new h.a(n),this.modal.setContent(t),this.modal.show()},updateModalContents:function(e){this.modal&&this.modal.setContent(e)},_initOrderRepository:(A=I(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.orderRepository){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,D._loadOrderAndDesignerTypes(this);case 4:t=e.sent,i=t.orderRepo,this.orderRepository=new i;case 7:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)}),_onVariantSelected:(O=I(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.quantity=1,e.next=3,this._initOrderRepository();case 3:return this.orderRepository.URL_REF=n.a.B2C_FLOW_KEY,e.next=6,this._onItemAdd(t);case 6:i&&i();case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return O.apply(this,arguments)}),onVariantItemsGenerating:function(){this.modal&&this.modal.remove(),setTimeout(this._showDropdown,0),d.a.show(this._dropdownNode,{zIndex:11})},_onItemAdd:(k=I(regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initOrderRepository();case 2:this._sendAddToCartEvent(t),this._lastProductId=null==t?void 0:t.productId,this.orderRepository.saveItemToAnonymousOrder({orderItem:o.a.fromArray({storeId:null!==(i=null===(n=this._variantPickerNode)||void 0===n?void 0:n._par.storeId)&&void 0!==i?i:-1}),items:[t],callback:this._onDraftSaved.bind(this)});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)}),_onVariantItemsGenerated:(E=I(regeneratorRuntime.mark((function e(){var t,i,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:null,i=a.length>1&&void 0!==a[1]&&a[1],this._cartItem.items.find((function(e){return!e.thumbUrl.includes("_thumb")}))){e.next=4;break}return e.abrupt("return");case 4:if(!t||!i){e.next=8;break}this._cartItem.items.forEach((function(e){var i=t.find((function(t){return t.uniqueId===e.uniqueId}));i&&(e.thumbUrl=i.thumbUrl)})),e.next=15;break;case 8:return e.next=10,Object(_.d)();case 10:n=e.sent,r=v.a.fromArray(n),this._cartItem=r,this._cartItemCount=r.items.length,this._cartTotal=this._getDiscountedTotal();case 15:this._renderCart(this._isOpen);case 16:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)}),_onItemDelete:(S=I(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initOrderRepository();case 2:this.orderRepository.deleteItemFromAnonymousOrder({uniqueId:t,callback:this._afterDeleteUpdate.bind(this,t)});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)}),_afterDeleteUpdate:function(e,t){t&&(this._cartItem.items=this._cartItem.items.filter((function(t,i){return t.uniqueId!==e})),this._cartItemCount=this._cartItem.items.length,this._cartTotal=this._getDiscountedTotal(),u.a.clearNode(this._itemsNode),u.a.clearNode(this._headerIconNode),u.a.clearNode(this._subtotalNode),u.a.clearNode(this._buttonNode),this._renderCartItemsNode().append(this._itemsNode),this._renderCartIcon().append(this._headerIconNode),this._renderCartTotalNode().append(this._subtotalNode),this._renderEstimatedShippingNode().append(this._estimatedShippingNode),this._renderButtonNode().append(this._buttonNode),this._cartItemCount>0&&this._getEstimatedShippingCosts())},_onItemQuantityChange:(w=I(regeneratorRuntime.mark((function e(t,i){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.target.valueAsNumber,this._checkQuantity(n)){e.next=5;break}return r=this._getItemByUniqueId(t),i.target.value=r?r.quantity:1,e.abrupt("return");case 5:return e.next=7,this._initOrderRepository();case 7:this.orderRepository.changeAnonymousOrderItemQuantity({uniqueId:t,quantity:n,callback:this._afterQuantityChangeUpdate.bind(this,t,n)});case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return w.apply(this,arguments)}),_onKeyUp:function(e){var t=e.target.valueAsNumber;t=t>1e3?1e3:t,e.target.value=t},_afterQuantityChangeUpdate:function(e,t,i){i&&(this._getItemByUniqueId(e).quantity=t,this._cartTotal=this._getDiscountedTotal(),u.a.clearNode(this._subtotalNode),this._renderCartTotalNode().append(this._subtotalNode),this._getEstimatedShippingCosts())},_checkQuantity:function(e){return!!Number.isInteger(e)&&e>0},_getItemByUniqueId:function(e){return this._cartItem.items.find((function(t){return t.uniqueId===e}))},_renderCart:function(e){this._contentNode&&u.a.clearNode(this._contentNode),this._renderHeaderNode(),this._renderDropdownNode(),this._appendNotification(),e&&this._showDropdown()},_onDraftSaved:function(e){this._cartItem=e,this._cartItemCount=e.items.length,this._cartTotal=this._getDiscountedTotal(),this._renderCart(!0),this._getEstimatedShippingCosts(),ga("send",{hitType:"event",eventCategory:"Button Clicks",eventAction:"Add to Cart Button",eventLabel:"Product added to cart"}),c.l(D.EVENT_ITEM_ADD_SUCCESSFUL)},_getEstimatedShippingCosts:function(){this._cartItem.isShippingAvailable&&(d.a.show(this._estimatedShippingCostsNode,{zIndex:11}),document.getElementById("cart-shipping-costs").classList.add("pf-d-none"),this.orderRepository.calculateEstimatedShippingCostsForShoppingCart({callback:this._onShippingCostsCalculated.bind(this)}))},_onShippingCostsCalculated:function(e){this._cartItem.estimatedShippingCosts=e,u.a.clearNode(this._estimatedShippingCostsNode),this._renderEstimatedShippingCostNode().append(this._estimatedShippingCostsNode),d.a.hide(this._estimatedShippingCostsNode)},_appendNotification:function(){u.a.clearNode(this._notificationNode),tag("div","pf-p-16 pf-bg-light-green pf-border-bottom",[tag("i","pf-i pf-i-check pf-i-20 pf-text-dark-green"),tag("span","pf-ui-caption pf-text-dark-green pf-pl-8",dlang("site","Product added to your cart!"))]).append(this._notificationNode)},_showDropdown:function(){$("html, body").animate({scrollTop:0},300),this._onOpen()},_renderTitleNode:function(){return tag("div","pf-p-16 pf-w-100 pf-border-bottom",[tag("span","pf-h4 pf-pr-8",dlang("site","My cart")),tag("a",{className:"pf-i pf-i-close pf-i-24 pf-text-gray pull-right",onclick:this._onClose.bind(this)})])},_onOpen:function(){u.a.addClassName(this._dropdownNode,"pf-cart__menu--open"),u.a.removeClassName(this._dropdownNode,"pf-d-none"),this._isOpen=!0},_onClose:function(){u.a.removeClassName(this._dropdownNode,"pf-cart__menu--open"),u.a.addClassName(this._dropdownNode,"pf-d-none"),this._isOpen=!1},_toggleDropdown:function(){this._isOpen?this._onClose():this._onOpen()},_onOutsideClicked:function(e){document.getElementById(this._shoppingCartNodeId).contains(e.target)&&"js--cart-close"!==e.target.id||"string"!=typeof e.target.className||e.target.className.includes("pf-i-trash-can-outline")||this._onClose()},_addClickListener:function(){document.body.addEventListener("click",this._onOutsideClicked)},_renderCartItemsNode:function(){var e=tag("div","pf-cart__product-wrapper");return this._cartItemCount<1?tag("div","pf-bg-gray-lighter pf-p-16",[tag("img",{className:"pf-mx-auto pf-d-block pf-py-8",loading:"lazy",height:64,src:PF.ASSETS_URL+"images/products-catalog/empty-cart.svg",attr:{alt:dlang("site","empty cart")}}),tag("p","pf-h4 pf-mb-4 text-center",dlang("site","Your shopping cart is empty")),tag("p","pf-text-muted pf-ui-caption pf-mb-0 text-center",dlang("site","Check out more than {productCount} premium products in our catalog and find something amazing").replace("{productCount}",this._productCount))]):(this._cartItem.items.forEach(function(t,i){var n=i===this._cartItemCount-1;this._buildItemNode(t,n).append(e)}.bind(this)),e)},_buildItemNode:function(e,t){var i="pf-d-flex pf-pt-16 pf-pb-12 pf-px-16 pf-m-0"+(t?"":" pf-border-bottom");return tag("div","",[l.a.getPeriodicPriceCountdownFromCartOrderItem({cartOrderItem:e,showBottomTriangle:!0,customBlockClass:"pf-py-8",justifyContentEndOnXxs:!0,containerClass:"pf-cart__discount-countdown pf-ml-xs-0 pf-px-16 pf-mt-12"}),tag("div",i,[tag("div","pf-bg-white pf-cart__thumb-wrapper pf-mr-12 pf-p-0",[tag("img",{className:"pf-cart__thumb pf-d-block pf-mx-auto",prop:{src:e.thumbUrl,loading:"lazy",height:92,alt:e.productName}})]),tag("div","pf-w-100 pf-p-0",[tag("div","flex-row pf-justify-content-between pf-mb-8",[tag("div","pf-cart__product-name",[tag("span","pf-ui-caption",e.productName)]),tag("div","pf-cart__item-price pf-flex-end",[a.a.createDiscountElementFromPriceData({priceData:e.priceData,splitLines:!0,allowTaxInclusion:!0,flipLines:!0,tooltipPlacement:"left"})])]),tag("div","flex-row pf-justify-content-between",[tag("div","pf-cart__item-count",[tag("span","pf-ui-caption pf-text-muted pf-mr-8",dlang("site","Qty:")),tag("input",{className:"form-control pf-d-inline-block",value:e.quantity,type:"number",attr:{min:1,max:1e3},prop:{onchange:this._onItemQuantityChange.bind(this,e.uniqueId),onkeyup:this._onKeyUp.bind(this)}})]),tag("div","pf-cart__item-delete pf-align-items-center pf-d-flex",[tag("a",{onclick:this._onItemDelete.bind(this,e.uniqueId)},[tag("i","pf-i pf-i-trash-can-outline pf-i-24 pf-text-gray")])])])])])])},_renderCartTotalNode:function(){return this._subtotalNode&&u.a.clearNode(this._subtotalNode),this._cartItemCount<1?tag("div"):tag("div","pf-border-top",[tag("div","pf-px-16 pf-pt-16 pf-pb-4 pf-bg-gray-lighter",[tag("div","pf-d-flex pf-justify-content-between pf-align-items-center",[tag("div","",[tag("span","pf-ui-caption",dlang("site","Subtotal")),this._getTaxStatus(),tag("span","pf-ui-caption",":")]),tag("div","",[tag("span","pf-ui-caption pf-bold pf-flex-end",[prettyMoney(this._cartTotal,this._cartItem.currency)])])])])])},_renderEstimatedShippingNode:function(){return this._estimatedShippingNode&&u.a.clearNode(this._estimatedShippingNode),!this._cartItem.isShippingAvailable||this._cartItemCount<1?tag("div"):tag("div","pf-px-16 pf-bg-gray-lighter",[tag("div","pf-d-flex pf-justify-content-between pf-align-items-center",[tag("span","pf-ui-caption pf-py-4","Estimated shipping:"),this._estimatedShippingCostsNode=tag("div",{className:"pf-d-flex pf-align-items-center",style:"min-height: 32px; min-width: 32px;"},[this._renderEstimatedShippingCostNode()])])])},_renderEstimatedShippingCostNode:function(){this._estimatedShippingCostsNode&&u.a.clearNode(this._estimatedShippingCostsNode);var e=prettyMoney(this._cartItem.estimatedShippingCosts,this._cartItem.currency);return this._cartItem.estimatedShippingCosts||(e="Calculated at checkout"),tag("span",{id:"cart-shipping-costs",className:"pf-ui-caption pf-bold pf-flex-end"},[e])},_getTaxStatus:function(){return this._cartItem.currency===s.a.CURRENCY_EUR?tag("span","pf-ui-caption pf-text-muted"," ("+(r.a.isTaxIncluded(this._cartItem.currency)?dlang("site","incl. VAT"):dlang("site","excl. VAT"))+")"):""},_renderButtonNode:function(){return this._cartItemCount?tag("a",{className:"pf-btn pf-btn-primary pf-btn-block pf-text-white",href:PF.Customer.leadScoringProfile?langUrl("/dashboard/order/update"):langUrl("/dashboard/order/update?ref=b2c")},dlang("site","Continue to checkout")):tag("a",{className:"pf-btn pf-btn-primary pf-btn-block pf-text-white",href:langUrl("/custom-products")},dlang("site","Explore products"))},_getDiscountedTotal:function(){var e=this._cartItem.items.reduce((function(e,t){return e+t.priceData.discountedPrice*t.quantity}),0);return r.a.addTax(this._cartItem.currency,e)},_sendAddToCartEvent:function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i instanceof b.PFItemsOrderLineItem&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"add-to-cart",product_id:String(null==i?void 0:i.productId),variant_id:null==i?void 0:i.variantId,variant_price:null==i||null===(e=i.priceData)||void 0===e?void 0:e.price.toFixed(2),variant_price_currency:null==i||null===(t=i.priceData)||void 0===t?void 0:t.currency,quantity:null==i?void 0:i.quantity}))}},u.a.Base);D._loadOrderAndDesignerTypes=function(){var e=I(regeneratorRuntime.mark((function e(t){var n,r,a,o,s,l,c,u,h,p,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.a.show(t._dropdownNode),n=void 0===window.PFVariantPickerPar?i.e(26).then(i.bind(null,"llTG")):Promise.resolve({PFVariantPickerPar:window.PFVariantPickerPar}),r=void 0===window.PFVariantPicker?i.e(26).then(i.bind(null,"Lipf")):Promise.resolve({PFVariantPicker:window.PFVariantPicker}),a=void 0===window.PFRepositoriesOrderRepository?i.e(26).then(i.bind(null,"8vlB")):Promise.resolve({PFRepositoriesOrderRepository:window.PFRepositoriesOrderRepository}),o=void 0===window.PFItemsOrderLineItem?i.e(26).then(i.bind(null,"NXHT")):Promise.resolve({PFItemsOrderLineItem:window.PFItemsOrderLineItem}),e.next=7,Promise.all([n,r,a,o]);case 7:return s=e.sent,l=P(s,4),c=l[0],u=l[1],h=l[2],p=l[3],g={pickerPar:null==c?void 0:c.PFVariantPickerPar,picker:null==u?void 0:u.PFVariantPicker,orderRepo:null==h?void 0:h.PFRepositoriesOrderRepository,orderLineItem:null==p?void 0:p.PFItemsOrderLineItem},d.a.hide(t._dropdownNode),D._loadOrderAndDesignerTypes=I(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g);case 1:case"end":return e.stop()}}),e)}))),e.abrupt("return",g);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D.EVENT_ITEM_ADD="shoppingCartItemAdd",D.EVENT_ITEM_ADD_SUCCESSFUL="shoppingCartItemAddSuccessful",D.EVENT_OPEN_DESIGNER="shoppingCartOpenDesigner",D.EVENT_PREPARE_CART="shoppingCartPrepare",D.EVENT_CART_CREATED="shoppingCartCreated",D.EVENT_ITEM_GENERATED="shoppingCartItemGenerated",(globalThis||{}).PFShoppingCart=D},"8vlB":function(e,t,i){"use strict";i.r(t),i.d(t,"PFRepositoriesOrderRepository",(function(){return d}));var n=i("6t3j"),r=i("6JZw"),a=i("nF4n"),o=function(){};(o.prototype=new r.a).method="",o.prototype.price=0,o.prototype.currency="",o.prototype.disabled=!1,o.prototype.name="",o.fromArray=function(e){var t=new o;return a.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsShippingMethodItem=o);var s=i("FKE6"),l=i("yA1d"),c=i("Sucz"),d=function(){this.productRepository=new n.a};d.PRICE_DIGITIZATION={},d.PRICE_DIGITIZATION[s.a.CURRENCY_USD]=6.5,d.PRICE_DIGITIZATION[s.a.CURRENCY_EUR]=5.75,d.PRICE_DIGITIZATION[s.a.CURRENCY_JPY]=700,d.PRICE_DIGITIZATION[s.a.CURRENCY_GBP]=4.95,d.PRICE_DIGITIZATION[s.a.CURRENCY_CAD]=9.6,d.PRICE_DIGITIZATION[s.a.CURRENCY_AUD]=11.5,d.PRICE_DIGITIZATION[s.a.CURRENCY_SEK]=58,d.PRICE_DIGITIZATION[s.a.CURRENCY_DKK]=41.5,d.PRICE_DIGITIZATION[s.a.CURRENCY_NZD]=9.95,d.PRICE_DIGITIZATION[s.a.CURRENCY_CHF]=6,d.PRICE_DIGITIZATION[s.a.CURRENCY_MXN]=130,d.PRICE_DIGITIZATION[s.a.CURRENCY_HKD]=50,d.PRICE_DIGITIZATION[s.a.CURRENCY_SGD]=8.95,d.PRICE_DIGITIZATION[s.a.CURRENCY_NOK]=59.95,d.PRICE_DIGITIZATION[s.a.CURRENCY_PLN]=25,d.PRICE_DIGITIZATION[s.a.CURRENCY_KRW]=7150,d.PRICE_DIGITIZATION[s.a.CURRENCY_BRL]=35,d.PRICE_DIGITIZATION_ADJUSTMENT={},d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_USD]=2.95,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_EUR]=2.5,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_JPY]=350,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_GBP]=2.25,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_CAD]=4.4,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_AUD]=5.2,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_SEK]=26.5,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_DKK]=18.95,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_NZD]=4.5,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_CHF]=2.75,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_MXN]=60,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_HKD]=23,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_SGD]=3.95,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_NOK]=26,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_PLN]=11,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_KRW]=3250,d.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_BRL]=15.5,d.PRICE_DIGITIZATION_TEXT_ONLY={},d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_USD]=3.95,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_EUR]=3.7,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_JPY]=450,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_GBP]=3,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_CAD]=5.85,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_AUD]=6.95,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_SEK]=35,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_DKK]=25.5,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_NZD]=5.95,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_CHF]=3.7,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_MXN]=80,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_HKD]=31,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_SGD]=5.5,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_NOK]=35,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_PLN]=15,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_KRW]=4350,d.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_BRL]=20.95,d.URL_REF=null,d.getRef=function(e){var t=d.URL_REF;return null===t?"":(e=e||"?")+"ref="+t},d.prototype.getById=function(e,t){Object(c.a)("order/get"+d.getRef(),{orderId:e},$.proxy(this._getByIdRe,this,t))},d.prototype._getByIdRe=function(e,t){e(this.parseOrderResponseAndReturnOrder(t))},d.prototype.parseOrderResponseAndReturnOrder=function(e){return l.e(e)},d.prototype.saveDraft=function(e){l.f(e).then(e.callback)},d.prototype.saveItemToAnonymousOrder=function(e){l.g(e).then((function(t){return e.callback(t)}))},d.prototype.deleteItemFromAnonymousOrder=function(e){l.c(e).then((function(t){return e.callback(t)}))},d.prototype.changeAnonymousOrderItemQuantity=function(e){l.b(e).then((function(t){return e.callback(t)}))},d.prototype.calculateEstimatedShippingCostsForShoppingCart=function(e){l.a().then((function(t){return e.callback(t.estimatedShippingCosts)}))},d.prototype.calculateOrderEstimatedShippingCosts=function(){Object(c.a)("order/calculate-estimated-shipping-costs")},d.prototype.saveRecipientAndGetRates=function(e){var t=e.orderItem;Object(c.a)("order/save-recipient-get-rates"+d.getRef(),{orderId:t.orderId,displayShipping:t.displayShipping,identity:t.identity,saveRecipient:e.saveRecipient?1:0,recipient:t.recipient.toArray()},this._saveRecipientAndGetRatesRe.bind(this,e.callback))},d.prototype.saveOnlyRecipient=function(e){var t=e.orderItem;Object(c.a)("order/save-only-recipient"+d.getRef(),{orderId:t.orderId,recipient:t.recipient.toArray()})},d.prototype._saveRecipientAndGetRatesRe=function(e,t){var i=[];for(var n in t.rates)i.push(o.fromArray(t.rates[n]));e(i,t.errors,t.baseBreakdownData,t.handling,t.hasCatalogPriceDiff,t.customsNotificationText,t.hasOutsourcedBranch,t.showShippingWarning,t.ukVatCustomsWarning,t.showAddressValidationWarning)},d.prototype.removeIncompleteItem=function(e,t){t=t||function(){},Object(c.a)("order/remove-incomplete"+d.getRef(),{incompleteItemId:e.incompleteItemId,orderId:e.orderId},t)},d.prototype.setShippingMethod=function(e,t,i){Object(c.a)("order/set-handling"+d.getRef(),{orderId:e,handling:t},$.proxy(this._setShippingMethodRe,this,i))},d.prototype._setShippingMethodRe=function(e,t){t.success?e(t.baseBreakdownData,t.hasCatalogPriceDiff):alert("Sorry, error occurred, please try again!")},d.prototype.prepareForReview=function(e,t,i,n){Object(c.a)("order/prepare-for-review",{orderId:e.orderId,isAnonymous:t?1:0},$.proxy(this._prepareForReviewRe,this,i,n))},d.prototype._prepareForReviewRe=function(e,t,i){i.error?t(i.error):e(i.redirectUrl)},d.prototype.toggleSample=function(e,t,i){Object(c.a)("order/set-sample",{orderId:e.orderId,setSample:e.isSample?0:1},$.proxy(this._setSampleRe,this,t,i))},d.prototype._setSampleRe=function(e,t,i){!i.error&&i.success?e(i.isSample):t(t(i.error||"Failed to change order to sample order"))},d.prototype.forceBranchForWarehouse=function(e,t,i,n){Object(c.a)("order/force-branch-for-warehouse",{orderId:e.orderId,branchId:t.id},$.proxy(this._forceBranchForWarehouseRe,this,i,n))},d.prototype._forceBranchForWarehouseRe=function(e,t,i){i.error?t(i.error||dlang("warehouse","Failed to select location for storing order in warehouse")):e(i)},d.prototype.saveAddressesFlag=function(e){var t=e.orderItem;Object(c.a)("order/save-address-flag"+d.getRef(),{orderId:t.orderId,saveAddress:e.saveAddress?1:0})},(globalThis||{}).PFRepositoriesOrderRepository=d},"97Rx":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("cvaF"),r=i("FKE6"),a={getReadable:function(e,t,i){t||(t="$"),3===t.length&&(t+=" ");var n=this._parseDecimal(e,void 0,null==i||i);return n.negativeSign+t+"â€Ž"+n.formattedAmount},getDecimal:function(e){var t=this._parseDecimal(e);return t.negativeSign+t.formattedAmount},getDisplayValue:function(e,t){e=parseFloat(e.toString().replace(",",""));var i=this._placeDecimals(e,this._getDecimalPlaces(t));return i.negativeSign+i.decimalAmount},getDisplayAmount:function(e,t,i){var n=this._getDisplayCurrencyObject(t),r=n.symbol,a=n.symbolPosition,o=this._parseDecimal(e,n,null==i||i),s=window.PF.Config.CURRENCY_CONFIG||{},l=s.SYMBOL_POSITION_BEFORE,c=s.SYMBOL_POSITION_AFTER;if(a===l){var d=r.length>=2?" ":"";o.formattedAmount=r+d+o.formattedAmount}return a===c&&(o.formattedAmount=o.formattedAmount+r),o.negativeSign+o.formattedAmount},_getDisplayCurrencyObject:function(e){return e instanceof r.b?e:PF.DisplayCurrency instanceof r.b?PF.DisplayCurrency:new r.b},_placeDecimals:function(e,t,i){var n=e<0?"- ":"",r=100*(e%1).toFixed(2);r=Math.abs(r),void 0===t&&(t=2);var a=0!=(r=Math.floor(r))?t:0;return 0!=a||null==i||i||(a=t),{negativeSign:n,decimalAmount:Math.abs(e).toFixed(a)}},_getDecimalPlaces:function(e){return void 0===e?void 0:e.exponent},_parseDecimal:function(e,t,i){var n=this._placeDecimals(e,this._getDecimalPlaces(t),null==i||i);void 0===t&&(t=this._getDisplayCurrencyObject());var r=t.decimalPoint,a=t.thousandsSeparator,o=n.decimalAmount.toString().replace(".",r);return o=o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a),{negativeSign:n.negativeSign,formattedAmount:o}},prettyMoney:function(e,t,i){var o=null==i||i;if("string"==typeof t){var s=n.a.getCurrency(t);return s instanceof r.b?a.getDisplayAmount(e,s,o):a.getReadable(e,t,o)}return a.getDisplayAmount(e,t,o)}};window&&((globalThis||{}).PFUtilsMoney=a)},"9Vz/":function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return l})),i.d(t,"d",(function(){return c}));var n=i("KLvT"),r=i("3Vk9");function a(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}var o=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.c(r.a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var o=e.apply(t,i);function s(e){a(o,n,r,s,l,"next",e)}function l(e){a(o,n,r,s,l,"throw",e)}s(void 0)}))});return function(){return t.apply(this,arguments)}}(),s=function(e){return Object(n.a)().getters[r.c(r.b)]([e])[0]},l=function(e){return Object(n.a)().commit(r.c(r.f),e)},c=function(e){return!!s(e)}},"9Y8y":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("u8P0"),r=i("how4"),a=i("K45J"),o=i("6JZw"),s=i("nF4n"),l=Class({id:0,customProductId:0,customProduct:null,stockProductId:0,name:"",sku:"",length:0,width:0,height:0,weight:0,originalLength:0,originalWidth:0,originalHeight:0,originalWeight:0,quantity:0,urlImage:"",isPackaged:!1,retailCurrency:null,syncVariantRetailPriceData:null,additionalFee:0,retailPrice:0,originalRetailPrice:0,currentMonthStorageFee:0,temporaryFileKey:"",hsCode:0,tempSyncVariantId:0,optionValues:[],locations:[],canDelete:null,toArrayKeys:["id","customProductId","sku","length","width","height","weight","originalLength","originalWidth","originalHeight","originalWeight","optionValues","isPackaged","additionalFee","retailPrice","originalRetailPrice","temporaryFileKey","hsCode","urlImage","tempSyncVariantId"],getDimensions:function(){var e=new r.a;return e.length=this.length,e.width=this.width,e.height=this.height,e.weight=this.weight,e},getOriginalDimensions:function(){var e=new r.a;return e.length=this.originalLength,e.width=this.originalWidth,e.height=this.originalHeight,e.weight=this.originalWeight,e},getKey:function(){var e=[];for(var t in this.optionValues){var i=this.optionValues[t];e.push([i.optionName.replace(" ","_"),i.value.replace(" ","_")].join("_"))}return e.join("__")}},o.a);l.fromArray=function(e){var t=new l;if(s.a.O2O(t,e),e.customProduct&&(t.customProduct=a.a.fromArray(e.customProduct)),e.optionValues)for(var i in t.optionValues=[],e.optionValues)t.optionValues.push(n.a.fromArray(e.optionValues[i]));return t},window&&((globalThis||{}).PFItemsCustomProductVariant=l)},"9bv1":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Sx+Y"),r=i("LAWH"),a=i("6JZw"),o=i("nF4n"),s=function(){};s.prototype=new a.a,s.prototype.toArrayKeys=["syncProductId","isIgnored"],s.prototype.syncProductId=null,s.prototype.urlImage="",s.prototype.name="",s.prototype.externalId="",s.prototype.isIgnored=!1,s.prototype.syncedAt=null,s.prototype.counts=null,s.prototype.variantCounts=null,s.prototype.storeId=null,s.prototype.syncChangeInfo=null,s.prototype.isSoldOut=function(){if(!this.variantCounts)return!1;var e=0,t=this.variantCounts||{};for(var i in t){var n=t[i];e+=parseInt(n.quantity)}return e<1},s.prototype.hasLowQty=function(){if(!this.variantCounts)return!1;var e=!1,t=this.variantCounts||{};for(var i in t){var n=t[i];parseInt(n.quantity)<=1&&(e=!0)}return e},s.fromArray=function(e){var t=new s;if(o.a.O2O(t,e),e.counts&&(t.counts=n.a.fromArray(e.counts)),e.variantCounts){var i={};for(var a in e.variantCounts){var l=e.variantCounts[a];i[a]=r.a.fromArray(l)}t.variantCounts=i}return t},window&&((globalThis||{}).PFItemsSyncProductItem=s)},"9hBW":function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("5B9T"),r=i("3Dht"),a=i("dqhU"),o=i("eYhR"),s=i("nwx2"),l=i("Mg/F"),c=i("GyOi"),d=i("nF4n"),u=i("nfGG"),h=i("9Vz/"),p=i("XLZy"),g=Class({_NONE_COLOR_CLASS:"swatches__item--none",_DROPDOWN_OPEN_CLASS:"color-dropdown__dropdown--open",_BUTTON_OPEN_CLASS:"color-dropdown__button--open",_DROPDOWN_UP_CLASS:"color-dropdown__dropdown--up",_par:null,_colorNodes:null,_colors:null,_disabledColors:null,_highlightedColors:null,_color:null,_colorGraphic:null,_graphicDpi:null,_graphics:null,_nodeButton:null,_nodeActiveColor:null,_nodeActiveTitle:null,_nodeActiveTitleHeader:null,_nodeActiveDescription:null,_nodeActiveDescriptionHeader:null,_nodeDropdown:null,_nodeSwatchList:null,_nodeGraphicListWrapper:null,_nodeColorTabs:null,_scrollShadow:null,__construct:function(e){var t=this;if(e=e||new l.a,this._par=e,this._colors=this._par.colors,this._color=this._par.color,this._colorGraphic=this._par.colorGraphic,this._disabledColors=this._par.disabledColors,this._highlightedColors=this._par.highlightedColors,this._nodeActiveTitle=tag("span","pf-d-inline pf-d-md-none pf-d-lg-inline",this._colorHexToName(this._color)),this._nodeActiveTitleHeader=tag("span","",this._colorHexToName(this._color)),this._nodeActiveDescription=this._par.hideRGB?"":tag("span","pf-text-muted small",this._colorHexToRGB(this._color)),this._nodeActiveDescriptionHeader=this._par.hideRGB?"":tag("span","pf-text-muted small",this._colorHexToRGB(this._color)),this._par.hasGraphics){this._nodeColorTabs=new s.a("primary tabs-justify");var i=new o.a;i.caption=dlang("generator","Colors"),i.onclick=this._addContainerColors,i.isActive=!this.isGraphicActive(),i.customId=g.TAB_COLOR,this._nodeColorTabs.add(i),(i=new o.a).caption=dlang("generator","Graphics"),i.onclick=this._addContainerGraphics,i.isActive=this.isGraphicActive(),i.customId=g.TAB_GRAPHIC,this._nodeColorTabs.add(i);var n=new r.a;this._par.hasProductlessScale?(n.maxValue=g.GRAPHIC_MAX_DPI_PROMO_MAKER,n.value=g.GRAPHIC_DEFAULT_DPI_PROMO_MAKER,n.defaultValue=g.GRAPHIC_DEFAULT_DPI_PROMO_MAKER):(n.maxValue=g.GRAPHIC_MAX_DPI,n.value=g.GRAPHIC_DEFAULT_DPI,n.defaultValue=g.GRAPHIC_DEFAULT_DPI),n.title=dlang("generator","Scale"),n.hasNumberInput=!0,n.incrementStep=1,n.fractionDigits=0,n.className="pf-mb-8",n.onSlide=function(){t._colorGraphic.scale=t._getTextGraphicScale()},n.onValueChanged=function(){t._colorGraphic.scale=t._getTextGraphicScale(),t._par.onChange&&t._par.onChange(t._colorGraphic)},this._graphicDpi=new a.a(n)}this._nodeDropdown=tag("div","color-dropdown__dropdown dropdown-menu pf-p-0",[tag("div","col-md-12 pf-pt-12 pf-pb-12",[this._par.hasGraphics?this._nodeColorTabs:"",this._nodeContainer=tag("div")])]),this.node=tag("div","color-dropdown",[this._nodeButton=tag("button",{className:"pf-btn pf-btn-block pf-pl-8 pf-pr-24 text-left color-dropdown__button "+(this._par.disableDropdown?"disabled":""),onclick:this._toggleDropdown},[tag("div","swatches swatches--click swatches--big swatches--inline",[this._nodeActiveColor=tag("span",{className:"swatches__item "+(this._color?"":this._NONE_COLOR_CLASS),style:{backgroundColor:this._color||"none"}})]),this._par.showColorInHeader?"":tag("span",{style:{verticalAlign:"baseline"}},[" ",this._nodeActiveTitle," ",this._nodeActiveDescription])]),this._nodeDropdown]),this._par.nodeDropdownFooter&&tag("div","pf-mx-12 pf-mb-12 pf-mt-8",[this._par.nodeDropdownFooter]).append(this._nodeDropdown),this._addColors()},_outsideClick:function(e){var t=this.node;t.contains(e.target)||t===e.target||this.closeDropdown()},_addColors:function(){if(this._nodeSwatchList)for(var e in d.a.clearNode(this._nodeSwatchList),this._colors){var t=this._colors[e].value,i="swatches__item";t===this._color&&(i+=" swatches__item--active"),this._isColorDisabled(t)&&(i+=" swatches__item--discontinued");var n=this._isColorHighlighted(t);n&&(i+=" "+n),t||(i+=" "+this._NONE_COLOR_CLASS),tag("span",{className:i,style:{backgroundColor:t||"none"},onclick:this.setColor.bind(this,t,!1)}).append(this._nodeSwatchList)}else this._addContainerColors()},_addContainerColors:function(){d.a.clearNode(this._nodeContainer),this._scrollShadow&&d.a.clearNode(this._scrollShadow),tag("div","color-container",[tag("div","pf-mb-8 pf-mt-12 pf-ui-body "+(this._par.showColorInHeader?"":"pf-d-none pf-d-md-block pf-d-lg-none"),[tag("span","pf-px-2",[this._nodeActiveTitleHeader]),tag("span","pf-px-2",[this._nodeActiveDescriptionHeader])]),tag("div","pf-d-inline-block",[this._nodeSwatchList=tag("div","swatches swatches--click swatches--huge")])]).append(this._nodeContainer),this._addColors()},_addContainerGraphics:function(){d.a.clearNode(this._nodeContainer),this._scrollShadow=new u.a([this._nodeSwatchList=tag("div","row-flex")]),this._nodeGraphicListWrapper=tag("div","graphic-container pf-my-12",[this._scrollShadow,this._graphicDpi]).append(this._nodeContainer),this._addGraphics()},_getTextGraphicScale:function(){return this._par.areaWidthForGraphics()*this._graphicDpi.value/this._colorGraphic.image.width},_getTextGraphicDpi:function(){return this._colorGraphic.scale*this._colorGraphic.image.width/this._par.areaWidthForGraphics()},_addGraphics:function(){if(this._nodeSwatchList){for(var e in d.a.clearNode(this._nodeSwatchList),this.isGraphicActive()||d.a.addClassName(this._graphicDpi.node,"pf-d-none"),this._graphics){var t=this._graphics[e].id,i="color-graphic-swatches__item pf-p-4 pf-mb-8";this._colorGraphic&&t===this._colorGraphic.id&&(i+=" color-graphic-swatches__item--active"),t||(i+=" "+this._NONE_COLOR_CLASS),tag("div","col-3 pf-px-4 color-graphic-swatches__col",[tag("div",{className:i,onclick:this.setColorGraphic.bind(this,this._graphics[e],!1,!1),attr:{"data-graphic-id":this._graphics[e].id}},[tag("div","color-graphic-swatches__labels",[this._graphics[e].extra.hidden?tag("span","pf-badge pf-badge-small pf-badge--primary",dlang("generator","hidden")):""]),tag("div","color-graphic-swatches__ratio",[tag("div","color-graphic-swatches__ratio__inner",[this._getSpinner(this._graphics[e])])])])]).append(this._nodeSwatchList)}this._scrollShadow.addScrollEventListener(),this._updateGraphicScroll()}else this._addContainerGraphics()},_updateGraphicScroll:function(){var e,t=null===(e=this._nodeSwatchList)||void 0===e?void 0:e.getElementsByClassName("color-graphic-swatches__col"),i=(null==t?void 0:t.length)&&t[0].clientHeight;i&&this.areGraphicsAvailable()&&(this._nodeSwatchList.style.maxHeight=1.75*i+"px"),this._scrollShadow&&this._scrollShadow.updateScrollShadowing()},_getSpinner:function(e,t,i){var n,r=null==e||null===(n=e.image)||void 0===n?void 0:n.urlThumb,a=tag("img",{className:"img-responsive",src:t?"":PF.ASSETS_URL+"images/layout/spinner-white.gif",style:{opacity:.3}}),o=new Image;return o.onload=function(){a.src=r,a.style.opacity=1,i&&i(o.width,o.height)},o.src=r,a},_toggleDropdown:function(){this._par.disableDropdown||(d.a.hasClassName(this._nodeDropdown,this._DROPDOWN_OPEN_CLASS)?this.closeDropdown():this.openDropdown())},_isColorDisabled:function(e){return!(e||!this._par.disableNoneValue)||!(!e||!this._disabledColors)&&new n.a.Color.fromHex(e).isContainedBy(this._disabledColors)},_isColorHighlighted:function(e){return e&&this._highlightedColors&&new n.a.Color.fromHex(e).isContainedBy(this._highlightedColors)?this._par.highlightColorsAsError?"swatches__item--highlight-error":"swatches__item--highlight":null},openDropdown:function(){var e=this;document.body.addEventListener("click",this._outsideClick,!0),this._par.hasGraphics&&!this._graphics?(this.isGraphicActive()&&p.a.show(this._nodeDropdown),Object(h.b)().then((function(t){e._graphics=t,e._autoSelectTab()})).finally((function(){return p.a.hide(e._nodeDropdown)}))):this._par.hasGraphics&&this._autoSelectTab(),d.a.addClassName(this._nodeDropdown,this._DROPDOWN_OPEN_CLASS),d.a.addClassName(this._nodeButton,this._BUTTON_OPEN_CLASS),this._updateGraphicScroll(),this._scrollToDropdown(),this._boundsCheck(),this._bindBoundsCheck()},_autoSelectTab:function(){this.areGraphicsAvailable()?this.isGraphicActive()?(this._nodeColorTabs.markTabAsSelected(this._nodeColorTabs.getTabById(g.TAB_GRAPHIC)),this._addContainerGraphics()):(this._nodeColorTabs.markTabAsSelected(this._nodeColorTabs.getTabById(g.TAB_COLOR)),this._addContainerColors()):d.a.addClassName(this._nodeColorTabs.node,"pf-d-none")},_bindBoundsCheck:function(){this._par.boundsCheckQuery&&d.a.hasClassName(this._nodeDropdown,this._DROPDOWN_OPEN_CLASS)&&$(this._par.boundsCheckQuery).unbind("scroll",this._boundsCheck).bind("scroll",this._boundsCheck)},_unbindBoundsCheck:function(){this._par.boundsCheckQuery&&$(this._par.boundsCheckQuery).unbind("scroll",this._boundsCheck)},_boundsCheck:function(){var e;if(this._par.boundsCheckQuery&&$(this._par.boundsCheckQuery).length){var t=$(this._par.boundsCheckQuery).get(0).getBoundingClientRect(),i=this._nodeDropdown.getBoundingClientRect(),n=this._nodeButton.getBoundingClientRect(),r=$(this._par.boundsCheckQuery).parent().find(".dynamic-sticky-footer .dynamic-sticky-footer__drawer"),a=r&&r.length?r.outerHeight():0,o=a>0||d.a.hasClassName(this._nodeDropdown,this._DROPDOWN_UP_CLASS)&&i.bottom+i.height+n.height+a<t.bottom,s=i.bottom+a>t.bottom;!o&&s?d.a.addClassName(this._nodeDropdown,this._DROPDOWN_UP_CLASS):!o||null!==(e=this._graphics)&&void 0!==e&&e.length||d.a.removeClassName(this._nodeDropdown,this._DROPDOWN_UP_CLASS)}},_scrollToDropdown:function(){if(this._par.scrollToDropDown&&this._nodeDropdown){var e=$(this._nodeDropdown).closest(".modal-content").get(0);if(e){var t=this._nodeDropdown.getBoundingClientRect().top+e.scrollTop,i=window.innerHeight/2,n=this._nodeDropdown.offsetHeight/2;$(e).animate({scrollTop:t-i+n},200)}}},closeDropdown:function(){document.body.removeEventListener("click",this._outsideClick,!0),d.a.removeClassName(this._nodeDropdown,this._DROPDOWN_OPEN_CLASS),d.a.removeClassName(this._nodeButton,this._BUTTON_OPEN_CLASS),this._unbindBoundsCheck()},setColor:function(e,t){if(!this._isColorDisabled(e)&&this._color!==e){this._color=e,this._colorGraphic=null;for(var i=Object.keys(this._colors),n=0,r=i.length;n<r;n++){var a=this._nodeSwatchList.children[n];a&&(this._colors[i[n]].value===this._color?d.a.addClassName(a,"swatches__item--active"):d.a.removeClassName(a,"swatches__item--active"))}this._nodeActiveColor.style.background=this._color||"none",this._color?d.a.removeClassName(this._nodeActiveColor,this._NONE_COLOR_CLASS):d.a.addClassName(this._nodeActiveColor,this._NONE_COLOR_CLASS),d.a.setNodeText(this._nodeActiveTitle,this._colorHexToName(this._color)),d.a.setNodeText(this._nodeActiveTitleHeader,this._colorHexToName(this._color)),this._par.hideRGB||(d.a.setNodeText(this._nodeActiveDescription,this._colorHexToRGB(this._color)),d.a.setNodeText(this._nodeActiveDescriptionHeader,this._colorHexToRGB(this._color))),this._par.onChange&&!t&&this._par.onChange(this._color),this._boundsCheck()}},getColor:function(){return this.isGraphicActive()?this._colorGraphic:this._color},isGraphicActive:function(){return!!this._colorGraphic},areGraphicsAvailable:function(){var e;return!(null===(e=this._graphics)||void 0===e||!e.length)},_colorHexToName:function(e){var t=Object.keys(this._colors);for(var i in t)if(this._colors[t[i]].value===e)return this._colors[t[i]].name;return"-"},_colorHexToRGB:function(e){if(!e)return"";var t=n.a.hexToRgb(e)||{};return"(R:"+t.r+" G:"+t.g+" B:"+t.b+")"},setColorGraphic:function(e,t,i){if(this._color!==e){if(this._color=null,this._colorGraphic=new c.a.fromArray(e),i){var n=this._getTextGraphicDpi(),r=this._par.getMinDpiForGraphics();n<r?(this._graphicDpi.setValue(r),e.scale=this._getTextGraphicScale(),this._colorGraphic=new PF.Items.GeneratorColorGraphicItem.fromArray(e)):this._graphicDpi.setValue(n)}else this._graphicDpi.setValue(g.GRAPHIC_DEFAULT_DPI),this._colorGraphic.scale=this._getTextGraphicScale();this._graphicDpi.setMinValue(this._par.getMinDpiForGraphics()),d.a.removeClassName(this._graphicDpi.node,"pf-d-none");for(var a=0;a<this._nodeSwatchList.children.length;a++){var o,s,l=null===(o=this._nodeSwatchList.children[a])||void 0===o?void 0:o.children[0];if(l){parseInt(null===(s=l.dataset)||void 0===s?void 0:s.graphicId)===this._colorGraphic.id?d.a.addClassName(l,"color-graphic-swatches__item--active"):d.a.removeClassName(l,"color-graphic-swatches__item--active")}}this._nodeActiveColor.style.background='url("'+this._colorGraphic.image.urlThumb+'") no-repeat center center',this._nodeActiveColor.style.backgroundSize="cover",d.a.setNodeText(this._nodeActiveTitle,this._colorGraphic.name),d.a.setNodeText(this._nodeActiveTitleHeader,this._colorGraphic.name),d.a.setNodeText(this._nodeActiveDescription,""),d.a.setNodeText(this._nodeActiveDescriptionHeader,""),this._par.onChange&&!t&&this._par.onChange(this._colorGraphic),this._boundsCheck()}}},d.a.Base);g.defaultColors=function(){var e={Black:{value:"#000000"},White:{value:"#ffffff"},"Grey 3":{value:"#E8E8E8"},"Grey 2":{value:"#BABABA"},"Grey 1":{value:"#989898"},Grey:{value:"#696969"},"Red 2":{value:"#7c1123"},Red:{value:"#c70f28"},"Red 1":{value:"#ed1c24"},"Pink 2":{value:"#f27981"},"Pink 3":{value:"#ffcad0"},"Pink 4":{value:"#e9bdd5"},"Pink 1":{value:"#d072a6"},"Pink 5":{value:"#cd368c"},Pink:{value:"#c52d89"},"Pink 6":{value:"#84175e"},"Yellow 2":{value:"#fff2b3"},"Yellow 1":{value:"#ffe94d"},Yellow:{value:"#ffc829"},"Orange 2":{value:"#ffb18a"},"Orange 1":{value:"#f5873f"},Orange:{value:"#f26522"},"Brown 1":{value:"#bc5500"},"Yellow 3":{value:"#e5e43b"},"Nude 1":{value:"#f7c194"},Nude:{value:"#bf854b"},Brown:{value:"#603913"},"Green 2":{value:"#e7ffd7"},"Green 3":{value:"#a1c75b"},"Green 4":{value:"#74b87e"},Green:{value:"#74a952"},"Green 1":{value:"#006838"},"Green 5":{value:"#bfd8c6"},"Blue 3":{value:"#008b97"},"Blue 4":{value:"#00505a"},"Blue 5":{value:"#ebffff"},"Blue 6":{value:"#a2e5f4"},"Blue 7":{value:"#43b3d4"},Blue:{value:"#3399b5"},"Blue 1":{value:"#6ea5d9"},"Blue 2":{value:"#0e3d84"},Navy:{value:"#0f1e3c"},Purple:{value:"#46276b"},"Purple 1":{value:"#8a6aa7"},"Purple 2":{value:"#b195c2"}};return e.Black.name=dclang("generator","color","Black"),e.White.name=dclang("generator","color","White"),e.Grey.name=dclang("generator","color","Grey"),e["Grey 1"].name=dclang("generator","color","Grey 1"),e["Grey 2"].name=dclang("generator","color","Grey 2"),e["Grey 3"].name=dclang("generator","color","Grey 3"),e.Red.name=dclang("generator","color","Red"),e["Red 1"].name=dclang("generator","color","Red 1"),e["Red 2"].name=dclang("generator","color","Red 2"),e.Pink.name=dclang("generator","color","Pink"),e["Pink 1"].name=dclang("generator","color","Pink 1"),e["Pink 2"].name=dclang("generator","color","Pink 2"),e["Pink 3"].name=dclang("generator","color","Pink 3"),e["Pink 4"].name=dclang("generator","color","Pink 4"),e["Pink 5"].name=dclang("generator","color","Pink 5"),e["Pink 6"].name=dclang("generator","color","Pink 6"),e.Orange.name=dclang("generator","color","Orange"),e["Orange 1"].name=dclang("generator","color","Orange 1"),e["Orange 2"].name=dclang("generator","color","Orange 2"),e.Yellow.name=dclang("generator","color","Yellow"),e["Yellow 1"].name=dclang("generator","color","Yellow 1"),e["Yellow 2"].name=dclang("generator","color","Yellow 2"),e["Yellow 3"].name=dclang("generator","color","Yellow 3"),e.Nude.name=dclang("generator","color","Nude"),e["Nude 1"].name=dclang("generator","color","Nude 1"),e.Brown.name=dclang("generator","color","Brown"),e["Brown 1"].name=dclang("generator","color","Brown 1"),e.Green.name=dclang("generator","color","Green"),e["Green 1"].name=dclang("generator","color","Green 1"),e["Green 2"].name=dclang("generator","color","Green 2"),e["Green 3"].name=dclang("generator","color","Green 3"),e["Green 4"].name=dclang("generator","color","Green 4"),e["Green 5"].name=dclang("generator","color","Green 5"),e.Blue.name=dclang("generator","color","Blue"),e["Blue 1"].name=dclang("generator","color","Blue 1"),e["Blue 2"].name=dclang("generator","color","Blue 2"),e["Blue 3"].name=dclang("generator","color","Blue 3"),e["Blue 4"].name=dclang("generator","color","Blue 4"),e["Blue 5"].name=dclang("generator","color","Blue 5"),e["Blue 6"].name=dclang("generator","color","Blue 6"),e["Blue 7"].name=dclang("generator","color","Blue 7"),e.Navy.name=dclang("generator","color","Navy"),e.Purple.name=dclang("generator","color","Purple"),e["Purple 1"].name=dclang("generator","color","Purple 1"),e["Purple 2"].name=dclang("generator","color","Purple 2"),e},g.allOverColors=function(){return g.defaultColors()},g.getNoneColor=function(){return{None:{value:null,name:dclang("generator","color","None")}}},g.TAB_COLOR="color",g.TAB_GRAPHIC="graphic",g.GRAPHIC_DEFAULT_DPI=1e3,g.GRAPHIC_MAX_DPI=1e3,g.GRAPHIC_DEFAULT_DPI_PROMO_MAKER=100,g.GRAPHIC_MAX_DPI_PROMO_MAKER=100,window&&((globalThis||{}).PFComponentsColorDropdown=g)},"A+LN":function(e,t,i){"use strict";i.d(t,"o",(function(){return k})),i.d(t,"j",(function(){return O})),i.d(t,"i",(function(){return A})),i.d(t,"d",(function(){return L})),i.d(t,"a",(function(){return N})),i.d(t,"c",(function(){return D})),i.d(t,"b",(function(){return R})),i.d(t,"m",(function(){return x})),i.d(t,"f",(function(){return F})),i.d(t,"n",(function(){return M})),i.d(t,"h",(function(){return B})),i.d(t,"e",(function(){return V})),i.d(t,"g",(function(){return j})),i.d(t,"l",(function(){return U})),i.d(t,"k",(function(){return z})),i.d(t,"p",(function(){return q})),i.d(t,"q",(function(){return J}));var n=i("9Nv7"),r=i("LvDl"),a=i.n(r);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=d(e);if(t){var r=d(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return c(this,i)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),this.flagName=!a.a.isEmpty(t.flagName)&&a.a.isString(t.flagName)?t.flagName.trim():null,this.targetType=!a.a.isEmpty(t.targetType)&&a.a.isString(t.targetType)?t.targetType.trim():null,this.targetId=t.targetId&&!a.a.isNaN(a.a.toNumber(t.targetId))?a.a.toNumber(t.targetId):null}var t,i,n;return t=e,(i=[{key:"cacheKey",get:function(){var e=this.flagName,t=this.targetType,i=this.targetId;return"feature-flag--".concat(e||"","_").concat(t||"","_").concat(i||"")}},{key:"isValid",value:function(){return!a.a.isEmpty(this.flagName)&&!a.a.isEmpty(this.targetType)&&Object.values(q).includes(this.targetType)}}])&&h(t.prototype,i),n&&h(t,n),e}(),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,e);var t=l(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(this,i),(e=t.call(this,n)).canAccessFeature=!!a.a.has(n,"canAccessFeature")&&!!n.canAccessFeature,e}return i}(p),f=i("DD1l");function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=P(e);if(t){var r=P(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return b(this,i)}}function b(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(FeatureFlagError,e);var t=y(FeatureFlagError);function FeatureFlagError(){return m(this,FeatureFlagError),t.apply(this,arguments)}return FeatureFlagError}(i("xVVd").a);function I(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function S(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function E(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){S(a,n,r,o,s,"next",e)}function s(e){S(a,n,r,o,s,"throw",e)}o(void 0)}))}}C(T,"code","FEATURE_FLAG_ERROR"),C(T,"defaultMessage","Unexpected Feature Flag issue!");var k="wh_product_new_layout",O="image_remove_bg",A="generator_sass_features",L="adyen_drop_in_unconfirmed",N="adyen_drop_in_add_billing_method",D="adyen_drop_in_order_flow",R="adyen_drop_in_gift_flow",x="saas_infrastructure",F="crop_tool",M="sample_orders",B="file_library",V="black_shirt_preview",j="designer_tools_section",U="new_address_form_payments",z="new_address_form_legal",G=!1,H={},Y={},q=Object.freeze({ENVIRONMENT:"environment",STORE:"store",CUSTOMER:"customer"});function W(e){return a.a.reduce(e,(function(e,t){return e[t.cacheKey]=t,e}),{})}function K(e){var t={results:{},missingRequests:[]};if(!a.a.isArray(e))return t;G||function(){for(var e=globalThis.PreloadedFeatureFlagResults||{},t=a.a.mapValues(e,(function(e){return new g(e)})),i=0,n=Object.values(t);i<n.length;i++){var r=n[i];H[r.cacheKey]=r}G=!0}();var i=function(e){return W(e.map((function(e){return new p(e||{})})).filter((function(e){return e.isValid()})))}(e),n=a.a.keys(i);if(!n.length)return t;var r=a.a.pick(H,n),o=a.a.keys(r);if(t.results=a.a.cloneDeep(r),n.length===o.length)return t;var s=a.a.difference(n,o);return t.missingRequests=Object.values(a.a.pick(i,s)),t}function Z(e){return Q.apply(this,arguments)}function Q(){return(Q=E(regeneratorRuntime.mark((function e(t){var i,r,o,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(n.a)("feature-flag/check-flags",{flagRequests:t});case 3:i=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),Object(f.a)(new T("Feature flag RPC call failed",{cause:e.t0})),i=[];case 10:return r=W(t),o=i.map((function(e){return new g(e)})).filter((function(e){return e.isValid()})),s=W(o),l=a.a.mapValues(r,(function(e){if(a.a.has(s,e.cacheKey))return s[e.cacheKey];var t=new g(e||{});return t.canAccessFeature=!1,t})),a.a.forIn(l,(function(e,t){H[t]=e})),e.abrupt("return",l);case 16:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function X(e){return $.apply(this,arguments)}function $(){return($=E(regeneratorRuntime.mark((function e(t){var i,n,r,o,s,l,c,d,u,h,p,g,f,_,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.map((function(e){return e.cacheKey})),n=a.a.pick(Y,i),r=t.filter((function(e){return!a.a.has(n,e.cacheKey)})),o=a.a.uniq(Object.values(n)),r.length>0){s=Z(r),l=I(r);try{for(l.s();!(c=l.n()).done;)d=c.value,Y[d.cacheKey]=s}catch(e){l.e(e)}finally{l.f()}o.push(s)}return e.next=7,Promise.all(o);case 7:u=e.sent,h={},p=I(u);try{for(p.s();!(g=p.n()).done;)for(f=g.value,_=0,m=Object.values(f);_<m.length;_++)v=m[_],h[v.cacheKey]=v,delete Y[v.cacheKey]}catch(e){p.e(e)}finally{p.f()}return e.abrupt("return",h);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return ee.apply(this,arguments)}function ee(){return(ee=E(regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te([new p({targetType:q.ENVIRONMENT,flagName:t})]);case 2:return i=e.sent,n=a.a.first(a.a.values(i)),e.abrupt("return",!(null==n||!n.canAccessFeature));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return ie.apply(this,arguments)}function ie(){return(ie=E(regeneratorRuntime.mark((function e(t){var i,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=K(t),n=i.missingRequests,r=i.results,!(n.length<1)){e.next=3;break}return e.abrupt("return",r);case 3:return e.next=5,X(n);case 5:return o=e.sent,e.abrupt("return",a.a.cloneDeep(a.a.assign(r,o)));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"A9n+":function(e,t,i){"use strict";i.d(t,"a",(function(){return L}));var n=i("D/Ov"),r=i("xeH2"),a=i.n(r),o=i("I/qX"),s=i("zorP"),l=i("L8zU"),c=i("ZPm7"),d=i("6t3j"),u=i("A8Hf"),h=i("X5Ic"),p=i("XLZy"),g=i("nF4n"),f=i("Sucz"),_=i("Pxqf");function m(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function v(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){m(a,n,r,o,s,"next",e)}function s(e){m(a,n,r,o,s,"throw",e)}o(void 0)}))}}var y=function(e,t,i,n){this.isEditing=!1,this.oldReviewId=null,this.reviewableItem=e,this.modal=t,this.onSubmittedCallback=i,this.starRating=new s.a,this.techniqueInputs=[];var r=this.reviewableItem.getTechniques(),a=r.length<=1;a||(this.techniqueSelector=r.map(function(e){var t=tag("input",{type:"checkbox",attr:{value:e},className:"pf-mr-8"});return this.techniqueInputs.push(t),tag("label","review-form__technique pf-ui-body pf-mr-16",[t,h.a.LABELS[e]])}.bind(this))),this.featuredReviewStatus=tag("label","review-form__featured pf-ui-body pf-mr-16 pf-mt-12 pf-mb-8",[this.featuredReviewCheckBox=tag("input",{type:"checkbox",attr:{value:0},prop:{onchange:this.renderDetails.bind(this)},className:"pf-mr-8",style:{marginTop:"6px"}}),tag("span",{innerHTML:dlang("reviews","I want my review to be considered as a {linkStart}featured review{linkEnd} on Printful's website").replace("{linkStart}",'<a class="pf-link" target="_blank" href="'.concat(langUrl("/faq/products/478-how-can-i-get-featured-on-printful-s-website-"),'">')).replace("{linkEnd}","</a>")})]),this.featuredReviewDetails=tag("div","hidden",[tag("label",{className:"pf-text-muted pf-ui-body pf-mb-16",innerHTML:dlang("reviews","Weâ€™ll approve your submission if the content follows our {linkStart}featured reviews policy{linkEnd}, and display it with a link to your product on your storefront").replace("{linkStart}",'<a class="pf-link" target="_blank" href="'.concat(langUrl("/faq/products/478-how-can-i-get-featured-on-printful-s-website-"),'">')).replace("{linkEnd}","</a>")}),tag("label","pf-h5",[dlang("reviews","Link to an Instagram post showcasing the product")]),this.instagramUrl=tag("input",{type:"text",className:"form-control"}),this.urlErrorMessage=tag("label","pf-text-red hidden",[dlang("reviews","Please provide a valid link")])]);var d="",p="",g=dlang("reviews","We'd love to hear what you thinkâ€”write your thoughts on the product's fit, feel, style, etc.");this.reviewableItem.isTypeProduct()?(this.nodeRatingTitle=tag("h4","pf-h4 pf-mt-24 pf-mb-4",lang("Overall rating")),d=tag("table","table pf-m-0",[tag("tr","",[tag("td",{attr:{width:90}},[tag("img",{className:"img-responsive center-block",src:this.reviewableItem.getImageUrl()})]),tag("td","pf-h5 pf-pl-24",this.reviewableItem.getTitle())])]),p=tag("div","review-variant-selector",[tag("h4","pf-h4 pf-mt-24 pf-mb-4",lang("Pick a variant to review")),this.colorPicker=new c.a(this.reviewableItem.getVariants(),this.setSelectedColor,this.reviewableItem.getId(),"pf-ui-body pf-mr-16 pf-mb-16"),this.sizePicker=new l.a(this.reviewableItem.getVariants(),this.setSelectedSize,"pf-mr-16",!0)]),this.setActiveSelections(this.colorPicker,this.sizePicker)):(this.nodeRatingTitle=tag("h4","pf-h4 pf-mt-0 pf-mb-8",dlang("reviews","How do you rate your experience with Design Services?")),g=lang("Please share a few details describing your experience")),n&&(this.isEditing=!0,this.oldReviewId=n.reviewId,this.setValuesForExistingReview(n)),this.node=tag("div","review-form",[d,this.nodeRatingTitle,this.starRating,a||tag("h4","pf-h4 pf-mt-24 pf-mb-4",lang("Technique")),a||this.techniqueSelector,p,this.formNode=new o.a(g,this.uploadCallback.bind(this),n),this.featuredReviewStatus,this.featuredReviewDetails,tag("div","pf-mt-24 pf-pb-16 pf-text-muted pf-ui-caption review-disclaimer",[tag("span",{className:"pf-text-red pf-mr-2",innerHTML:"&#42;"}),dlang("reviews","Your review might be used for Printful's marketing purposes")]),tag("div","review-divider"),tag("div","pf-mt-16",[this.nodeSubmit=tag("a",{className:"pf-btn pf-btn-primary",onclick:this.onSubmit.bind(this)},dlang("reviews","Add review"))])]),Object(u.a)(this.nodeTextarea)};(y.prototype=new g.a.Base).selectedColor="",y.prototype.selectedSize="",y.prototype.setActiveSelections=function(e,t){this.setSelectedColor(e.getColor()),this.setSelectedSize(t.getSize())},y.prototype.uploadCallback=function(e){this.nodeSubmit&&(this.nodeSubmit.classList.remove("disabled"),this.nodeSubmit.innerText=dlang("reviews","Add review"),e||(this.nodeSubmit.classList.add("disabled"),this.nodeSubmit.innerText=lang("Waiting for imagesâ€¦")))},y.prototype.setSelectedColor=function(e){y.prototype.selectedColor=e},y.prototype.setSelectedSize=function(e){y.prototype.selectedSize=e},y.prototype.getSelectedVariantId=function(){var e=this.reviewableItem.getVariants().filter((function(e){return e.color===this.selectedColor&&e.size===this.selectedSize}),this);return e.length?e[0].variantId:null},y.prototype.getVariantDetails=function(e){return e?this.reviewableItem.getVariants().find((function(t){return t.variantId===e})):null},y.prototype.uploadedImages=null,y.prototype.getSelectedTechniques=function(){var e=[];return this.techniqueInputs.forEach((function(t){t.checked&&e.push(t.value)})),e},y.prototype.onSubmit=function(){var e=this,t=!1;if(this.starRating.getStars()||(t=!0,this.nodeRatingTitle.style.color="red",this.nodeRatingTitle.scrollIntoView(),setTimeout(function(){this.nodeRatingTitle.style.color=""}.bind(this),1500)),!this.featuredReviewCheckBox.checked)return this.submitReview(t);this.formNode.nodeTextarea.value?this.formNode.textAreaErrorMessage.classList.add("hidden"):(this.formNode.textAreaErrorMessage.classList.remove("hidden"),t=!0),this.validateInstagramUrl(this.instagramUrl.value).then((function(i){i?e.urlErrorMessage.classList.add("hidden"):(t=!0,e.urlErrorMessage.classList.remove("hidden")),e.formNode.images&&2===Object.keys(e.formNode.images).length?e.formNode.imageErrorMessage.classList.add("hidden"):(t=!0,e.formNode.imageErrorMessage.classList.remove("hidden")),p.a.hide(e.node),e.submitReview(t)}))},y.prototype.onSubmitRe=function(e,t){g.a.clearNode(this.node);var i=tag("div","pf-ui-body",[tag("p","",[dlang("reviews","Your review has been submitted for approval. For now only you can see it. If you change your mind, you can remove your review anytime.")])]);if(this.starRating.getStars()>3&&tag("p",{innerHTML:lang('Let others know what you think by adding your <a href="https://search.google.com/local/writereview?placeid=ChIJKYH-rR6aVogR22ERfPPF0t4" target="_blank" rel="nofollow noopener" class="pf-link">review here.</a>')}).append(i),e){var n=this.reviewableItem.isTypeProduct()?dlang("reviews","Product review submitted"):dlang("reviews","Design services review submitted");this.modal.setTitle(n)}else this.modal.setTitle(dlang("reviews","Error submitting the review"));tag("div","pf-mb-32",[e?i:t]).append(this.node);var r=tag("a",{className:"pf-btn pf-btn-secondary",onclick:this.reviewableItem.isTypeProduct()||this.starRating.getStars()<4?v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)("products/should-ask-for-review");case 2:if(e.sent.success){e.next=5;break}return e.abrupt("return",this.modal.remove());case 5:g.a.clearNode(a),this.getExternalReviewRequest("trustpilot").append(this.node),this.modal.setFooterContent(tag("a",{text:lang("Review us"),title:lang("Review us"),href:"https://www.trustpilot.com/review/printful.com",className:"pf-btn pf-btn-primary float-left",target:"_blank",attr:{rel:"nofollow"}}));case 8:case"end":return e.stop()}}),e,this)}))).bind(this):function(){this.modal.remove()}.bind(this)},this.reviewableItem.isTypeProduct()?lang("Ok"):lang("Close")),a=tag("div","",[r]).append(this.node);this.onSubmittedCallback&&this.onSubmittedCallback()},y.prototype.renderDetails=function(e){var t=e.target;t.checked?(t.value=1,this.featuredReviewDetails.classList.remove("hidden")):(t.value=0,this.featuredReviewDetails.classList.add("hidden"))},y.prototype.getExternalReviewRequest=function(e){var t="trustpilot"===e?PF.ASSETS_URL+"images/products-catalog/trustpilot-review.svg":PF.ASSETS_URL+"images/products-catalog/yelp-review.svg",i="trustpilot"===e?dclang("products","trustpilot review request","Weâ€™re so glad youâ€™re loving Printful products! Would you consider <strong>reviewing us on Trustpilot?</strong> Sharing your experience and help others find Printful."):dclang("products","yelp review request","Weâ€™re so glad youâ€™re loving Printful products! Would you consider <strong>reviewing us on Yelp?</strong> Sharing your experience and help others find Printful.");return tag("div","pf-border-top pf-pt-32 pf-pb-16",[tag("p","pf-h3 pf-m-0",dlang("","Thanks for the positive reviews!")),tag("img",{className:"img-responsive pf-mx-auto pf-my-24",src:t,attr:{alt:"collect reviews "+e}}),tag("p",{className:"pf-m-0",innerHTML:i})])},y.prototype.validateInstagramUrl=function(e){return Object(f.a)("products/validate-instagram-url",{instagramUrl:e}).then((function(e){return e.success}))},y.prototype.submitReview=function(e){if(!e){p.a.show(this.node);var t=[];for(var i in this.formNode.images){var n={key:this.formNode.images[i].temporaryFileKey,isTemporaryFile:!0};!this.formNode.images[i].key||this.formNode.images[i]instanceof _.a||(n.key=this.formNode.images[i].key,n.isTemporaryFile=!1),t.push(n)}var r={reviewableItemId:this.reviewableItem.getId(),reviewableItemType:this.reviewableItem.getType(),rating:this.starRating.getStars(),review:this.formNode.nodeTextarea.value,images:t,printTechniques:this.getSelectedTechniques(),selectedVariant:this.getSelectedVariantId(),isForFeatured:this.featuredReviewCheckBox.checked,instagramUrl:this.instagramUrl.value,isEditing:this.isEditing,oldReviewId:this.oldReviewId};(new d.a).submitProductReview(r,this.onSubmitRe.bind(this))}},y.prototype.setValuesForExistingReview=function(e){this.starRating.setStars(e.rating),this.featuredReviewCheckBox.checked=e.isFeatured,e.featuredReviewData.instagramUrl&&(this.instagramUrl.value=e.featuredReviewData.instagramUrl),e.isFeatured&&this.featuredReviewDetails.classList.remove("hidden");var t=this.getVariantDetails(e.variantId);for(var i in this.colorPicker.setVariant(t),this.sizePicker.setVariant(t),e.printTechniques)for(var n in this.techniqueInputs)e.printTechniques[i]===this.techniqueInputs[n].value&&(this.techniqueInputs[n].checked=!0)},(globalThis||{}).PFProductReviewForm=y;var b=i("V5mN"),P=i("cCrT"),C=i("97Au"),T=i("UIgN"),I=function(e,t,i){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this._reviewableItem=e,PF.Customer.customerId){this.onSubmittedCallback=t;var a=tag("div");p.a.show(a,{minHeight:120});var o=e.isTypeProduct()?dlang("reviews","Review this product"):dlang("reviews","Tell us what you think"),s=new C.a.Par;s.accessibility=!0,s.onShown=function(e){Object(T.b)(e.target.querySelector(".modal-body"))},r&&(s.onClose=function(){Object(T.a)(r)}),this.modal=new C.a(s),this.modal.setTitle(o),this.modal.setContent(a),this.modal.show();var l=!!i;(new d.a).canSubmitAReview(e,l,(function(e,t){e?i?n.editReview(i):n.beginReviewing():n.onNotAllowedToSubmit(t)}))}else this.signupPopUp()};I.prototype.onNotAllowedToSubmit=function(e){this.modal.setTitle("Oops!"),this.modal.setContent(tag("div","",[tag("p","pf-mb-32",e),tag("a",{className:"pf-btn pf-btn-primary",onclick:function(){this.modal.remove()}.bind(this)},lang("Got it"))]))},I.prototype.beginReviewing=function(){this.modal.setContent(new y(this._reviewableItem,this.modal,this.onSubmittedCallback))},I.prototype.editReview=function(e){this.modal.setContent(new y(this._reviewableItem,this.modal,this.onSubmittedCallback,e))},I.prototype.signupPopUp=function(){var e=new P.a,t=b.a.Par;t.returnUrl=e.path+(e.query.toString()?"?"+e.query.toString():""),t.signUpContent=[[tag("span",{innerHTML:lang("<strong>Automatic</strong> order fulfillment")})],[tag("span",{innerHTML:lang("Download free print file <strong>templates</strong> and <strong>mockups</strong>")})],lang("No upfront or monthly fees")],t.signInContent=this._reviewableItem.isTypeProduct()?[dlang("reviews","Please sign in to review products.")]:[dlang("reviews","Please sign in to review design services.")],new b.a(t)},(globalThis||{}).PFProductReview=I;var w=i("fQ40"),S=i("L5Qw"),E=i("mGLc"),k=i("YBfo");function O(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return A(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var L=function(e,t,i,n){this.reviewableItem=e,this.page=1,this.stars=t||0,this.withPictures=!1,this.locale=null,this.sortBy=null,this.shouldScrollToNode=void 0===i||i,this.node=tag("div"),this.reloadFilters=n};L.prototype=new g.a.Base,L.prototype.append=function(e){return this.node.append(e),this},L.prototype.shouldScrollToNode=!0,L.prototype.load=function(e,t,i,n,r,a){p.a.show(this.node,{minHeight:150}),e&&(this.page=e),null!=t&&(this.stars=t),null!=i&&(this.locale=i),null!=n&&(this.withPictures=n),null!=r&&(this.sortBy=r),null!=a&&(this.shouldScrollToNode=a),(new d.a).getReviews({reviewableItemId:this.reviewableItem.getId(),reviewableItemType:this.reviewableItem.getType(),page:this.page,stars:this.stars,locale:this.locale,withPictures:this.withPictures,sortBy:this.sortBy,perPage:4,callback:this.render.bind(this)})},L.prototype.render=function(e){p.a.hide(this.node);var t=tag("div","text-center",[tag("a",{className:"pf-btn pf-btn-lg pf-btn-primary pf-mt-24",onclick:function(e){new I(this.reviewableItem,this.load.bind(this,1),null,e.target)}.bind(this)},dlang("reviews","Add a review"))]);g.a.clearNode(this.node);var i=(this.reviewableItem.isTypeProduct()?dlang("reviews","There are no submitted reviews for this product right now."):dlang("reviews","There are no submitted reviews for this service right now."))+" "+dlang("reviews","Would you like to leave one?"),r=this.reviewableItem.getReviewRating().reviewCount;if(r){if(this.reviewableItem.isTypeProduct()){tag("div","col-12",[tag("div","row",[tag("div","col-12 col-sm-3 margin-top-10 product-reviews__overview",[L.getReviewRatingNode(this.reviewableItem,!0),L.getReviewOverview(this.reviewableItem,this.reloadFilters)]),tag("div","col-12 col-sm-9 pf-mt-40 margin-top-25 product-reviews__reviews-list",[this._review=tag("div"),this._paging=tag("div","reviews-paging"),tag("div","",[t])])])]).append(this.node);var o=document.getElementById("mobileOverview");o&&(o.innerHTML="",L.getReviewRatingNode(this.reviewableItem,!0).append(o),L.getReviewOverview(this.reviewableItem,this.reloadFilters).append(o));for(var s=a()(".pro-star-text"),l=[],c=0;c<s.length;c++)l.push(a()(s[c]).outerWidth());var d=l.reduce((function(e,t){return e>t?e:t}),0);if(a()(".pro-star-text").css({minWidth:d}),!e.total&&r)return void L.renderNoResult(dlang("reviews","There are no reviews matching selected criteria, would you like to leave one?"),t,this._review)}var u,h=O(e.items);try{for(h.s();!(u=h.n()).done;){var f=u.value;new n.a(f,this.onRequestDelete.bind(this,f),this.onRequestEdit.bind(this),this.load.bind(this)).append(this._review)}}catch(e){h.e(e)}finally{h.f()}var _=new w.a;_.page=e.page,_.pages=e.pages,_.callback=function(e){this.load(e)}.bind(this),new S.a(_).append(this._paging),this.shouldScrollToNode?this.scrollToNode():this.shouldScrollToNode=!0}else L.renderNoResult(i,t,this.node)},L.renderNoResult=function(e,t,i){tag("div","col-12 pf-mt-24 pf-mb-48 pf-bg-lighter pf-py-64 text-center",[tag("img",{className:"img-responsive center-block",src:"/static/images/products-catalog/no-ratings-illustration.svg"}),tag("p","pf-mt-24 pf-mb-0",e),t]).append(i)},L.getReviewOverview=function(e,t,i,n){var r=e.getReviewOverview();if(0===r.length||!e.isTypeProduct())return tag("div");for(var a={tag:"div",className:"products-review-overview",els:[]},o=1;o<=5;o++){var s=0===r[o]||i,l=tag("");l=s?tag("span","pro-star-text pf-pr-16",dnlang("products","{count} star","{count} stars",o).replace("{count}",o)):tag("a",{className:"pro-star-text pf-pr-16 pf-link",href:n?n+"_"+o:null,target:k.a.isOrderFlow()||k.a.isProductPush()||k.a.isGenerator()?"_blank":"_self",attr:{"aria-label":dlang("products","See {count} star reviews").replace("{count}",o)}},dnlang("products","{count} star","{count} stars",o).replace("{count}",o)),a.els.unshift(tag("div",{className:"pf-mt-8",onclick:s?null:function(e){t&&t(e)}.bind(null,o)},[l,tag("span","pro-progress-base",[tag("span",{className:"pro-progress pf-bg-brown",style:{width:r[o]+"%"}})]),tag("span","pf-pl-12",r[o]+"%")]))}if(t){var c=e.getReviewRating().reviewCount;a.els.unshift(tag("div","pf-mt-8 pf-mb-40",[tag("a",{className:"pf-link",onclick:t.bind(null,0)},dnlang("reviews","{count} review","{count} reviews",c).replace("{count}",c))]))}return Object(g.a)(a)},L.prototype.onRequestDelete=function(e){confirm(lang("Are you sure? This cannot be undone!"))&&(p.a.show(this.node,{minHeight:150}),(new d.a).deleteReview(e.reviewId,a.a.proxy((function(){this.page=1,this.load()}),this)))},L.prototype.onRequestEdit=function(e){new I(this.reviewableItem,this.load.bind(this,1),e)},L.getReviewRatingStarNode=function(e){for(var t=e.getReviewRating(),i=[],n=1;n<=5;n++){var r=t.rating,a="";a=parseInt(r)!==r&&Math.round(r)===n?"-half":n>r?"-outline":"",i.push(tag("span","pf-i pf-i-18 pf-i-star"+a+" pf-mr-6 pf-text-brown"))}return i},L.getReviewRatingNode=function(e,t,i,n){if(!e.isTypeProduct())return tag("div");t=t||0;var r=e.getReviewRating();if(!r.reviewCount)return{tag:"a",className:"pf-link",text:dlang("reviews","Review product"),onclick:function(){new I(e,n)}};var a,o=E.a.getReviewRatingStarNode(e),s=r.reviewCount;return t?(this.reviewCount=s,a=tag("div","",[tag("div",{className:"pf-h2 pf-normal",attr:{"aria-hidden":"true"}},parseFloat(r.rating).toFixed(1)),tag("div",{className:"pf-mt-8 star-rating__stars star-rating__stars--inline",attr:{"aria-label":lang("{rating} out of 5 stars").replace("{rating}",r.rating)}},o)])):a=tag("a",{className:"pf-link",onclick:i.bind(this,parseFloat(r.rating).toFixed(1)),data:{toggle:"tooltip",placement:"bottom"}},[tag("div",{className:"star-rating__stars star-rating__stars--inline",attr:{"aria-label":lang("{rating} out of 5 stars").replace("{rating}",r.rating)}},o),nlang("%d Review","%d Reviews",s)]),a},L.prototype.scrollToNode=function(){var e=a()(".catalog__product__tabs"),t=a()(window).width()<768?e.height():e.outerHeight();a()("html, body").animate({scrollTop:e.offset().top+t},1e3)},(globalThis||{}).PFProductReviewList=L},AUjr:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("6t3j"),r=i("vUhP"),a=i("eYhR"),o=i("nwx2"),s=i("X5Ic"),l=i("nF4n"),c=i("97Au"),d=i("UIgN"),u=Class({_product:null,_variant:null,_priceListItems:null,_asteriskNode:null,displayAsterisk:!0,_detailedInfoModalTrigger:null,__construct:function(e,t){this._product=e,this.node=tag("span"),t?this._render(t):(new n.a).getBrandingOptionsPriceList(this._product,this._render)},_render:function(e){l.a.clearNode(this.node),this._priceListItems=e,tag("div","products-pricing-info__muted text-muted",[tag("span","products-pricing-info__red",["* "]),tag("span","pf-text-muted",[dlang("products","Price varies depending on the production technique, print placement, product color and size, taxes, and shipping. See")," "]),this._detailedInfoModalTrigger=tag("a",{className:"pf-link",onclick:this._showModal.bind(this)},[dlang("products","detailed info")])]).append(this.node)},_showModal:function(e){var t=this;e=e||"";var i=new c.a.Par;i.title=dlang("products","Product extras and costs"),i.modalDialogClass="modal-lg",i.accessibility=!0,i.onShown=function(e){Object(d.b)(e.target.querySelector(".modal-body"))},i.onClose=function(){t.modal.remove(),Object(d.a)(t._detailedInfoModalTrigger)},this.modal=new c.a(i),this.modal.setContent(this.getContent(e)),this.modal.show()},_getBrandingItem:function(e){var t=this._getBrandingItemId(e.brandingOption);return tag("div","branding-options__category pf-px-12 pf-py-16",[tag("a",{className:"category",href:"#"+t,data:{toggle:"collapse"},attr:{role:"button","aria-expanded":!1,"aria-controls":t}},[tag("div","",[tag("span","arrow"),tag("span","branding-options__category__item-title",[e.title])]),tag("div","branding-options__category__price-wrapper",[tag("p","branding-options__category__item-price",[r.a.createDiscountElementFromPrices(e.price,e.discountedPrice,e.currency)]),tag("span","pf-text-muted text-right",[e.unit?" / "+e.unit:""])]),tag("div",{className:"collapse info-text",id:t},[tag("p","branding-options__category__item-content margin-bottom-20",[e.content])])])])},variantChanged:function(e,t){this._variant=e,this._technique=t,this._priceListItems?this._render(this._priceListItems):(new n.a).getBrandingOptionsPriceList(this._product,this._render)},getContent:function(e){var t=new o.a("secondary"),i=[],n=this._getTabCaptions();for(var r in n){var s=new a.a,c=n[r];s.caption=c.title,e&&n.some((function(t){return t.id==e}))?s.isActive=c.id==e:s.isActive=0==r;var d=tag("div",s.isActive?"":"hidden");"technique"===c.id&&this._getTechniqueContent().append(d),"location"===c.id&&this._getFulfillmentLocationContent().append(d),"bulk"===c.id&&this._getBulkDiscountContent().append(d),i.push(d),s.onclick=function(e,t){for(var n in i)if(i.hasOwnProperty(n)){var r=i[n];n===t?l.a.removeClassName(r,"hidden"):l.a.addClassName(r,"hidden")}}.bind(this,c,r),t.add(s)}l.a.addClassName(t.node,"pf-mb-24");var u=dlang("products","The product <b>price depends on</b> factors like production <b>technique, print placement, product color, size</b> and <b>fulfillment location.</b> You also have to take into account that shipping and taxes are extra.")+" ";return tag("div","branding-options",[tag("div","",[tag("p",{className:"pf-m-0 pf-pb-16 text-muted",innerHTML:u}),t,tag("div","",i)])])},_getTabCaptions:function(){var e=[];return Object.keys(this._priceListItems).length&&e.push({id:"technique",title:clang("printing","Technique")}),e.push({id:"location",title:lang("Fulfillment location")}),this._product.priceRange.bulkDiscountTiers&&this._product.priceRange.bulkDiscountTiers.tierLevels&&e.push({id:"bulk",title:dlang("billing","Bulk discounts")}),e},_getTechniqueContent:function(){var e=this._product.availableTechniques||[this._product.type],t=tag("div",""),i=0;for(var n in e)if(e.hasOwnProperty(n)){i++;var r=e[n],a=s.a.LABELS[r],o=tag("div","pf-mt-32",[tag("div","pf-h4 pf-mb-12",[i+". "+a])]),l=this.getTechniqueTabContent(r);l&&l.append(o);var c=this._priceListItems[r];for(var d in c)this._getBrandingItem(c[d]).append(o);o.append(t)}return t},getTechniqueTabContent:function(e){return e==s.a.TYPE_EMBROIDERY?tag("p",{className:"pf-mt-0 pf-mb-32 text-muted"},[tag("div",{innerHTML:dlang("products","Your design will be machine-embroidered on the product. <b>Embroidery costs more than printed clothing because it takes more time and has higher production costs.</b> <br/><br/>Embroidery also comes with <b>digitization</b> and <b>adjustment costs</b>. We don't accept files that have been digitized elsewhere and we only charge files that are part of an order.")}),tag("div",{className:"pf-mt-16",innerHTML:dlang("products","<b>Order 25+ embroidery products in a single order, and we'll digitize all your embroidery designs for free.</b> You can choose different products and add as many designs as you like.")})]):e===s.a.TYPE_T_SHIRT?tag("p",{className:"pf-mt-0 pf-mb-32 text-muted",innerHTML:dlang("products","Your design will be printed directly on the product with the DTG (direct-to-garment) technique that yields bold and vibrant prints. Our base price <b>includes one print</b>, these are the extras you can get.")}):null},_getFulfillmentLocationContent:function(){var e=dlang("products","Our product prices can change depending on where an order is fulfilled and which currency you use to pay for it."),t=dlang("products","Each product has a <b>fixed price</b> for each location. Our North American products have a fixed USD price, and our products in Europe have a fixed EUR price."),i=dlang("products","Products fulfilled in one location but charged in a different currency have a <b>floating price</b>."),n=dlang("products","For example, let's say you're ordering a t-shirt that we only fulfill in the US and you're paying for it in EUR. The price you pay would be our USD price converted to EUR. The end price would also depend on that month's exchange rate, which is what makes it a floating price."),r=dlang("products","If you're ordering a product that we fulfill in Europe and you're paying for it in EUR, you would pay our fixed EUR price.");return tag("div","pf-text-muted",[tag("p","",e),tag("p",{innerHTML:t}),tag("p",{innerHTML:i}),tag("p","",n),tag("p","",r)])},_getBulkDiscountContent:function(){var e=tag("table","table");this._getBulkDiscountTableHead().append(e),this._getBulkDiscountTableBody().append(e);var t=tag("div");return this._getBulkCaption().append(t),e.append(t),t},_getBulkCaption:function(){var e=this._product.priceRange.bulkDiscountTiers.getFirstTier(),t=dlang("orders","If you're ordering more than {unitCount} units, you can get a discount on your order! You can mix colors, sizes and designs and still get the discount. If you have another discount active, like volume discounts, we'll apply whichever is higher so you donâ€™t miss out.").replace("{unitCount}",e);return tag("p","pf-mt-0 pf-mb-32 text-muted",t)},_getBulkDiscountTableHead:function(){return tag("thead","",[tag("tr","pf-border-bottom",[tag("th","",dclang("orders","item count column","Item Amount")),tag("th","",dlang("orders","Discount")),tag("th","",dlang("orders","Discounted price"))])])},_getBulkDiscountTableBody:function(){var e=this._getPrice(),t=this._product.priceRange.bulkDiscountTiers.tierLevels,i=tag("tbody");for(var n in t){var r=t[n],a=e-e*r.percent,o="",s=this._product.priceRange.bulkDiscountTiers.getNextTierForItemCount(r.itemQuantity);s?(s-=1,o=r.itemQuantity+"-"+s):o=r.itemQuantity+"+",tag("tr","pf-border-bottom",[tag("td","",o),tag("td","",Math.round(100*r.percent)+"%"),tag("td","",prettyMoney(a,this._product.priceRange.currency))]).append(i)}return i},_getPrice:function(){var e=this._variant?this._variant.priceData.originalPrice:this._product.priceRange.minOriginalPrice;return this._technique&&this._product.priceRange.additionalPrices[this._technique]?e+this._product.priceRange.additionalPrices[this._technique]:e},setAsterisk:function(e){this._asteriskNode=e},_getBrandingItemId:function(e){return"sub_"+ ++u._brandingItemId+"_"+e}},l.a.Base);u._brandingItemId=0,window&&((globalThis||{}).PFProductsCatalogProductBrandingOptionPriceList=u)},B5vy:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("msYT"),r=i.n(n);function a(e,t,i){var n=e.position.areaWidth,a=e.position.areaHeight,o=t/n,s=i/a,l=Math.min(o,s),c=n/2,d=a/2,u=t/2,h=i/2,p=(e.position.left+e.position.width/2-c)*l,g=(e.position.top+e.position.height/2-d)*l;e.isTextLayer()?(e.size*=l,r.a.calculateTextboxPositions(e)):(e.position.width*=l,e.position.height*=l),e.position.left=u+p-e.position.width/2,e.position.top=h+g-e.position.height/2,e.position.areaWidth=t,e.position.areaHeight=i,e.originalPosition=e.position.getClone()}},B8kU:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"g",(function(){return r})),i.d(t,"i",(function(){return a})),i.d(t,"h",(function(){return o})),i.d(t,"b",(function(){return s})),i.d(t,"d",(function(){return l})),i.d(t,"f",(function(){return c})),i.d(t,"e",(function(){return d})),i.d(t,"c",(function(){return u}));var n="designer/mockupModule/",r="m_setFlag",a="m_setMockupType",o="m_setMockupProduct",s="g_getFlag",l="g_hasCustomMockupAccess",c="g_productItem",d="a_loadCustomMockupAccessFlag";function u(e){return n+e}},Bxww:function(e,t,i){"use strict";i.d(t,"g",(function(){return n})),i.d(t,"f",(function(){return r})),i.d(t,"e",(function(){return a})),i.d(t,"d",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return c}));var n="m_setProductItem",r="m_setPlacementsWithOnlyBackgroundColor",a="m_setOptionGroupTagInfo",o="g_productItem",s="g_placementsWithOnlyBackgroundColor",l="g_optionGroupTagInfo";function c(e){return"designer/productModule/"+e}},C00j:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={getTaxName:function(e){return this.isTaxAvailable(e)?PF.CurrenciesTax[e].taxName:null},addTax:function(e,t){return this.isTaxAvailable(e)&&this.isTaxIncluded(e)?t*PF.CurrenciesTax[e].taxRate:t},isTaxIncluded:function(e){return!!this.isTaxAvailable(e)&&PF.CurrenciesTax[e].isTaxIncluded},isTaxAvailable:function(e){return this._currencyHasSettings(e)&&PF.CurrenciesTax[e].isTaxAvailable},_currencyHasSettings:function(e){var t;return null===(t=PF.CurrenciesTax)||void 0===t?void 0:t.hasOwnProperty(e)},toggleTaxInclusion:function(e,t){this._currencyHasSettings(e)&&(PF.CurrenciesTax[e].isTaxIncluded=Boolean(t))}};(globalThis||{}).PFUtilsPriceTaxInclusion=n},CDME:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("2Zm2"),r=i("nF4n"),a=function(){};a.prototype=new n.a,a.prototype.originalPrice=null,a.prototype.minOriginalPrice=null,a.prototype.originalPriceVD=null,a.prototype.minOriginalPriceVD=null,a.prototype.isOriginalPriceDiscounted=!1,a.prototype.isMinOriginalPriceDiscounted=!1,a.prototype.originalLaunchPrice=null,a.prototype.minOriginalLaunchPrice=null,a.prototype.launchPriceExpiryTime=null,a.prototype.getProfit=function(e){return this.retailPrice-(e?this.originalPriceVD:this.originalPrice)},a.prototype.hasVolumeDiscountAvailable=function(){return this.originalPrice>this.originalPriceVD||this.minOriginalPrice>this.minOriginalPriceVD},a.prototype.getMaximumProfit=function(e){return this.retailPrice-(e?this.minOriginalPriceVD:this.minOriginalPrice)},a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t.originalPrice=parseFloat(t.originalPrice)||0,t.originalPriceVD=parseFloat(t.originalPriceVD)||0,t.minOriginalPrice=parseFloat(t.minOriginalPrice)||0,t.minOriginalPriceVD=parseFloat(t.minOriginalPriceVD)||0,t.retailPrice=parseFloat(t.retailPrice)||0,t},window&&((globalThis||{}).PFItemsGeneratorPriceItem=a)},CXOy:function(e,t,i){"use strict";i.d(t,"f",(function(){return y})),i.d(t,"e",(function(){return b})),i.d(t,"d",(function(){return P})),i.d(t,"a",(function(){return T})),i.d(t,"i",(function(){return I})),i.d(t,"h",(function(){return w})),i.d(t,"g",(function(){return S})),i.d(t,"c",(function(){return E})),i.d(t,"b",(function(){return k}));var n,r=i("gWUq"),a=i("X5Ic"),o=i("MSZa"),s=i("mTkf"),l=i("wy2R"),c=i.n(l),d=i("LvDl"),u=i.n(d),h=i("Jkv8");function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function f(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function _(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,i){return t&&_(e.prototype,t),i&&_(e,i),e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.itemRepository=t.itemRepository||{},this.viewType=t.viewType||I.LIST,this.filter=t.filter?new P(t.filter):null,this.currentItemsResponseMetadata=t.currentItemsResponseMetadata?new b(t.currentItemsResponseMetadata):null,this.selectedItemIds=t.selectedItemIds||[],this.flags=t.flags||{}};y.FLAG_KEYS=Object.freeze({IS_LOADING:"IS_LOADING",SHOW_DELETE_MODAL:"SHOW_DELETE_MODAL",JUST_CREATED_FIRST_TEMPLATE:"JUST_CREATED_FIRST_TEMPLATE",HAS_NOT_CREATED_ANY_TEMPLATES:"HAS_NOT_CREATED_ANY_TEMPLATES",HAS_NO_PUSH_STORES:"HAS_NO_PUSH_STORES",HAS_NOT_CLOSED_INTRO:"HAS_NOT_CLOSED_INTRO",IS_LOADING_ASYNC_DEPS:"IS_LOADING_ASYNC_DEPS",SHOW_MOCKUP_DOWNLOAD_MODAL:"SHOW_MOCKUP_DOWNLOAD_MODAL",HAS_CREATE_ORDER_PERMISSION:"HAS_CREATE_ORDER_PERMISSION"});var b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.itemIds=t.itemIds||[],this.page=parseInt(t.page||0),this.itemsPerPage=parseInt(t.itemsPerPage||0),this.totalPages=parseInt(t.totalPages||0),this.totalItems=parseInt(t.totalItems||0),this.filter=t.filter?new P(t.filter):null}return m(e,[{key:"isLastPage",get:function(){return this.page===this.totalPages}}]),e}(),P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.search=t.search||null,this.sortBy=t.sortBy||E.CREATED_DATE,this.sortDir=t.sortDir||k.DESC,this.page=parseInt(t.page||1),this.perPage=parseInt(t.perPage||11)}return m(e,[{key:"isDifferentThan",value:function(t){return!(t&&t instanceof e)||Object.keys(this).some(function(e){return this[e]!=t[e]}.bind(this))}},{key:"toQueryParams",value:function(){var e={};return this.search&&this.search.length&&(e.search=this.search+""),this.sortBy&&this.sortBy.length&&(e.sortBy=this.sortBy+""),this.sortDir&&this.sortDir.length&&(e.sortDir=this.sortDir+""),this.page&&(e.page=this.page+""),e}}]),e}(),C=new WeakMap,T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),C.set(this,{writable:!0,value:null}),this.id=t.id||null,this.title=t.title||null,this.templateStatus=t.templateStatus||null,this.productStatus=t.productStatus||null,this.productData=t.productData?t.productData instanceof a.a?a.a.duplicateFrom(t.productData):a.a.fromArray(t.productData):null,this.mainImage=t.mainImage?new o.a(t.mainImage):null,this.designRaw=t.design||t.designRaw||null,this.colors=t.colors||{},this.stitchColor=t.stitchColor||null,this.sizes=t.sizes||null,this.technique=t.technique||null,this.placementNames=t.placementNames||{},this.placementSVGs=t.placementSVGs||{},this.containsLicensedAsset=t.containsLicensedAsset||!1,this.containsProContent=t.containsProContent||!1,this.requiresSubscription=t.requiresSubscription||!1,this.optionData=t.optionData||{},this.createdAt=t.createdAt?t.createdAt instanceof c.a?c.a.utc(t.createdAt.toISOString()):c.a.utc(t.createdAt):null,this.updatedAt=t.updatedAt?t.updatedAt instanceof c.a?c.a.utc(t.updatedAt.toISOString()):c.a.utc(t.updatedAt):null,this.storeData=t.storeData?u.a.cloneDeep(t.storeData):null}var t,i;return m(e,[{key:"shouldShowTechnique",get:function(){var e;return!(null===(e=this.productData)||void 0===e||!e.hasMultipleTechniques())&&this.technique}},{key:"shouldShowThreadColors",get:function(){return this.technique===a.a.TECHNIQUE_EMBROIDERY}},{key:"shouldShowStitchColors",get:function(){return this.technique===a.a.TECHNIQUE_CUT_SEW}},{key:"isDraft",get:function(){return this.templateStatus===e.TEMPLATE_STATUSES.DRAFT}},{key:"isActive",get:function(){return this.templateStatus===e.TEMPLATE_STATUSES.ACTIVE}},{key:"displaySizes",get:function(){return(this.sizes||[]).map((function(e){return a.a.LABELS[e]||e})).filter((function(e){return!!e}))}},{key:"displayColors",get:function(){var e=Object.keys(u.a.pickBy(this.colors||{},(function(e){return!!e})));return this.productData.colors.filter((function(t){return u.a.includes(e,t.colorName)}))}},{key:"techniqueDisplayName",get:function(){return this.technique?a.a.LABELS[this.technique]||this.technique:""}},{key:"getPlacementSVG",value:(t=regeneratorRuntime.mark((function e(t){var i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.setPFCanvasFonts)();case 2:return e.abrupt("return",new Promise((function(e,n){i.getDesign()&&t?i.placementSVGs&&i.placementSVGs[t]?e(i.placementSVGs[t]):Object(s.e)(i.getDesign(),t).then((function(n){i.placementSVGs||(i.placementSVGs={}),i.placementSVGs[t]=n,e(n)})).catch((function(e){return n(e)})):n(new Error("Design or placement type missing!"))})));case 3:case"end":return e.stop()}}),e)})),i=function(){var e=this,i=arguments;return new Promise((function(n,r){var a=t.apply(e,i);function o(e){g(a,n,r,o,s,"next",e)}function s(e){g(a,n,r,o,s,"throw",e)}o(void 0)}))},function(e){return i.apply(this,arguments)})},{key:"getDesign",value:function(){return f(this,C)||function(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}}(this,C,this.designRaw?this.designRaw instanceof r.a?r.a.duplicateFrom(this.designRaw):r.a.fromArray(this.designRaw):null),f(this,C)}}]),e}();T.TEMPLATE_STATUSES=Object.freeze({DRAFT:"draft",ACTIVE:"active",REMOVED:"removed"}),T.PRODUCT_STATUSES=Object.freeze({ACTIVE:"active",INACTIVE:"inactive",DISABLED_IN_PUSH:"disabled_in_push",BROKEN:"broken"});var I=Object.freeze({GRID:"GRID",LIST:"LIST"}),w=Object.freeze({CREATED_DATE_DESC:"CREATED_DATE_DESC",CREATED_DATE_ASC:"CREATED_DATE_ASC",UPDATED_DATE_DESC:"UPDATED_DATE_DESC",UPDATED_DATE_ASC:"UPDATED_DATE_ASC",TITLE_ASC:"TITLE_ASC",TITLE_DESC:"TITLE_DESC"}),S=Object.freeze((p(n={},w.CREATED_DATE_DESC,dclang("dashboard","sort type","Created: newest first")),p(n,w.CREATED_DATE_ASC,dclang("dashboard","sort type","Created: oldest first")),p(n,w.UPDATED_DATE_DESC,dclang("dashboard","sort type","Updated: newest first")),p(n,w.UPDATED_DATE_ASC,dclang("dashboard","sort type","Updated: oldest first")),p(n,w.TITLE_ASC,dclang("dashboard","sort type","Title: A to Z")),p(n,w.TITLE_DESC,dclang("dashboard","sort type","Title: Z to A")),n)),E=Object.freeze({CREATED_DATE:"created",UPDATED_DATE:"updated",TITLE:"title"}),k=Object.freeze({ASC:"asc",DESC:"desc"})},Cc5H:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"t",(function(){return r})),i.d(t,"o",(function(){return a})),i.d(t,"s",(function(){return o})),i.d(t,"u",(function(){return s})),i.d(t,"d",(function(){return l})),i.d(t,"p",(function(){return c})),i.d(t,"y",(function(){return d})),i.d(t,"b",(function(){return u})),i.d(t,"c",(function(){return h})),i.d(t,"v",(function(){return p})),i.d(t,"e",(function(){return g})),i.d(t,"w",(function(){return f})),i.d(t,"i",(function(){return _})),i.d(t,"n",(function(){return m})),i.d(t,"j",(function(){return v})),i.d(t,"k",(function(){return y})),i.d(t,"x",(function(){return b})),i.d(t,"r",(function(){return P})),i.d(t,"q",(function(){return C})),i.d(t,"h",(function(){return T})),i.d(t,"g",(function(){return I})),i.d(t,"f",(function(){return w})),i.d(t,"m",(function(){return S})),i.d(t,"l",(function(){return E}));var n="productTemplates/index",r="m_setFlag",a="m_loadItemsIntoRepo",o="m_removeItemsFromRepo",s="m_setItemsResponseMetadata",l="m_changeViewType",c="m_loadSavedItem",d="m_updateItemFiles",u="m_changeItemCheckedState",h="m_changePageCheckedState",p="m_toggleDeleteModal",g="m_cleanupDeletedItemData",f="m_toggleMockupDownloadModal",_="g_getFlag",m="g_getPageItems",v="g_getItem",y="g_getItemCheckedState",b="a_updateFilterAndLoad",P="a_loadUsingFilter",C="a_loadSingleItem",T="a_duplicateItem",I="a_deleteItems",w="a_closeIntro";function S(e){return e.productTemplates.index}function E(e){return n+"/"+e}},CvqS:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({optionItems:[],values:null,onChange:null,inputNamePrefix:""});window&&((globalThis||{}).PFComponentsProductOptionsPar=n)},"D/Ov":function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("xeH2"),r=i.n(n),a=i("6t3j"),o=i("E17x"),s=i("X5Ic"),l=i("XLZy"),c=i("97Au"),d=i("nF4n"),u=i("x0He");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=v(e);if(t){var r=v(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return _(this,i)}}function _(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,e);var t,n,r,a=f(o);function o(e){var t,i,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=a.call(this),i=m(t),r=void 0,(n="review")in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,t.review=e,t}return t=o,(n=[{key:"render",value:function(e){var t=new u.b;t.components={"helpful-review-button":function(){return i.e(251).then(i.bind(null,"Nib9"))}},t.template='<helpful-review-button :review="review" :parent="parent"/>',t.initialData={review:this.review,parent:e},new u.a(t).prepend(e)}}])&&p(t.prototype,n),r&&p(t,r),o}(i("SBaP").a),b=Class({review:null,modal:null,variant:null,expanded:!1,eventNamespace:".reviewGalleryKeyup",_editReviewCallback:null,__construct:function(e,t,i,n){this.review=e,this._editReviewCallback=i;for(var r=[],a=1;a<=5;a++){var o=a>e.rating?"-outline":"";r.push(tag("span",{className:"pf-i pf-i-18 pf-i-star"+o+" pf-mr-6 pf-text-brown",attr:{"aria-hidden":!0}}))}e.variantId&&this._setReviewVariant();var l=String(e.review).trim().replace(/(?:\r\n|\r|\n)/g,"<br />");this.node=tag("div","pf-ui-body review-item pf-border-bottom pf-py-24",[tag("div","",[tag("div",{className:"star-rating__stars",attr:{"aria-label":lang("{rating} out of 5 stars").replace("{rating}",e.rating)}},r),e.isApproved&&e.isOwn&&!e.isRejected?tag("span","pf-badge pf-badge-small pf-badge--primary pf-mr-8",[lang("You")]):"",e.isApproved||e.isRejected?"":tag("span","pf-badge pf-badge-small pf-badge--info pf-mr-8",[dlang("reviews","Waiting approval")]),tag("strong","pf-mr-16 data-hj-suppress",[clang("person","By")," ",e.name||tag("i","",[dlang("reviews","Anonymous")])]),tag("span","pf-mr-16",[moment.unix(e.createdAt).fromNow(),e.fromCountry?" "+dlang("reviews","from {country}").replace("{country}",e.fromCountry):""]),e.printTechniques.map((function(e){return tag("span","pf-badge pf-badge-small pf-badge--default pf-mr-8",s.a.LABELS[e])})),this.variant&&this.variant.size?tag("span","pf-badge pf-badge-small pf-badge--default pf-mr-8",this._getVariantSize()):"",tag("span","pf-mr-8",this._getBackgroundColor()),e.canDelete&&t?tag("a",{className:"pf-link float-none"+(e.printTechniques.length?" pf-ml-8":""),onclick:t},[lang("Remove")]):"",!e.isApproved||e.isRejected||e.isRejectedAsFeatured?tag("a",{className:"pf-link pf-ml-8 float-none",onclick:this._editReview},[lang("Edit")]):"",tag("div",{className:"pf-mt-16",prop:{innerHTML:l},style:{"word-break":"break-word"}}),this._getImageNode(),this._reviewActionNode=tag("div","pf-text-md-right pf-mt-24 review-actions clearfix",[e.customerReviews.length?tag("span",{className:"pf-link pf-pointer more-reviews-link",onclick:this._toggleCustomerReviews.bind(this)},[1===e.customerReviews.length?dlang("reviews","1 more review for other variants"):dlang("reviews","{count} more reviews for other variants").replace("{count}",e.customerReviews.length),this.chervron=tag("i","pf-i pf-i-chevron-down pf-ml-8")]):"",this.childReviewContainer=tag("div","pf-text-left hidden child-container")])])]),new y(e).render(this._reviewActionNode),this._buildCustomerReviewsNode(e.customerReviews||[],n,i)},_buildCustomerReviewsNode:function(e,t,i){if(e.length)for(var n in e){var r=b(e[n],this._deleteChildReview.bind(this,e[n],t),i).append(this.childReviewContainer);r.node.className=Number(n)+1===e.length?"pf-ui-body review-item pf-pt-16":r.node.className}},_deleteChildReview:function(e,t){confirm(lang("Are you sure? This cannot be undone!"))&&(l.a.show(this.node,{minHeight:150}),(new a.a).deleteReview(e.reviewId,r.a.proxy((function(){t()}),this)))},_toggleCustomerReviews:function(){this.expanded=!this.expanded,this.expanded?(d.a.removeClassName(this.chervron,"pf-i-chevron-down"),d.a.addClassName(this.chervron,"pf-i-chevron-up"),d.a.removeClassName(this.childReviewContainer,"hidden")):(d.a.addClassName(this.chervron,"pf-i-chevron-down"),d.a.removeClassName(this.chervron,"pf-i-chevron-up"),d.a.addClassName(this.childReviewContainer,"hidden"))},_setReviewVariant:function(){var e=new a.a;this.variant=e.getCachedVariantById(this.review.variantId)},_getVariantColor:function(){return this.variant?this.variant.color:""},_getVariantSize:function(){return this.variant?this.variant.size:""},_getBackgroundColor:function(){var e=[];if(this.variant){var t=this.variant.color&&this.variant.colorCode?this.variant.color+" "+this.variant.colorCode:"",i=[{tag:"span",className:"review-item__swatch-item",style:{backgroundColor:this.variant.colorCode?this.variant.colorCode:this.variant.colorCode2}}],n=tag("a",{className:"swatches__item",title:this.variant.colorCode2?t+"/"+this.variant.colorCode2:t,attr:{role:"complementary","aria-label":this.variant.name?dlang("reviews","Review for color {color}").replace("{color}",this.variant.name):dlang("reviews","Review for specific color")}},i);r()(n).tooltip({container:"body",trigger:Object(o.b)()?"manual":"hover"}),e.push(n)}return e},_getImageNode:function(){if(!this.review.images.length)return"";for(var e=tag("div","review-item__image-block pf-mt-8"),t=0,i=this.review.images.length;t<i;t++){var n=this.review.images[t];tag("a",{href:n.urlLarge,className:"review-item__image pf-p-0 pf-mx-2 pf-mt-4 pf-mb-0",onclick:this._showImage.bind(this,t),style:{backgroundImage:"url("+encodeURI(n.urlThumb)+")"},attr:{"aria-label":dnlang("reviews","Photo by {username}","Photo by {username}, {current} out of {total}",i).replace("{username}",this.review.name).replace("{current}",t+1).replace("{total}",i)}}).append(e)}return e},_showImage:function(e,t){t&&t.preventDefault();var i=this.review.images[e];this._modalGallery=tag("div",{className:"review-gallery"},[e>0?this._getNavButton(!0,this._showImage.bind(this,e-1)):"",e+1<this.review.images.length?this._getNavButton(!1,this._showImage.bind(this,e+1)):"",this._modalImage=tag("img",{className:"review-gallery__img img-responsive center-block",src:i.urlLarge,prop:{onload:function(){l.a.hide(this._modalGallery)}.bind(this)}})]);var n=this._getModal();n.setTitle(lang("Photo by {username}").replace("{username}",this.review.name)),n.setContent(this._modalGallery),n.show(),l.a.show(this._modalGallery)},_getModal:function(){if(this.modal)return this.modal;var e=new c.a.Par;return e.modalDialogClass="modal-lg",e.onShown=function(){},e.onClose=function(){r()(document).unbind(this.eventNamespace)}.bind(this),this.modal=new c.a(e),this.modal},_getNavButton:function(e,t){var i=tag("a",{className:"review-gallery__nav review-gallery__nav--"+(e?"left":"right")+" icon-arrow-down",onclick:t,attr:{target:"_blank"}}),n=this.eventNamespace,a=this._getModal();return r()(document).bind("keyup"+n,(function(t){return e&&37===t.keyCode||!e&&39===t.keyCode?(r()(document).unbind(n),i.onclick(),!1):27===t.keyCode?(r()(document).unbind(n),a.hide(),!1):void 0})),i},_editReview:function(){this._editReviewCallback(this.review)}},d.a.Base);(globalThis||{}).PFProductReviewListRow=b},D5LZ:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return c}));var s=function(){function e(){n(this,e),o(this,"id",0),o(this,"name",""),o(this,"translatedName",""),o(this,"icon",""),o(this,"preferredRegions",[]),o(this,"requirements",[]),o(this,"isSingleCountry",!1),o(this,"isNorthAmerica",!1),o(this,"isEurope",!1),o(this,"isWorldwide",!1)}return a(e,[{key:"getName",value:function(){return this.translatedName||this.name}},{key:"getIcon",value:function(){return"/static/images/layout/flags/".concat(this.icon,".svg")}}],[{key:"fromArray",value:function(e){return(e=e||{}).requirements&&(e.requirements=e.requirements.map((function(e){return l.fromArray(e)}))),Object.assign(new this,e)}}]),e}(),l=function(){function e(){n(this,e),o(this,"id",0),o(this,"type",1),o(this,"sellingRegionId",0),o(this,"branchIds",[]),o(this,"isDefault",!1),o(this,"deliveryTime",null)}return a(e,null,[{key:"fromArray",value:function(e){return Object.assign(new this,e||{})}}]),e}(),c=function(){function e(){n(this,e),o(this,"id",0),o(this,"environmentId",-1),o(this,"requirementId",0),o(this,"sellingRegionId",0),o(this,"storeId",0),o(this,"originSellingRegion",null),o(this,"requirement",null),o(this,"isSetupCompleted",!0)}return a(e,[{key:"isWorldwide",value:function(){return this.originSellingRegion.isWorldwide}},{key:"isSingleCountry",value:function(){return this.originSellingRegion.isSingleCountry}},{key:"isNorthAmerica",value:function(){return this.originSellingRegion.isNorthAmerica}},{key:"isEurope",value:function(){return this.originSellingRegion.isEurope}},{key:"getName",value:function(){return this.originSellingRegion.getName()}},{key:"getIcon",value:function(){return this.originSellingRegion.getIcon()}},{key:"getDeliveryTime",value:function(){var e;return(null===(e=this.requirement)||void 0===e?void 0:e.deliveryTime)||null}},{key:"getFulfilmentLocationIds",value:function(){var e;return(null===(e=this.requirement)||void 0===e?void 0:e.branchIds)||[]}}],[{key:"fromArray",value:function(e){return(e=e||{}).originSellingRegion&&(e.originSellingRegion=s.fromArray(e.originSellingRegion)),e.requirement&&(e.requirement=l.fromArray(e.requirement)),Object.assign(new this,e||{})}}]),e}()},DceF:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("NXHT"),r=i("6JZw"),a=i("nF4n"),o=function(){this.activeMarketplaces=[],this.inactiveMarketplaces=[]};o.prototype=new r.a,o.prototype.toArrayKeys=["syncVariantId","variantId","isIgnored","orderLineItem","customProductId","designId","customProductVariantId"],o.prototype.syncProductId=null,o.prototype.syncVariantId=null,o.prototype.storeId=null,o.prototype.syncVariantRetailPriceData=null,o.prototype.variantId=null,o.prototype.customProductId=null,o.prototype.customProductVariantId=null,o.prototype.name="",o.prototype.retailPrice=null,o.prototype.urlImage=null,o.prototype.isIgnored=null,o.prototype.externalId="",o.prototype.syncedAt=null,o.prototype.orderLineItem=null,o.prototype.isSynced=function(){return this.variantId>0},o.prototype.isClientStockSyncing=null,o.prototype.isDisabledInClientStock=null,o.prototype.customProduct=null,o.prototype.customProductVariant=null,o.prototype.designId=null,o.prototype.quantity=null,o.prototype.activeMarketplaces=null,o.prototype.inactiveMarketplaces=null,o.fromArray=function(e){var t=new o,i=new n.PFItemsOrderLineItem;return e.orderLineItem&&(i=n.PFItemsOrderLineItem.fromArray(e.orderLineItem),delete e.orderLineItem),a.a.O2O(t,e),t.orderLineItem=i,t},window&&((globalThis||{}).PFItemsSyncVariantItem=o)},EqHI:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({_par:null,__construct:function(e){this._par=e,this.node=tag("div","label-template-picker"),this._render()},_render:function(){var e=dlang("dashboard","Must include {split}mandatory label info").split("{split}");this.nodeBody=tag("div",null,[tag("h3",null,[dlang("dashboard","Choose inside label type")]),tag("div","switcher-tabs",[tag("div","switcher-block",[tag("div",{className:"panel panel-default",onclick:this._par.nativeTemplateSelected.bind(this)},[tag("div","panel-heading text-center",[tag("div",{className:"panel-title",text:dlang("dashboard","Label template"),style:{fontWeight:"bold"}})]),tag("div","panel-body",[tag("ul","list-unstyled",[tag("li",null,[dlang("dashboard","All the mandatory info included")]),tag("li",null,[dlang("dashboard","No need to create your own label design")]),tag("li",null,[dlang("dashboard","Space for a custom logo")])]),tag("a",{className:"pf-btn pf-btn-primary pf-btn-block",text:dlang("dashboard","Use label template"),onclick:this._par.nativeTemplateSelected.bind(this)})])])]),tag("div","switcher-block",[tag("div",{className:"panel panel-default",onclick:this._par.customTemplateSelected.bind(this)},[tag("div","panel-heading text-center",[tag("div","panel-title",[dlang("dashboard","Custom label template")])]),tag("div","panel-body",[tag("ul","list-unstyled",[tag("li",null,[dlang("dashboard","No pre-set fields")]),tag("li",null,[dlang("dashboard","Completely customizable")]),tag("li",null,[tag("span",null,[e[0]]),tag("a",{text:e[1],prop:{target:"_blank"},href:"/files/pdf/inside_label_guide.pdf"})])]),tag("a",{className:"pf-btn pf-btn-secondary pf-btn-block",text:dlang("dashboard","Create your own"),onclick:this._par.customTemplateSelected.bind(this)})])])])])]).append(this.node)}},n.a.Base);r.Par=Class({nativeTemplateSelected:null,customTemplateSelected:null}),r.LABEL_CUSTOM="custom",r.LABEL_NATIVE="native",r.NATIVE_TEMPLATE_OFFSET=2.83,window&&((globalThis||{}).PFComponentsInsideLabelTemplate=r)},F5uq:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("rwWB");function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l="collections_category_history",c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,o;return t=e,o=[{key:"track",value:function(e){if(116===e.id||116===e.parentId){var t=n.a.get(l);(t=t?JSON.parse(t):[]).push(e.id),t=r(new Set(t)),n.a.set(l,JSON.stringify(t),1)}}},{key:"getCategories",value:function(){var e=n.a.get(l);return e?JSON.parse(e):[]}},{key:"orderDataLayer",value:function(e){var t,i;if(null!==(t=e.products)&&void 0!==t&&t.length&&null!==(i=e.categories)&&void 0!==i&&i.length){var n=e.categories,r=e.currency,a=e.order_id,o=e.order_quantity,s=e.products,l=e.value,c=e.line_items;window.dataLayer=window.dataLayer||[],window.dataLayer.push({eventCategory:"ProductCategoryPerformance",eventAction:"Order: "+s.join(", "),eventLabel:n.join(", "),currency:r,order_id:a,order_quantity:o,products:s,value:l,line_items:c})}}},{key:"pushDataLayer",value:function(e){if(this.getCategories()){var t=_.intersection(e.catalogCategoryIds,this.getCategories());if(t.length){var i,n=[],r=function(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=a(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw o}}}}(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;n.push(e.catalogCategoryNames[o])}}catch(e){r.e(e)}finally{r.f()}window.dataLayer=window.dataLayer||[],window.dataLayer.push({eventCategory:"ProductCategoryPerformance",eventAction:"Push: "+(e.customTitle||e.displayName),eventLabel:n.join(", ")})}}}}],(i=null)&&s(t.prototype,i),o&&s(t,o),e}()},FU2h:function(e,t,i){"use strict";i.d(t,"a",(function(){return D}));var n=i("A8Hf"),r=i("o0qH"),a=i("E17x"),o=i("5B9T"),s=i("pWIn"),l=i("cVO5"),c=i("7XA3"),d=i("ka4h"),u=i("wllI"),h=i("v88+"),p=i("PSt6"),g=i("JQxb"),f=i("dzpP"),_=i("bWRx"),m=i("UYP3"),v=i("X4PR"),y=i("aLTI"),b=i("r4HB"),P=i("Mg/F"),C=i("9hBW"),T=i("7QI8"),I=i("+erO"),w=i("2+Fj"),S=i("X5Ic"),E=i("sjGI"),k=i("nF4n"),O=i("o5cA"),A=i("0Dko"),L=i("boP+"),N=i("Jkv8"),D=Class({_par:null,_state:{defaultFont:function(){return E.a.isJp()?Object(N.getPFCanvasFonts)().FONTS["noto-sans-jp"]:Object(N.getPFCanvasFonts)().FONTS["open-sans-b"]},isExistingLayer:!1,textLayer:null,isFocused:!1,nodeTextStyle:null,changeTimeout:null,_forceDisableCustomizer:!1,canAddNewLayers:!0,isCharLimitEnabled:!1},_canCustomizeCheckbox:null,_validator:null,_techniqueMemory:null,nodeError:null,__construct:function(e){var t;this._par=e,this._subscribeToTemplateEvents(),this._state.textLayer=this._getNewLayer(),this._validator=new p.a,this._validator.isCharLimitEnabled=this._state.isCharLimitEnabled,this._validator.setActiveLayer(this._state.textLayer),this._techniqueMemory=new r.a(null===(t=Object(L.a)())||void 0===t?void 0:t.productId),this.node=tag("div","text-picker"),this._colorDropdownPar=new P.a,this._colorDropdownPar.color=this._state.textLayer.getDefaultColor(),this._colorDropdownPar.colors=this._getColors(),this._colorDropdownPar.hideRGB=this._isPlacementEmbroidery(),this._colorDropdownPar.onChange=this._onColorChanged,this._fontDropdownPar=new v.a,this._fontDropdownPar.font=this._state.textLayer?this._state.textLayer.font:this._state.defaultFont(),this._fontDropdownPar.fonts=y.a.defaultFonts(this._par.technique),this._fontDropdownPar.onChange=this._onFontChanged,this._loadRequiredFont(this._state.textLayer.font,this._render)},_render:function(){k.a.clearNode(this.node),this._renderTextPicker(),this._state.textLayer.isCustomizable&&this._setCustomizableSliderValue(this._state.textLayer,!1),this.nodeError=tag("div","alert alert-danger text-center hidden pf-p-12 pf-mt-16",lang("Please add text!")).append(this.node)},_renderTextPicker:function(){this._state._forceDisableCustomizer=this._getSelectedPlacementId()===T.a.TYPE_LABEL_INSIDE;var e=this._state.textLayer;if(this._colorDropdownPar.color=e.color,this._colorDropdownPar.colors=this._getColors(),this._colorDropdownPar.nodeDropdownFooter&&k.a.clearNode(this._colorDropdownPar.nodeDropdownFooter),this._par.getSelectedEmbroideryColors&&(this._par.getSelectedEmbroideryColors().length>A.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS?(this._colorDropdownPar.nodeDropdownFooter=tag("div","color-mapper__footer--warning",[dlang("generator","You can choose up to {number} colors").replace("{number}",this._par.threadColorSelectionLimit)]),this._colorDropdownPar.highlightColorsAsError=!0):this._colorDropdownPar.highlightColorsAsError=!1,this._colorDropdownPar.highlightedColors=this._par.getSelectedEmbroideryColors()),this._colorDropdown=new C.a(this._colorDropdownPar),this._fontDropdownPar.font=e.font,this._fontDropdown=new y.a(this._fontDropdownPar),this._engravingStylePicker=new b.a(e.engravingStyle,this._onEngravingStyleChanged),this._isPlacementEmbroidery()){var t=new u.a;t.embroideryTypesAvailable=[T.a.DIGITIZATION_FLAT,T.a.DIGITIZATION_3D],t.embroideryType=e.embroideryType,t.labelTooltipText=lang("We digitize each file to a format that supports embroidery and charge a one-time fee of $6.50 for each embroidery type. You can reuse a digitized file for the same embroidery type with other orders at no additional cost."),t.embroideryTypePrices=this._par.embroideryTypePrices,this._embroideryTypePicker=new h.a(t)}else this._embroideryTypePicker=null;var i=!this._state.canAddNewLayers&&!this._state.isExistingLayer,r=this._state.textLayer.isCustomizable&&this._allowCustomizableLayers();this._textarea=tag("textarea",{attr:{placeholder:dlang("dashboard","Start typing here")},value:e.text,prop:{onkeyup:this._onTextChanged,onkeydown:this._onTextKeyDown,disabled:i},className:i?"disabled":"",style:{width:"100%",height:"90px",maxWidth:"100%",minWidth:"100%",minHeight:"90px"}}),this._nodeTemplateInfo=new g.a;var a=Object(L.a)();a&&e.text.length&&!this._par.isAdvancedTemplate()&&this._nodeTemplateInfo.renderGuidelineInfo(),tag("div","",[this._par.onBackCallback?tag("a",{className:"pf-link-block pf-mb-8",onclick:this._par.onBackCallback},[tag("i","pf-i pf-i-chevron-left pf-i-24 pf-text-muted"),tag("span","pf-pl-4",lang("Back to design tools"))]):"",this._nodeTemplateInfo.node,this._embroideryTypePicker?tag("hr"):"",this._embroideryTypePicker?this._embroideryTypePicker:"",this._embroideryTypePicker?tag("hr"):"",tag("div","pf-my-8",[tag("div","pf-d-inline",[r?new c.a:""]),this._nodeTextareaTitle=tag("h6","pf-d-inline")]),this._textarea]).append(this.node),this._updateTextareaTitle(),Object(n.a)(this._textarea),this._state.isFocused&&(this._textarea.focus(),this._textarea.setSelectionRange(this._textarea.value.length,this._textarea.value.length)),this._state.nodeTextStyle=tag("div",this._state.isExistingLayer?"":"pf-d-none").append(this.node),this._nodeTextAlign=tag("div","pf-mb-24 "+(this._includesNewLines(this._state.textLayer.text)?"":"hidden"),[tag("h6",null,[dlang("generator","Align text")]),this._nodeTextAlignButtons=tag("div",null,[tag("button",{className:"text-picker__align-btn text-picker__glyphicon text-picker__glyphicon--squared glyphicon glyphicon-align-left btn btn-empty pf-mr-16 pf-px-8",onclick:this._onTextAligned.bind(this,s.a.ALIGN_LEFT),data:{alignment:s.a.ALIGN_LEFT}}),tag("button",{className:"text-picker__align-btn text-picker__glyphicon text-picker__glyphicon--squared glyphicon glyphicon-align-center btn btn-empty pf-mr-16 pf-px-8",onclick:this._onTextAligned.bind(this,s.a.ALIGN_CENTER),data:{alignment:s.a.ALIGN_CENTER}}),tag("button",{className:"text-picker__align-btn text-picker__glyphicon text-picker__glyphicon--squared glyphicon glyphicon-align-right btn btn-empty pf-px-8",onclick:this._onTextAligned.bind(this,s.a.ALIGN_RIGHT),data:{alignment:s.a.ALIGN_RIGHT}})])]).append(this._state.nodeTextStyle),this._updateTextAlignButtonStates(),tag("div","pf-mb-24",[tag("h6","",dlang("generator","Choose typeface")),this._fontDropdown]).append(this._state.nodeTextStyle),null!=a&&a.isJewelry()?tag("div","pf-mb-16",[tag("h6","",dlang("generator","Choose engraving style")),this._engravingStylePicker]).append(this._state.nodeTextStyle):tag("div","pf-mb-16",[tag("h6","",this._isPlacementEmbroidery()?dlang("generator","Choose thread color"):dlang("generator","Choose text color")),this._colorDropdown]).append(this._state.nodeTextStyle),tag("div","row",[this._getTextSizeInput(),this._getLetterSpacingInput()]).append(this._state.nodeTextStyle),tag("div","row pf-mb-16",[this._nodeLineHeight=this._getLineHeightInput(),this._rotationInput=this._getRotationInput()]).append(this._state.nodeTextStyle),this.renderCustomizableCheckbox()},_getTextSizeInput:function(){var e,t=new f.a;return t.title=dlang("dashboard","Text size"),t.value=this._state.textLayer.size,t.defaultValue=.2,t.minValue=.2,t.incrementStep=.1,null!==(e=Object(L.a)())&&void 0!==e&&e.isJewelry()&&(t.defaultValue=.12,t.minValue=.12,t.incrementStep=.01),t.onValueChanged=this._onFontSizeChanged,new _.a(t)},_getLetterSpacingInput:function(){var e=new f.a;e.title=dlang("dashboard","Letter spacing"),e.value=this._state.textLayer.letterSpacing,e.defaultValue=-1,e.minValue=-1;var t=Object(L.a)();return t&&(this._techniqueMemory.isEmbroidery(t.type)||t.isJewelry())&&(e.defaultValue=0,e.minValue=0,e.maxValue=1),e.incrementStep=.1,e.onValueChanged=this._onLetterSpacingChanged,new _.a(e)},_getLineHeightInput:function(){var e=new f.a;e.title=dlang("dashboard","Line height"),e.value=this._state.textLayer.lineHeight,e.isVisible=this._includesNewLines(this._state.textLayer.text),e.defaultValue=.2,e.minValue=.2;var t=Object(L.a)();return t&&(this._techniqueMemory.isEmbroidery(t.type)||t.isJewelry())&&(e.defaultValue=1,e.minValue=1),e.incrementStep=.1,e.onValueChanged=this._onLineHeightChanged,new _.a(e)},_getRotationInput:function(){var e,t=new f.a;return t.title=dlang("dashboard","Rotate"),t.value=this._state.textLayer.position.rotation,t.minValue=-359,t.maxValue=359,null!==(e=Object(L.a)())&&void 0!==e&&e.isJewelry()&&(t.isVisible=!1),t.onValueChanged=this._onRotationChanged,new _.a(t)},_updateTextareaTitle:function(){this._state.textLayer!==this._validator._activeLayer&&this._validator.setActiveLayer(this._state.textLayer);var e=this._validator.getCharLimit()-this._textarea.value.length,t="text-picker__title-limit float-right";e||(t+=" "+t+"--reached"),k.a.clearNode(this._nodeTextareaTitle);var i="";this._isPlacementEmbroidery()&&(i=tag("span",{className:"glyphicon glyphicon-info-sign",style:{verticalAlign:0,marginLeft:"4px"},attr:{title:dlang("dashboard",dlang("generator","Only for flat embroidery"))}})),tag("span",null,[dlang("generator","Write your text"),i,this._state.isCharLimitEnabled?tag("span",t,nlang("(%d character left)","(%d characters left)",e)):""]).append(this._nodeTextareaTitle),i&&$(i).tooltip({container:"body"})},_updateRotationInput:function(e,t){this._unsubscribeTemplateEventsIfNeeded()||t instanceof _.a||this._rotationInput.setValue(e.position.rotation)},_onLayerRemovedExternally:function(e,t){this._unsubscribeTemplateEventsIfNeeded()||t.uniqueId===this._state.textLayer.uniqueId&&this.resetText()},resetText:function(){this._state.textLayer=this._getNewLayer(),this._state.isExistingLayer=!1,this._state.isFocused=!0,this._render()},editTextLayer:function(e){this._unsubscribeTemplateEventsIfNeeded()||e&&e.isTextLayer()&&(this._state.textLayer=e.getOriginalClone(),this._state.isExistingLayer=!0,this._state.isFocused=!0,this._render(),this._setCustomizableSliderValue(e,!1))},_onLayerPositionsChangedExternally:function(e,t,i){if(!this._unsubscribeTemplateEventsIfNeeded()&&(this._setCustomizableSliderValue(t,!0),!i instanceof _.a&&this._rotationInput.setValue(t.position.rotation),i!==this))for(var n in e){var r=e[n],a=r.getLayerIndex(this._state.textLayer);if(a>-1){var o=r.layers[a].getOriginalClone(),s=!o.isConfigurationSame(this._state.textLayer);return this._state.textLayer=o,i instanceof m.a&&(this._state.isFocused=!1),void(s&&this._render())}}},_getNewLayer:function(e){var t=new s.a;t.font=this._state.defaultFont();var i=this._getSelectedPlacementId();return t.size=O.a.getDefaultFontSize(i),t.color=t.getDefaultColor(),t.alignment=s.a.ALIGN_CENTER,t.originalPosition=new I.a,t.position=t.originalPosition.getClone(),this._isPlacementEmbroidery()&&(t.embroideryType=h.a.getDefaultEmbroideryType()),e&&this._state.textLayer&&(t.font=this._state.textLayer.font,t.color=this._state.textLayer.color,t.alignment=this._state.textLayer.alignment,t.size=this._state.textLayer.size),t},_onColorChanged:function(e){this._state.textLayer.color=e,this._onConfigurationChanged(!0),this._par.templates.getChangeListener().notifyLayerColorsChanged(this._getSelectedPlacementId(),this._state.textLayer,!1)},_onEngravingStyleChanged:function(e){this._state.textLayer.engravingStyle=e,this._onConfigurationChanged(!0)},_createNewTextInput:function(){this._state.textLayer=this._getNewLayer(!0),this._state.isExistingLayer=!1,this._render()},_deleteLayer:function(){this._par.onLayerRemoved&&this._par.onLayerRemoved(this._state.textLayer),this._createNewTextInput()},_onTextAligned:function(e){this._state.textLayer.alignment=e,this._onConfigurationChanged(!0),this._updateTextAlignButtonStates()},_onTextKeyDown:function(e){e.stopPropagation()},_onTextChanged:function(e){e.stopPropagation();var t=e.target.value.trim();if(this._state.isFocused=!0,t!==this._state.textLayer.text){if(""===t)return this._nodeTemplateInfo.clearGuidelineInfo(),this._deleteLayer(),Object(a.b)()&&clearTimeout(this._state.changeTimeout),void(this._par.onBackCallback&&this._par.onBackCallback());if(this._validator.setText(t),!this._validator.isTextValid())return this._onTextChangedAfter(this._validator.getValidText()),void this._render();this._updateTextareaTitle(),Object(L.c)()&&!this._par.isAdvancedTemplate()&&this._nodeTemplateInfo.renderGuidelineInfo(),Object(a.b)()?(clearTimeout(this._state.changeTimeout),this._state.changeTimeout=setTimeout(function(){this._loadRequiredFont(this._state.textLayer.font,this._onTextChangedAfter.bind(this,t))}.bind(this),200)):this._loadRequiredFont(this._state.textLayer.font,this._onTextChangedAfter.bind(this,t)),this.hideError()}},_onTextChangedAfter:function(e){this._includesNewLines(e)?(k.a.removeClassName(this._nodeTextAlign,"hidden"),this._nodeLineHeight.show()):(k.a.addClassName(this._nodeTextAlign,"hidden"),this._nodeLineHeight.hide()),this._state.textLayer.text=e,this._state.textLayer.hasMultipleLines=this._includesNewLines(e),this._state.textLayer.resizeToPercent=null,this._onConfigurationChanged(!0)},_onConfigurationChanged:function(e){e||this._render(),k.a.removeClassName(this._state.nodeTextStyle,"hidden"),this._validator.setActiveLayer(this._state.textLayer),this._state.isExistingLayer?this._par.onLayerConfigurationChanged(this._state.textLayer):(this._state.isExistingLayer=!0,this._par.onLayerCreated&&this._par.onLayerCreated(this._state.textLayer))},_onFontSizeChanged:function(e){this._state.textLayer.size=e,this._onConfigurationChanged(!0)},_onFontChanged:function(e){var t=this;this._loadRequiredFont(e,(function(){t._state.textLayer.font=e,t._updateTextareaTitle(),t._onConfigurationChanged(!0)}))},enabled:function(e){return this._state.canAddNewLayers=e,this},render:function(){return this._render(),this},renderCustomizableCheckbox:function(){if(!this._allowCustomizableLayers())return!1;this._canCustomizeCheckbox&&k.a.removeNode(this._canCustomizeCheckbox.node);var e=new l.a;e.isChecked=this._state.textLayer.isCustomizable,e.onChange=this._changeIsCustomizable,e.showSlider=!0,e.onSliderChange=this._onTextLayerWidthChange,e.layerType=s.a.TYPE,this._canCustomizeCheckbox=new d.a(e),this._state.nodeTextStyle&&this._canCustomizeCheckbox.append(this._state.nodeTextStyle),this._canCustomizeCheckbox.setSliderValue(this._state.textLayer.resizeToPercent)},_includesNewLines:function(e){return e.trim().split("\n").length>1},_loadRequiredFont:function(e,t){return Object(N.loadJSFontFrontend)(e.fontKey,t)},_onLineHeightChanged:function(e){this._state.textLayer.lineHeight=e,this._onConfigurationChanged(!0)},_onRotationChanged:function(e){this._state.textLayer.position.rotation=e,this._onConfigurationChanged(!0)},_onLetterSpacingChanged:function(e){this._state.textLayer.letterSpacing=e,this._onConfigurationChanged(!0)},_changeIsCustomizable:function(){this._state.textLayer.isCustomizable=!this._state.textLayer.isCustomizable,this._onConfigurationChanged()},_onTextLayerWidthChange:function(e){this._state.textLayer.setWidthInPercent(e),this._onConfigurationChanged(!0)},_setCustomizableSliderValue:function(e,t){if(this._allowCustomizableLayers()&&this._canCustomizeCheckbox){var i=100*e.position.width/e.originalPosition.areaWidth,n=Math.round(i);this._canCustomizeCheckbox.setSliderValue(n),t&&(this._state.textLayer.resizeToPercent=n)}},_allowCustomizableLayers:function(){return!this._state._forceDisableCustomizer&&this._par.allowCustomizableLayers()},_getColors:function(){var e=!!this._par.isAllOver&&this._par.isAllOver(),t=D.getAllAvailableColors(this._isPlacementEmbroidery(),this._getSelectedPlacementId(),e,!0);if(!this._isPlacementEmbroidery()&&Object(L.c)()){var i=Object(L.a)();i.isWhiteDtgTote()&&delete t.White,i.isBlackMug()&&delete t.Black}return t},_subscribeToTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().addOnTemplatePositionsChangedListener(this._onLayerPositionsChangedExternally).addOnLayerRotatedListener(this._updateRotationInput).addOnLayerRemovedListener(this._onLayerRemovedExternally)},unsubscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().unsubscribe(this._onLayerPositionsChangedExternally).unsubscribe(this._updateRotationInput).unsubscribe(this._onLayerRemovedExternally)},_unsubscribeTemplateEventsIfNeeded:function(){return!Object(a.a)(this.node)&&(this.unsubscribeTemplateEvents(),!0)},_updateTextAlignButtonStates:function(){for(var e=this._nodeTextAlignButtons.getElementsByClassName("text-picker__align-btn"),t=0;t<e.length;t++)k.a.addClassName(e[t],"text-picker__glyphicon--muted"),e[t].dataset.alignment===this._state.textLayer.alignment&&k.a.removeClassName(e[t],"text-picker__glyphicon--muted")},hideError:function hideError(){k.a.addClassName(this.nodeError,"pf-d-none")},showError:function showError(){k.a.removeClassName(this.nodeError,"pf-d-none")},_isPlacementEmbroidery:function(){var e=this._par.placementSelector&&this._par.placementSelector.getSelectedPlacement();return e&&e.technique===S.a.TECHNIQUE_EMBROIDERY},_getSelectedPlacementId:function(){return this._par.placementSelector?this._par.placementSelector.getSelectedPlacementId():null}},k.a.Base);D.hasFontLoaded=function(e){return Object(N.getPFCanvasFonts)().LOADED_JS_FONTS.hasOwnProperty(e)},D.getAllAvailableColors=function(e,t,i,n){if(!e){var r=i?C.a.allOverColors():C.a.defaultColors();if(n)return r;var a={};for(var s in r)a[s]=r[s].value;return a}if(!t)return{};var l={},c=null,d=Object(L.a)();if(T.a.PLACEMENT_COLOR_MAP[t]===w.a.NAME_EMBROIDERY_TYPE){var u=d.options[w.a.NAME_TEXT_THREAD_COLORS]||{values:{}},h=d.options[w.a.NAME_THREAD_COLORS]||{values:{}},p=d.options[w.a.NAME_THREAD_COLORS_3D]||{values:{}};c={values:Object.assign({},u.values,h.values,p.values)}}else c=d.options[T.a.PLACEMENT_COLOR_MAP[t]];if(c&&c.values&&(l=o.a.swap(c.values)),n){var g={};for(var f in l)g[f]={name:f,value:l[f]};return g}return l},window&&((globalThis||{}).PFProductPushTextPicker=D)},FpxJ:function(e,t,i){"use strict";i.d(t,"h",(function(){return a})),i.d(t,"j",(function(){return o})),i.d(t,"k",(function(){return s})),i.d(t,"f",(function(){return l})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return d})),i.d(t,"a",(function(){return u})),i.d(t,"g",(function(){return h})),i.d(t,"i",(function(){return p})),i.d(t,"e",(function(){return g})),i.d(t,"d",(function(){return f}));var n=i("Zwo4"),r="".concat(n.a,"/cliparts"),a="m_loadClipartItemsIntoRepo",o="m_setHasLoadedAllCliparts",s="m_updateRecentCliparts",l="g_hasLoadedAllCliparts",c="g_getClipartGroup",d="g_getClipartItems",u="a_allActiveClipartGroups",h="a_loadClipartGroupsIntoRepo",p="a_loadCliparts",g="a_getRecentCliparts",f=function(e){return"".concat(r,"/").concat(e)}},FxE2:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({variantId:null,color:null,size:null,templateIds:{},mockupIds:{},extraIds:{},advancedTemplateSize:null,discontinued:!1});r.fromArray=function(e){var t=new r;return n.a.O2O(t,e),t.mockupIds=e.mockupIds||{},t.templateIds=e.templateIds||{},t.extraIds=e.extraIds||{},t.advancedTemplateSize=e.advancedTemplateSize||null,t},window&&((globalThis||{}).PFItemsGeneratorMappingItem=r)},GCEm:function(e,t,i){"use strict";i.d(t,"e",(function(){return h})),i.d(t,"d",(function(){return p})),i.d(t,"b",(function(){return g})),i.d(t,"a",(function(){return f})),i.d(t,"c",(function(){return _})),i.d(t,"f",(function(){return m})),i.d(t,"m",(function(){return v})),i.d(t,"n",(function(){return y})),i.d(t,"k",(function(){return P})),i.d(t,"j",(function(){return T})),i.d(t,"g",(function(){return w})),i.d(t,"h",(function(){return E})),i.d(t,"l",(function(){return O})),i.d(t,"i",(function(){return A}));var n=i("Gv5l"),r=i("ehgC"),a=i("9Nv7");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function d(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){c(a,n,r,o,s,"next",e)}function s(e){c(a,n,r,o,s,"throw",e)}o(void 0)}))}}var u="all",h={},p={},g="Personal orders",f=-1,_=1;function m(e){p[e.storeId]=e}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(u,e)}function y(e){return b.apply(this,arguments)}function b(){return(b=d(regeneratorRuntime.mark((function e(t){var i,n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.length>1&&void 0!==r[1]?r[1]:{},!t||!h[t]){e.next=3;break}return e.abrupt("return",h[t].slice());case 3:return e.next=5,Object(a.a)("store/get",s({type:t},i));case 5:return n=e.sent,e.abrupt("return",N(t,n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return C.apply(this,arguments)}function C(){return(C=d(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h[t.getCacheKey()]){e.next=2;break}return e.abrupt("return",h[t.getCacheKey()].slice());case 2:return e.next=4,Object(a.a)("store/get",{type:t.type,productId:t.withAvailableProductId,variantId:t.withAvailableVariantId});case 4:return i=e.sent,e.abrupt("return",N(t.getCacheKey(),i));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return I.apply(this,arguments)}function I(){return(I=d(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)("store/get",{sourceStoreId:t,type:n.a.CACHE_KEY_SYNCED_FOR_INCOMPLETE_ITEM_SYNC});case 2:return i=e.sent,e.abrupt("return",N(null,i));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t,i){return S.apply(this,arguments)}function S(){return(S=d(regeneratorRuntime.mark((function e(t,i,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)("store/create",{storeName:t,isAutoCreated:i?1:0,type:n});case 2:return r=e.sent,e.abrupt("return",L(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return k.apply(this,arguments)}function k(){return(k=d(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)("store/create",{storeName:t,type:r.a.TYPE_ANONYMOUS});case 2:return i=e.sent,e.abrupt("return",L(i));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return Object(a.a)("store-settings/should-show-popovers",{storeId:e,popoverIds:t})}function A(e){return Object(a.a)("store-settings/dismiss-intro-popover",{popoverId:e})}function L(e){return Object.keys(h).forEach((function(e){return delete h[e]})),e.success?r.a.fromArray(e.store):new r.a}function N(e,t){return e?(h[e]=[],t.stores.forEach((function(t){var i=r.a.fromArray(t);h[e].push(i),p[i.storeId]=i})),h[e].slice()):t.stores.map((function(e){return r.a.fromArray(e)}))}},GGNF:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("A+LN");function r(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}var a={isFavoriteProductsEnabled:function(){return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n.q)("favorite_products").then((function(e){return e&&PF.Customer.isLogged()})));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(n,a){var o=e.apply(t,i);function s(e){r(o,n,a,s,l,"next",e)}function l(e){r(o,n,a,s,l,"throw",e)}s(void 0)}))})();var e}}},Gv5l:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("ycMH"),r=i("6JZw"),a=i("nF4n"),o=function(){};(o.prototype=new r.a).id=null,o.prototype.title=null,o.fromArray=function(e){var t=new o;return a.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsIntegrationStoreTaxRule=o);var s=function(){};(s.prototype=new r.a).categoryId=null,s.prototype.title=null,s.fromArray=function(e){var t=new s;return a.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsIntegrationCategoryItem=s);var l=i("ehgC"),c=i("GCEm"),d=i("Sucz"),u=function(){};u.ANONYMOUS_STORE_ID=-1,u.callbacksQueue=[],u.isLoading=!1,u.processQueue=function(e){return u.isLoading=!1,u.callbacksQueue.forEach(function(t){t(e)}.bind(this))},u.prototype.cacheStore=function(e){c.d[e.storeId]=e},u.prototype.getCachedStore=function(e){return c.d[e]?c.d[e]:(console.error("Store not cached: "+e),new l.a)},u.prototype.getFirstCachedStoreId=function(){return Object.keys(c.d).slice().shift()},u.prototype.get=function(e){Object(c.m)().then(e)},u.prototype.getFirstId=function(e){var t=this.getFirstCachedStoreId();t?e(t):u.isLoading?this.addToQueue(e):(u.isLoading=!0,this.search(!1,function(t){var i=u.ANONYMOUS_STORE_ID;if(t.length){var n=t.slice().shift();this.cacheStore(n),i=n.id?n.id:n.storeId}e(i),u.processQueue(i)}.bind(this)))},u.prototype.addToQueue=function(e){u.callbacksQueue.push(e)},u.prototype.getStoresWithPrintFiles=function(e){this.search(u.CACHE_KEY_WITH_PRINT_FILES,e)},u.prototype.getForIncompleteItemSync=function(e,t){Object(c.j)(e).then(t)},u.prototype.search=function(e,t){Object(c.n)(e).then(t)},u.prototype.getById=function(e,t){this.get($.proxy((function(i){for(var n in i){var r=i[n];if(r.storeId===e)return void t(r)}t(null)}),this))},u.prototype.createAnonymous=function(e,t){Object(c.h)(e).then(t)},u.prototype.create=function(e,t,i,n){Object(c.g)(e,t,i).then(n)},u.prototype.cacheStoresByKey=function(e,t){for(var i in c.e[e]=[],t){var n=l.a.fromArray(t[i]);c.e[e].push(n),c.d[n.storeId]=n}},u.prototype.hasProductPushPermission=function(e,t){null===u.pushPermissionCacheResponse?Object(d.a)("store/get-product-push-permission",{storeId:e},$.proxy(this.hasProductPushPermissionRe,this,t)):this.hasProductPushPermissionRe(t,u.pushPermissionCacheResponse)},u.prototype.hasProductPushPermissionRe=function(e,t){u.pushPermissionCacheResponse=t,e(t.hasProductPushPermission,t.authorizationUrl)},u.prototype.getProductPushCategories=function(e,t,i){u.pushCategoryCacheResponse[e]?t(u.pushCategoryCacheResponse[e]):Object(d.a)("store/get-product-push-categories",{storeId:e},$.proxy(this.getProductPushCategoriesRe,this,e,t),{error:i})},u.prototype.getTaxRules=function(e,t,i){u.taxRuleCacheResponse[e]?t(u.taxRuleCacheResponse[e]):Object(d.a)("store/get-tax-rules",{storeId:e},this.getTaxRulesRe.bind(this,e,t),{error:i})},u.prototype.getProductPushCategoriesRe=function(e,t,i){var n=[];for(var r in i.categories)n.push(s.fromArray(i.categories[r]));u.pushCategoryCacheResponse[e]=n,t(n)},u.prototype.getTaxRulesRe=function(e,t,i){var n=[];for(var r in i.rules)n.push(o.fromArray(i.rules[r]));u.taxRuleCacheResponse[e]=n,t(n)},u.prototype.getSelectedShippingCost=function(e,t,i){var r=e.storeId;if(u.storeShippingCostCacheResponse[r])t(u.storeShippingCostCacheResponse[r]);else{var a={sizes:e.sizes,colors:e.colors,productId:e.productId,customProductId:e.customProductId};Object(d.a)("store/get-selected-shipping-cost",{storeId:e.storeId,params:{usedVariantData:a}},(function(e){var i=e.cost,r=i?n.a.fromArray(i):null;t(r)}),{error:i})}},u.prototype.getStoreShippingProfiles=function(e,t,i){var n=e.storeId;if(u.storeShippingProfileCacheResponse[n])t(u.storeShippingProfileCacheResponse[n]);else{var r={sizes:e.sizes,colors:e.colors,productId:e.productId,customProductId:e.customProductId};Object(d.a)("store/get-store-shipping-profiles",{storeId:e.storeId,params:{usedVariantData:r}},t,{error:i})}},u.prototype.dismissPopover=function(e,t){Object(d.a)("store-settings/dismiss-intro-popover",{popoverId:t}),e&&a.a.removeNode(e)},u.pushPermissionCacheResponse=null,u.pushCategoryCacheResponse={},u.taxRuleCacheResponse={},u.storeShippingProfileCacheResponse={},u.storeShippingCostCacheResponse={},u.CACHE_KEY_ALL="all",u.CACHE_KEY_WITH_PRINT_FILES="withPrintFiles",u.CACHE_KEY_WITH_ENABLED_PRINTFUL_PUSH="withEnabledPrintfulPush",u.CACHE_KEY_SYNCED_INTEGRATIONS="syncedIntegrations",u.CACHE_KEY_SYNCED_OUT_OF_STOCK="syncedOutOfStock",u.CACHE_KEY_SYNCED_FOR_INCOMPLETE_ITEM_SYNC="forIncompleteItemSync",u.CACHE_KEY_ORDER_FLOW="forOrderFlow",(globalThis||{}).PFRepositoriesStoreRepository=u},GyOi:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6JZw"),r=i("nF4n"),a=Class({id:null,name:"",index:0,extra:{},isActive:!0,image:{},scale:0,toArrayKeys:["id","name","extra","image","scale"]},n.a);a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsGeneratorColorGraphicItem=a)},HSPo:function(e,t,i){"use strict";i.d(t,"f",(function(){return o})),i.d(t,"e",(function(){return s})),i.d(t,"d",(function(){return l})),i.d(t,"c",(function(){return c})),i.d(t,"g",(function(){return d})),i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return h}));var n=i("9Nv7"),r=i("CXOy"),a=i("PwNb");function o(e){var t=e.filter,i=e.storeId,r=void 0===i?null:i,a=e.forPushFlow,o=void 0!==a&&a,s=e.forOrderFlow,l=void 0!==s&&s;return new Promise((function(e,i){t?Object(n.a)("product-templates/get-templates",{filter:Object.assign({},t),storeId:r||null,forPushFlow:!!o,forOrderFlow:!!l}).then((function(t){t?(p(t),e(t)):i(new Error("Malformed getTemplatesResponse data!"))})).catch((function(e){return i(e)})):i(new Error("Missing filter parameters!"))}))}function s(e){var t=e.id,i=e.storeId,o=void 0===i?null:i;return new Promise((function(e,i){t?Object(n.a)("product-templates/get-template",{id:t,storeId:o}).then((function(t){t.item?(t.item=new r.a(t.item),e(t)):i(new a.a("Item wasn't found!"))})).catch((function(e){return i(e)})):i(new Error("Missing template id!"))}))}function l(e){return new Promise((function(t,i){e?Object(n.a)("product-templates/duplicate-template",{id:e}).then((function(e){g(e),e.item?t(e.item):i(new Error("Template duplication failed!"))})).catch((function(e){return i(e)})):i(new Error("Missing template id!"))}))}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(i,r){e&&Array.isArray(e)&&e.length?Object(n.a)("product-templates/delete-templates",{ids:e,filter:t}).then((function(e){e&&e.hasOwnProperty("deletedRows")?(p(e.newResponse),i(e)):r(new Error("Malformed deleteTemplatesResponse data!"))})):r(new Error("Missing deletable template ID array!"))}))}function d(e){return new Promise((function(t,i){if(e.designData){var r=e.designData.toArray({forRpc:!0,withoutSyncData:!0});Object(n.a)("product-templates/save",{designData:r,existingTemplateId:e.existingTemplateId||null,isDraftSave:!!e.forceDraft,isFinalSubmit:!!e.forceActive,saveFlowType:e.saveFlowType||u.DEFAULT}).then((function(e){g(e),e.item?t(e.item):i(new Error("Template save failed!"))})).catch((function(e){return i(e)}))}else i(new Error("Missing design data for template save!"))}))}var u={DEFAULT:"DEFAULT",SYNC_PRODUCT_DRAFT:"SYNC_PRODUCT_DRAFT"};function h(){return Object(n.a)("product-templates/close-intro")}function p(e){e&&(e.items&&(e.items=e.items.map((function(e){return new r.a(e)}))),e.usedFilter&&(e.usedFilter=new r.d(e.usedFilter)))}function g(e){e&&e.item&&(e.item=new r.a(e.item))}},HmCv:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("97Au"),r=i("2ovl"),a=Class({callback:null,__construct:function(e){this.callback=e,this._render()},_render:function(){var e=new n.a.Par;e.modalDialogClass="modal-md",this._modal=new n.a(e),this._modal.setHeaderContent("");var t=tag("div","",[tag("div","warning-text",[tag("h4","",lang("Are you sure?")),tag("p","",lang("None of your changes will be saved. Are you sure you want to continue switching techniques?"))])]);this._modal.setContent(t);var i=tag("div",{style:{textAlign:"left"}},[tag("a",{className:"pf-btn pf-btn-primary pf-mr-16",onclick:this._callback},lang("Yes, continue")),tag("a",{className:"pf-btn pf-btn-secondary",onclick:function(){this._modal.remove()}.bind(this)},lang("No, go back"))]);this._modal.setFooterContent(i),this._modal.show()},_callback:function(){this._modal.remove(),r.a.unsetDesignCachedInSession(),this.callback()}});(globalThis||{}).PFVariantPickerTechniquePickerPopup=a;var o=i("7pSD"),s=i("X5Ic"),l=i("nF4n"),c=i("4Ru2"),d=i("LvDl"),u=i.n(d),h=i("sjGI"),p=i("4CFC"),g=Class({_showWarningPopup:!1,_isPopupBusy:!1,_itemsNode:null,__construct:function(e){this._par=e,this.node=tag("div","row no-gutters"),this._render(),this._scrollToAvailability()},_render:function(){l.a.clearNode(this.node),tag("div","col-12",[tag("div","row pf-my-8",[tag("div",this._par.isPolyPro||this._par.isGenerator?"col-12":"col-6",[tag("h6","pf-h5 pf-m-0",[lang("Choose technique"),this._getTagNew()])]),this._par.isPolyPro?"":tag("div","col-6 "+(this._par.isGenerator?"pf-d-none":"pf-d-inline-block"),[tag("a",{className:"pf-link pf-m-0 float-right",onclick:this._scrollToGuidelines.bind(this),id:"fileGuidelinesButton"},dlang("products","File guidelines"))])]),tag("div","row pf-d-flex technique-picker pf-p-0 text-center "+(this._par.isPolyPro?"pf-mb-16":"pf-mb-24"),[this._itemsNode=tag("div")])]).append(this.node),this.updateTechniqueAvailability(this._par.regions)},_renderItems:function(){l.a.clearNode(this._itemsNode),tag("div",{className:"col-12 pf-d-flex",attr:{role:"list","aria-label":lang("Choose technique")}},this._par.techniques.map(this._renderItem)).append(this._itemsNode)},_renderItem:function(e){var t=this._isTechniqueDisabled(e.type),i={className:"pf-btn pf-btn-md pf-btn-outline pf-width-max pf-mr-4 "+(t&&!this._par.isMockupGenerator?"disabled disabled-technique ":"")+(this._isActive(e.type)?"active ":""),onclick:this._onTechniquePicked.bind(this,e.type),attr:{role:"button"}};if(t&&!this._par.isMockupGenerator){var n=g.EMBROIDERY_DISABLED_REGIONS.map((function(e){return Object(p.b)(e)})).join(h.a.isJp()?"ã€":", ");i.title=clang("technique availability","Embroidery products are fulfilled and shipped from facilities outside {region}").replace("{region}",n),this._par.useStrictRegionCheck||(i.title=o.a.POPOVER.DSR_LIMITED.DESC_TECHNIQUE.replace("{linkStart}","").replace("{linkEnd}","")),i.data={toggle:"tooltip",placement:"top",container:"body"}}var r=tag("a",i,e.label);return $(r).tooltip(),r},_getTagNew:function(){var e=["pf-ml-4 pf-py-2 pf-badge pf-badge-small pf-badge--primary pf-text-white"],t="";return this._par.hasNewPlacement&&(t=tag("span",e.join(" "),lang("New"))),this._par.isPolyPro&&!t&&(e.push(this._par.activeValue===s.a.TYPE_T_SHIRT?null:"hidden"),t=tag("span",e.join(" "),lang("New"))),t},_isActive:function(e){return this._par.activeValue===e},_onTechniquePicked:function(e){e===this._par.activeValue||this._isTechniqueDisabled(e)||(this._showWarningPopup?this._isPopupBusy||(this._isPopupBusy=!0,setTimeout(function(){this._isPopupBusy=!1}.bind(this),1e3),new a(this._onTechniquePickedRe.bind(this,e))):this._onTechniquePickedRe(e))},_onTechniquePickedRe:function(e){this._isPopupBusy=!1,this._par.activeValue=e,this._render(),this._par.callback&&this._par.callback(e)},toggleChangeTechniquePopup:function(e){this._showWarningPopup=e},_scrollToAvailability:function(){$(window).load((function(){"#availability"===window.location.hash&&($("html, body").animate({scrollTop:$(".catalog__product__tabs").offset().top},1e3),$(".catalog__product__tabs li#availability a").trigger("click"))}))},_scrollToGuidelines:function(){$("html, body").animate({scrollTop:$(".catalog__product__tabs").offset().top-$(".catalog__product__tabs .pf-tabs").outerHeight()},1e3),$(".catalog__product__tabs li#tab-guidelines a").trigger("click").focus()},updateTechniqueAvailability:function(e){if(this._par.regions=e,this._par.activeValue===s.a.TECHNIQUE_EMBROIDERY&&this._isTechniqueDisabled(this._par.activeValue)&&!this._par.isMockupGenerator){var t=this._par.techniques.filter((function(e){return e.type!==s.a.TECHNIQUE_EMBROIDERY}));if(t)return void this._onTechniquePickedRe(t[0].type)}this._renderItems()},_isTechniqueDisabled:function(e){if(e!==s.a.TECHNIQUE_EMBROIDERY)return!1;var t=this._par.regions,i=g.EMBROIDERY_DISABLED_REGIONS;return this._par.useStrictRegionCheck?u.a.intersection(t,i).length>0:!(!t||t.length<1)&&!u.a.some(t,(function(e){return!i.includes(e)}))}},o.a);g.EMBROIDERY_DISABLED_REGIONS=[c.a.REGION_AUSTRALIA,c.a.REGION_JAPAN],(globalThis||{}).PFVariantPickerTechniquePicker=g},"I/qX":function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("xeH2"),r=i.n(n),a=i("0Dcb"),o=i("nF4n"),s=i("Pxqf"),l=function(e,t){var i;this.file=e;var n=this.file.isReady||(null===(i=this.file)||void 0===i?void 0:i.key)&&!(this.file instanceof s.a);if(this.onRemoveCallback=t,this.node=Object(o.a)({tag:"div",className:"review-upload review-upload--loading"}),this.addOverlayNode(),n){var a=new Image;a.onload=r.a.proxy(this.onImageLoaded,this),a.src=this.file.urlThumb}};(l.prototype=new o.a.Base).onImageLoaded=function(){o.a.removeClassName(this.node,"review-upload--loading"),o.a.clearNode(this.node),new a.a({urlImage:this.file.urlThumb}).append(this.node),this.addOverlayNode()},l.prototype.addOverlayNode=function(){Object(o.a)({tag:"div",className:"review-upload__overlay",els:[{tag:"a",className:"pf-btn pf-btn-secondary",text:"Remove",onclick:r.a.proxy((function(){this.onRemoveCallback&&this.onRemoveCallback(this.file)}),this)}]}).append(this.node)},(globalThis||{}).PFProductReviewFormFileThumb=l;var c=i("XcIk"),d=i("iBt0");function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){p(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var g=function(e,t,i){this.uploader=new c.a({onUploaded:this.onFileUploaded.bind(this),onProcessed:this.onFileProcessed.bind(this),onProcessingFailed:this.onFileFailed.bind(this),caption:lang("Upload images"),uploadType:"review",allowMultiple:!0}),this.textAreaErrorMessage=tag("label","pf-text-red hidden",[dlang("reviews","Text field can't be emptyâ€”please add your thoughts about the product in the text field")]),this.imageErrorMessage=tag("label","pf-text-red hidden",[dlang("reviews","Upload 2 high-quality images that have the product displayed in the center")]),this.callbackButtonFunction=t,this.textAreaPlaceholder=e||dlang("reviews","We'd love to hear what you thinkâ€”write your thoughts on the product's fit, feel, style, etc."),this.node=Object(o.a)({tag:"div",className:"review-form-submit",els:[tag("h4","pf-h4 pf-mt-24 pf-mb-8",[dlang("reviews","Your review"),tag("span",{className:"pf-text-red pf-ml-2",innerHTML:"&#42;"})]),this.nodeTextarea=tag("textarea",{className:"form-control pf-mb-12",style:{height:"112px"},attr:{placeholder:this.textAreaPlaceholder}}),this.textAreaErrorMessage,tag("div","pf-mb-12",[this.nodeUploadedFiles=tag("div"),this.imageErrorMessage,this.uploader])]}),i&&(this.nodeTextarea.value=i.review,this.existingImages=i.images,this.renderUploadedFiles())};g.prototype=new o.a.Base,g.prototype.constructor=g,g.prototype.onFileUploaded=function(e){this.uploadedImages=this.uploadedImages||{},this.uploadedImages[e.temporaryFileKey]=e,this.renderUploadedFiles()},g.prototype.onFileProcessed=function(e){this.uploadedImages[e.temporaryFileKey]&&(this.uploadedImages[e.temporaryFileKey]=e,this.renderUploadedFiles())},g.prototype.onFileFailed=function(e){var t=new d.a('"'+e.filename+'" failed to process: '+e.reasonFailed,"danger",4e3);$(tag("div","",[t])).insertAfter(this.nodeTextarea),this.onFileRemove(e)},g.prototype.renderUploadedFiles=function(){o.a.clearNode(this.nodeUploadedFiles),this.images=h(h({},this.uploadedImages),this.existingImages);var e,t=!0;for(var i in this.images){var n=this.images[i];n.isReady||(t=!1),e=new l(n,this.onFileRemove.bind(this)),!n.key||n instanceof s.a||(e=new l(n,this.onRemoveExistingFile.bind(this)),t=!0),e.append(this.nodeUploadedFiles)}this.callbackButtonFunction(t)},g.prototype.onFileRemove=function(e){delete this.uploadedImages[e.temporaryFileKey],this.renderUploadedFiles()},g.prototype.onRemoveExistingFile=function(e){this.existingImages=this.existingImages.filter((function(t){return t.key!==e.key})),this.renderUploadedFiles()},(globalThis||{}).PFProductReviewFormSubmitArea=g},IA60:function(e,t){e.exports="https://static.cdn.printful.com/dist-new/image-assets/no-results-found.1f8358662c748464373038fdd773275a.svg"},IAu2:function(e,t,i){"use strict";i.d(t,"e",(function(){return d})),i.d(t,"f",(function(){return u})),i.d(t,"c",(function(){return h})),i.d(t,"b",(function(){return p})),i.d(t,"d",(function(){return g})),i.d(t,"a",(function(){return f}));var n=i("CDME"),r=i("9Nv7"),a=i("vYHe"),o=i("boP+");function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(e){return new Promise((function(t,i){e?Object(r.a)("product-generator/hide-push-task",{taskId:parseInt(e)}).then((function(e){null!=e&&e.success?t(!0):i(new Error("Push task hiding failed!"))})).catch((function(e){return i(e)})):i(new Error("Invalid push task ID!"))}))}function u(e,t){return new Promise((function(i,n){t&&e?(e=parseInt(e),t=parseInt(t),Object(r.a)("product-generator/retry-task",{storeId:e,taskId:t}).then((function(e){i(!!e)})).catch((function(e){return n(e)}))):n(new Error("Either store or task ID is undefined!"))}))}function h(e){return new Promise((function(t,i){e?Object(r.a)("product-generator/get-available-marketplace-manifests",{storeId:e}).then((function(e){var i=(e.manifests||[]).map((function(e){return new a.c(e)}));t(i)})).catch((function(e){return i(e)})):i(new Error("Store ID is undefined!"))}))}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(i,a){var o=e.productId,s=void 0===o?null:o;if(!e||!s)return a(new Error("Missing designData!"));var c=l({designData:e.toArray()},t);Object(r.a)("product-generator/calculate-prices",c).then((function(e){var t=e.prices,r=(JSON.parse(localStorage.getItem(f))||{})[s]||{},a=t.map((function(e){var t=n.a.fromArray(e),i=r[t.priceKey];return i&&(t.retailPrice=i),t}));i(a)})).catch(a)}))}function g(e){return new Promise((function(t,i){var n,a={placementArray:e,currencyCode:null===(n=Object(o.a)())||void 0===n?void 0:n.priceRange.currency};Object(r.a)("product-generator/get-licensed-asset-pricing",a).then((function(e){return t(e)})).catch(i)}))}var f="userPrices"},IGMQ:function(e,t){e.exports="https://static.cdn.printful.com/dist-new/image-assets/warning.4d4371ed98da6fcd445eb2afe3324835.svg"},IbzY:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("msYT"),r=i.n(n),a=i("nF4n"),o=i("0sIF"),s=i("X5Ic"),l=i("wo5H"),c=i("Jkv8"),d=Class({_par:null,_mockupPosition:null,_previewString:null,_currentAttempt:0,_maxAttempts:10,__construct:function(e){this._par=e,this._currentAttempt=0,this._mockupPosition=this._par.generatorVariant.mockupPosition.getScaledPosition(this._par.maxWidth,this._par.maxHeight),this.node=tag("div","generator-mockup-preview pf-mx-auto",[this._nodeBackground=tag("div"),this._nodeBase=tag("div"),this._nodeDesign=tag("div")]),this._par.maxHeight&&(this.node.style.minHeight=this._par.maxHeight+"px"),this._par.maxWidth&&(this.node.style.width=this._par.maxWidth+"px"),this.render()},render:function(){if(this.node.style.width=this._mockupPosition.areaWidth+"px",this.node.style.minHeight=this._mockupPosition.areaHeight+"px",this._par.isPrintfile)a.a.addClassName(this._nodeBackground,"generator-mockup-preview__printfile");else{a.a.removeClassName(this._nodeBackground,"generator-mockup-preview__printfile");var e=Math.min(this._par.maxWidth,this._par.maxHeight)>300,t={image:e?this._par.generatorVariant.backgroundImageUrl:this._par.generatorVariant.backgroundThumbnailUrl,shadow:e?this._par.generatorVariant.backgroundShadowUrl:this._par.generatorVariant.backgroundShadowThumbnailUrl,base:e?this._par.generatorVariant.generatorImageUrl:this._par.generatorVariant.generatorThumbnailUrl};this._nodeBackground.style.backgroundColor=this._par.generatorVariant.backgroundColor;var i=[];t.shadow&&i.push("url("+t.shadow+")"),t.image&&i.push("url("+t.image+")"),this._nodeBackground.style.backgroundImage=i.length?i.join(", "):null,this._nodeBase.style.backgroundImage=t.base?"url("+t.base+")":null,this._nodeBase.style.zIndex=0===this._par.generatorVariant.mockupPrintZIndex?2:null}this.renderPreviewString()},renderPreviewString:function(e){var t=this._par.isPrintfile&&this._par.template.technique===s.a.TYPE_EMBROIDERY?l.l:"",i=(this._par.template?this._par.template.getKey():this._par.generatorVariant.getKey())+t,n=o.a.getPreviewString(i);if(!this._previewString||String(this._previewString)!==String(n)){var r=!e&&!this._par.isPrintfile&&this._par.generatorVariant.hideDesignPreview,c=this._mockupPosition.width>0;if(r?(n="",a.a.addClassName(this._nodeDesign,"pf-d-none")):a.a.removeClassName(this._nodeDesign,"pf-d-none"),!r&&!n&&!this._previewString&&this._par.template&&c){var u={fillColor:this._par.designFillColor};if(this._currentAttempt++<this._maxAttempts)return void d.setPreviewStringFromTemplate(this._par.template,this._mockupPosition,u,this.renderPreviewString.bind(this,e));console.warn("setPreviewStringFromTemplate max iterations reached, cannot generate preview.")}this._previewString=String(n),"<svg"===this._previewString.substring(0,4)?(this._nodeDesign.style.background=null,this._nodeDesign.innerHTML=this._previewString):"data:"===this._previewString.substring(0,5)?(this._nodeDesign.style.background='transparent url("'+this._previewString+'") '+this._mockupPosition.left+"px "+this._mockupPosition.top+"px / "+this._mockupPosition.width+"px "+this._mockupPosition.height+"px no-repeat",this._nodeDesign.innerHTML=""):(this._nodeDesign.style.background=null,this._nodeDesign.innerHTML="")}}},a.a.Base);d.getPreviewString=function(e){return o.a.getPreviewString(e)},d.setPreviewString=function(e,t){return o.a.setPreviewString(e,t)},d.clearPreviewStrings=function(){o.a.clearPreviewStrings()},d.setPreviewStringFromTemplate=function(e,t,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";i=Object.assign({},{fillColor:null,isReadOnly:!0,textToPng:!0,readyCallback:function(t){setTimeout((function(){var i=!!a,r=t.convertToPreview({multiplier:2},i);null!==r&&d.setPreviewString(e.getKey()+a,r),"function"==typeof n&&n(r)}),0)},canvasParams:{useAntiAliasing:!1,usePrintPreview:!1},canvasFontsObject:Object(c.getPFCanvasFonts)()},i||{});var o=new r.a(t,null,{},i);o.setLayers(e.layersToArray(!0,!1))}},JQxb:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("X5Ic"),r=i("nF4n"),a=i("boP+"),o=Class({__construct:function(){this.node=Object(r.a)({tag:"div",className:"layer-picker__item__guideline-info"})},renderGuidelineInfo:function(){if(this.clearGuidelineInfo(this.node),this._showGuidelineInfo()){var e=Object(a.a)().productId;localStorage.getItem("mockup-generator-guideline-info-"+e)||Object(r.a)({tag:"div",className:"alert alert-warning",els:[{tag:"button",text:"Ã—",className:"close",attr:{"aria-label":lang("Close")},data:{dismiss:"alert"},onclick:this._setStorageItem.bind(this,"mockup-generator-guideline-info-"+e)},{tag:"span",innerHTML:dlang("generator","Looks great! Your design will be printed on both sides of the product. If you want to customize each side separately, select Advanced print file template in the Design tab.")}]}).append(this.node)}},clearGuidelineInfo:function(){r.a.clearNode(this.node)},_showGuidelineInfo:function(){return[n.a.ID_ALL_OVER_TOTE,n.a.ID_SOCKS,n.a.ID_ALL_OVER_DRAWSTRING_BAG].indexOf(Object(a.a)().productId)>-1},_setStorageItem:function(e){try{localStorage.setItem(e,1)}catch(e){console.log("Local storage not supported")}}});window&&((globalThis||{}).PFProductPushGuidelineInfo=o)},Jkv8:function(e,t,i){"use strict";i.r(t),i.d(t,"setPFCanvasFonts",(function(){return d})),i.d(t,"loadJSFontFrontend",(function(){return h})),i.d(t,"getPFCanvasFonts",(function(){return g}));var n=i("u9iW"),r=i.n(n),a=i("KLvT"),o=i("Z4u1"),s=i("mrkb");function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function c(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))}}function d(){return u.apply(this,arguments)}function u(){return(u=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(s.b)(),e.next=3,Object(a.a)().dispatch(o.a(o.c));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){return p.apply(this,arguments)}function p(){return(p=c(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return e.abrupt("return",r.a.loadJSFontFrontend(t,i));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(){return r.a}},JogF:function(e,t,i){"use strict";i.d(t,"g",(function(){return n})),i.d(t,"h",(function(){return r})),i.d(t,"d",(function(){return a})),i.d(t,"e",(function(){return o})),i.d(t,"f",(function(){return s})),i.d(t,"i",(function(){return l})),i.d(t,"a",(function(){return c})),i.d(t,"j",(function(){return d})),i.d(t,"c",(function(){return u})),i.d(t,"b",(function(){return h})),i.d(t,"k",(function(){return p}));var n="good",r="medium",a="bad",o="badUpscale",s="embroidery",l="transparencyWarning",c="embroideryTextTooBig",d="textSmall",u="embroideryTextSmall",h="embroideryTextOverlapping",p=2},K45J:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("hdE6"),r=i("ZtlV"),a=i("9Y8y"),o=i("how4"),s=i("6JZw"),l=i("nF4n"),c=function(){this.productCategories=[],this.variants=[],this.options=[]};c.prototype=new s.a,c.prototype.id=0,c.prototype.environmentId=0,c.prototype.name="",c.prototype.sku="",c.prototype.price=0,c.prototype.fulfillmentFeeForItem=0,c.prototype.fulfillmentFee=0,c.prototype.displayStatus="",c.prototype.variantId=0,c.prototype.productId=0,c.prototype.stockProductId=0,c.prototype.stockQuantity=0,c.prototype.urlImage="",c.prototype.dimensions=null,c.prototype.originalDimensions=null,c.prototype.status=0,c.prototype.statusName="",c.prototype.statusClassname="",c.prototype.displayStatus=0,c.prototype.displayStatusName="",c.prototype.displayStatusClassname="",c.prototype.createdAt="",c.prototype.updatedAt="",c.prototype.isPackaged=!1,c.prototype.shippingType="",c.prototype.unitOfMeasure=1,c.prototype.currency="USD",c.prototype.retailPrice=0,c.prototype.originalRetailPrice=0,c.prototype.type=0,c.prototype.isProductMergedWithVariant=!0,c.prototype.tempSyncProductId=0,c.prototype.tempSyncVariantId=0,c.prototype.productCategories=[],c.prototype.variants=[],c.prototype.options=[],c.prototype.getReadablePrice=function(){return prettyMoney(this.price)},c.prototype.isDraft=function(){return this.status===c.STATUS_DRAFT},c.prototype.isActive=function(){return this.status===c.STATUS_ACTIVE},c.prototype.isSuspended=function(){return this.status===c.STATUS_SUSPENDED},c.prototype.canEdit=function(){return!0},c.prototype.isInTemporaryStock=function(){return this.type===c.TYPE_TEMPORARY_RETURNED_ITEMS},c.prototype.isInPermanentStock=function(){return(this.type===c.TYPE_RETURNED_ITEMS||this.type===c.TYPE_OUTSIDE_STOCK)&&this.displayStatus===c.DISPLAY_STATUS_IN_STOCK},c.prototype.canAddToShipment=function(){return this.isActive()&&this.type===c.TYPE_OUTSIDE_STOCK},c.prototype.getProductCategoryIdList=function(){return this.productCategories.map((function(e){return e.id}))},c.prototype.fromArray=function(e){var t=new c;return l.a.O2O(t,e),t},c.prototype.toArrayKeys=["id","name","sku","dimensions","originalDimensions","variants","isPackaged","shippingType","unitOfMeasure","currency","type","retailPrice","originalRetailPrice","isProductMergedWithVariant","productCategories","urlImage","tempSyncProductId","tempSyncVariantId"],c.fromArray=function(e){var t=new c;if(l.a.O2O(t,e),e.dimensions&&(t.dimensions=o.a.fromArray(e.dimensions)),e.originalDimensions&&(t.originalDimensions=o.a.fromArray(e.originalDimensions)),e.variants)for(var i in t.variants=[],e.variants){var s=a.a.fromArray(e.variants[i]);s.customProduct=t,t.variants.push(s)}if(e.options)for(var d in t.options=[],e.options)t.options.push(r.a.fromArray(e.options[d]));if(e.productCategories)for(var u in t.productCategories=[],e.productCategories)t.productCategories.push(n.a.fromArray(e.productCategories[u]));return t},c.TYPE_BRANDING_ITEM="branding",c.TYPE_CUSTOM_PRODUCT="customProduct",c.TYPE_KEY_PRODUCT="product",c.TYPE_KEY_PACK_IN="pack-in",c.TYPE_OUTSOURCED=1,c.TYPE_OUTSIDE_STOCK=2,c.TYPE_RETURNED_ITEMS=3,c.TYPE_TEMPORARY_RETURNED_ITEMS=4,c.TYPE_PACK_IN=6,c.STATUS_CREATED=0,c.STATUS_PENDING=1,c.STATUS_ACTIVE=2,c.STATUS_DISABLED=3,c.STATUS_SUSPENDED=4,c.STATUS_DISAPPROVED=5,c.STATUS_DRAFT=6,c.DISPLAY_STATUS_IN_STOCK=6,c.UNIT_OF_MEASURE_IMPERIAL=1,c.UNIT_OF_MEASURE_METRIC=2,c.OrderableStates=[c.STATUS_ACTIVE],c.MINIMUM_RETAIL_PRICE=.9,c.MAX_LENGTH_NAME=52,window&&((globalThis||{}).PFItemsCustomProduct=c)},KWDz:function(e,t){e.exports="https://static.cdn.printful.com/dist-new/image-assets/favorites.b9d921109178a0754969e89018a4949c.svg"},Kblr:function(e,t,i){"use strict";var n,r=i("X5Ic"),a=i("boP+");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var c=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(this,e),l(this,"templates",void 0),l(this,"placementSelector",void 0),l(this,"isMockupGeneratorMode",void 0),this.templates=t,this.placementSelector=i,this.isMockupGeneratorMode=n}var t,i,n;return t=e,(i=[{key:"isLimitReached",value:function(){var e;if(this.isMockupGeneratorMode)return!1;var t=this.templates.getPlacementCountHavingFiles(),i=this.templates.getPlacementIdsHavingFiles(),n=this.placementSelector.getSelectedPlacementId(),r=null===(e=Object(a.a)())||void 0===e?void 0:e.productId,o=this.getProductPlacementLimit(r),s=t===o&&!i.includes(n);return s||t>o}},{key:"getProductPlacementLimit",value:function(t){return e.placementLimitConfig[t]}}])&&s(t.prototype,i),n&&s(t,n),e}();l(c,"placementLimitConfig",(l(n={},r.a.ID_CH_M7580,3),l(n,r.a.ID_KK_KK933,3),n)),window&&((globalThis||{}).ProductPushPlacementLimiter=c),t.a=c},Kiz0:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return o}));var n=i("SaSb"),r=i("9eNC");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)location.href=langUrl("/dashboard/settings/".concat(e,"/store"));else if(n.a.isWindowSmallerThan(n.a.SIZES.MD)){if(document.querySelector(".navbar-toggle").click(),document.querySelector(".js-env-selling-region").classList.contains("open"))return;document.querySelector("#selling-region-menu-toggle").click()}else window.scrollTo(0,0),setTimeout((function(){r.l(r.k)}),0)}function o(e){var t="PFCatalog:productEdt:"+e;try{sessionStorage.removeItem(t)}catch(e){}}},"Kv+z":function(e,t,i){"use strict";i.d(t,"i",(function(){return a})),i.d(t,"k",(function(){return o})),i.d(t,"l",(function(){return s})),i.d(t,"f",(function(){return l})),i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return d})),i.d(t,"a",(function(){return u})),i.d(t,"g",(function(){return h})),i.d(t,"j",(function(){return p})),i.d(t,"h",(function(){return g})),i.d(t,"e",(function(){return f})),i.d(t,"b",(function(){return _}));var n=i("Zwo4"),r="".concat(n.a,"/quickDesigns"),a="m_loadQuickDesignItemsIntoRepo",o="m_setHasLoadedAllDesigns",s="m_updateRecentQuickDesigns",l="g_hasLoadedAllQuickDesigns",c="g_getQuickDesignGroup",d="g_getQuickDesignItems",u="a_allActiveQuickDesignGroups",h="a_loadQuickDesignGroupsIntoRepo",p="a_loadQuickDesigns",g="a_loadQuickDesignItems",f="a_getRecentQuickDesigns",_=function(e){return"".concat(r,"/").concat(e)}},L8zU:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("7pSD"),r=i("md/F"),a=i("jI2M"),o=i("1Juc"),s=i("X5Ic"),l=i("cCrT"),c=i("97Au"),d=i("UIgN");function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var p=Class({_sizes:[],_translatedSizes:[],_unavailableSizes:[],_sellingRegionLimitedSizes:[],_variants:[],ONE_SIZE:"One Size",ONE_SIZE_TRANSLATED:dlang("products","One Size"),nodeError:null,sizeGuideModal:null,_marginClass:"margin-bottom-30",_shouldDisplayInline:!0,_sizeGuideModalTrigger:null,__construct:function(e,t,i,n){this._onSizeChangedCallback=t;var s=u(this._getUniqueSizes(e),2);this._sizes=s[0],this._translatedSizes=s[1],this._sizes.sort(r.a.sizeSortingCallback),this._variants=e,this._shouldDisplayInline=void 0===n||n;var c=[];for(var d in this._sizes){var h=this._sizes[d],p=h.toLowerCase()===this.ONE_SIZE.toLowerCase()?this.ONE_SIZE_TRANSLATED:this._getTranslatedSize(h);c.push({value:h,title:p})}var g=new a.a;if(g.values=c,g.valuesDisabled=this._unavailableSizes,g.onChanged=this._onSizeClick,g.ariaLabel=lang("Choose size"),g.singleAriaLabel=lang("Size {title}"),this.buttonPicker=new o.a(g),i&&(this._marginClass=i),this._sizes.length){var f=new l.a;if(f.query.size&&this._sizes.indexOf(f.query.size)>-1&&this.buttonPicker.setActiveValue(f.query.size),1===this._sizes.length)for(var _ in e){this._variant=e[_],this.buttonPicker.setActiveValue(this._variant.size);break}this.node=tag("div",{className:this._marginClass+" button-picker",style:this._shouldDisplayInline?{display:"inline-block"}:{}},[tag("div","pf-mb-8",[tag("b","",[lang("Choose size")]),this._canHaveSizeGuide()?this._sizeGuideModalTrigger=tag("a",{className:"pull-right pf-mr-4 pf-ml-32 pf-link ".concat(this._getNewSizeGuideClass()),onclick:this._showSizeGuide},[lang("Size guide")]):""]),this.buttonPicker._nodeItems,this.nodeError=tag("div","alert alert-danger text-center hidden pf-mt-16",dlang("products","Please choose a size!"))])}else this.node=tag("div")},_showSizeGuide:function(){if(null==this.sizeGuideModal){var e=new c.a.Par;for(var t in e.title=lang("Size guide"),e.modalDialogClass="modal-lg",e.onClose=$.proxy(this._removeSizeGuide,this),e.accessibility=!0,e.onShown=function(e){Object(d.b)(e.target.querySelector(".modal-body"))},this._variants){e.url=s.a.getSizeChartUrl(this._variants[t].productId);break}this.sizeGuideModal=new c.a(e)}this.sizeGuideModal.show()},_removeSizeGuide:function(){this.sizeGuideModal&&(this.sizeGuideModal.remove(),this.sizeGuideModal=null,this._sizeGuideModalTrigger&&Object(d.a)(this._sizeGuideModalTrigger))},_canHaveSizeGuide:function(){for(var e in this._variants)return this._variants[e].getCachedProduct().canHaveSizeGuide;return!1},_getNewSizeGuideClass:function(){var e;return null!==(e=this._variants[0].getCachedProduct())&&void 0!==e&&e.newSizeGuide?"pf-new-size-guide":""},_onSizeClick:function(e){var t=this.isSizeInactive(e)?this.getAvailableAttributeRegion(e,"size"):"",i=!0,r="",a="";this.isSizeDiscontinued(e)?(r=p.POPOVER.DISCONTINUED.TITLE,a=p.POPOVER.DISCONTINUED.DESC,this._variants[0].color||(a=p.POPOVER.DISCONTINUED.DESC_SIZE_ONLY),i=!1):this._sellingRegionLimitedSizes.includes(e)?(r=n.a.POPOVER.DSR_LIMITED.DESC_SIZE.replace("{linkStart}","").replace("{linkEnd}",""),i=!1):this.buttonPicker.getDisabledSampleSizes().indexOf(e)>-1?(r=n.a.POPOVER.SAMPLE.TITLE,a=n.a.POPOVER.SAMPLE.DESC,i=!1):this.isSizeUnavailable(e)||this.isSizeInactive(e)&&!t?(r=n.a.POPOVER.UNAVAILABLE.TITLE,a=n.a.POPOVER.UNAVAILABLE.DESC,this._variants[0].color||(a=n.a.POPOVER.UNAVAILABLE.DESC_SIZE_ONLY),i=!1):this.isSizeInactive(e)&&!p.SIZES_WITHOUT_REGION_POPOVER.includes(e)&&(r=n.a.POPOVER.REGION.TITLE.replace("{region}",t),a=n.a.POPOVER.REGION.DESC,i=!1),this.buttonPicker&&(r||a)&&this.buttonPicker.togglePopover(e,r,a),i&&(this._onSizeChangedCallback(e),this.buttonPicker.setActiveValue(e))},isSizeInactive:function(e){return!!this.buttonPicker&&this.buttonPicker.getInactiveItems().includes(e)},isSizeUnavailable:function(e){return!!this.buttonPicker&&this.buttonPicker.getUnavailableItems().includes(e)},isSizeDiscontinued:function(e){return!!this.buttonPicker&&this.buttonPicker.getHiddenItems().includes(e)},getSize:function(){return this.buttonPicker?this.buttonPicker.getValue():null},_getUniqueSizes:function(e){return e.reduce((function(e,t){var i=t.size,n=t.translatedSize,r=t.isDisabledInPush,a=t.hasStock;return!i||e[0].includes(i)||r&&!a||(e[0].push(i),e[1][i]=n),e}),[[],{}])},setUnavailableSizes:function(e){this.buttonPicker&&this.buttonPicker.setUnavailableItems(e)},setHiddenSizes:function(e){this.buttonPicker&&this.buttonPicker.setHiddenItems(e)},setInactiveSizes:function(e){this.buttonPicker&&this.buttonPicker.setInactiveItems(e)},setUnavailableSampleSizes:function(e){this.buttonPicker&&this.buttonPicker.setDisabledSampleSizes(e)},setSellingRegionLimitedSizes:function(e){this._sellingRegionLimitedSizes=e,this.setInactiveSizes(e)},setVariant:function(e){if(this.buttonPicker.setActiveValue(""),e&&e.size&&this._sizes.indexOf(e.size)>-1&&(this.buttonPicker.setActiveValue(e.size),this._variant=e),!this.buttonPicker.getActiveValue()&&1==this._sizes.length)for(var t in this._variants){this._variant=this._variants[t],this.buttonPicker.setActiveValue(this._variant.size);break}},getVariant:function(){return this._variant},hasAtLeastOneValue:function(){return!!this._sizes.length},isValuePicked:function(){return!!this.getSize()},getValueCount:function(){return this._sizes.length},getSizes:function(){return this._sizes.slice()},_getTranslatedSize:function(e){var t;return null!==(t=this._translatedSizes[e])&&void 0!==t?t:e}},n.a);p.SIZES_WITHOUT_REGION_POPOVER=["Samsung Galaxy S10","Samsung Galaxy S10e","Samsung Galaxy S10+"],p.POPOVER={DISCONTINUED:{TITLE:lang("Discontinued"),DESC:dlang("generator","Sorry, this color and size combination is discontinued. Please choose another color or size."),DESC_SIZE_ONLY:dlang("generator","Sorry, this size is discontinued. Please choose another size.")}},(globalThis||{}).PFVariantPickerSizePicker=p},LAWH:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6JZw"),r=i("nF4n"),a=function(){};a.prototype=new n.a,a.prototype.quantity=null,a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsSyncVariantCountsItem=a)},LUI9:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("l19W"),r=i("nF4n");function a(){var e,t;return(null===(e=PF)||void 0===e||null===(t=e.FileLibraryConfig)||void 0===t?void 0:t.GoogleDrivePicker)||{}}var o=function(e){a().API_KEY&&a().CLIENT_ID||alert("Google API keys not defined"),this.callback=e,this.picker=null,this.onReady()};o.OAUTH_TOKEN="",o.isScriptLoaded=!1,o.isClientScriptLoaded=!1,o.isAuthLoaded=!1,o.prototype.oAuthToken="",o.init=function(){o.isScriptLoaded||Object(r.a)({tag:"script",attr:{type:"text/javascript",src:"https://apis.google.com/js/api.js?onload=onGoogleDriverScriptsLoaded"}}).append(document.body),o.isClientScriptLoaded||Object(r.a)({tag:"script",attr:{type:"",src:"https://apis.google.com/js/client.js?onload=onGoogleDriverClientScriptsLoaded"}}).append(document.body)},o.isReady=function(){return o.isScriptLoaded&&o.isClientScriptLoaded&&o.isAuthLoaded},o.scriptLoaded=function(){o.isScriptLoaded&&o.isClientScriptLoaded&&(gapi.load("picker"),gapi.load("drive"),gapi.auth.init((function(){o.isAuthLoaded=!0})))},o.prototype.onReady=function(){o.OAUTH_TOKEN?this.showPicker():window.gapi.auth.authorize({client_id:a().CLIENT_ID,scope:[a().SCOPE]},$.proxy(this.handleAuthResult,this))},o.prototype.handleAuthResult=function(e){e&&!e.error&&(o.OAUTH_TOKEN=e.access_token,this.showPicker())},o.prototype.showPicker=function(){if(this.picker)this.picker.setVisible(!0);else{var e=new google.picker.DocsView;e.setIncludeFolders(!0),e.setOwnedByMe(!0),this.picker=(new google.picker.PickerBuilder).addView(e).setOAuthToken(o.OAUTH_TOKEN).setDeveloperKey(a().API_KEY).setOrigin(window.location.protocol+"//"+window.location.host).setCallback($.proxy(this.pickerCallback,this)).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).build(),this.picker.setVisible(!0),$(".picker-dialog-bg, .picker-dialog").css("z-index",2e3)}},o.prototype.pickerCallback=function(e){if(e[google.picker.Response.ACTION]==google.picker.Action.PICKED){var t=e[google.picker.Response.DOCUMENTS];for(var i in t)this.onFilePicked(t[i][google.picker.Document.ID],t[i][google.picker.Document.NAME])}},o.prototype.onFilePicked=function(e,t){var i=new o.Callback;i.googleFileId=e,i.googleFilename=t,i.oAuthToken=o.OAUTH_TOKEN,this.callback(i)},(o.Callback=function(){}).prototype.googleFileId=null,o.Callback.prototype.googleFilename=null,o.Callback.prototype.oAuthToken=null,o.onGoogleDriverClientScriptsLoaded=function(){o.isClientScriptLoaded=!0,o.scriptLoaded()},o.onGoogleDriverScriptsLoaded=function(){o.isScriptLoaded=!0,o.scriptLoaded()},(globalThis||{}).PFFileLibraryGoogleDrivePicker=o,window.onGoogleDriverScriptsLoaded=o.onGoogleDriverScriptsLoaded,window.onGoogleDriverClientScriptsLoaded=o.onGoogleDriverClientScriptsLoaded;var s=function(e){this.onFilePickedCallback=e,this.node=Object(r.a)({tag:"a",className:"pf-btn pf-btn-outline pf-btn-block pf-btn-square",els:[this.nodeImage=Object(r.a)({tag:"img",src:"/static/lightbox/img/loading.gif",attr:{width:16,height:16}})],attr:{title:dlang("library","Upload files from Google Drive")},prop:{onclick:$.proxy((function(){n.a.showPopup($.proxy(this.onClick,this))}),this),style:{paddingLeft:0,paddingRight:0}}}),$(this.node).tooltip({html:!0}),o.init(),this.prepare()};s.prototype=new r.a.Base,s.prototype.prepare=function(){this.isReady()?this.nodeImage.src="/static/images/layout/google-drive.png":setTimeout($.proxy(this.prepare,this),100)},s.prototype.isReady=function(){return o.isReady()},s.prototype.onClick=function(){ga("send",{hitType:"event",eventCategory:"FileLibrary",eventAction:"Google Drive file upload"}),this.isReady()&&(this._googleDriverPicker?this._googleDriverPicker.showPicker():this._googleDriverPicker=new o(this.onFilePickedCallback))},(globalThis||{}).PFFileLibraryGoogleDrivePickerButton=s},MMbA:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("edgZ"),r=i("gqyd"),a=i("+I3z"),o=i("qqZP"),s=i("boP+"),l=i("gQ2J"),c=Class({_placementLayers:{},_templateLayers:{},generatorDesignId:null,__construct:function(){},addPlacementFileLayer:function(e,t,i){if(!t.isTempGeneratorFile()&&!t.containsLicensedAssets){var n=this._placementLayers[e]||[],r=new a.a;i&&(r.originalPosition=i.getClone(),r.position=i.getClone()),r.fileItem=t,n.push(r),this._placementLayers[e]=n}},addPlacementLicensedAssetLayer:function(e,t,i){var n=this._placementLayers[e]||[],r=new o.a;i&&(r.originalPosition=i.getClone(),r.position=i.getClone()),r.licensedAssetItem=t,n.push(r),this._placementLayers[e]=n},addPlacementClipartLayer:function(e,t,i){var n=this._placementLayers[e]||[],a=new r.a;i&&(a.originalPosition=i.getClone(),a.position=i.getClone()),a.clipartItem=t,Object(s.c)()&&Object(l.b)(a),n.push(a),this._placementLayers[e]=n},getLayersByPlacement:function(){return this._placementLayers},hasLayersByPlacement:function(){return Object.keys(this._placementLayers).length>0},hasTemplates:function(){return Object.keys(this._templateLayers).length>0},addFromTemplates:function(e){var t=e.getTemplates();for(var i in t)for(var n in t[i]){var r=t[i][n];this._templateLayers[r.getKey()]=r.getCloneWithLayers()}},getTemplates:function(){return this._templateLayers},getTemplateByKey:function(e){return this._templateLayers[e]||null},getTemplatesBestMatchingLayers:function(e){var t,i,n=(e.width/e.height).toFixed(2);for(var r in this._templateLayers){var a=this._templateLayers[r];if(a.placementId===e.placementId){var o=(a.height/a.width).toFixed(2),s=(a.width/a.height).toFixed(2);if(t=a.layers.slice(0),n==s||n==o){if(a.width===e.height&&a.height===e.width)return t;i=t}}}return i||t||[]}});c.initialize=function(e,t){var i=new n.a,r=new c;for(var a in r.generatorDesignId=t,e){var o=e[a];o.exists()&&!o.isMockup()&&r.addPlacementFileLayer(o.type,i.getCachedFile(o.fileId),o.position)}return r},window&&((globalThis||{}).PFProductPushDesignerState=c)},MSZa:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return o}));var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.status=t.status||e.STATUSES.STATUS_BROKEN,this.imageURL=t.imageURL||null,this.thumbnailURL=t.thumbnailURL||null,this.imageDownloadURL=t.imageDownloadURL||null,this.imageSVG=t.imageSVG||null,this.pusherKey=t.pusherKey||null}var t,i,a;return t=e,(i=[{key:"isDone",get:function(){return this.status===e.STATUSES.STATUS_DONE}},{key:"isLoading",get:function(){return this.status===e.STATUSES.STATUS_LOADING}},{key:"isBroken",get:function(){return this.status===e.STATUSES.STATUS_BROKEN}},{key:"loadResults",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.imageURL,n=void 0===i?null:i,r=t.thumbnailURL,a=void 0===r?null:r,o=t.imageSVG,s=void 0===o?null:o;if(this.pusherKey=null,!n&&!a&&!s)return this.imageURL=this.thumbnailURL=this.imageSVG=null,void(this.status=e.STATUSES.STATUS_BROKEN);n&&(this.imageURL=n),a&&(this.thumbnailURL=a),s&&(this.imageSVG=s),this.status=e.STATUSES.STATUS_DONE}}])&&r(t.prototype,i),a&&r(t,a),e}();a(o,"IMAGE_LOADING_URL","/static/images/layout/spinner-transparent.gif"),a(o,"IMAGE_BROKEN_URL","/static/images/retina/invalid-file.svg"),o.STATUSES=Object.freeze({STATUS_BROKEN:"broken",STATUS_LOADING:"loading",STATUS_DONE:"done"})},MW8O:function(e,t,i){"use strict";i.d(t,"a",(function(){return V}));var n=i("rFrQ"),r=i("bvdp"),a=i("E17x"),o=i("gqyd"),s=i("nF4n"),l=Class({_nameToggledOn:"",_nameToggledOff:"",_iconClassName:{on:"",off:""},_imgSrc:null,_onClickCallback:null,_isActive:!1,_isIndicator:!1,_nodeBadge:null,__construct:function(){this.node=tag("a",{className:"pf-mb-8 generator-mockup__actions__container",onclick:this._onClick.bind(this)})},setName:function(e,t){return this._nameToggledOn=e,this._nameToggledOff=t,this},setIconClass:function(e,t){return this._iconClassName.on=e,this._iconClassName.off=t||e,this},setImgSrc:function(e,t){return this._imgSrc||(this._imgSrc={on:"",off:""}),this._imgSrc.on=e,this._imgSrc.off=t,this},setCallback:function(e){return this._onClickCallback=e,this},setActive:function(e){return this._isActive=e,this._isActive?s.a.addClassName(this.node,"active"):s.a.removeClassName(this.node,"active"),this.render(),this},setIsIndicator:function(e){return this._isIndicator=e,this._isIndicator?s.a.addClassName(this.node,"generator-mockup__actions__container--indicator"):s.a.removeClassName(this.node,"generator-mockup__actions__container--indicator"),this},setBadge:function(e,t){return this._nodeBadge=tag("span","badge "+t,e),this},render:function(){return s.a.clearNode(this.node),tag("div","generator-mockup__actions__button",[this._imgSrc&&(this._isActive?this._imgSrc.on:this._imgSrc.off)?tag("img",{className:this._isActive?this._iconClassName.off:this._iconClassName.on,src:this._isActive?this._imgSrc.on:this._imgSrc.off}):tag("i","pf-i  pf-i-24 "+(this._isActive?this._iconClassName.off:this._iconClassName.on)),this._isActive?this._nameToggledOff:this._nameToggledOn,this._nodeBadge?this._nodeBadge:""]).append(this.node),this},_onClick:function(e){e.preventDefault(),this._isActive=!this._isActive,this._onClickCallback&&this._onClickCallback(this._isActive)}},s.a.Base),c=Class({_buttons:[],__construct:function(){this.node=tag("div","generator-mockup__actions generator-mockup__actions--zoom-measure")},addButton:function(){var e=new l;return this._buttons.push(e),e},addDivider:function(){var e=tag("hr");return this._buttons.push(e),e},hasButtons:function(){return!!this._buttons.length},render:function(){var e=this;return s.a.clearNode(this.node),this._buttons.forEach((function(t){return(t.render?t.render():t).append(e.node)})),this}},s.a.Base);window&&((globalThis||{}).PFComponentsGeneratorMockupActions=c);var d=i("UYP3"),u=i("+erO"),h=Class({_sizeSlider:null,_par:null,__construct:function(e){this._par=e;var t=new d.a.Par;t.min=20,t.max=100,t.onSlide=this._par.onScale,t.onSlideEnded=this._par.onScale,this._sizeSlider=new d.a(t),this.node=tag("div","pf-d-block pf-mb-12 "+(this._par.showButtons?"":"pf-d-md-none"),[tag("div","row no-gutters pf-my-12 pf-justify-content-center",[tag("div",this._par.showFit?"col-6 col-xs-7":"col-12 col-md-8",[this._sizeSlider]),tag("div",this._par.showFit?"col-auto col-xs-3 pf-pl-8 pf-pl-xs-12":"pf-d-none",[tag("button",{className:"pf-btn pf-btn-secondary pf-d-block pf-w-100 pf-d-xs-inline-block pf-w-xs-auto",onclick:this._par.onFit},dlang("generator","Scale to fit"))])]),tag("div",{className:"pf-d-block pf-d-md-none pf-mt-12",style:{whiteSpace:"nowrap"}},[tag("button",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8 pf-mb-8",onclick:this._move.bind(this,-1,0)},[tag("i","pf-i pf-i-chevron-left pf-i-18")]),tag("button",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8 pf-mb-8",onclick:this._move.bind(this,1,0)},[tag("i","pf-i pf-i-chevron-right pf-i-18")]),tag("button",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8 pf-mb-8",onclick:this._move.bind(this,0,-1)},[tag("i","pf-i pf-i-chevron-up pf-i-18")]),tag("button",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8 pf-mb-8",onclick:this._move.bind(this,0,1)},[tag("i","pf-i pf-i-chevron-down pf-i-18")]),tag("button",{className:"pf-btn pf-btn-secondary pf-mb-8",onclick:this._par.onReset,attr:{title:lang("Undo all changes"),"data-toggle":"tooltip"}},clang("action (to reset something)","Reset"))]),tag("div",{className:"pf-d-block pf-d-md-none pf-mt-4 pf-mb-12",style:{whiteSpace:"nowrap"}},[tag("a",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8",attr:{title:dlang("generator","Center vertically"),"data-toggle":"tooltip"},onclick:this._par.onAlign.bind(null,u.a.ALIGNMENT.VERTICAL)},[tag("i","pf-i pf-i-format-vertical-align-center pf-i-18")]),tag("a",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8",attr:{title:dlang("generator","Center horizontally"),"data-toggle":"tooltip"},onclick:this._par.onAlign.bind(null,u.a.ALIGNMENT.HORIZONTAL)},[tag("i","pf-i pf-i-format-horizontal-align-center pf-i-18")]),tag("a",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8",attr:{title:dlang("generator","Left"),"data-toggle":"tooltip"},onclick:this._par.onAlign.bind(null,u.a.ALIGNMENT.LEFT)},[tag("i","pf-i pf-i-format-horizontal-align-left pf-i-18")]),tag("a",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8",attr:{title:dlang("generator","Right"),"data-toggle":"tooltip"},onclick:this._par.onAlign.bind(null,u.a.ALIGNMENT.RIGHT)},[tag("i","pf-i pf-i-format-horizontal-align-right pf-i-18")]),tag("a",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8",attr:{title:dlang("generator","Top"),"data-toggle":"tooltip"},onclick:this._par.onAlign.bind(null,u.a.ALIGNMENT.TOP)},[tag("i","pf-i pf-i-format-vertical-align-top pf-i-18")]),tag("a",{className:"pf-btn pf-btn-secondary pf-btn-square",attr:{title:dlang("generator","Bottom"),"data-toggle":"tooltip"},onclick:this._par.onAlign.bind(null,u.a.ALIGNMENT.BOTTOM)},[tag("i","pf-i pf-i-format-vertical-align-bottom pf-i-18")])])])},show:function(){s.a.removeClassName(this.node,"pf-d-md-none")},hide:function(){s.a.addClassName(this.node,"pf-d-md-none")},_move:function(e,t,i){i.preventDefault(),this._par.onMove(e,t)},setSliderValue:function(e){this._sizeSlider&&this._sizeSlider.setValue(e)},append:function(e){return this.node.append(e),$(this.node).find('[data-toggle="tooltip"]').tooltip({trigger:"hover",container:document.body}).on("click",(function(e){$(this).tooltip("hide")})),this}},s.a.Base);window&&((globalThis||{}).PFComponentsGeneratorMockupControls=h);var p=Class({mockupPosition:null,templates:null,onPositionChanged:null,onTextChanged:null,onLayerSelected:null,onGroupSelected:null,onLayerRemoved:null,onPreview:null,onCropStateChanged:null,onPrintPreviewChange:null,technique:null,isCustomizingMode:!1,opts:null});window&&((globalThis||{}).PFComponentsGeneratorMockupCanvasPar=p);var g=i("oclZ"),f=i("7h5t"),_=i("86cz"),m=i("X5Ic"),v=i("msYT"),y=i.n(v),b=i("YE7c"),P=i.n(b),C=i("wo5H"),T=i("mmgb"),I=i.n(T),w=Class({_par:null,_canvasNode:null,_canvas:null,_activeCropLayer:null,__construct:function(e){this._par=e,this.node=tag("div",{className:"canvas-wrapper",style:{width:this._par.mockupPosition.areaWidth+"px",height:this._par.mockupPosition.areaHeight+"px",top:0,marginLeft:-this._par.mockupPosition.areaWidth/2+"px",left:"50%",pointerEvents:this._par.isReadOnly?"none":""}},[this._canvasNode=tag("canvas")]),$(".modal-dialog").length>0&&$(document).off("focusin.modal"),this._canvas=new y.a(this._par.mockupPosition,this._canvasNode,this._par.isReadOnly?null:{onLayerSelected:this._onCanvasLayerSelected.bind(this),onGroupSelected:this._onCanvasGroupSelected.bind(this),onLayerChanged:this._onCanvasLayerChanged.bind(this),onLayerRemoved:this._onCanvasLayerRemoved.bind(this),onLayerScaled:this._onLayerScaled.bind(this),onRotationShadowChanged:this._onRotationShadowChanged.bind(this),onCropStateChanged:this._onCropStateChanged.bind(this)},this._par.opts),this._manageTouchEvents(),this._subscribeTemplateEvents()},isEventOrigin:function(e){return e&&(e===this||e===this._getUid())},_getUid:function(){return"canvas-"+this._canvas.uid},_subscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().addOnLayerAddedListener(this._onLayerAddedFromCanvas).addOnLayerRemovedListener(this._onLayerRemovedFromCanvas).addOnLayerOrderChangedListener(this._onLayerOrderChangedFromCanvas).addOnTemplatePositionsChangedListener(this._onTemplatePositionsChangedFromCanvas).addOnLayerConfigurationChanged(this._onLayerConfigurationChangedFromCanvas).addOnActiveLayerChanged(this._onActiveLayerChangedFromCanvas).addOnTemplateResizedListener(this._onTemplateResizedFromCanvas)},_unsubscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().unsubscribe(this._onLayerAddedFromCanvas).unsubscribe(this._onLayerRemovedFromCanvas).unsubscribe(this._onLayerOrderChangedFromCanvas).unsubscribe(this._onLayerConfigurationChangedFromCanvas).unsubscribe(this._onTemplatePositionsChangedFromCanvas).unsubscribe(this._onActiveLayerChangedFromCanvas).unsubscribe(this._onTemplateResizedFromCanvas)},_unsubscribeTemplateEventsIfNeeded:function(){return!Object(a.a)(this.node)&&(this._unsubscribeTemplateEvents(),!0)},_manageTouchEvents:function(){Object(a.b)()&&this.node.addEventListener("touchstart",this._tapHandler.bind(this,this._onDoubleTap.bind(this)))},_tapHandler:function(e,t){var i=this;if(!this._tapOnce)return this._tapOnce=!0,void setTimeout((function(){return i._tapOnce=!1}),300);t.preventDefault(),e&&e(),this._tapOnce=!1},_onDoubleTap:function(){var e,t=null===(e=this.getActiveLayer())||void 0===e?void 0:e.toArray();t&&I.a.checkLayerTypeForCrop(t)&&this._canvas.onDoubleTap()},setLayers:function(e){this._canvas.setLayers(e)},setLayer:function(e){this._canvas.setPosition(e.uniqueId,e.toArray(this._canUseThumbnail(e),!0),this.notifyPreview.bind(this))},showActiveLayer:function(e){this._canvas.showActiveLayer(e)},showActiveGroup:function(e){this._canvas.showActiveGroup(e)},getActiveLayer:function(){var e=this._canvas.getActiveLayerId();return this._par.templates.getLayerById(e)},getActiveGroupLayers:function(){var e=this._canvas.getActiveGroupId();return this._par.templates.getGroupLayersById(e)},notifyPreview:function(){g.a.delay("PFComponentsGeneratorMockupCanvas._onCanvasLayerChanged-print-preview-"+this._getUid(),this._par.onPrintPreviewChange.bind(null,this._canvas.shouldShowLivePrintPreview.bind(this._canvas)),100);var e=!1;g.a.delay("PFComponentsGeneratorMockupCanvas._onCanvasLayerChanged-preview-"+this._getUid(),this._par.onPreview.bind(null,this._canvas.convertToPreview.bind(this._canvas,null,e),this._getUid(),e),100),this._par.technique===m.a.TYPE_EMBROIDERY&&(e=!0,g.a.delay("PFComponentsGeneratorMockupCanvas._onCanvasLayerChanged-preview-"+this._getUid()+C.l,this._par.onPreview.bind(null,this._canvas.convertToPreview.bind(this._canvas,null,e),this._getUid(),e),100))},toggleGuidelines:function(e,t){this._canvas.toggleGuidelines(e,t)},toggleZoom:function(e){this._canvas.toggleZoom(e),this.notifyPreview()},_onCanvasLayerSelected:function(e){if(this._par.templates&&e){var t=this._par.templates.getLayerById(e.id),i=this._par.templates.getActiveLayer();if(!i||t){e&&t&&t.patternType&&e.patternId&&this._onCanvasLayerChanged(!1,!0,{target:e,transform:{}});var n=i&&t&&i.uniqueId===t.uniqueId;this._par.onLayerSelected(t,n,this)}}},_onCanvasGroupSelected:function(e){if(this._par.templates&&e){var t=this._par.templates.getGroupLayersById(e.groupId),i=this._par.templates.getActiveGroupLayers();if(t.length||null==i||!i.length){var n=(null==i?void 0:i.length)&&t.length&&i[0].groupId===t[0].groupId;this._par.onGroupSelected(t,n,this)}}},_onCanvasLayerChanged:function(e,t,i){var n,r=this;if(((null==i||null===(n=i.transform)||void 0===n?void 0:n.action)!==P.a.COLOR_GRAPHIC_IMAGE_LOAD||!0!==i.transform.actionPerformed)&&this._par.templates){var a=i.target||i.transform.target;if(a){var o=function(n,a){var o=r._par.templates.getLayerById(n.id);if(o){var s,l;if(n.type===P.a.LAYER_TYPE.CROP){var c=r._canvas.getImgElementBeingCroppedById(n.id);if(r._canvas.restrictCropLayerMoving(n,c,i,t),!r._canvas.isCropState(n.id)){s=r._getLayerPosition(o,!0);var d=r._getFabricPosition(n),u=r._normalizeLayerPosition(s,d);l=r._getLayerPosition(o),l=r._canvas.updateLinkedBaseLayerPosition(i.transform.action,c,n,l,s,u,r),r._getCropChangeType(i.transform.action)}}else{l=r._getLayerPosition(o);var h=r._getFabricPosition(n);r._normalizeLayerPosition(l,h),o.flipX=n.flipX,o.flipY=n.flipY,l.canMoveOutOfBounds=a}e?g.a.delay("PFComponentsGeneratorMockupCanvas._onCanvasLayerChanged-position-"+r._getUid()+"-"+n.id,r._updateLayerDataPositions.bind(r,o,l,s),100):r._updateLayerDataPositions(o,l,s)}};(null==a?void 0:a.subType)===P.a.LAYER_TYPE.QUICK_DESIGN?a.forEachObject((function(e){return o(e,!0)})):o(a),this.notifyPreview()}}},_getCropChangeType:function(e){return{drag:C.a,rotate:C.b,scale:C.c}[e]||C.c},_updateLayerDataPositions:function(e,t,i,n){t&&this._par.onPositionChanged(e,t,this._getUid()),i&&this._par.onPositionChanged(e,i,this._getUid(),!0,n)},_getLayerPosition:function(e,t){return(e[t?"cropPosition":"position"]||e.originalPosition).getFromOriginalRatio().getScaledPosition(this._par.mockupPosition.width,this._par.mockupPosition.height)},_getFabricPosition:function(e){var t,i=e.getPointByOrigin("center","center"),n=i.x-e.getScaledWidth()/2,r=i.y-e.getScaledHeight()/2,a=e.angle,o=e.getScaledWidth(),s=e.getScaledHeight();if((null===(t=e.group)||void 0===t?void 0:t.subType)===P.a.LAYER_TYPE.QUICK_DESIGN){var l=e.group.getPointByOrigin("center","center"),c=e.group.angle*Math.PI/180,d=e.group.scaleX,u=i.x*Math.cos(c)-i.y*Math.sin(c),h=i.x*Math.sin(c)+i.y*Math.cos(c);n=l.x+(u-e.getScaledWidth()/2)*d,r=l.y+(h-e.getScaledHeight()/2)*d,a+=e.group.angle,o*=d,s*=d}return{width:o,height:s,top:r-this._par.mockupPosition.top,left:n-this._par.mockupPosition.left,rotation:a}},_normalizeLayerPosition:function(e,t){var i=new u.a,n=e.left,r=e.top,a=e.width,o=e.height,s=e.rotation;return e.left=this._normalizePosition(t.left,n),e.top=this._normalizePosition(t.top,r),e.width=this._normalizePosition(t.width,a),e.height=this._normalizePosition(t.height,o),e.rotation=this._normalizePosition(t.rotation,s,!0),i.left=e.left-n,i.top=e.top-r,i.width=e.width-a,i.height=e.height-o,i.rotation=e.rotation-s,i.scale=e.width/a,i},_addDiffPosition:function(e,t){e.left+=t.left,e.top+=t.top,e.width+=t.width,e.height+=t.height},_onLayerScaled:function(e,t){var i=this;if(this._par.templates){var n=t.target||t.transform.target;n&&(n.subType===P.a.LAYER_TYPE.QUICK_DESIGN?n.forEachObject((function(t){return i._processScaledLayer(e,t)})):this._processScaledLayer(e,n))}},_processScaledLayer:function(e,t){var i,n=this._par.templates.getLayerById(t.id);n&&n instanceof f.a&&!n.overrideImagePulse&&(null!=t&&t.getObjects&&null!==(i=t.getObjects("color-graphic"))&&void 0!==i&&i.length&&(t.scaledGraphic=!0),e?g.a.delay("PFComponentsGeneratorMockupCanvas._onLayerScaled-"+this._getUid(),function(){y.a.calculateTextboxPositions(n),this._canvas.setPosition(n.uniqueId,n.toArray(this._canUseThumbnail(n),!0))}.bind(this),100):(y.a.calculateTextboxPositions(n),this._canvas.setPosition(n.uniqueId,n.toArray(this._canUseThumbnail(n),!0))))},_onRotationShadowChanged:function(e){if(this._par.templates){var t=e.target||e.transform.target;if(t){var i=this._par.templates.getLayerById(t.id);y.a.setObjectShadow(i.toArray(this._canUseThumbnail(i)),t)}}},_normalizePosition:function(e,t,i){e=parseFloat(Number(e).toFixed(4));var n=i?0:.9;return y.a.NUMDIFF(e,t)>n?e:t},_onCanvasLayerRemoved:function(e){var t=this;if(this._par.templates&&e)if(this._canvas.removeLayer(e),e.subType!==P.a.LAYER_TYPE.QUICK_DESIGN){var i=this._par.templates.getLayerById(e.id);this._par.onLayerRemoved(i)}else{this._par.templates.getGroupLayersById(e.groupId).forEach((function(e){return t._par.onLayerRemoved(e)}))}},_onLayerAddedFromCanvas:function(e,t){if(!this._unsubscribeTemplateEventsIfNeeded()){var i=e.length?e[0]:null;if(i)if(t)this._canvas.drawLayer(t.toArray(this._canUseThumbnail(t)));else{var n=i.layersToArray();this.setLayers(n)}}},_onLayerRemovedFromCanvas:function(e,t){if(!this._unsubscribeTemplateEventsIfNeeded()){var i=e.length?e[0]:null;if(i)if(t)this._canvas.removeLayerById(t.uniqueId);else{var n=i.layersToArray();this.setLayers(n)}}},_onLayerOrderChangedFromCanvas:function(){this._unsubscribeTemplateEventsIfNeeded()||this._canvas.sortLayers(!0)},_onTemplatePositionsChangedFromCanvas:function(e,t,i){if(!this._unsubscribeTemplateEventsIfNeeded()&&!this.isEventOrigin(i))if(i!==_.a.GROUP_UPDATE){if(this._canvas.setPosition(t.uniqueId,t.toArray(this._canUseThumbnail(t),!0)),!(e.length<=1)){var n=this._par.templates.getTemplateByLayer(t);if(n)if(!(n.getLayerIndex(t)<0)){for(var r in e){var a=e[r],o=a.getLayerIndex(t);if(a.layers[o]){var s=a.layers[o].getOriginalClone();this._canvas.setPosition(s.uniqueId,s.toArray(this._canUseThumbnail(s),!0))}}this.notifyPreview()}}}else this._canvas.clearActiveGroup()},_onActiveLayerChangedFromCanvas:function(e,t){if(!this._unsubscribeTemplateEventsIfNeeded()&&!this.isEventOrigin(t))if(null!=e&&e.length){var i=e[0].groupId;this.showActiveGroup(i)}else this.showActiveLayer(e?e.uniqueId:null)},_onTemplateResizedFromCanvas:function(e,t,i){this._unsubscribeTemplateEventsIfNeeded()||this.isEventOrigin(i)||this._canvas.setPosition(t.uniqueId,t.toArray(this._canUseThumbnail(t),!0))},_onLayerConfigurationChangedFromCanvas:function(e,t){if(!this._unsubscribeTemplateEventsIfNeeded()&&!this.isEventOrigin(t))return e.isCropState&&!this._canvas.isCropState()||!e.isCropState&&this._canvas.isCropState()?this._canvas.toggleCropState(e.uniqueId):void this._canvas.updateLayer(e.toArray(this._canUseThumbnail(e),!0),this.notifyPreview.bind(this))},getPreviewImageString:function(){return this._canvas.convertToPreview(null,!1)},_canUseThumbnail:function(e){return!I.a.isCropElementNeeded(e)},_onCropStateChanged:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._par.templates){var r=this._par.templates.getLayerById(e);if(r){if(this._canvas.isCropState()||!t)this.setLayer(r);else{if(!n){var a=this._getLayerPosition(r,!0),o=this._getFabricPosition(t);this._normalizeLayerPosition(a,o),this._updateLayerDataPositions(r,null,a),r=this._par.templates.getFreshLayer(r)}this.setLayer(r)}r.isCropState=this._canvas.isCropState();var s={skipSwitchToDesignerTab:!0};this._par.templates.getChangeListener().notifyLayerCropStateChanged(r,this,s),this._activeCropLayer=this._canvas.isCropState()?r:null,this._par.onCropStateChanged&&this._par.onCropStateChanged(this._canvas.isCropState())}}},applyCrop:function(){this._activeCropLayer&&this._canvas.toggleCropState(this._activeCropLayer.uniqueId)},cancelCrop:function(){if(this._activeCropLayer){var e=this._par.templates.getLayerById(this._activeCropLayer.uniqueId);e=this._par.templates.getFreshLayer(e),this._canvas.updateLayer(e.toArray(this._canUseThumbnail(e),!0),this._canvas.toggleCropState.bind(this._canvas,e.uniqueId,!0))}},getCanvas:function(){return this._canvas}},s.a.Base);window&&((globalThis||{}).PFComponentsGeneratorMockupCanvas=w);var S,E=i("zfrb"),k=i("tx4t"),O=i("jhOU"),A=i("XJFE"),L=i("7QI8"),N=i("osBa"),D=i("A+LN"),R=i("vfQf"),x=i("boP+"),F=i("Jkv8");function M(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function B(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}var V=Class({_lastActiveLayer:null,_lastActiveLayerGroup:null,_isGridVisible:!1,_isZoomedIn:!1,_hasPrintPreviewBeta:!1,_isPrintPreview:!1,_printPreviewButton:null,_unrelatedTemplatesWarningButton:null,_unrelatedTemplatesPopover:null,_gridButton:null,_zoomButton:null,_canvas:null,_qualityMessageClosedManually:null,_par:null,_mockupPosition:null,_lastPreviewString:null,_nodeCropActions:null,_hasCropToolBeta:null,__construct:function(e){var t;this._par=e,this._mockupPosition=this._par.generatorVariant.mockupPosition.getScaledPosition(this._par.maxWidth,this._par.maxHeight);var i=this._par.generatorVariant.mockupPosition.getRatioToScaleTo(this._par.maxWidth,this._par.maxHeight),n=this._par.generatorVariant.dynamicTexts.map((function(e){return e.getScaledItem(i)}));this._par.maxHeight=Math.floor(this._par.maxHeight),this._par.maxWidth=Math.floor(this._par.maxWidth),this._mockupPosition.areaWidth=Math.round(this._mockupPosition.areaWidth),this._mockupPosition.areaHeight=Math.round(this._mockupPosition.areaHeight),this._mockupPosition.height=Math.round(this._mockupPosition.height),this._mockupPosition.width=Math.round(this._mockupPosition.width),this._mockupPosition.top=Math.round(this._mockupPosition.top),this._mockupPosition.left=Math.round(this._mockupPosition.left),this.node=Object(s.b)("div","generator-mockup pf-mx-auto",[this._nodeCanvasHolder=Object(s.b)("div"),this._nodeCropActionsHolder=Object(s.b)("div"),this._nodePrintQualityHolder=Object(s.b)("div"),this._nodeControlsHolder=Object(s.b)("div")]),this._par.maxHeight&&(this.node.style.minHeight=this._par.maxHeight+"px",this.node.style.paddingTop=this._par.maxHeight+"px"),this._par.maxWidth&&(this.node.style.width=this._par.maxWidth+"px");var r=new p;r.mockupPosition=this._mockupPosition,r.templates=this._par.templates,r.onPositionChanged=this._onPositionChanged.bind(this),r.onLayerSelected=this.setActiveLayer.bind(this),r.onGroupSelected=this.setActiveGroup.bind(this),r.onLayerRemoved=this._onLayerRemoved.bind(this),r.onTextChanged=this._onTextChanged.bind(this),r.onPreview=this._onPreview.bind(this),r.onCropStateChanged=this._onCropStateChanged.bind(this),r.onPrintPreviewChange=this._onPrintPreviewChange.bind(this),r.technique=this._par.template.technique,r.opts={productColor:this._par.generatorVariant.colorCode||this._par.generatorVariant.backgroundColor||"",backgroundColor:this._par.generatorVariant.backgroundColor,backgroundImage:this._par.generatorVariant.backgroundImageUrl,backgroundShadow:this._par.generatorVariant.backgroundShadowUrl,baseImageUrl:this._par.generatorVariant.generatorImageUrl,overlayColor:null,fillColor:this._par.placementOptions?this._par.placementOptions.getPlacementFillColor(this._par.generatorVariant.placementId):null,mockupPrintZIndex:this._par.generatorVariant.mockupPrintZIndex,isReadOnly:this._par.disableLayerManipulations||!this._par.isResizable,readyCallback:this._readyCallback,disablePulseImageOverride:this._par.disablePulseImageOverride,disableScaling:null===(t=Object(x.a)())||void 0===t?void 0:t.isJewelry(),labelText:this._labelText(),isCustomizingMode:this._par.isCustomizingMode,templateDynamicTexts:n,isCropToolAvailable:this._isCropToolBeta.bind(this),canvasParams:{useAntiAliasing:!1,usePrintPreview:this._shouldUsePrintPreview.bind(this)},canvasFontsObject:Object(F.getPFCanvasFonts)()},this._canvas=new w(r),this._canvas.setLayers(this._par.template?this._par.template.layersToArray():[]),this._canvas.append(this._nodeCanvasHolder),this._drawDebugTools(),e.isResizable&&(this.nodePrintQuality=Object(s.b)("div","print-quality "+(e.isOrderFlow?"":"pf-d-none"))),this._toggleGrid(!1,this._shouldGridBeVisible()),this._resetZoomState(),this._par.isResizable&&!this._par.disableLayerManipulations&&this.setActiveLayer(this._par.templates.getActiveLayer()||this._lastActiveLayer,!0)},_drawDebugTools:function(){var e,t,i,n=this;if(PF.DEV&&(null===(e=this._canvas)||void 0===e||null===(t=e._par)||void 0===t||null===(i=t.opts)||void 0===i||!i.isReadOnly)){var r='display:block;position:relative;top:0;left:0;width:200px;height:200px;background:transparent url("/static/images/layout/trasnparent-pattern.png") center center;border:solid 1px gray;text:black;font-weight:bolder;';$(Object(s.b)("div",{id:"mockup-generator-mockup-debug",style:"position:absolute;top:0;left:0;z-index:4;left:-200px;display:none;"},[Object(s.b)("div","pf-bold pf-bg-white","mockupPrintZIndex: "+this._par.generatorVariant.mockupPrintZIndex),Object(s.b)("div","pf-bold pf-bg-white","colorCode: "+this._par.generatorVariant.colorCode),Object(s.b)("div",{style:r+"background:"+this._par.generatorVariant.colorCode}),Object(s.b)("div","pf-bold pf-bg-white","backgroundColor: "+this._par.generatorVariant.backgroundColor),Object(s.b)("div",{style:r+"background:"+this._par.generatorVariant.backgroundColor}),Object(s.b)("div","pf-bold pf-bg-white","backgroundImage:"),Object(s.b)("img",{style:r,src:this._par.generatorVariant.backgroundImageUrl||""}),Object(s.b)("div","pf-bold pf-bg-white","backgroundShadow:"),Object(s.b)("img",{style:r,src:this._par.generatorVariant.backgroundShadowUrl||""}),Object(s.b)("div","pf-bold pf-bg-white","baseImageUrl:"),Object(s.b)("img",{style:r,src:this._par.generatorVariant.generatorImageUrl||""})]).append(this._nodeCanvasHolder)).draggable(),Object(s.b)("div",{style:"position:absolute;top:0;left:0;z-index:4;left:0px;text-align:left;"},[Object(s.b)("button",{className:"pf-bg-transparent pf-border-0 small",onclick:function(e){var t=document.getElementById("mockup-generator-mockup-debug");t.style.display="block"===t.style.display?"none":"block"}},"Mockup Debug"),Object(s.b)("button",{className:"pf-bg-transparent pf-border-0 small",onclick:function(e){var t,i,r=document.getElementById("mockup-generator-color-debug");r.style.display="block"===r.style.display?"none":"block",null===(t=n._canvas)||void 0===t||null===(i=t._canvas)||void 0===i||i._detectPrintColorMode()}},"Color Debug"),Object(s.b)("pre",{id:"mockup-generator-color-debug",style:"text-align:left;margin:0;padding:3px;background:rgba(255,255,255,0.7);border:0;display:none;font-size:80%;"},"-")]).append(this._nodeCanvasHolder)}},_isCropToolBeta:function(){var e;return this._hasCropToolBeta&&!(null!==(e=Object(x.a)())&&void 0!==e&&e.isEmbroidery())},_resetZoomState:function(){var e=this;this._shouldCanvasBeZoomedIn()&&(this._toggleZoom(!1,!0),this._canvas._canvas._fabric.on("background:changed",(function(){e._shouldCanvasBeZoomedIn()&&(e._toggleZoom(!1,!1),e._toggleZoom(!1,!0))})))},isEventOrigin:function(e){return e&&(e===this||this._canvas.isEventOrigin(e))},_labelText:function(){var e=Object(x.a)();if(!e)return null;var t=[L.a.TYPE_EMBROIDERY_FRONT,L.a.TYPE_FRONT,L.a.TYPE_BACK,L.a.TYPE_EMBROIDERY_BACK,L.a.TYPE_EMBROIDERY_LEFT,L.a.TYPE_EMBROIDERY_RIGHT].indexOf(this._par.generatorVariant.placementId)>-1,i=e.isDtgTote()||e.isEmbroidery()||e.isDtgShirt();return t&&i?e.isEmbroidery()?lang("Embroidery area"):lang("Print area"):null},_readyCallback:function(e){var t=this;this._canvas.notifyPreview(),this._par.onReady&&setTimeout((function(){return t._par.onReady()}),100)},_shouldGridBeVisible:function(){return null!==V.isGridVisible&&this._par.isResizable?V.isGridVisible:this._shouldShowGridButton()},_shouldCanvasBeZoomedIn:function(){return!!(Object(x.c)()&&this._shouldShowZoomIn()&&null!==V.isZoomedIn&&this._par.isResizable)&&V.isZoomedIn},_toggleGrid:function(e,t){this._gridButton&&(void 0===t&&(t=e,e=!1),this._isGridVisible=t,this._gridButton.setActive(this._isGridVisible),e&&(V.isGridVisible=this._isGridVisible),this._par.template&&this._canvas.toggleGuidelines(this._isGridVisible,{center:this._shouldShowCenterLine(),sideCenter:this._shouldShowSideCenterLines(),sideCenterRatio:this._par.template.getSideCenterDistanceRatio()}))},_toggleZoom:function(e,t){this._zoomButton&&(void 0===t&&(t=e,e=!1),this._isZoomedIn=t,this._zoomButton.setActive(this._isZoomedIn),e&&(V.isZoomedIn=this._isZoomedIn),this._canvas.toggleZoom(this._isZoomedIn),this._par.templates&&this._par.templates.getChangeListener().notifyZoomChanged(this._isZoomedIn))},render:function(){if(this.node.style.width=this._mockupPosition.areaWidth+"px",this.node.style.minHeight=this._mockupPosition.areaHeight+"px",this.node.style.paddingTop=this.node.style.minHeight,this._nodeViewActions=Object(s.b)("div").append(this.node),this._par.isResizable&&!this._par.disableLayerManipulations){this._renderViewActions(),s.a.clearNode(this._nodePrintQualityHolder),this.nodePrintQuality.append(this._nodePrintQualityHolder);var e={maxDPI:600,requiredDPI:this._par.templates.getRequiredDpi(),onAlign:this._onAlign,onReset:this._onReset,onFit:this._onFit,onMove:this._onMove,onScale:this._onScale,showButtons:this._par.isOrderFlow,showFit:this._isAllOverProduct()};this._controls=new h(e),s.a.clearNode(this._nodeControlsHolder),this._controls.append(this._nodeControlsHolder),this._updateSliderState()}this._par.isProductlessMode||(this.displayOutOfBoundsIndicator(),this.displayQualityIndicators(),this.displayCustomizableTextLayerError()),this._calculateWarningMessagePosition(),this._renderCropActions()},_renderViewActions:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(x.c)()){e.next=2;break}return e.abrupt("return");case 2:return s.a.clearNode(t._nodeViewActions),n=new c,t._shouldShowGridButton()&&(t._gridButton=n.addButton().setName(dlang("dashboard","Grid off"),dlang("dashboard","Grid on")).setIconClass("pf-i-grid-large").setActive(t._isGridVisible).setCallback(t._toggleGrid.bind(t))),t._shouldShowZoomIn()&&(t._zoomButton=n.addButton().setName(lang("Zoom in"),lang("Zoom out")).setImgSrc(null,PF.ASSETS_URL+"generator/zoom-in-icon.svg").setIconClass("action-zoom","pf-i pf-i-fullscreen-exit").setActive(t._isZoomedIn).setCallback(t._toggleZoom.bind(t))),e.next=8,Object(D.q)(D.e);case 8:return t._hasPrintPreviewBeta=e.sent,t._shouldUsePrintPreview()&&(n.addDivider(),t._printPreviewButton=n.addButton().setIconClass("pf-i pf-i-close","pf-i pf-i-water-plus").setIsIndicator(!0).setActive(t._isPrintPreview)),e.next=12,Object(D.q)(D.f);case 12:t._hasCropToolBeta=e.sent,null!==(i=t._par.variantArea)&&void 0!==i&&i.hasUnrelatedTemplates()&&(t._unrelatedTemplatesWarningButton=n.addButton().setIconClass("pf-i pf-i-close","pf-i pf-i-alert").setIsIndicator(!0).setActive(!0).setCallback(t._toggleUnrelatedTemplatesPopover.bind(t)),$(t._unrelatedTemplatesWarningButton.node).off("blur").on("blur",t._closeOnBlurUnrelatedTemplatesPopover.bind(t)),t._par.shouldShowUnrelatedTemplatesPopover&&t._par.shouldShowUnrelatedTemplatesPopover()&&t._showUnrelatedTemplatesPopover()),n.hasButtons()&&n.render().append(t._nodeViewActions);case 15:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){B(a,n,r,o,s,"next",e)}function s(e){B(a,n,r,o,s,"throw",e)}o(void 0)}))})()},_renderCropActions:function(){var e=this;s.a.clearNode(this._nodeCropActionsHolder),this._nodeCropActions=Object(s.b)("div","generator-mockup__actions generator-mockup__crop-actions pf-position-static pf-position-md-absolute pf-d-none pf-d-md-block",[Object(s.b)("div","pf-d-flex pf-my-8 pf-my-md-0",[Object(s.b)("a",{className:"crop-action-btn pf-btn pf-btn-secondary pf-mr-8",onclick:function(){var t;null===(t=e._canvas)||void 0===t||t.cancelCrop()}},[Object(s.b)("i","pf-i pf-i-24 pf-i-close pf-mr-8"),dclang("generator","Cancel crop modification to image","Cancel")]),Object(s.b)("a",{className:"crop-action-btn pf-btn pf-btn-primary pf-mb-12",onclick:function(){var t;null===(t=e._canvas)||void 0===t||t.applyCrop()}},[Object(s.b)("i","pf-i pf-i-24 pf-i-check pf-mr-8"),dclang("generator","Apply crop modification to image","Apply")])])]),this._nodeCropActions.append(this._nodeCropActionsHolder)},_showPrintPreviewPopover:function(){var e=this;this._printPreviewButton&&!this._printPreviewPopover&&(this._printPreviewPopover=new R.a(this._printPreviewButton.node,"","",{container:"#js--product-push-designer",placement:"left",trigger:"focus",closeOnResize:!0,template:Object(s.b)("div","popover popover--quality-tag",[Object(s.b)("div","arrow"),Object(s.b)("div","row no-gutters",[Object(s.b)("div","col-3 pf-text-center",[Object(s.b)("img",{className:"img-responsive pf-pr-12",src:PF.ASSETS_URL+"generator/ill-white-underbase.svg"})]),Object(s.b)("div","col-8",[Object(s.b)("div","popover-header pf-h5","Weâ€™ve enabled White Underbase Preview"),Object(s.b)("div","popover-body pf-ui-caption pf-text-muted pf-mt-16",[Object(s.b)("p","","This shows mockup preview much closer to the expected results, so you can adjust your design accordingly"),Object(s.b)("a",{href:langUrl("/transparency-in-dtg-files"),target:"_blank"},dlang("generator","More info"))])]),Object(s.b)("div","col-1 pf-text-center",[Object(s.b)("i","pf-i pf-i-close pf-i-18 popover__close-quality-tag")])])])}),setTimeout((function(){$(e._printPreviewButton.node).trigger("focus")}),10))},_showUnrelatedTemplatesPopover:function(){var e=this;this._unrelatedTemplatesWarningButton&&!this._unrelatedTemplatesPopover&&(this._unrelatedTemplatesWarningButton.setActive(!1),this._unrelatedTemplatesPopover=new R.a(this._unrelatedTemplatesWarningButton.node,"","",{container:"#js--product-push-designer",trigger:"focus",placement:"left",closeOnResize:!0,template:Object(s.b)("div","popover popover--unrelated-templates popover--extended",[Object(s.b)("div","arrow"),Object(s.b)("div","row no-gutters",[Object(s.b)("div","col-12 col-xs-3",[Object(s.b)("img",{className:"img-responsive pf-mr-auto",src:PF.ASSETS_URL+"generator/ill-sizes.svg"})]),Object(s.b)("div","col-12 col-xs-9",[Object(s.b)("div","popover-header pf-h5 pf-mb-8",dlang("generator","Designs for each product size need to be adjusted separately!")),Object(s.b)("p","pf-ui-caption pf-text-muted pf-mb-0",dlang("generator","The scale and placement of your design need to be adjusted for each product size separately"))])])])},(function(){e._unrelatedTemplatesPopover=null})),setTimeout((function(){$(e._unrelatedTemplatesWarningButton.node).trigger("focus")}),1500))},_toggleUnrelatedTemplatesPopover:function(){this._unrelatedTemplatesPopover?(this._unrelatedTemplatesPopover._destroy(),this._unrelatedTemplatesWarningButton.setActive(!0)):this._showUnrelatedTemplatesPopover()},_closeOnBlurUnrelatedTemplatesPopover:function(){this._unrelatedTemplatesPopover&&this._toggleUnrelatedTemplatesPopover()},setControlsVisibility:function(e){this._controls&&(e?(this._controls.show(),this.displayQualityIndicators()):(this._controls.hide(),s.a.addClassName(this.nodePrintQuality,"pf-d-none")))},_updateSliderState:function(){if(this._controls){var e=this._getSelectedGroupLayers(),t=e.length?e[0]:this._getSelectedLayer();if(t&&this._par&&this._par.template&&this._par.template.fillMode){var i=t.isCropPositionUpdateNeeded()?t.cropPosition:t.position,n="w"===i.getScaleDimensionByFillMode(this._par.template.fillMode)?i.width/i.areaWidth*100:i.height/i.areaHeight*100;this._controls.setSliderValue(n)}}},_shouldShowGridButton:function(){var e=Object(x.a)();return this._par.isResizable&&!this._par.disableLayerManipulations&&e&&(e.isDtgShirt()||e.isDtgTote()||e.isJewelry())&&this._shouldShowZoomIn()},_shouldShowZoomIn:function(){var e;if(this._par.hideZoomButton)return!1;var t=[L.a.TYPE_LABEL_INSIDE,L.a.TYPE_LABEL_OUTSIDE,L.a.TYPE_HANG_TAG],i=[m.a.TYPE_EMBROIDERY,m.a.TYPE_JEWELRY,m.a.TYPE_T_SHIRT];return!(t.indexOf(this._par.generatorVariant.placementId)>-1)&&i.indexOf(null===(e=Object(x.a)())||void 0===e?void 0:e.type)>-1},_shouldUsePrintPreview:function(){var e,t=[L.a.TYPE_LABEL_INSIDE,L.a.TYPE_LABEL_OUTSIDE,L.a.TYPE_HANG_TAG],i=[m.a.TYPE_T_SHIRT];return!(t.indexOf(this._par.generatorVariant.placementId)>-1)&&(this._hasPrintPreviewBeta&&i.indexOf(null===(e=Object(x.a)())||void 0===e?void 0:e.type)>-1)},_shouldShowCenterLine:function(){var e=Object(x.a)();return e&&(!e.isCutSew()||[L.a.TYPE_FRONT,L.a.TYPE_BACK].indexOf(this._par.template.placementId)>-1)},_shouldShowSideCenterLines:function(){var e;return!(null===(e=Object(x.a)())||void 0===e||!e.isMug())},_onPositionChanged:function(e,t,i,n,r){i||(i=this),e=this._par.templates.getFreshLayer(e),n?this._par.templates.updateCropLayerPosition(e,t,i,r):(e=this._par.templates.updateLayerPosition(e,t,i),t.canMoveOutOfBounds||(this._lastActiveLayer=e))},_onTextChanged:function(e,t){t||(t=this),e=this._par.templates.getFreshLayer(e),e=this._par.templates.updateLayerText(e,t),this._lastActiveLayer=e},_onPreview:function(e,t,i){var n=e();if(i){if(String(this._lastPreviewStringWoPulse)===String(n))return;this._lastPreviewStringWoPulse=n}else{if(String(this._lastPreviewString)===String(n))return;this._lastPreviewString=n}t||(t=this),this._par.templates&&this._par.templates.getChangeListener().notifyPreviewChanged(n,this._par.template,t,i)},_onCropStateChanged:function(e){e?(s.a.addClassName(this._nodeCropActions,"generator-mockup__crop-actions--active"),s.a.removeClassName(this._nodeCropActions,"pf-d-none")):(s.a.removeClassName(this._nodeCropActions,"generator-mockup__crop-actions--active"),s.a.addClassName(this._nodeCropActions,"pf-d-none")),this._toggleAllWarningBanners(e)},_onPrintPreviewChange:function(e){var t=e();this._isPrintPreview!==t&&(this._par.placementOptions.setPlacementPrintPreview(this._par.generatorVariant.placementId,t),this._isPrintPreview=t,this._printPreviewButton&&(this._printPreviewButton.setActive(this._isPrintPreview),this._showPrintPreviewPopover()))},_onAlign:function(e,t){t&&t.stopPropagation();var i=this._getSelectedLayer();if(i){var n=i.isCropPositionUpdateNeeded(),r=(n?i.cropPosition:i.position).getClone().align(e);n?this._par.templates.updateCropLayerPosition(i,r,this,C.a):this._par.templates.updateLayerPosition(i,r)}},_onMove:function(e,t,i){var n=this._getSelectedLayer();if(n){var r=n.isCropPositionUpdateNeeded(),a=(r?n.cropPosition:n.position).getClone();a.left+=e,a.top+=t,r?this._par.templates.updateCropLayerPosition(n,a,i,C.a):this._par.templates.updateLayerPosition(n,a,i)}},_onScale:function(e,t){var i=this._getSelectedLayer();if(i&&this._par&&this._par.template&&this._par.template.fillMode){var n=i.isCropPositionUpdateNeeded(),r=this._par.templates.getFreshLayer(i),a=(n?r.cropPosition:r.position).getClone();"w"===a.getScaleDimensionByFillMode(this._par.template.fillMode)?a.setWidthScale(e/100):a.setHeightScale(e/100),n?this._par.templates.updateCropLayerPosition(i,a,t,C.c):this._par.templates.updateLayerPosition(i,a,t)}},_onReset:function(e){e&&e.stopPropagation();var t=this._getSelectedLayer();t&&this._par.templates.resetLayer(t)},_onFit:function(e){e&&e.stopPropagation();var t=this._getSelectedLayer();t&&this._par.templates.fitLayerSize(t)},updateLayersPositions:function(e,t,i){this.isEventOrigin(i)||(t?this._canvas.setLayer(t):this._canvas.setLayers(e?e.layersToArray():[]),this._updateSliderState())},showActiveLayer:function(e){if(e){var t=this._getSelectedLayer(),i=this._canvas.getActiveLayer();(t||i)&&(t&&t.uniqueId===e.uniqueId&&i&&i.uniqueId===e.uniqueId||this._canvas.showActiveLayer(e.uniqueId))}},showActiveGroup:function(e){if(e){var t=this._getSelectedGroupLayers(),i=this._canvas.getActiveGroupLayers();(null!=t&&t.length||i.length)&&(null!=t&&t.length&&t[0].groupId===e&&null!=i&&i.length&&i[0].groupId===e||this._canvas.showActiveGroup(e))}},setActiveLayer:function(e,t,i){var n=e&&this._lastActiveLayer&&this._lastActiveLayer.uniqueId===e.uniqueId;this._lastActiveLayer=e,this._lastActiveLayerGroup=null,this._bindKeypressEvents(),this._controls&&(this.showActiveLayer(e),this._updateSliderState()),n||this._clearAllWarningBanners(),i&&!n&&this._lastActiveLayer&&r.a.unblockEvent("transparency-warning-show"),t||this._par.templates.setActiveLayer(e,i)},_clearAllWarningBanners:function(){this._removeQualityAlert(!1),this._removeCustomizableTextLayerError(),this._removeRemoveBgBanner(!0),this._removeOutOfBoundsAlert(!0)},_toggleAllWarningBanners:function(e){var t,i,n;[this._nodeImageQualityMessage,null===(t=this._nodeCustomizableTextLayerError)||void 0===t?void 0:t.node,null===(i=this._nodeRemoveBackgroundMessage)||void 0===i?void 0:i.node,null===(n=this._nodeLayerOutOfBounds)||void 0===n?void 0:n.node].forEach((function(t){t&&(e?s.a.addClassName(t,"pf-d-none"):s.a.removeClassName(t,"pf-d-none"))}))},setActiveGroup:function(e,t,i){var n,a=(null==e?void 0:e.length)&&(null===(n=this._lastActiveLayerGroup)||void 0===n?void 0:n.length)&&this._lastActiveLayerGroup[0].groupId===e[0].groupId;if(this._lastActiveLayerGroup=e,this._lastActiveLayer=null,this._bindKeypressEvents(),this._controls){var o=e[0].groupId;this.showActiveGroup(o),this._updateSliderState()}a||this._clearAllWarningBanners(),i&&!a&&this._lastActiveLayerGroup&&r.a.unblockEvent("transparency-warning-show"),t||this._par.templates.setActiveGroup(e,i)},_onArrowKeyPress:function(e){var t=this;if(!this._par.disableLayerManipulations&&this._par.isResizable)if(Object(a.a)(this.node)){if(e.target.getAttribute("data-prevent"))if(e.target.getAttribute("data-prevent").split(", ").indexOf(e.key)>-1)return;this._getSelectedLayers().forEach((function(i){return t._onArrowKeyPressProcessLayer(e,i)}))}else this._unbindKeypressEvents();else this._unbindKeypressEvents()},_onArrowKeyPressProcessLayer:function(e,t){if(t&&!t.isCropState){var i=t.isCropPositionUpdateNeeded(),n=i?t.cropPosition.getClone():t.position.getClone(),r=this._isPromo()?10:.1,a=["TEXTAREA","INPUT"],o=document.activeElement.className.split(" "),s=["font-dropdown__font"].some((function(e){return o.indexOf(e)>-1}));switch(e.which){case $.ui.keyCode.LEFT:n.left-=r;break;case $.ui.keyCode.UP:s||(n.top-=r);break;case $.ui.keyCode.RIGHT:n.left+=r;break;case $.ui.keyCode.DOWN:s||(n.top+=r);break;case $.ui.keyCode.BACKSPACE:case $.ui.keyCode.DELETE:var l;if(!this._par.isCustomizingMode&&a.indexOf(document.activeElement.tagName)<0)null!==(l=this._lastActiveLayerGroup)&&void 0!==l&&l.length?this._onGroupRemoved():this._onLayerRemoved(this._lastActiveLayer)}switch(e.which){case $.ui.keyCode.LEFT:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:e.preventDefault(),i?this._par.templates.updateCropLayerPosition(t,n,this,C.a):this._par.templates.updateLayerPosition(t,n,this);break;case $.ui.keyCode.BACKSPACE:case $.ui.keyCode.DELETE:a.indexOf(document.activeElement.tagName)<0&&e.preventDefault()}}},_onLayerRemoved:function(e){if(this._par.onLayerRemoved)return this._par.onLayerRemoved(e)},_onGroupRemoved:function(){var e=this;this._getSelectedGroupLayers().forEach((function(t){return e._onLayerRemoved(t)}))},displayQualityIndicators:function(){if(this._par.templates){var e=this._getSelectedLayer();if(e){var t=this._par.templates.getTemplateByLayer(e),i=this._par.templates.getQuality(),n=i.getQualityPercent(e),r=t&&t.technique===m.a.TECHNIQUE_EMBROIDERY,a=t?t.placementId:"",o=i.getQualityKey(n,e,r,this._par.isCustomizingMode,null,a);this._showQualityAlert(o),this._updateQualityText(o,e)}}},displayOutOfBoundsIndicator:function(){var e=this;if(this._par.templates&&!this._par.disableOutOfBoundsErrorMessages){var t=this._getSelectedGroupLayers(),i=this._getSelectedLayer();if(i||t.length){var n=!1,r=t.length?t:[i],a=this._par.templates.getTemplateByLayer(r[0]),o=this._par.templates.getQuality(),s=this._isAllOverProduct(),l=r.map((function(e){var t;return e.percent=o.getQualityPercent(e),e.qualityKey=E.a.QUALITY_GOOD,!s&&e.isPartiallyOutOfBounds()&&(e.qualityKey=E.a.QUALITY_MEDIUM),null!==(t=Object(x.a)())&&void 0!==t&&t.isEmbroidery()&&a&&a.technique===m.a.TECHNIQUE_EMBROIDERY&&e.isTextLayerPartiallyOutOfBounds()&&(e.qualityKey=E.a.QUALITY_EMBROIDERY,n=!0),e})),c=l.filter((function(e){return e.qualityKey!==E.a.QUALITY_GOOD}));(c.length?c:l).forEach((function(t){!e._par.showImageQualityWarning||n||t.patternType||e._showOutOfBoundsAlert(t.qualityKey,t.isCustomizable)}));var d=a&&a.technique===m.a.TECHNIQUE_EMBROIDERY;l.forEach((function(t){o.getQualityKey(t.percent,t,d,e._par.isCustomizingMode)!==E.a.QUALITY_GOOD?e.displayQualityIndicators():e._removeQualityAlert(!1)}))}}},displayCustomizableTextLayerError:function displayCustomizableTextLayerError(){var e=this;if(this._par.templates&&this._par.showImageQualityWarning){var t=this._getSelectedLayer(),i=t?[t]:this._getSelectedGroupLayers();i.length&&(this._nodeCustomizableTextLayerError&&this._removeCustomizableTextLayerError(),i.forEach((function(t){t.isCustomizable&&(t.hasMultipleLines||t.arcAngle?e._nodeCustomizableTextLayerError=new O.a({className:"customizable-warning-banner",type:"danger",content:dlang("generator","Personalization tool doesn't support text arcs or multiple lines")}):t.colorGraphic?e._nodeCustomizableTextLayerError=new O.a({className:"customizable-warning-banner",type:"danger",content:dlang("generator","Personalization tool doesn't support graphic colors")}):t.cropPosition&&(e._nodeCustomizableTextLayerError=new O.a({className:"customizable-warning-banner",type:"danger",content:dlang("generator","Personalization tool doesn't support cropped images")})),e._nodeCustomizableTextLayerError&&e._nodeCustomizableTextLayerError.append(e.node))})))}},_removeCustomizableTextLayerError:function _removeCustomizableTextLayerError(){var e;null===(e=this._nodeCustomizableTextLayerError)||void 0===e||e.remove(),this._nodeCustomizableTextLayerError=null},displayRemoveBackgroundMessage:function(e){var t;this._nodeRemoveBackgroundMessage&&this._removeRemoveBgBanner();var i=(M(t={},k.a.REMOVE_BG_MESSAGE_NO_BACKGROUND_FOUND,{type:"danger",heading:dclang("generator","background removal","Please review your image"),content:dclang("generator","background removal","The background can't be removed because it either doesn't have enough contrast, isn't a solid color, or is too detailed. Please adjust the image and re-upload it or upload a different one.")}),M(t,k.a.REMOVE_BG_MESSAGE_OTHER_ACTIVE_TASK,{type:"danger",content:dclang("generator","background removal","Another process is currently active. Please close any other open tabs of this page and try again.")}),M(t,k.a.REMOVE_BG_MESSAGE_LIMIT_REACHED,{type:"danger",heading:dclang("generator","background removal","Uh-oh! Our background cutting robot needs a break!"),content:dclang("generator","background removal","Currently, our AI can't process more images. Please try again in a minute.")}),M(t,k.a.REMOVE_BG_MESSAGE_ERROR,{type:"danger",content:dlang("site","Something went wrong, please try again!")}),t),n=M({},k.a.REMOVE_BG_MESSAGE_OK,{type:"success",content:dclang("generator","background removal","Success, background removed!"),duration:1e3});if(i[e]){var r={className:"remove-bg-banner",closable:!0,onAfterElementRemoved:this._removeRemoveBgBanner.bind(this)},a=Object.assign({},r,i[e]);this._nodeRemoveBackgroundMessage=new O.a(a),this._nodeRemoveBackgroundMessage.append(this.node),this._calculateWarningMessagePosition()}else n[e]&&new A.a(n[e])},_getRemoveBgMessageHeight:function(){return this._nodeRemoveBackgroundMessage?$(this._nodeRemoveBackgroundMessage.node).height()+40:0},_getQualityMessageHeight:function(){return $(".mockup-quality-banner").length?$(".mockup-quality-banner").height()+40:0},_getCustomizableMessageHeight:function(){return this._nodeCustomizableTextLayerError?$(this._nodeCustomizableTextLayerError.node).height()+40:0},_getOutOfBoundsMessageHeight:function(){return this._nodeLayerOutOfBounds?$(this._nodeLayerOutOfBounds.node).height()+40:0},_getEmbroideryMessageHeight:function(){return $(".embroidery-image-quality-banner").length?$(".embroidery-image-quality-banner").height()-42:0},_getLayersRepositionedWarningHeight:function(){var e=document.getElementsByClassName(N.a);return e.length?e[0].clientHeight+40:0},_calculateWarningMessagePosition:function(){var e=this._getCustomizableMessageHeight();if(this._nodeImageQualityMessage&&$(".mockup-quality-banner").css({top:e,transition:"all 0.2s ease-in"}),e+=this._getQualityMessageHeight(),this._nodeRemoveBackgroundMessage&&$(this._nodeRemoveBackgroundMessage.node).css({top:e,transition:"all 0.2s ease-in"}),e+=this._getRemoveBgMessageHeight(),$(".embroidery-image-quality-banner").length&&$(".embroidery-image-quality-banner").css({top:e,transition:"all 0.2s ease-in"}),e+=this._getEmbroideryMessageHeight(),document.getElementsByClassName(N.a).length){var t=document.getElementsByClassName(N.a)[0];t.style.top=e+"px",t.style.transition="all 0.2s ease-in"}e+=this._getLayersRepositionedWarningHeight(),this._nodeLayerOutOfBounds&&$(this._nodeLayerOutOfBounds.node).css({top:e,transition:"all 0.2s ease-in"})},_getSelectedLayer:function(){var e=this._par.templates.getActiveLayer()||this._lastActiveLayer;return e?this._par.templates.getFreshLayer(e):null},_getSelectedGroupLayers:function(){var e=this,t=this._par.templates.getActiveGroupLayers()||this._lastActiveLayerGroup;return null!=t&&t.length?t.map((function(t){return e._par.templates.getFreshLayer(t)})).filter((function(e){return null==e?void 0:e.groupId})):[]},_getSelectedLayers:function(){var e=this._getSelectedLayer();return e?[e]:this._getSelectedGroupLayers()},_removeOutOfBoundsAlert:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=this._nodeLayerOutOfBounds)||void 0===e||e.remove(),this._nodeLayerOutOfBounds=null,t||this._calculateWarningMessagePosition()},_removeRemoveBgBanner:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=this._nodeRemoveBackgroundMessage)||void 0===e||e.remove(),this._nodeRemoveBackgroundMessage=null,t||this._calculateWarningMessagePosition()},_removeQualityAlert:function(e){this._nodeImageQualityMessage&&(this._qualityMessageClosedManually=e,this._nodeImageQualityMessage.remove(),this._nodeImageQualityMessage=null,this._qualityKey===E.a.QUALITY_TRANSPARENCY&&this._qualityMessageClosedManually&&(r.a.trackEvent("transparency-warning-hide",{event:"transparency-warning",eventCategory:"Generator transparency warning message",eventAction:"Message pop-up closed",eventLabel:this._getActiveLayerFileId()}),this._par.templates.closedTransparencyWarnigns[this._lastActiveLayer.uniqueId]=!0,r.a.unblockEvent("transparency-warning-show"),this._onMouseOutQualityAlert()),this._qualityKey=null,this._calculateWarningMessagePosition())},_onMouseOverQualityAlert:function(){var e=this;this._qualityKey===E.a.QUALITY_TRANSPARENCY&&(this._transparencyWarningHoverTimeout||(this._transparencyWarningHoverTimeout=[]),this._transparencyWarningHoverTimeout.push(setTimeout((function(){r.a.trackEvent("transparency-warning-hover",{event:"transparency-warning",eventCategory:"Generator transparency warning message",eventAction:"Customer hovered over the message",eventLabel:e._getActiveLayerFileId()},!0)}),4e3)))},_onMouseOutQualityAlert:function(){this._qualityKey===E.a.QUALITY_TRANSPARENCY&&(this._transparencyWarningHoverTimeout&&(this._transparencyWarningHoverTimeout.forEach((function(e){return clearTimeout(e)})),this._transparencyWarningHoverTimeout=[]),r.a.unblockEvent("transparency-warning-hover"))},_getActiveLayerFileId:function(){var e=this._par.templates?this._par.templates.getActiveLayer():null;return e.fileItem?e.fileItem.fileId:null},_showQualityAlert:function(e){if(this._par.showImageQualityWarning){var t=e===E.a.QUALITY_GOOD,i=e===E.a.QUALITY_MEDIUM,n=this._qualityMessageClosedManually;t||i&&n?this._nodeImageQualityMessage&&this._removeQualityAlert(!1):(this._nodeImageQualityMessage||(this._nodeImageQualityMessage=Object(s.b)("div",{prop:{onmouseover:this._onMouseOverQualityAlert.bind(this),onmouseleave:this._onMouseOutQualityAlert.bind(this)}})),this._nodeImageQualityMessage.append(this.node),this._updateQualityAlertText(e),e===E.a.QUALITY_TRANSPARENCY&&this._nodeImageQualityMessage.className&&this._lastActiveLayer&&!this._par.templates.closedTransparencyWarnigns[this._lastActiveLayer.uniqueId]&&r.a.trackEvent("transparency-warning-show",{event:"transparency-warning",eventCategory:"Generator transparency warning message",eventAction:"Message appeared",eventLabel:this._getActiveLayerFileId()},!0),this._qualityKey=e)}},_showOutOfBoundsAlert:function(e,t){e===E.a.QUALITY_GOOD?this._nodeLayerOutOfBounds&&this._removeOutOfBoundsAlert():(this._nodeLayerOutOfBounds||(this._nodeLayerOutOfBounds=new O.a({className:"out-of-bounds-banner",type:"warning",content:t?lang("Make sure all design elements fit inside the print area"):lang("Part of your design layer is outside the print area."),closable:!0,onCloseClick:this._removeOutOfBoundsAlert.bind(this)})),this._nodeLayerOutOfBounds.append(this.node),this._calculateWarningMessagePosition())},_updateQualityAlertText:function(e){var t,i=e===E.a.QUALITY_MEDIUM,r=e===E.a.QUALITY_BAD_UPSCALE,a=e===E.a.QUALITY_TRANSPARENCY,o=e===E.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT,l=this._qualityMessageClosedManually,c=null===(t=Object(x.a)())||void 0===t?void 0:t.isEmbroidery(),d=this._par.isCustomizingMode;if(!(l&&(i||r)||d&&r||a&&this._lastActiveLayer&&this._par.templates.closedTransparencyWarnigns[this._lastActiveLayer.uniqueId]||c&&!o)){var u={};if(u[E.a.QUALITY_GOOD]=null,u[E.a.QUALITY_MEDIUM]={type:"warning",heading:dlang("generator","We recommend using a larger image"),content:dlang("generator","A larger image will give you better print results"),closable:!0},u[E.a.QUALITY_EMBROIDERY]={type:"danger",content:n.a.EMBROIDERY_OUT_OF_BOUNDS},u[E.a.QUALITY_BAD]=this._par.isCustomizingMode||this._getSelectedLayer().isLicensedAssetLayer()?{type:"danger",heading:dlang("generator","This file is too small to generate print files"),content:dlang("generator","Please upload a new file")}:c?{type:"danger",heading:dlang("generator","Your image doesn't meet our print requirements"),content:dlang("generator","Scale down the image to meet the minimum requirements or upload a new image")}:{type:"danger",heading:dlang("generator","Your image doesn't meet our print requirements"),content:dlang("generator","Scale down the image to meet the minimum requirements or upload a new image"),buttonText:dlang("generator","Scale down"),onButtonClick:this._scaleDownToUpscale.bind(this)},u[E.a.QUALITY_BAD_UPSCALE]={type:"warning",heading:dlang("generator","We made your image larger"),content:dlang("generator","If you want even better print quality, please upload a larger image"),closable:!0},u[E.a.TEXT_TOO_SMALL]={type:"warning",content:dlang("dashboard","Minimum recommended font size is 0.275 â€“ smaller text may not be easily readable."),closable:!0},u[E.a.EMBROIDERY_TEXT_TOO_SMALL]={type:"danger",content:n.a.EMBROIDERY_TEXT_TOO_SMALL},u[E.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT]={type:"danger",heading:n.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT,content:dlang("generator","Please scale down your text or pick a different font"),buttonText:dlang("generator","Scale down"),onButtonClick:this._scaleDownText.bind(this)},u[E.a.EMBROIDERY_TEXT_OVERLAPPING]={type:"danger",content:n.a.EMBROIDERY_LAYERS_OVERLAPPING},u[E.a.QUALITY_TRANSPARENCY]={type:"warning",heading:dlang("generator","Your file contains semi-transparent elements"),content:dlang("generator","This could affect print quality. We suggest creating a graphic with solid colors only."),buttonText:dlang("generator","More info"),onButtonClick:function(e){window.open(langUrl("/transparency-in-dtg-files"),"_blank")},closable:!0},u[e]){var h={className:"mockup-quality-banner",onCloseClick:this._removeQualityAlert.bind(this,!0)},p=Object.assign({},h,u[e]),g=new O.a(p);s.a.clearNode(this._nodeImageQualityMessage),g.append(this._nodeImageQualityMessage),this._calculateWarningMessagePosition()}}},_scaleDownToUpscale:function(){var e=this._par.templates.getRequiredDpi(),t=this._par.templates.getQuality().shouldSkipUpscale(this._getSelectedLayer())?e:Math.round(e/E.a.UPSCALE_MULTIPLIER);this._par.templates.resizeImageLayerToDPI(this._getSelectedLayer(),t)},_scaleDownText:function(){if(this._lastActiveLayer.font){var e=this._par.templates.getTemplateByLayer(this._lastActiveLayer),t=e.technique,i=e.placementId,n=this._lastActiveLayer.font.getResizedTextHeight(t,i);this._par.templates.resizeTextLayerToHeight(this._lastActiveLayer,n)}},_updateQualityText:function(e,t){if(this._par.isResizable&&!this._par.disableLayerManipulations){s.a.clearNode(this.nodePrintQuality);var i=V.qualityMap;Object(s.b)("span","pf-pr-12",[t instanceof o.a?dlang("generator","Clipart width"):dlang("generator","File width"),": ",Object(s.b)("span","pf-bold",t.position.width.toFixed(2))," ",dlang("generator","Height"),": ",Object(s.b)("span","pf-bold",t.position.height.toFixed(2)),Object(s.b)("span",{className:"pf-i pf-i-information pf-i-18 pf-text-gray pf-ml-2 pf-mb-2",attr:{title:dlang("generator","These units aren't inches or cm! Use them as a reference point for your design size."),"data-toggle":"tooltip"}})]).append(this.nodePrintQuality),Object(s.b)("span",{innerHTML:t.isVector()?dlang("generator",'Print quality: <span class="pf-bold {0}">{1} / vector graphics</span>').format(i[e][0],i[e][1]):dlang("generator",'Print quality: <span class="pf-bold {0}">{1} / {2} DPI</span>').format(i[e][0],i[e][1],t.getDPI())}).append(this.nodePrintQuality),$(this.node).find('[data-toggle="tooltip"]').tooltip({container:document.body}).on("click",(function(e){$(this).tooltip("hide")}))}},_bindKeypressEvents:function(){this._unbindKeypressEvents(),document.body.addEventListener("keydown",this._onArrowKeyPress)},_unbindKeypressEvents:function(){document.body.removeEventListener("keydown",this._onArrowKeyPress)},getPreviewImageEncodedString:function(){return this._canvas.getPreviewImageString()},getCanvas:function(){return this._canvas},hideNodeControlsHolder:function(){s.a.addClassName(this._nodeControlsHolder,"pf-d-none")},showNodeControlsHolder:function(){s.a.removeClassName(this._nodeControlsHolder,"pf-d-none")},_isAllOverProduct:function(){var e=Object(x.a)();return this._par.templates.isCoverMode()&&e&&!(e.isPhoneCase()||e.isPoster()||e.isCanvas()||e.isFramedPoster())},_isPromo:function(){var e;return(null===(e=this._par.template)||void 0===e?void 0:e.technique)===m.a.TECHNIQUE_PROMO}},s.a.Base);V.qualityMap=(M(S={},E.a.QUALITY_GOOD,["pf-text-green",clang("quality rating","Good")]),M(S,E.a.QUALITY_MEDIUM,["pf-text-yellow-dark",clang("quality rating","Average")]),M(S,E.a.QUALITY_BAD,["pf-text-red",clang("quality rating","Poor")]),M(S,E.a.QUALITY_BAD_UPSCALE,["pf-text-yellow-dark",clang("quality rating","Average")]),M(S,E.a.QUALITY_EMBROIDERY,["pf-text-red",clang("quality rating","Poor")]),M(S,E.a.QUALITY_TRANSPARENCY,["pf-text-yellow-dark",clang("quality rating","Average")]),M(S,E.a.TEXT_TOO_SMALL,["pf-text-yellow-dark",clang("quality rating","Average")]),M(S,E.a.EMBROIDERY_TEXT_TOO_SMALL,["pf-text-red",clang("quality rating","Poor")]),M(S,E.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT,["pf-text-red",clang("quality rating","Poor")]),M(S,E.a.EMBROIDERY_TEXT_OVERLAPPING,["pf-text-red",clang("quality rating","Poor")]),S),V.qualityTagTextMap=M({},E.a.QUALITY_BAD_UPSCALE,{header:dlang("generator","Our AI adjusted your image"),content:dlang("generator","It now meets our print requirements")}),V.TagPopoverClosed={},V.TagCurrOpenPopover=null,V.TagPopoverRemove=function(){V.TagCurrOpenPopover&&(V.TagCurrOpenPopover.destroy(),V.TagCurrOpenPopover=null)},V.isGridVisible=null,V.isZoomedIn=null,V.resetGrid=function(){V.isGridVisible=null},V.resetZoom=function(){V.isZoomedIn=null},window&&((globalThis||{}).PFComponentsGeneratorMockup=V)},"Mg/F":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({colors:null,disabledColors:null,highlightedColors:null,highlightColorsAsError:null,color:null,colorGraphic:null,onChange:null,hideRGB:null,scrollToDropDown:null,nodeDropdownFooter:null,disableDropdown:null,disableNoneValue:null,showColorInHeader:null,boundsCheckQuery:null,hasGraphics:!1,areaWidthForGraphics:null,getMinDpiForGraphics:null,hasProductlessScale:!1});window&&((globalThis||{}).PFComponentsColorDropdownPar=n)},NLc6:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({language:"",type:"",value:"",toArray:function(){return{type:this.type,language:this.language,value:this.value}}});n.fromArray=function(e){var t=new n;return t.language=e.language||"",t.type=e.type||"",t.value=e.value||"",t},n.TYPE_TITLE="title",n.TYPE_DESCRIPTION="description",n.TYPES=[n.TYPE_TITLE,n.TYPE_DESCRIPTION],window&&((globalThis||{}).PFItemsProductDetailTranslation=n)},NXHT:function(e,t,i){"use strict";i.r(t),i.d(t,"PFItemsOrderLineItem",(function(){return v}));var n=i("6t3j"),r=i("EqHI"),a=i("7QI8"),o=i("gWUq"),s=i("9Y8y"),l=(i("X5Ic"),i("qs6/")),c=i("how4"),d=i("K45J"),u=i("6JZw"),h=i("nF4n"),p=i("8l0M"),g=i("LvDl"),f=i.n(g);function _(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function m(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){_(a,n,r,o,s,"next",e)}function s(e){_(a,n,r,o,s,"throw",e)}o(void 0)}))}}var v=function(){this.options={},this.itemFiles=[]};v.prototype=new u.a,v.prototype.toArrayKeys=["itemId","uniqueId","orderId","quantity","price","priceRetail","syncVariantId","productTemplateId","externalId","name","technique","variantId","options","itemFiles","childItems","shouldCreateNewDesign","isCopy","design","designId","linkedCustomProductVariant"],v.prototype.itemId=0,v.prototype.uniqueId="",v.prototype.isReplacementFor=null,v.prototype.orderId=0,v.prototype.quantity=0,v.prototype.price=0,v.prototype.priceData=null,v.prototype.priceRetail=null,v.prototype.incompleteItem=null,v.prototype.externalId=null,v.prototype.syncVariantId=null,v.prototype.name="",v.prototype.retailPriceData=null,v.prototype.displayName="",v.prototype.storeProductName="",v.prototype.unavailableInSelectedBranches=!1,v.prototype.technique="",v.prototype.variantId=0,v.prototype.productId=0,v.prototype.isBrandingItem=null,v.prototype.isCustomProduct=!1,v.prototype.customProductVariant=null,v.prototype.options=null,v.prototype.itemFiles=null,v.prototype.isLocked=null,v.prototype.itemHash=null,v.prototype.fileTypesBeingGenerated=null,v.prototype.filesBeingGenerated=!1,v.prototype.dimensions=null,v.prototype.childItems=[],v.prototype.designId=null,v.prototype.linkedCustomProductVariant=null,v.prototype.rawDesign=null,v.prototype.shouldCreateNewDesign=!1,v.prototype.isCopy=!1,v.prototype.isGeneratingFilesFromDesign=!1,v.prototype.originalRetailValue=null,v.prototype.lowestRetailPrice=null,v.prototype.productTemplateId=null,v.prototype.hasUnsupportedTechnique=!1,v.prototype.isEditable=function(){return!this.isLocked},v.prototype.setEditable=function(e){this.isLocked=null!==e?!e:null},v.prototype.getProduct=function(){return(new n.a).getCachedProductById(this.productId)},v.prototype.getVariant=function(){return(new n.a).getCachedVariantById(this.variantId)},v.prototype.getNotes=function(){return this.options&&this.options.notes?this.options.notes:""},v.prototype.hasPrintFiles=function(){for(var e in this.itemFiles){var t=this.itemFiles[e];if(t.exists()&&t.type!=a.a.TYPE_MOCKUP)return!0}return!1},v.prototype.hasValidDesign=function(){return this.design&&this.design.isValid()},v.prototype.hasInvalidFileCount=function(){return!this.isCustomProductItem()&&this.itemFiles.some((function(e){var t=this.design&&this.design.hasPlacement(e.type);return e.exists()||e.isMockup()?e.hasTemporaryGeneratorFile()&&!t:t}),this)},v.prototype.isMissingPrintFiles=function(){return!!this.hasInvalidFileCount()||this.itemFiles.length>0&&!this.hasPrintFiles()&&!this.hasValidDesign()&&!this.isCustomProductItem()&&!this.hasGeneratorDesign()},v.prototype.hasAnyFile=function(){for(var e in this.itemFiles)if(this.itemFiles[e].exists())return!0;return!1},v.prototype.isFileTypeBeingGenerated=function(e){return this.fileTypesBeingGenerated&&this.fileTypesBeingGenerated.indexOf(e)>-1},v.prototype.getImageUrl=function(){return this.isCustomProduct?this.customProductVariant.urlImage:this.getVariant().urlImage},v.prototype.isCustomProductItem=function(){return this.isBrandingItem||this.isCustomProduct},v.prototype.isNonEditable=function(){return this.isCustomProductItem()||this.fileTypesBeingGenerated||this.filesBeingGenerated||this.hasUnsupportedTechnique},v.prototype.setFilesBeingGenerated=function(){this.filesBeingGenerated=!0},v.prototype.unsetFilesBeingGenerated=function(){this.filesBeingGenerated=!1},v.prototype.hasGeneratorDesign=function(){return!!this.isGeneratingFilesFromDesign||this.designId&&this.hasPrintFiles()},v.prototype.getCustomProductName=function(){return this.isCustomProduct?this.customProductVariant.name:this.getVariant().name},v.prototype.cacheItem=function(){(new n.a).getVariants(this.productId,(function(){}))},v.prototype.hasNativeLabel=function(){return void 0!==this.designData&&this.designData.labelTemplateType===r.a.LABEL_NATIVE},v.fromArray=function(e){var t=new v;for(var i in e.itemFiles){var n=a.a.fromArray(e.itemFiles[i]);t.itemFiles.push(n)}if(delete e.itemFiles,h.a.O2O(t,e),e.customProduct&&(t.customProduct=d.a.fromArray(e.customProduct)),e.priceData&&(t.priceData=l.a.fromArray(e.priceData)),e.customProductVariant&&(t.customProductVariant=s.a.fromArray(e.customProductVariant)),e.childItems)for(var r in e.childItems)t.childItems.push(v.fromArray(e.childItems[r]));return e.dimensions&&(t.dimensions=c.a.fromArray(e.dimensions)),e.design&&(t.rawDesign=e.design,t.design=null),t},v.prototype.getDesign=function(){return!this.design&&this.rawDesign&&(this.design=o.a.fromArray(this.rawDesign)),this.design},v.prototype.fetchFontsBeforeDesign=m(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(i.bind(null,"Jkv8"));case 2:return t=e.sent,n=t.setPFCanvasFonts,e.next=6,n();case 6:case"end":return e.stop()}}),e)}))),v.prototype.updateRetailPriceData=function(e){!this.originalRetailValue&&this.retailPriceData.currencyRate&&this.priceRetail&&(this.originalRetailValue={currency:this.retailPriceData.retailCurrency,value:this.priceRetail,valueInternalCurrency:this.retailPriceData.currencyRate*this.priceRetail}),this.lowestRetailPrice=prettyNumber(p.a.lowestRetailPrice*e.currencyRateUsd),this.retailPriceData=e,this.originalRetailValue?this.priceRetail=e.retailCurrency!==this.originalRetailValue.currency?Math.round(100*this.originalRetailValue.valueInternalCurrency/e.currencyRate)/100:this.originalRetailValue.value:this.priceRetail=null},v.prototype.hasLicensedAssetIssues=function(){for(var e in this.itemFiles){var t=this.itemFiles[e];if(t.isLicensedAsset&&!f.a.isEmpty(t.fileErrors))return!0}return!1},v.prototype.containsProContent=function(){for(var e in this.itemFiles){if(this.itemFiles[e].containsProContent)return!0}return!1},window&&((globalThis||{}).PFItemsOrderLineItem=v)},NhST:function(e,t,i){"use strict";i.d(t,"a",(function(){return q}));var n=i("wy2R"),r=i.n(n);function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"symbolRange","â€“"),o(this,"time","HH:mm"),o(this,"day","D"),o(this,"month","MMMM"),o(this,"shortMonth","MMM"),o(this,"year","YYYY"),o(this,"monthDay","".concat(this.month," ").concat(this.day)),o(this,"monthYear","".concat(this.month,", ").concat(this.year)),o(this,"shortMonthDay","".concat(this.shortMonth," ").concat(this.day)),o(this,"shortMonthDayTime","".concat(this.shortMonthDay,", ").concat(this.time)),o(this,"shortMonthDayYear","".concat(this.shortMonthDay,", ").concat(this.year)),o(this,"shortMonthYear","".concat(this.shortMonth,", ").concat(this.year)),o(this,"shortMonthDayYearTime","".concat(this.shortMonthDay,", ").concat(this.year,", ").concat(this.time)),o(this,"monthNameArray",r.a.months()),o(this,"legacyShortMonthYear","M, yyyy")}var t,i,n;return t=e,(i=[{key:"format",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=r()(e),a=r()(t),o=i?this.shortMonthDay:this.month;return n.isSame(a,"month")?this.day:o}},{key:"formatWithTime",value:function(e){return r()(e).format(this.time)}},{key:"formatWithMonth",value:function(e){return r()(e).format(this.month)}},{key:"formatWithYear",value:function(e){return r()(e).format(this.year)}},{key:"formatWithMonthYear",value:function(e){return r()(e).format(this.monthYear)}},{key:"formatWithShortMonthDay",value:function(e){return r()(e).format(this.shortMonthDay)}},{key:"formatWithShortMonthDayTime",value:function(e){return r()(e).format(this.shortMonthDayTime)}},{key:"formatWithShortMonthDayYear",value:function(e){return r()(e).format(this.shortMonthDayYear)}},{key:"formatWithShortMonthDayYearTime",value:function(e){return r()(e).format(this.shortMonthDayYearTime)}},{key:"getMonthNames",value:function(){return this.monthNameArray}}])&&a(t.prototype,i),n&&a(t,n),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=g(e);if(t){var r=g(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return h(this,i)}}function h(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t=u(i);function i(){var e;c(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return f(p(e=t.call.apply(t,[this].concat(r))),"time","h:ma"),f(p(e),"shortMonthDayTime","MMM D, "+e.time),f(p(e),"shortMonthDayYearTime","".concat(e.shortMonthDay,", ").concat(e.year,", ").concat(e.time)),e}return i}(s);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=T(e);if(t){var r=T(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return P(this,i)}}function P(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(i,e);var t=b(i);function i(){var e;v(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return I(C(e=t.call.apply(t,[this].concat(r))),"symbolHour","æ™‚"),I(C(e),"symbolMinute","åˆ†"),I(C(e),"symbolDay","æ—¥"),I(C(e),"symbolMonth","æœˆ"),I(C(e),"symbolYear","å¹´"),I(C(e),"symbolRange","ï½ž"),I(C(e),"time","h[".concat(e.symbolHour,"]m[").concat(e.symbolMinute,"]")),I(C(e),"day","D[".concat(e.symbolDay,"]")),I(C(e),"month","M[".concat(e.symbolMonth,"]")),I(C(e),"year","YYYY[".concat(e.symbolYear,"]")),I(C(e),"monthDay","".concat(e.month).concat(e.day)),I(C(e),"monthYear","".concat(e.month).concat(e.year)),I(C(e),"shortMonthDay",e.monthDay),I(C(e),"shortMonthDayYear","".concat(e.year).concat(e.monthDay)),I(C(e),"shortMonthDayYearTime","".concat(e.shortMonthDayYear," ").concat(e.time)),I(C(e),"shortMonthDayTime","".concat(e.shortMonthDayYear," ").concat(e.time)),I(C(e),"monthNameArray",Array.from({length:12},(function(t,i){return i+1+e.symbolMonth}))),I(C(e),"legacyShortMonthYear","m".concat(e.symbolMonth,"yyyy").concat(e.symbolYear)),e}return i}(s);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=N(e);if(t){var r=N(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return A(this,i)}}function A(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(i,e);var t=O(i);function i(){var e;E(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return D(L(e=t.call.apply(t,[this].concat(r))),"monthDay","".concat(e.day," ").concat(e.month)),D(L(e),"monthYear","".concat(e.month," ").concat(e.year)),D(L(e),"shortMonthDay"," ".concat(e.day," ").concat(e.shortMonth)),D(L(e),"shortMonthDayTime","".concat(e.shortMonthDay," ").concat(e.time)),D(L(e),"shortMonthDayYear","".concat(e.shortMonthDay," ").concat(e.year)),D(L(e),"shortMonthYear","".concat(e.shortMonth," ").concat(e.year)),D(L(e),"shortMonthDayYearTime","".concat(e.shortMonthDay," ").concat(e.year," ").concat(e.time)),D(L(e),"legacyShortMonthYear","M yyyy"),e}return i}(s);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=U(e);if(t){var r=U(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return V(this,i)}}function V(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(i,e);var t=B(i);function i(){var e;F(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return z(j(e=t.call.apply(t,[this].concat(r))),"month","D [de] MMMM"),e}return i}(s),H=i("sjGI");function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var q=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H.a.locale;switch(Y(this,e),t){case"en_US":return new _;case"es_ES":return new G;case"it_IT":return new R;case"ja_JP":return new w;default:return new s}}},OVdC:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("97Rx"),r=i("cvaF"),a=i("n5ho"),o=i("cCrT"),s=i("nF4n"),l=i("FHCs"),c=function(e,t,i){var c,d;this._variantId=null,e instanceof a.a?(d=e.getCachedProduct(),c=e,this._variantId=c.variantId):d=e,this._onProfitChangeCallback=i,this._price=c?c.priceData.price:d.priceRange.minPrice,this._currency=c?c.priceData.currency:d.priceRange.currency,this._productId=d.productId;var u=new o.a(d.catalogPageUrl);c&&(u.query.variantId=c.variantId),this._nodeInputPrice=Object(s.a)({tag:"input",type:"number",className:"products-pricing__profit-input",value:n.a.getDecimal(this._price+parseFloat(t)),attr:{step:"0.5"},prop:{onkeyup:$.proxy(this._onPriceKeyUp,this),onchange:$.proxy(this._onPriceOnChange,this)}}),this.node=Object(s.a)({tag:"tr",els:[{tag:"td",attr:{width:"110px"},style:{minWidth:"80px"},els:[{tag:"a",href:u,els:[{tag:"img",src:l.a,data:{src:c?c.urlImage:d.urlImage},className:"img-responsive",title:c?c.name:d.getFullTitle()}]}]},{tag:"td",style:{verticalAlign:"middle"},els:[{tag:"a",href:u,text:c?c.name:d.getFullTitle(),style:{color:"#626262"}}]},{tag:"td",style:{verticalAlign:"middle",textAlign:"center"},text:prettyMoney(this._price,this._currency)},{tag:"td",style:{verticalAlign:"middle",paddingRight:0},els:[r.a.getCurrencySymbol(this._currency)+" ",this._nodeInputPrice]},{tag:"td",className:"text-center",style:{verticalAlign:"middle"},els:[this.nodeProfit=Object(s.a)({tag:"b"})]}]}),this._renderProfit()};(c.prototype=new s.a.Base)._renderProfit=function(){var e=parseFloat(this._nodeInputPrice.value);e=isNaN(e)?this._price:e,this.nodeProfit.textContent=prettyMoney(e-this._price,this._currency),this._onProfitChangeCallback&&this._onProfitChangeCallback(e-this._price)},c.prototype._onPriceKeyUp=function(){var e=parseFloat(this._nodeInputPrice.value);isNaN(e)||this._renderProfit()},c.prototype._onPriceOnChange=function(){var e=parseFloat(this._nodeInputPrice.value);e=isNaN(e)||e<this._price?this._price:e,this._nodeInputPrice.value=n.a.getDisplayValue(e),this._renderProfit()},c.prototype.getProfit=function(){return parseFloat(this._nodeInputPrice.value)-this._price},c.prototype.setUserProfit=function(e){e=parseFloat(e),isNaN(e)&&(e=0),this._nodeInputPrice.value=n.a.getDisplayValue(e+this._price),this._renderProfit()},(globalThis||{}).PFProductsPricingRetailPriceViewRow=c;var d=function(e,t){this._userProfit=t||10,this.productsOrVariants=e,this._lastProfit={},this._rows=[],this.node=Object(s.a)({tag:"table",className:"table",els:[{tag:"thead",els:[{tag:"tr",els:[{tag:"th",text:dlang("site","Product"),attr:{colspan:2}},{tag:"th",style:{width:"135px"},els:[dclang("site","You buy at [price]","You buy at")+" ",{tag:"span",style:{color:"#f0473d"},text:"*"}]},{tag:"th",style:{width:"135px"},els:[dclang("site","You sell at [price]","You sell at")+" ",{tag:"span",style:{color:"#f0473d"},text:"**"}]},{tag:"th",style:{width:"135px"},text:dlang("site","Your profit")}]}]},this.nodeBody=Object(s.a)({tag:"tbody"})]})};d.prototype=new s.a.Base,d.prototype.append=function(e){return this._render(this.productsOrVariants),this.node.append(e),this},d.prototype.setItems=function(e){this._render(e)},d.prototype._render=function(e){s.a.clearNode(this.nodeBody);var t=[];for(var i in e){var n,r=e[i],a=this._lastProfit[r.productId||r.variantId];n=a||(r.priceRange?r.priceRange.minRetailPrice-r.priceRange.minPrice:r.priceData?r.priceData.retailPrice-r.priceData.price:this._userProfit),t.push(new c(r,n,$.proxy(this._onProfitChanged,this,r))),this._lastProfit[r.productId||r.variantId]=n,t[i].append(this.nodeBody)}this._rows=t,this.productsOrVariants=e},d.prototype.getProfit=function(){return this._userProfit},d.prototype._onProfitChanged=function(e,t){this._lastProfit[e.productId||e.variantId]=parseFloat(t)},d.prototype.getProductOrVariantProfit=function(e){return this._lastProfit[e.productId||e.variantId]||this._userProfit},d.prototype.setUserProfit=function(e){for(var t in this._userProfit=parseFloat(e),this._rows)this._rows[t].setUserProfit(e)},(globalThis||{}).PFProductsPricingRetailPriceView=d},OmXI:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("rKkW");function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"id",null),a(this,"name",""),a(this,"items",[]),a(this,"unavailableTechniques",[]),a(this,"index",0),a(this,"extra",{}),a(this,"image",{}),a(this,"isActive",!1)}var t,i,n;return t=e,n=[{key:"isShapeSymbolGroup",value:function(t){return t===e.GROUP_SHAPES_SYMBOLS}}],(i=null)&&r(t.prototype,i),n&&r(t,n),e}();a(o,"GROUP_SHAPES_SYMBOLS",2),a(o,"fromArray",(function(e){var t=Object.assign(new o,e);return e.items&&(t.items=e.items.map((function(e){return n.a.fromArray(e)}))),t}))},"Op/+":function(e,t,i){"use strict";i.r(t),i.d(t,"PFProductsCatalogUtilsStore",(function(){return s}));var n=i("Rsrl"),r=i("ji4W"),a=i("X5Ic"),o=i("t8U3"),s=Class({products:null,categories:null,__construct:function(){this.categories=new r.a,this.products=new n.a(this.categories),this._initConfigureStore(this)},cacheCategories:function(e){return this.categories.cache(e),this},setActiveCategoryId:function(e){return void 0===e||this.categories.setActiveCategoryId(e),this},setActiveProductId:function(e){return null!==e&&this.products.setActiveId(e),this},setCurrency:function(e){return this.products.setCurrency(e),this},setActiveFilters:function(e){return e.length?(s.activeFiltersCache=e.map((function(e){return{type:e.type,title:e.title,orderIndex:e.orderIndex}})),this):this},getActiveFilters:function(){return s.activeFiltersCache},cacheProductFromArray:function(e,t){if(!e)return this;var i=a.a.fromArray(e);return this.products.cacheById(i),t&&this.products.cacheData(i.productId,null,t),this},isRootCategory:function(){return 0===this.categories.getActiveCategoryId()},_initConfigureStore:function(){if(!s._storeInitCallbackExecuted){s._storeInitCallbackExecuted=!0;var e=o.a.getMainStoreInitCallback();e&&e(this)}}});s.activeFiltersCache=[],s._storeInitCallbackExecuted=!1,window&&((globalThis||{}).PFProductsCatalogUtilsStore=s)},PMDB:function(e,t,i){"use strict";function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function c(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}function d(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}i.d(t,"b",(function(){return p})),i.d(t,"a",(function(){return g})),i.d(t,"c",(function(){return m}));var u=2,h=4,p=5,g=["pf-i-folder","pf-i-tshirt-crew","pf-i-hat-fedora","pf-i-bag-personal","pf-i-currency-eur","pf-i-coffee","pf-i-necklace","pf-i-cellphone","pf-i-drawing-box","pf-i-palette","pf-i-city","pf-i-duck","pf-i-cupcake","pf-i-cat","pf-i-barley","pf-i-dog","pf-i-flower","pf-i-candle","pf-i-jellyfish","pf-i-badminton","pf-i-trumpet","pf-i-pirate","pf-i-sheep"],f=new WeakMap,_=new WeakSet,m=function(){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),_.add(this),s(this,"id",void 0),s(this,"parentId",void 0),s(this,"type",void 0),s(this,"storeId",void 0),s(this,"name",void 0),s(this,"filesCount",0),s(this,"directFilesCount",0),s(this,"directoriesCount",0),s(this,"metadata",void 0),s(this,"pathDirectories",[]),f.set(this,{writable:!0,value:{canMove:!1,canDelete:!1,canModify:!1,canMoveInChild:!1,canMoveOutChild:!1,canDeleteChild:!1,canModifyChild:!1}}),this.id=i.id,this.parentId=i.parentId,this.type=i.type,this.storeId=i.storeId,this.name=d(this,_,v).call(this,i.name),this.filesCount=i.filesCount,this.directFilesCount=i.directFilesCount,this.directoriesCount=i.directoriesCount,this.metadata=(null==i?void 0:i.metadata)||{},this.pathDirectories=null==i||null===(t=i.pathDirectories)||void 0===t?void 0:t.map((function(t){return t instanceof e?t:new e(t)})),c(this,f,r(r({},l(this,f)),i.capabilities))}var t,i,n;return t=e,(i=[{key:"getCapabilities",value:function(){return l(this,f)}},{key:"isSystem",value:function(){return[u,h,p].includes(this.type)}},{key:"isSampleFiles",value:function(){return this.type===p}},{key:"isRoot",value:function(){return!this.parentId}},{key:"isAnonymous",value:function(){return 6===this.type}},{key:"getAvatar",value:function(){var e;return(null===(e=this.metadata)||void 0===e?void 0:e.avatar)||(this.isSystem()?"pf-i-folder-image":"pf-i-folder")}},{key:"setAvatar",value:function(e){this.metadata=r(r({},this.metadata),{avatar:e})}},{key:"getInteractionMenuRefName",value:function(){return"file-library__directory-menu-".concat(this.id)}},{key:"toArray",value:function(){return{id:this.id,name:this.name,metadata:this.metadata}}},{key:"clone",value:function(){return new e(r(r({},JSON.parse(JSON.stringify(this))),{capabilities:this.getCapabilities()}))}}])&&o(t.prototype,i),n&&o(t,n),e}(),v=function(e){var t=null;switch(this.type){case u:case 6:null===this.parentId&&(t=dlang("library","File library"));break;case p:t=dlang("dashboard",dlang("dashboard","Sample files"))}return t||e}},PPGU:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("4Ru2"),r=i("6t3j");function a(e,t,i){if(l=e.query,c=!1,Object.keys(l).some((function(e){if("region"===e||0===e.indexOf("region["))return c=!0})),c||e.query.isEuropeDefaultFilter)(new r.a).setActiveStockedInRegion(t.getActiveValue(),i);else{var a=(new r.a).getActiveStockedInRegion(i),o=function(e){var t,i,r=(null===(t=localStorage)||void 0===t?void 0:t.getItem("europeLandingRegion"))||[];null===(i=localStorage)||void 0===i||i.removeItem("europeLandingRegion");var a=[];if(!PF.Customer.location||!PF.Customer.location.region)return r;var o=PF.Customer.location.region,s=PF.Customer.location.country;["europe","africa"].includes(o)?(a=[n.a.REGION_EUROPE_LATVIA],("ES"===s||"FR"===s)&&(a=[n.a.REGION_EUROPE_SPAIN])):"asia"===o?(a=[n.a.REGION_EUROPE_LATVIA],"JP"===s&&(a=[n.a.REGION_JAPAN])):"americas"===o?a=[n.a.REGION_USA]:"oceania"===o&&(a=[n.a.REGION_AUSTRALIA]),Array.isArray(r)||(r=[r]);for(var l=0,c=a;l<c.length;l++){var d=c[l];!e.getInactiveItems().includes(d)&&e.getActiveItems().includes(d)&&r.push(d)}return r}(t),s=a||o;s&&t.setRegion(s)}var l,c}},PSt6:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("o0qH"),r=i("1z/T"),a=i("OmXI"),o=i("X5Ic"),s=i("boP+"),l=Class({DEFAULT_LIMIT_KEY:"DEFAULT",DEFAULT_CHAR_LIMITS:{},_activeLayer:null,_text:null,_techniqueMemory:null,isCharLimitEnabled:!0,_activePlacement:"",__construct:function(){this._initCharLimits(),this.setProductFromDesignerState()},_initCharLimits:function(){this.DEFAULT_CHAR_LIMITS[this.DEFAULT_LIMIT_KEY]=50,this.DEFAULT_CHAR_LIMITS[o.a.TYPE_EMBROIDERY]=25},reset:function(){return this._activeLayer=null,this._techniqueMemory=null,this._text=null,this},setProductFromDesignerState:function(){var e=Object(s.a)();return e&&(this._techniqueMemory=new n.a(e.productId)),this},setActiveLayer:function(e){return this._activeLayer=e,this},setText:function(e){return this._text=e,this},setActivePlacement:function(e){return this._activePlacement=e,this},isValid:function(){return this._activeLayer&&this.isTextValid()},isClipartSizeValid:function(){var e=this._getTechnique();if(!e||[o.a.TECHNIQUE_ENGRAVING].indexOf(e)<0||!this._activeLayer.clipartItem)return!0;var t=.2,i=.2;return a.a.isShapeSymbolGroup(this._activeLayer.clipartItem.groupId)&&(t=.12,i=.06),this._activeLayer.position.height>t&&this._activeLayer.position.width>i},isTextValid:function(){var e=this._getFontOptions();if(!this.isCharLimitEnabled||!e||!this._text)return!0;var t=String(this._text||"").replace(/[\r\n]+/gm,"");return e.maxCharacters>=t.length},getValidText:function(){var e=this._getFontOptions();return e&&this._text?this._text.substr(0,e.maxCharacters):""},getCharLimit:function(){var e=this._getTechnique()||"DEFAULT",t=this.DEFAULT_CHAR_LIMITS.hasOwnProperty(e)?this.DEFAULT_CHAR_LIMITS[e]:this.DEFAULT_CHAR_LIMITS.DEFAULT,i=this._getFontOptions();return i&&i.maxCharacters?i.maxCharacters:t},_getFontOptions:function(){var e=this._getTechnique();return this._activeLayer.font?(this._activeLayer.font.options.hasOwnProperty(e)?this._activeLayer.font.options[e]:null)||new r.a.Options:null},_getFontMaxHeight:function(){var e=this._getTechnique(),t=this._activeLayer.font;return t?t.getMaxHeight(e,this._activePlacement):null},_getTechnique:function(){var e,t=this._techniqueMemory?this._techniqueMemory.getTechniqueFromMemory():null;null!==(e=this._activeLayer)&&void 0!==e&&e.embroideryType&&(t=o.a.TYPE_EMBROIDERY);var i=Object(s.a)();return!t&&i&&(t=i.availableTechniques?i.availableTechniques.slice().shift():i.type),t}});l.LAYER_LIMITS={},l.LAYER_LIMITS[o.a.TYPE_EMBROIDERY]=2,l.getLayerLimit=function(e){return l.LAYER_LIMITS.hasOwnProperty(e)?l.LAYER_LIMITS[e]:null},window&&((globalThis||{}).PFComponentsGeneratorMockupValidator=l)},Pack:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",(function(){return r}));var r=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.id=t.id||null,this.title=t.title||null,this.thumbUrl=t.thumbUrl||null,this.width=t.width||null,this.height=t.height||null,this.size=t.size||null,this.youtubeId=t.youtubeId||null}},PwNb:function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return o(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)})(e)}function o(e,t,i){return(o=s()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&l(r,i.prototype),r}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i.d(t,"a",(function(){return d}));var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(ResultsNotFoundError,e);var t,i,n=(t=ResultsNotFoundError,i=s(),function(){var e,n=c(t);if(i){var a=c(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return r(this,e)});function ResultsNotFoundError(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ResultsNotFoundError),n.call(this,e)}return ResultsNotFoundError}(a(Error))},Q1Td:function(e,t,i){"use strict";i.d(t,"a",(function(){return B}));var n=i("Y6pR"),r=i("6t3j"),a=i("edgZ"),o=i("5sNq"),s=i("nF4n"),l=Class({translations:[],_defaultLanguageName:"English (EN)",_defaultLanguageLocale:"en_US",selectedLanguage:"en_US",lastSelectedLanguage:null,_laguageValues:[{name:"English (EN)",value:"en_US"},{name:"English (GB)",value:"en_GB"},{name:"EspaÃ±ol (ES)",value:"es_ES"},{name:"Deutsch (DE)",value:"de_DE"},{name:"æ—¥æœ¬èªž (JP)",value:"ja_JP"},{name:"FranÃ§ais (FR)",value:"fr_FR"},{name:"Italiano (IT)",value:"it_IT"},{name:"LatvieÅ¡u (LV)",value:"lv_LV"},{name:"Nederlands (NL)",value:"nl_NL"},{name:"PortuguÃªs (BR)",value:"pt_BR"},{name:"Svenska (SE)",value:"sv_SE"}],getDefaultLanguage:function(){return this._defaultLanguageName},getDefaultLanguageLocale:function(){return this._defaultLanguageLocale},getProductTranslationOptions:function(){return this._laguageValues},getProductTranslationOptionNameByValue:function(e){var t=this._laguageValues.filter((function(t){return t.value===e}));return t.length?t[0]:null},getLastSelectedLanguage:function(){return this.lastSelectedLanguage},setLastSelectedLanguage:function(e){this.lastSelectedLanguage=e},setLanguage:function(e){this.selectedLanguage=e},getLanguageData:function(){return this.translations?this.translations[this.selectedLanguage]:void 0},getLanguageDataByLocale:function(e){return this.translations?this.translations[e]:void 0},getLanguage:function(){return this.selectedLanguage}});l.fromArray=function(e){var t=new l,i=e.translations;return delete e.translations,t.translations=i,Object(s.a)(t,e),t},window&&((globalThis||{}).PFProductPushProductTranslations=l);var c=i("uGFp"),d=i("NLc6"),u=i("Ii6r"),h=i("FxE2"),p=i("Vx67"),g=i("bRD6"),f=i("CDME"),_=i("aUd0"),m=i("+4EM"),v=i("rKkW"),y=i("n5ho"),b=i("tw/D"),P=i("1yDH"),C=i("i0Kg"),T=i("y70k"),I=function(){};(I.prototype=new T.a).generatorVariantId=null,I.prototype.templateId=null,I.prototype.placementId=null,T.a.prototype.digitizedItems=null,I.fromArray=function(e){var t=new I;return s.a.O2O(t,e),t.digitizedItems=new C.a,t},window&&((globalThis||{}).PFItemsSavedGeneratorFileItem=I);var w=i("Pack"),S=i("IAu2"),E=i("96ed"),k=i("Sucz"),O=i("9Nv7"),A=i("/Z5U"),L=i("Svo9"),N=i("1tjy"),D=i("sXh8");function R(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function F(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){M(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function M(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var B=function(){};B.defaultProductPriceCache={},B.generatorProductCache={},B.generatorVariantCache={},B.prototype.loadProduct=function(e){var t=this._getRawLayersByPlacement(e.designerState),i="product-generator/get-product";if(e.useGeneratedDesignRpcUrl){if(Object(A.b)())return void this.loadProductRe(e.callback,Object(A.a)());i="product-generator/get-customizable-product"}var n={storeId:e.storeId,isMockupGeneratorMode:e.isMockupGeneratorMode?1:0,productId:e.productId,layersByPlacement:t,generatorDesignId:e.designerState?e.designerState.generatorDesignId:null,excludedPlacements:e.excludedPlacements||[],forceOrientation:e.forceOrientation||"",isProductPushMode:e.isProductPushMode?1:0,generatorDesignKey:e.generatorDesignKey,isOrderFlowMode:e.isOrderFlowMode?1:0,technique:e.technique||null,forceTechnique:e.forceTechnique||null,forceTemplateType:e.forceTemplateType,productOptions:e.productOptions||null,variantId:e.generatorVariant?e.generatorVariant.variantId:null};e.similarProductPushState&&(n.similarProductPushInfo=e.similarProductPushState.toRPCData()),e.productTemplateEditorState&&(n.productTemplateEditorState=e.productTemplateEditorState.toRPCData()),Object(k.a)(i,n,this.loadProductRe.bind(this,e.callback))},B.prototype.getLayersByPlacementWithoutUniqueIdHash=function(e){var t={};for(var i in e)for(var n in t[i]={},e[i])t[i][n]=F(F({},e[i][n]),{uniqueId:null});for(var r=0,a=JSON.stringify(t),o=0;o<a.length;o++)r=Math.imul(31,r)+a.charCodeAt(o)|0;return r},B.prototype.loadGeneratorProduct=function(e){var t=this,i=e.designerState?e.designerState.generatorDesignId:e.generatorDesignId||null,n=this._getRawLayersByPlacement(e.designerState),a=e.productTemplateEditorState&&(e.productTemplateEditorState.sourceProductTemplate&&e.productTemplateEditorState.sourceProductTemplate.id||e.productTemplateEditorState.isNewTemplateEditor()),o={productId:e.productId,storeId:e.storeId,technique:e.technique,currency:e.currency,forceOrientation:e.forceOrientation,forceTemplateType:e.forceTemplateType,designId:i,rawLayersByPlacementWithoutUniqueIdHash:i?null:this.getLayersByPlacementWithoutUniqueIdHash(n)};if(!e.forceRequest&&!a){var s=this.getCachedGeneratorProductResponse(o);if(s)return void(e.variantCallback?(new r.a).getVariantsRe(e.variantCallback,s):this.loadProductRe(e.callback,s))}var l={productId:e.productId,productChanged:e.productChanged?1:0,catalogCategoryId:r.a.prototype.getLastActiveCatalogCategory(e.productId),storeId:e.storeId,generatorDesignId:i,variantId:e.generatorVariant?e.generatorVariant.variantId:null,hasExtraGeneratorVariants:e.hasExtraGeneratorVariants?1:0,isMockupGeneratorMode:e.isMockupGeneratorMode?1:0,isProductPushMode:e.isProductPushMode?1:0,isOrderFlowMode:e.isOrderFlowMode?1:0,layersByPlacement:n,excludedPlacements:e.excludedPlacements||[],forceOrientation:e.forceOrientation||"",generatorDesignKey:e.generatorDesignKey,technique:e.technique?e.technique:null,forceTemplateType:e.forceTemplateType,productOptions:e.productOptions||null,currency:e.currency,flow:e.flow};e.similarProductPushState&&(l.similarProductPushInfo=e.similarProductPushState.toRPCData()),e.productTemplateEditorState&&(l.productTemplateEditorState=e.productTemplateEditorState.toRPCData()),Object(k.a)("product-generator/get-generator-product",l,(function(i){var n;t.cacheGeneratorProductResponse(i,o),!o.technique&&null!=i&&null!==(n=i.product)&&void 0!==n&&n.type&&(o.technique=i.product.type,t.cacheGeneratorProductResponse(i,o)),e.variantCallback?(new r.a).getVariantsRe(e.variantCallback,i):t.loadProductRe(e.callback,i)}))},B.prototype.cacheGeneratorProductResponse=function(e,t){var i=this.getCacheKeyForGeneratorProduct(t);B.generatorProductCache[i]=JSON.stringify(e),(new r.a).getVariantsRe((function(){}),e)},B.prototype.getCachedGeneratorProductResponse=function(e){var t=this.getCacheKeyForGeneratorProduct(e),i=B.generatorProductCache[t];return i?JSON.parse(i):null},B.prototype.getCacheKeyForGeneratorProduct=function(e){return"prod"+e.productId+(e.storeId?"--store"+e.storeId:"")+(e.technique?"--tec"+e.technique:"")+(e.currency?"--cur"+e.currency:"")+(e.forceOrientation?"--orient"+e.forceOrientation:"")+(e.forceTemplateType?"--type"+e.forceTemplateType:"")+(e.designId?"--design"+e.designId:"")+(e.rawLayersByPlacementWithoutUniqueIdHash?"--layers"+e.rawLayersByPlacementWithoutUniqueIdHash:"")},B.prototype.deleteDesignFromCache=function(e){var t="--design"+e;Object.keys(B.generatorProductCache).forEach((function(e){e.endsWith(t)&&delete B.generatorProductCache[e]}))},B.prototype.getGeneratorVariants=function(e,t,i){var n=this,r=[];i||(e=e.filter((function(e){var t=n.getCachedGeneratorVariants(e.variantId);if(!t)return!0;r=Object.assign(r,t)}))),e.length?Object(k.a)("product-generator/get-generator-variants",{variantIds:e.map((function(e){return e.variantId}))},(function(e){for(var i in e.variantMapping)for(var a in e.variantMapping[i]){var o=e.variantMapping[i][a],s=p.a.fromArray(e.generatorVariants[o]);r[s.generatorVariantId]=s,n.cacheGeneratorVariant(i,e.generatorVariants[o])}t&&t(r)})):t&&t(r)},B.prototype.cacheGeneratorVariant=function(e,t){B.generatorVariantCache[e]||(B.generatorVariantCache[e]=[]),B.generatorVariantCache[e].push(t)},B.prototype.getCachedGeneratorVariants=function(e){if(!B.generatorVariantCache[e])return null;var t={};return B.generatorVariantCache[e].forEach((function(e){var i=p.a.fromArray(e);t[i.generatorVariantId]=i})),t},B.prototype.calculatePrices=function(e,t,i){Object(S.b)(e,i).then(t)},B.prototype.loadProductRe=function(e,t){var i=new o.a;for(s in t.colors)i.colors.push(m.a.fromArray(t.colors[s]));for(s in i.variantLimit=t.variantLimit,i.requiredDPI=t.requiredDPI,i.sizes=t.sizes,i.translatedSizes=t.translatedSizes,i.availableOrientations=t.availableOrientations,i.orientation=t.orientation,i.regions=t.regions,i.availableTechniques=t.availableTechniques,i.hasNewPlacement=t.hasNewPlacement,i.isCustomizerEnabled=t.isCustomizerEnabled,i.allLabelTypesAvailable=t.allLabelTypesAvailable,i.isAdditionalMockupPushEnabled=t.isAdditionalMockupPushEnabled,i.pushableVideos=(t.pushableVideos||[]).map((function(e){return new w.a(e)})),i.areQuickDesignsAvailable=t.areQuickDesignsAvailable,i.availablePlacements=[],i.placementsWithOnlyBackgroundColor=t.placementsWithOnlyBackgroundColor,i.placementOptions=b.a.fromArray(t.placementOptions),Object(D.f)(D.a.fromArray(t.optionGroupsWithTags)),t.clipartItems&&Object(N.b)(t.clipartItems.map((function(e){return v.a.fromArray(e)}))),t.usedQuickDesignItems&&Object(L.b)(t.usedQuickDesignItems),t.availablePlacements)i.availablePlacements.push(u.a.fromArray(t.availablePlacements[s]));for(s in t.variantMapping)i.variantMapping.push(h.a.fromArray(t.variantMapping[s]));for(s in t.generatorVariants){var r=p.a.fromArray(t.generatorVariants[s]);i.generatorVariants[r.generatorVariantId]=r}for(var s in t.files)(new a.a).cacheFile(T.a.fromArray(t.files[s]));var f=new n.c,_=function(e){var i=t.availablePlacements.find((function(i){return i.id===t.itemFiles[e].type}));i&&f.add(t.itemFiles[e].price,i.technique,t.itemFiles[e].type,t.itemFiles[e].discountedPrice)};for(var P in t.itemFiles)_(P);for(var C in i.pricesCollection=f,i.allAvailableVariants=t.variants?t.variants.map((function(e){return y.a.fromArray(e)})):[],i.designData=new c.a,i.designData.isTransparent=!t.isTransparent&&null,i.designData.isVisible=t.isVisible,i.designData.description=t.info.description,i.designData.labelTemplateType=t.labelTemplateType,i.designData.designMeta=t.designMeta,i.designData.multiLanguageDetails=[],t.multiLanguageDetails){var I=t.multiLanguageDetails[C];for(s in I)for(var S in d.a.TYPES){var E=d.a.TYPES[S];i.designData.multiLanguageDetails.push(d.a.fromArray({language:C,type:E,value:I[E]}))}}for(s in t.productTranslations&&(i.designData.productTranslations=l.fromArray(t.productTranslations)),t.translationLanguage&&(i.designData.translationLanguage=t.translationLanguage),i.calculatedPositions=[],t.calculatedPositions){var k=g.a.fromArray(t.calculatedPositions[s]);i.calculatedPositions.push(k)}for(s in i.conflictingTypes={},t.conflictingTypes)i.conflictingTypes[s]={placementId:t.conflictingTypes[s].placementId,conflictsWith:t.conflictingTypes[s].conflictsWith.map((function(e){return u.a.fromArray(e)}))};if(i.preselectedData={},t.preselectedData)for(s in t.preselectedData)if("colors"===s){var O=t.preselectedData[s]||[],A=[];for(var S in O){var R=O[S],x=new m.a.fromArray(R);x&&A.push(x)}A&&A.length&&(i.preselectedData.colors=A)}else if("sizes"===s){var F=t.preselectedData[s]||[];F&&F.length&&(i.preselectedData.sizes=F)}else{var M=t.preselectedData[s]||null;M&&(i.preselectedData[s]=M)}i.designData.title=i.preselectedData.title||t.info.title,e(i),this.cacheDefaultPrices(t.productId,i.designData.prices)},B.prototype.pushProduct=function(e,t,i){i=i||{},Object(k.a)("product-generator/push-product",{designData:e.toArray({forRpc:!0}),pushContext:i},this._pushProductRe.bind(this,t)),this.rememberModifiedPrices(e.productId,e.prices)},B.prototype.pushCustomProduct=function(e,t){Object(k.a)("product-generator/push-custom-product",{designData:e.toArray({forRpc:!0})},$.proxy(this._pushProductRe,this,t))},B.prototype._pushProductRe=function(e,t){t.error?alert(t.error):e(t.taskId,t.taskPusherKey)},B.prototype.generateMockups=function(e,t,i){Object(k.a)("product-generator/generate-mockups",{forLiveMockup:i?1:0,designData:e.toArray({forRpc:!0,withoutSyncData:!0})},this._generateMockupsRe.bind(this,this._generateMockupsOnCompleted,t))},B.prototype._generateMockupsRe=function(e,t,i){if(i.error)alert(i.error);else{var n=i.taskPusherKey;if(t.onStarted){var r=i.taskId,a=i.designId,o=i.unprocessedFiles,s=i.itemUniqueId;t.onStarted(r,n,a,o,s)}E.a.subscribe(n,"onSuccess",this._getGeneratedFiles.bind(this,t.onCompleted,e)),t.onProgress&&E.a.subscribe(n,"onProgress",t.onProgress),t.onFailed&&E.a.subscribe(n,"onFailed",t.onFailed)}},B.prototype._generateMockupsOnCompleted=function(e,t){if(t.files){var i=[];for(var n in t.files)i.push(_.a.fromArray(t.files[n]));e(i)}else e([])},B.prototype.getDownloadUrl=function(e,t){Object(k.a)("product-generator/get-download-url",{temporaryFileId:e.temporaryFileId,fileType:e.fileType,filename:e.filename},(function(e){t(e.url)}))},B.prototype.getPushStatuses=function(e,t){Object(k.a)("product-generator/get-push-statuses",{storeId:e},(function(e){t(e)}))},B.prototype.retryTask=function(e,t,i){Object(k.a)("product-generator/retry-task",{storeId:e,taskId:t},(function(e){i(e)}))},B.prototype.hidePushTask=function(e){Object(k.a)("product-generator/hide-push-task",{taskId:e})},B.prototype.cacheDefaultPrices=function(e,t){for(var i in t){var n=this.getCacheKeyForDefaultPrice(e,t[i].priceKey);B.defaultProductPriceCache[n]=JSON.stringify(t[i])}},B.prototype.getCachedDefaultPrice=function(e,t){var i=this.getCacheKeyForDefaultPrice(e,t),n=B.defaultProductPriceCache[i];return n?f.a.fromArray(JSON.parse(n)):null},B.prototype.getCacheKeyForDefaultPrice=function(e,t){return e+":"+t},B.prototype.isPriceModified=function(e,t){var i=this.getCachedDefaultPrice(e,t.priceKey);return i&&i.retailPrice.toFixed(2)!==t.retailPrice.toFixed(2)},B.prototype.rememberModifiedPrices=function(e,t){if(localStorage){var i=JSON.parse(localStorage.getItem(this.getUserPriceStorageKey()))||{},n=i[e]||{};for(var r in t){var a=t[r],o=this.isPriceModified(e,a);(o||n[a.priceKey])&&(o?n[a.priceKey]=a.retailPrice:delete n[a.priceKey])}i[e]=n;try{localStorage.setItem(this.getUserPriceStorageKey(),JSON.stringify(i))}catch(e){alert("You are in a Private/Incognito Mode. It does not support storing settings locally.")}}},B.prototype.getUserPriceStorageKey=function(){return S.a},B.prototype.getTaskMockupFiles=function(e,t){Object(k.a)("product-generator/get-mockup-files",{syncProductId:e},$.proxy(this._getTaskMockupFilesRe,this,t))},B.prototype._getTaskMockupFilesRe=function(e,t){var i=t.files,n=new P.a;for(var r in n.page=i.page,n.pages=i.pages,n.total=i.total,i.items){var o=T.a.fromArray(i.items[r]);n.items.push(o),(new a.a).cacheFile(o)}e(n)},B.prototype.saveToLibrary=function(e,t,i,n){var r=[];for(var a in e)r.push(e[a].toArray());Object(k.a)("product-generator/save-to-library",{files:r,storeId:t,productType:i},(function(e){n&&n(e.pusherKey)}))},B.prototype.transferAnonymousFilesToStore=function(e,t){Object(k.a)("product-generator/transfer-files-to-store",{storeId:e},t)},B.prototype.generateLibraryFiles=function(e,t,i,n,r,a){this.deleteDesignFromCache(e.generatorDesignId),Object(k.a)("product-generator/generate-and-save-to-library",{designData:e.toArray({forRpc:!0,withoutSyncData:!0}),fileTypes:t,forLiveMockup:i?1:0,isVariantSyncFlow:n?1:0,isVariantPicker:r?1:0},this._generateMockupsRe.bind(this,this._generateLibraryFilesRe,a))},B.prototype.afterReloadDuringGeneration=function(e,t){this._generateMockupsRe(this._generateLibraryFilesRe,t,{taskPusherKey:"generator-task-".concat(e)})},B.prototype._getGeneratedFiles=function(e,t,i){Object(k.a)("product-generator/get-generated-files",{cacheKey:i},t.bind(this,e))},B.prototype._generateLibraryFilesRe=function(e,t){var i,n={},r=new a.a;for(var o in t.files)i=I.fromArray(t.files[o]),n.hasOwnProperty(i.placementId)||(n[i.placementId]=[]),n[i.placementId].push(i),r.cacheFile(i);e(n)},B.prototype.updateCustomizer=function(e,t){Object(k.a)("product-generator/update-customizer",{designData:e.toArray({forRpc:!0,withoutSyncData:!0})},t)},B.prototype.pushVariantsToProduct=function(e,t,i){Object(k.a)("product-generator/push-variants-to-product",{designData:e.toArray({forRpc:!0}),syncProductId:t},i)},B.prototype.changePrintFile=function(e,t,i,n){Object(k.a)("product-generator/change-print-file",{designData:e.toArray({forRpc:!0,withoutSyncData:!0}),syncVariantIds:t,shouldPushMockups:i?1:0},n)},B.prototype.getInsideLabelTemplate=function(e,t,i,n,r){Object(k.a)("product-generator/get-native-inside-label",{variantId:e,fileId:t,templateId:n,position:r?r.toArray():null},i)},B.prototype.getRemoveBg=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,i,n,r,a){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(O.a)("product-generator/get-remove-bg",{layer:t.toArray(),templateId:null==i?void 0:i.templateId,fullSize:n?1:0});case 3:return(o=e.sent).taskPusherKey?(r&&E.a.subscribe(o.taskPusherKey,"onSuccess",r),a&&E.a.subscribe(o.taskPusherKey,"onFail",a)):r&&r(o),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),a&&a(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){R(a,n,r,o,s,"next",e)}function s(e){R(a,n,r,o,s,"throw",e)}o(void 0)}))});return function(e,i,n,r,a){return t.apply(this,arguments)}}(),B.prototype.generateEmbroideryPreview=function(e,t,i,n){Object(k.a)("product-generator/embroidery-preview",{layer:e.toArray(),colors:t,generatorDesignKey:i},this._renderEmbroideryImageRe.bind(this,n))},B.prototype._renderEmbroideryImageRe=function(e,t){t.image?e(t):t.taskPusherKey&&E.a.subscribe(t.taskPusherKey,"onSuccess",e)},B.prototype._getRawLayersByPlacement=function(e){var t={};if(!e)return t;var i=e.getLayersByPlacement();for(var n in i)for(var r in t[n]=t[n]||[],i[n]){var a=i[n][r];t[n].push(a.toArray())}return t},(globalThis||{}).PFRepositoriesGeneratorRepository=B},QUqn:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("7QI8"),r={getCommonEmbrType:function(e,t){return e&&e!==t?n.a.DIGITIZATION_BOTH:t},getEmbrTypeForPlacement:function(e,t){var i;if(e)for(var n in e){var a=e[n];if(a&&a.placementId===t){for(var o in a.layers){var s=a.layers[o];i=r.getCommonEmbrType(i,s.embroideryType)}return i}}}};(globalThis||{}).PFProductPushOrdersEmbroideryHelper=r},R7ut:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={getConfig:function(){var e;return(null===(e=PF)||void 0===e?void 0:e.ProductsPricingConfig)||{expandTypes:[]}}}},"RW1+":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({template:null,title:"",titleTag:"div",titleClass:"printfile-thumb__title",innerNodeClass:"printfile-thumb__wrap",width:124,height:143,isFixedHeightWrapper:!1,itemFile:null,fileItem:null,puffType:null,forceDigitizedBadge:!1,showDigitizationBadge:!1,isLargeDigitization:!1,className:"printfile-thumb",backgroundColor:"",onEditCallback:null,onPreviewCallback:null,onThumbClickCallback:null,onSvgProcessedCallback:null,svgString:"",placementOptions:null,getRatio:function(){var e=this.width/this.template.width,t=this.height/this.template.height;return Math.min(e,t)},shouldUseSvg:function(){return!this.template.isSimple()||this.placementOptions&&this.placementOptions.designFillColor}});window&&((globalThis||{}).PFComponentsSvgThumbPar=n)},Rsrl:function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i("6t3j"),r=i("Tt8e"),a=i("g357"),o=i("83UL"),s=i("n5ho"),l=i("X5Ic"),c=i("nF4n"),d=Class({product:null,activeVariant:null,variants:[],descriptionTitle:"",isLogged:!1,printCareInstructionsHtml:"",productDescription:"",productsPricingInfoHtml:"",printInfo:{},guidelines:"",templates:{},guidelinesAndTemplates:null,regions:null,insideLabel:"",shippingReturns:"",tabSizing:"",tabUsingTips:"",images:[],shipping:"",isFeaturedReviews:!1,isFavorite:!1,addedToFavoritesAt:null,productSpecs:{},isFulfilledAtPartnerFacility:!1,favoriteCatalogCategoryId:null,sellingRegionSettings:null,setActiveVariantById:function(e){this.activeVariant=e?this.variants.filter((function(t){return t.variantId===e})).shift():null},hasPriceEstimator:function(){return this.product.type===l.a.TYPE_T_SHIRT},getRegionVariants:function(){var e=new o.a;return e.availableRegions=this.regions.availableRegions,e.variantsByRegion=this.regions.variantsByRegion,e.allowedSellingRegions=this.regions.allowedSellingRegions,e},getPrintInfo:function(e,t){return this.printInfo[e]?t?this.printInfo[e][t]?this.printInfo[e][t]:"":this.printInfo[e]:""}});d.fromArray=function(e){var t=new d;return c.a.O2O(t,e),t.product=l.a.fromArray(e.product),t.variants=e.variants.map(s.a.fromArray),t},window&&((globalThis||{}).PFProductsCatalogProductData=d);var u=Class({variantImageId:0,thumbUrl:"",useVariantColor:!1,order:0,largeUrl:"",variantMaps:[],useGeneratorColor:!0,backgroundOverride:[]});u.fromArray=function(e){var t=new u;return c.a.O2O(t,e),t},window&&((globalThis||{}).PFProductsCatalogItemsProductImageItem=u);var h=i("Sucz"),p=i("YBfo"),g=i("1mG2"),f=i("N6Gp"),_=i("t8U3"),m=i("D5LZ"),v=i("o0qH"),y=Class({_categoryProducts:{},_repo:null,_currency:"",__construct:function(e){this.categories=e,this._repo=new n.a,this._initConfigureStore(this)},getByParams:function(e){"function"==typeof e.actionBefore&&e.actionBefore(),this._params=e,g.a.toggleLock(!0);var t=Number(e.categoryId)!==f.a.ID_FAKE_FAVORITES?this.getCachedProducts(e.categoryId):[];if(t.products)return this._dispatchEvents(t.products,t.totalCount);this._requestProductsData(e,1)},getAllProductsList:function(e){var t=this.getCachedProducts(this._params.categoryId);t.products&&t.products.length===Number(t.totalCount)||this._requestProductsData(this._params,!1,e)},getSellingRegionNotMatchedProducts:function(e){Object(h.a)("product-catalog/get-category-product-data",Object.assign(this._getRequestParams(this._params),{matchSellingRegion:0,doesNotMatchSellingRegion:1}),(function(t){var i=r.a.convertToArray(t.products).map((function(e){return e.variants.map((function(e){return n.a.prototype.cacheVariant(s.a.fromArray(e))})),l.a.fromArray(Object.assign(e.product,{doesNotMatchSellingRegion:!0}))}));t.sellingRegion&&(y.sellingRegion=m.b.fromArray(t.sellingRegion)),e({products:i,totalCount:t.totalCount})}))},_getRequestParams:function(e){return{activeCategoryId:e.categoryId,categoryIds:e.favorites?[]:this.categories.getCategoryChildIds(this.categories.getById(e.categoryId)),forMockupGenerator:e.forMockupGenerator?1:0,forProductPush:e.forProductPush?1:0,forOrderFlow:e.forOrderFlow?1:0,forProductTemplate:e.forProductTemplate?1:0,currency:this._currency,storeId:e.storeId,favorites:e.favorites,limitUsingDefaultCount:0,matchSellingRegion:e.matchSellingRegion?1:0,doesNotMatchSellingRegion:e.doesNotMatchSellingRegion?1:0}},_requestProductsData:function(e,t,i){Object(h.a)("product-catalog/get-category-product-data",Object.assign(this._getRequestParams(e),{limitUsingDefaultCount:t?1:0}),this._cacheProducts.bind(this,{categoryId:this._params.categoryId,initialLoad:t,callBackFunction:i}))},getDataByProductId:function(e,t){var i=this._getCachedProductData(e);$.isEmptyObject(i)?Object(h.a)("product-catalog/get-product-data",{productId:e,currency:this._currency},this.cacheData.bind(this,e,t)):t(i)},getActive:function(){var e=y.activeProductId;return e?y.cacheById[e]:null},setActiveId:function(e){y.activeProductId=e},setCurrency:function(e){this._currency=e},cacheById:function(e){return e instanceof l.a||(e=l.a.fromArray(e)),this._repo.cacheProduct(e),y.cacheById[e.productId]=e,e},getCachedProducts:function(e){var t=y.tempDisabledProductsLimit,i=y.tempDisabledProductsPushed;return t&&i>=t?[]:this._categoryProducts[e]||[]},_cacheProducts:function(e,t){var i=e.categoryId,n=e.initialLoad,a=e.callBackFunction;for(var o in t.products=r.a.convertToArray(t.products).map(this._getProductItem.bind(this)),t.products.map(this.cacheById),t.tempDisabledProductsLimit&&(y.tempDisabledProductsLimit=t.tempDisabledProductsLimit,y.tempDisabledProductsPushed=t.tempDisabledProductsPushed,y.tempDisabledProductTypes=t.tempDisabledProductTypes,y.tempDisabledProductIds=t.tempDisabledProductIds),t.sellingRegion&&this._useSellingRegion(t.sellingRegion,t.products),this._categoryProducts[i]=t,t.products){if(t.products[o].variantRegions){var c=t.products[o].variants;for(var d in this._repo.cacheProductVariantRegions(t.products[o].product.productId,t.products[o].variantRegions),c)this._repo.cacheVariant(s.a.fromArray(c[d]))}var u=t.products[o];464!==u.productId||u.availableTechniques.includes(Object(v.a)(u.productId).getTechniqueFromMemory())||Object(v.a)(u.productId).rememberLastUsedTechnique(l.a.TYPE_EMBROIDERY)}if(n)return this._dispatchEvents(t.products,t.totalCount);a&&a(!n)},_useSellingRegion:function(e,t){var i=m.b.fromArray(e);y.sellingRegion=i,i.isSingleCountry()&&r.a.getProductEstimatedDelivery(t,i)},_getCachedProductData:function(e){return y.cachedData[e]?y.cachedData[e]:[]},cacheData:function(e,t,i){y.cachedData[e]=d.fromArray(i);var n=this._getCachedProductData(e);n.variants.map(function(e){this._repo.cacheVariant(e)}.bind(this)),n.similarProducts=i.similarProducts.map((function(e){return l.a.fromArray(e)})),i.sellingRegionSettings&&this._useSellingRegion(i.sellingRegionSettings,n.similarProducts),n.images=i.images.map((function(e){return u.fromArray(e)})),t&&t(n)},_getProductItem:function(e){return e.variants.map(function(e){this._repo.cacheVariant(s.a.fromArray(e))}.bind(this)),l.a.fromArray(e.product)},_dispatchEvents:function(e,t){g.a.toggleLock(!1),a.a.createAndDispatch(p.a.EVENT_PRODUCTS_LOADED,{productsOrVariants:e,totalCount:t})},_initConfigureStore:function(){if(!y._storeInitCallbackExecuted){y._storeInitCallbackExecuted=!0;var e=_.a.getProductsStoreInitCallback();e&&e(this)}}});y.cacheById={},y.cachedData={},y.activeProductId=0,y.sellingRegion=null,y.tempDisabledProductsPushed=0,y.tempDisabledProductsLimit=void 0,y.tempDisabledProductTypes=[],y.tempDisabledProductIds=[],y._storeInitCallbackExecuted=!1,window&&((globalThis||{}).PFProductsCatalogUtilsStoreProducts=y)},S7uB:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({productId:0,categoryId:0,storeId:null,search:"",brand:"",isScreenMode:!1,isForGenerator:!1,isForProductTemplates:!1,isSync:!1,callback:null,includeDisabledInPush:!1,shouldSaveState:!1,showFulfillmentCountries:!1,showSizes:!0});(globalThis||{}).PFProductPickerPar=n},SGrL:function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var n=i("bXkz"),r=i("nF4n"),a=i("SBaP"),o=i("x0He");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=f(e);if(t){var r=f(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p(this,i)}}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function m(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var v=new WeakMap,y=new WeakMap,b=new WeakSet,P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,e);var t,i,n,r=h(a);function a(e){var t;return c(this,a),t=r.call(this),b.add(g(t)),v.set(g(t),{writable:!0,value:void 0}),y.set(g(t),{writable:!0,value:void 0}),t.node=tag("div","order-type-picker-mke"),m(g(t),v,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(g(t),b,C).call(g(t)),t}return t=a,(i=[{key:"destroy",value:function(){_(this,y).destroy(),m(this,y,null)}}])&&d(t.prototype,i),n&&d(t,n),a}(a.a),C=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new o.b).components={"order-type-picker":function(){return i.e(326).then(i.bind(null,"nbu3"))}},t.template='\n            <order-type-picker\n                :order-types="orderTypes"\n                @on-type-chosen="emitEvent(\'onTypeChosen\', $event)"\n            />\n        ',t.initialData={orderTypes:_(this,v).orderTypes},t.emitEvent=function(e,t){switch(e){case"onTypeChosen":_(n,v).onTypeChosen&&_(n,v).onTypeChosen(t)}},m(this,y,new o.a(t)),_(this,y).append(this.node);case 7:case"end":return e.stop()}}),e,this)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),T=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,e),this.orderTypes=t.orderTypes||[],this.onTypeChosen=t.onTypeChosen||void 0},I=function(e,t){this.callback=e.callback||function(){},this.types=e.types||[n.a.ORDER_TYPE_BASIC,n.a.ORDER_TYPE_SAMPLE],t&&this.types.length<3&&$(t._nodeDialog).removeClass("modal-lg").addClass("modal-md");var i=this.callback.bind(window,n.a.ORDER_TYPE_BASIC),r=function(){};PF.Customer.sampleOrdersLeft>0&&(r=this.callback.bind(window,n.a.ORDER_TYPE_SAMPLE));var a=new T;a.orderTypes=this.types,a.onTypeChosen=function(e){switch(e){case n.a.ORDER_TYPE_BASIC:i();break;case n.a.ORDER_TYPE_SAMPLE:r();break;default:i()}};var o=new P(a);this.node=tag("div","order-type-picker",[o])};I.prototype=new r.a.Base,(globalThis||{}).PFOrderTypePicker=I},SUtP:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("g357"),r=i("unRh"),a=i("nF4n"),o=i("sd5M"),s=Class({_category:null,_classActive:"catalog__sidebar-menu__item--active",_menuNode:null,__construct:function(e,t,i,n,o){this._category=e,this._activeCategoryId=t,this._forceActive=i,this._callback=n;var s=new r.a;s.categories=e.children,s.activeCategoryId=t,s.shouldShowNew=o,this._menuNode=this.hasChildren()&&new h(s),this.node=Object(a.a)({tag:"li",className:this._getClassName(),els:[{tag:"a",onclick:this._callback.bind(this,this),href:this._category.getUrl(),els:[this.getTitle(),!!o&&this._category.isNew&&tag("span","pf-ml-4 pf-py-2 pf-badge pf-badge-small pf-badge--primary",clang("Badge","New in Sidebar")),!!o&&this.shouldShowNewSidebar()&&tag("span","pf-ml-4 pf-py-2 pf-badge pf-badge-small pf-badge--primary",clang("Badge","New in Sidebar")),!o&&this.shouldShowNewSidebar()&&tag("span","pf-ml-4 pf-badge pf-badge-small pf-badge--primary",clang("Badge","New")),this.isTopLevel()&&tag("span","catalog__sidebar-menu__item__arrow")]},this._menuNode]})},isTopLevel:function(){return 0===this._category.parentId},hasChildren:function(){return this._category.children.length>0},shouldShowNewSidebar:function(){var e=moment(this._category.settings.showNewSidebarSetAt),t=e?e.clone().add(30,"days"):null;return e<t},setAsActive:function(){a.a.addClassName(this.node,this._classActive),this._menuNode&&this._menuNode.setHeight()},removeActive:function(){this._menuNode&&this._menuNode.setHeight(0),a.a.removeClassName(this.node,this._classActive)},getCategory:function(){return this._category.isClone?o.a.getItemParent(this._category):this._category},getCategoryId:function(){return this._category?this._category.id:0},getTitle:function(){return this._category.settings.sidebarNavTitle?this._category.settings.sidebarNavTitle:this._category.title},getActiveCategory:function(){return this._category.id===this._activeCategoryId?this._category:!!this._menuNode&&this._menuNode._items.map(function(e){return e.getActiveCategory()}.bind(this)).filter(Boolean).shift()},_getClassName:function(){var e="catalog__sidebar-menu__item pf-py-4";return this._isActive()?e+" catalog__sidebar-menu__item--active":e},_isActive:function(){return this._category[this._category.isClone?"parentId":"id"]===this._activeCategoryId||this._forceActive}},a.a.Base);window&&((globalThis||{}).PFProductsCatalogSidebarMenuItem=s);var l=i("cCrT"),c=i("N6Gp"),d=i("YBfo"),u=i("GGNF"),h=Class({_params:null,_focus:null,_items:[],_activeItem:null,_nodeActiveSubItem:null,__construct:function(e){var t=this;this._params=e,this._items=this._params.activeCategoryId!==c.a.ID_FAKE_FAVORITES?this._getCategories().sort(this._sort).map(this._renderItem):[],this.node=tag("ul",this._getClassName(),[this._items]),this._nodeActiveSubItem=tag("div","catalog__sidebar-menu__current-item").append(this.node),u.a.isFavoriteProductsEnabled().then((function(e){e&&t._shouldRenderFavorites()&&t._getFavoritesNode().prepend(t.node)})),setTimeout(function(){!this._params.isTopLevel&&this._params.activeCategoryId&&(this.setHeight(),window.onresize=function(){this.setHeight()}.bind(this)),this._params.isTopLevel&&!this._params.activeCategoryId&&this._items[0]&&this._toggleActive(this._items[0])}.bind(this),this._getMenuTimeout())},_shouldRenderFavorites:function(){var e=0;return this._params.categories.forEach((function(t){e+=t.parentId})),this._isActiveTopLevel()||-1===this._params.activeCategoryId||(0===this._params.activeCategoryId||null===this._params.activeCategoryId)&&!Number(e)},_getFavoritesNode:function(){return tag("li",{className:"catalog__sidebar-menu__item pf-py-4"},[tag("a",{onclick:this.openFavoritesLink.bind(this),text:lang("My favorites"),href:"javascript:;"})])},openFavoritesLink:function(){n.a.createAndDispatch(d.a.EVENT_NAME,{category:c.a.getTemporaryFavoritesCategory(0===this._params.activeCategoryId?null:this._params.activeCategoryId)})},_renderItem:function(e){return new s(e,this._params.activeCategoryId,this._isActiveTopLevel(),this._onclick,this._params.shouldShowNew)},_getClassName:function(){var e="catalog__sidebar-menu";return this._params.isTopLevel&&!this._params.activeCategoryId&&(e+=" catalog__sidebar-menu--hide-children"),this._params.isTopLevel&&(e+=" catalog__sidebar-menu--top-level hidden-xs"),e},_onclick:function(e,t){t.preventDefault(),this._params.isTopLevel?this._toggleActive(e):this._setActiveItem(e)},_setActiveItem:function(e){n.a.createAndDispatch(d.a.EVENT_NAME,{category:e.getCategory(),activeTab:(new l.a).hash})},_getCategories:function(){return this._isActiveTopLevel()?(this._focus=this._params.activeTopLevelCategory.id,[this._params.activeTopLevelCategory]):this._params.categories},_toggleActive:function(e){if(void 0!==e.getCategoryId){this._focus=e.getCategoryId()!==this._focus?e.getCategoryId():null;var t=!0;for(var i in this._items){var n=this._items[i];if("function"==typeof n.getCategoryId){if(n.getCategoryId()===this._focus){n.setAsActive(),t=!1;continue}n.removeActive()}}var r=e.getActiveCategory();t&&r?mkE({tag:"span",text:r.getSidebarTitle()}).append(this._nodeActiveSubItem):mkE.clearNode(this._nodeActiveSubItem)}},_isActiveTopLevel:function(){return this._params.isTopLevel&&this._params.activeTopLevelCategory},_sort:function(e,t){return e.settings.sidebarNavPosition-t.settings.sidebarNavPosition},_getMenuTimeout:function(){var e=0;return(d.a.isProductPush()||d.a.is(d.a.TYPE_OF))&&(e=300),e},setHeight:function(e){void 0===e&&(mkE.addClassName(this.node,"for-height"),e=this.node.offsetHeight,mkE.removeClassName(this.node,"for-height")),setTimeout(function(){this.node.style.height=e>0?"auto":0}.bind(this),0)}},mkE.Base);window&&((globalThis||{}).PFProductsCatalogSidebarMenu=h)},SaSb:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(){};n.XXS="XXS",n.XS="XS",n.SM="SM",n.MD="MD",n.LG="LG",n.XL="XL",n.SIZES={XXS:0,XS:540,SM:768,MD:992,LG:1200,XL:1600},n.getWindowSize=function(){return window.innerWidth},n.getContentSize=function(){return $(document).find(".dashboard__content").width()},n.getBreakpointWidth=function(e){return this.SIZES.hasOwnProperty(e)?this.SIZES[e]:parseInt(e)},n.isWindowBiggerThan=function(e){return this.getWindowSize()>=this.getBreakpointWidth(e)},n.isWindowSmallerThan=function(e){return this.getWindowSize()<this.getBreakpointWidth(e)},n.isContentBiggerThan=function(e){return this.getContentSize()>=this.getBreakpointWidth(e)},n.isContentSmallerThan=function(e){return this.getContentSize()<this.getBreakpointWidth(e)},n.getWindowBreakpoint=function(){var e=this.getWindowSize(),t=null,i=-1/0;return Object.keys(n.SIZES).forEach((function(r){var a=n.SIZES[r];e>a&&i<a&&(t=r,i=n.SIZES[t])})),{key:t,value:i}},window&&((globalThis||{}).PFUtilsBreakpoints=n)},SvWC:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6JZw"),r=i("nF4n"),a=function(){};a.prototype=new n.a,a.prototype.toArrayKeys=["id","company","name","address1","address2","city","state","country","zip","phone","nationalPhone","phoneCountry","email"],a.prototype.id="",a.prototype.company="",a.prototype.name="",a.prototype.address1="",a.prototype.address2="",a.prototype.city="",a.prototype.state="",a.prototype.stateName="",a.prototype.country="",a.prototype.countryName="",a.prototype.zip="",a.prototype.phone="",a.prototype.nationalPhone="",a.prototype.phoneCountry="",a.prototype.email="",a.ADDRESS_TYPE_SHIPPING="shipping",a.ADDRESS_TYPE_LEGAL="legal",a.ADDRESS_TYPE_DEFAULT="default",a.prototype.isSameAs=function(e){if(!(e&&e instanceof a))return!1;var t=this.toArray(),i=e.toArray();for(var n in t)if((Boolean(t[n])||Boolean(i[n]))&&t[n]!=i[n])return!1;return!0},a.prototype.hasState=function(){return null!==this.state&&""!==this.state},a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsAddressItem=a)},Svo9:function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return l})),i.d(t,"d",(function(){return c})),i.d(t,"f",(function(){return d})),i.d(t,"g",(function(){return u})),i.d(t,"h",(function(){return h})),i.d(t,"a",(function(){return p})),i.d(t,"e",(function(){return g}));var n=i("KLvT"),r=i("Kv+z");function a(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function o(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var o=e.apply(t,i);function s(e){a(o,n,r,s,l,"next",e)}function l(e){a(o,n,r,s,l,"throw",e)}s(void 0)}))}}var s=function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.b(r.a),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){return Object(n.a)().commit(r.b(r.i),e)},c=function(e){return Object(n.a)().getters[r.b(r.d)]([e])[0]},d=function(e){return!!c(e)},u=function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.b(r.h),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.b(r.j));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=o(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(i);case 2:return e.abrupt("return",Object(n.a)().commit(r.b(r.l),{quickDesignItemId:t,technique:i}));case 3:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),g=function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.b(r.e),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"Sx+Y":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6JZw"),r=i("nF4n"),a=function(){};a.prototype=new n.a,a.prototype.all=0,a.prototype.total=0,a.prototype.synced=0,a.prototype.notSynced=0,a.prototype.discontinued=0,a.prototype.outOfStock=0,a.prototype.woocommerceVariantWarning=0,a.prototype.removedLicensedAssets=0,a.prototype.ignored=0,a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},a.TYPE_ALL="all",a.TYPE_SYNCED="synced",a.TYPE_NOT_SYNCED="notSynced",a.TYPE_IGNORED="ignored",a.TYPE_DISCONTINUED="discontinued",a.TYPE_OUT_OF_STOCK="outOfStock",a.types={},a.types[a.TYPE_ALL]=dclang("dashboard","sync products","All"),a.types[a.TYPE_SYNCED]=dclang("dashboard","sync products","Synced"),a.types[a.TYPE_NOT_SYNCED]=dclang("dashboard","sync products","Not synced"),a.types[a.TYPE_IGNORED]=dclang("dashboard","sync products","Ignored"),a.types[a.TYPE_DISCONTINUED]=dclang("dashboard","sync products","Discontinued"),a.types[a.TYPE_OUT_OF_STOCK]=dclang("dashboard","sync products","Out of stock"),window&&((globalThis||{}).PFItemsSyncCountsItem=a)},TJkW:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var n=i("6t3j"),r=i("edgZ"),a=i("NLc6"),o=function(){this.productTitle="",this.descriptionChunks=[],this.descriptionChunkCount=0,this.translationLanguageCount=null,this.translations={},this.addTranslationChunk=function(e,t,i,n){void 0===this.translations[e]&&(this.translations[e]=this._createLocaleObject()),this.translations[e].descriptionChunks[t]=i,this.translations[e].descriptionChunkCount=n},this._createLocaleObject=function(){return{title:"",descriptionChunks:[],descriptionChunkCount:0}},this.addTranslationTitle=function(e,t){void 0===this.translations[e]&&(this.translations[e]=this._createLocaleObject()),this.translations[e].title=t},this.isAllTranslationsLoaded=function(){if(0===this.translationLanguageCount)return!0;if(this.translationLanguageCount!==Object.keys(this.translations).length)return!1;var e=!0;for(var t in this.translations){var i=this.translations[t];if(i.descriptionChunks.length!==i.descriptionChunkCount){e=!1;break}}return e},this.isAllDescriptionChunksLoaded=function(){return this.descriptionChunkCount&&this.loadedChunkCount()===this.descriptionChunkCount},this.loadedChunkCount=function(){return this.descriptionChunks.filter((function(e){return null!=e})).length},this.getDescription=function(){return this.descriptionChunks.join("")},this.getTranslations=function(){var e=[];for(var t in this.translations){var i=this.translations[t];e.push(a.a.fromArray({language:t,type:a.a.TYPE_TITLE,value:i.title})),e.push(a.a.fromArray({language:t,type:a.a.TYPE_DESCRIPTION,value:i.descriptionChunks.join("")}))}return e}};(globalThis||{}).PFRepositoriesSyncRepositoryLoadState=o;var s=i("nF4n"),l=Class({added:[],failed:[]});l.fromArray=function(e){var t=l;return s.a.O2O(t,e),t},window&&((globalThis||{}).PFProductPushSyncedProductIds=l);var c=i("2dYE"),d=i("DceF"),u=i("6JZw"),h=function(){this.items=[]};(h.prototype=new u.a).page=0,h.prototype.pages=0,h.prototype.total=0,h.prototype.items=null,h.fromArray=function(e){var t=new h;return s.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsSyncProductList=h);var p=i("9bv1"),g=i("Sx+Y"),f=i("7QI8"),_=Class({toArrayKeys:["generatorDesignId","newItemFile","oldItemFile"],syncVariants:[],newItemFile:null,oldItemFile:null,generatorDesignId:null,toArray:function(){return{newItemFile:this.newItemFile.toArray(),oldItemFile:this.oldItemFile.toArray(),generatorDesignId:this.generatorDesignId,syncVariantIds:this.syncVariants.map((function(e){return e.syncVariantId}))}}},u.a);_.fromArray=function(e){var t=new _,i=e.syncVariants;for(var n in delete e.syncVariants,s.a.O2O(t,e),i)t.syncVariants.push(d.a.fromArray(i[n]));return t.newItemFile=f.a.fromArray(e.newItemFile),t.oldItemFile=f.a.fromArray(e.oldItemFile),t},window&&((globalThis||{}).PFItemsSyncBatchUpdatePair=_);var m=i("LAWH"),v=i("rKkW"),y=i("n5ho"),b=i("X5Ic"),P=i("y70k"),C=i("96ed"),T=i("Sucz"),I=i("1tjy"),w=function(){};w._syncVariantCache={},w.LOAD_FAILED=0,w.LOAD_SUCCESSFUL=1,w.LOAD_IN_PROGRESS=2,w._syncProductCache={},w._descriptionLoadState=null,w.prototype._currency=null,w.prototype.getCounts=function(e,t){w.INITIAL_REQUEST=w.INITIAL_REQUEST||(new Date).getTime(),Object(T.a)("sync/counts?firstReqTime="+w.INITIAL_REQUEST,{storeId:e},$.proxy(this.getCountsRe,this,t))},w.prototype.getCountsRe=function(e,t){e(g.a.fromArray(t.counts))},w.prototype.getSyncedCounts=function(e,t,i){Object(T.a)("sync/synced-product-counts",{sourceStoreId:e,targetStoreId:t},this._getSyncedCountsRe.bind(this,i))},w.prototype._getSyncedCountsRe=function(e,t){e(c.a.fromArray(t.counts),l.fromArray(t.products))},w.prototype.getSyncProducts=function(e){Object(T.a)("sync/products",{storeId:e.storeId,syncProductType:e.syncProductType,search:e.search,page:e.page,perPage:e.perPage,searchInAll:e.searchInAll,isSampleOrder:e.isSampleOrder||!1},$.proxy(this.getSyncProductsRe,this,e.callback))},w.prototype.getSyncedProducts=function(e){Object(T.a)("sync/synced-products",{storeId:e.storeId,targetStoreId:e.targetStoreId,syncedProductType:e.syncedProductType,search:e.search,page:e.page,perPage:e.perPage},$.proxy(this.getSyncProductsRe,this,e.callback))},w.prototype.getSyncProductsRe=function(e,t){var i=t.syncProducts,n=t.syncProductCounts,r=t.syncProductVariantCounts,a=new h;for(var o in a.page=i.page,a.pages=i.pages,a.total=i.total,i.items){var s=p.a.fromArray(i.items[o]),l=s.syncProductId;s.counts=g.a.fromArray(n[l]);var c={};for(var d in r[l]){var u=r[l][d];c[d]=m.a.fromArray(u)}s.variantCounts=c,a.items.push(s),this.cacheSyncProduct(s)}e(a)},w.prototype.getSyncVariants=function(e,t,i,n){Object(T.a)("sync/variants",{syncProductId:e,syncedOnly:i?1:0,currency:this._currency,currentPage:n||null},$.proxy(this.getSyncVariantsRe,this,t))},w.prototype.setCurrency=function(e){this._currency=e},w.prototype.getSyncVariantsRe=function(e,t){var i,a=[];for(i in t.syncVariants){var o=d.a.fromArray(t.syncVariants[i]);a.push(o),this.cacheSyncVariant(o)}var s=new r.a;for(i in t.files)s.cacheFile(P.a.fromArray(t.files[i]));Object(I.b)(t.clipartItems.map((function(e){return v.a.fromArray(e)})));var l=new n.a;for(i in t.variants)l.cacheVariant(y.a.fromArray(t.variants[i]));for(i in t.products)l.cacheProduct(b.a.fromArray(t.products[i]));e({syncVariants:a,pagination:t.pagination})},w.prototype.saveSyncVariant=function(e,t){Object(T.a)("sync/save-variant",{syncVariant:e.toArray()},this.saveSyncVariantRe.bind(this,t)),e.syncedAt=moment().unix(),this.cacheSyncVariant(e)},w.prototype.batchSaveSyncVariants=function(e,t){var i=[];e.forEach(function(e){i.push(e.toArray()),e.syncedAt=moment().unix(),this.cacheSyncVariant(e)}.bind(this)),Object(T.a)("sync/batch-save-variants",{syncVariantsList:i},this.batchSaveSyncVariantsRe.bind(this,t))},w.prototype.batchSaveSyncVariantsRe=function(e,t){if(t.error)alert(t.error);else{var i=new r.a,n=[];for(var a in t.variants)if(t.variants.hasOwnProperty(a)){var o=t.variants[a];for(var s in o.fileItems)if(o.fileItems.hasOwnProperty(s)){var l=o.fileItems[s];i.cacheFile(P.a.fromArray(l))}var c=[];for(var d in o.syncBatchUpdatePairs)if(o.syncBatchUpdatePairs.hasOwnProperty(d)){var u=o.syncBatchUpdatePairs[d];c.push(_.fromArray(u))}n.push(c)}e&&e(n)}},w.prototype.saveSyncVariantRe=function(e,t){if(t&&t.error)alert(t.error);else{var i,n=new r.a;for(i in t.fileItems)n.cacheFile(P.a.fromArray(t.fileItems[i]));var a=[];for(i in t.syncBatchUpdatePairs)a.push(_.fromArray(t.syncBatchUpdatePairs[i]));e&&e(a)}},w.prototype.updateSyncUsedFiles=function(e,t){var i=[];for(var n in e)i.push(e[n].toArray());Object(T.a)("sync/update-used-files",{syncBatchUpdatePairs:i},$.proxy(this.updateSyncUsedFilesRe,this,t))},w.prototype.updateSyncUsedFilesRe=function(e,t){e(t.filesReplaced)},w.prototype.saveSyncProduct=function(e,t){Object(T.a)("sync/save-product",{syncProduct:e.toArray()},this.saveSyncProductRe.bind(this,t)),e.syncedAt=moment().unix(),this.cacheSyncProduct(e)},w.prototype.saveSyncProductRe=function(e,t){if(t.error)alert(t.error);else{var i=p.a.fromArray(t.syncProduct);i.counts=g.a.fromArray(t.syncProductCounts);var n={};for(var r in t.syncProductVariantCounts){var a=t.syncProductVariantCounts[r];n[r]=m.a.fromArray(a)}i.variantCounts=n,this.cacheSyncProduct(i),e&&e(i)}},w.prototype.getCachedSyncVariant=function(e){return w._syncVariantCache[e]?w._syncVariantCache[e]:(console.error("Sync variant "+e+" was not cached"),new d.a)},w.prototype.getCachedSyncProduct=function(e){return w._syncProductCache[e]?w._syncProductCache[e]:(console.error("Sync product "+e+" was not cached"),new p.a)},w.prototype.cacheSyncVariant=function(e){w._syncVariantCache[e.syncVariantId]=e},w.prototype.cacheSyncProduct=function(e){w._syncProductCache[e.syncProductId]=e},w.prototype.saveAlternatives=function(e,t){Object(T.a)("sync/save-alternatives",e,t)},w.prototype.requestDescription=function(e,t){var i=w.LOAD_SUCCESSFUL,n=setTimeout((function(){i=w.LOAD_FAILED,t(i)}),3e4);this._editDescriptionPopupCallback&&(C.a.unbindStore(e.storeId,"sync","onDescriptionLoaded",this._editDescriptionPopupCallback),delete this._editDescriptionPopupCallback),this._editDescriptionPopupCallback||(this._editDescriptionPopupCallback=this._requestDescriptionRe.bind(this,i,n,e,t),C.a.subscribeStore(e.storeId,C.a.CHANNEL_SYNC,"onDescriptionLoaded",this._editDescriptionPopupCallback)),Object(T.a)("sync/queue-description-retrieval",{syncProductId:e.syncProductId},(function(e){e||(clearTimeout(n),i=w.LOAD_IN_PROGRESS,t(i))}))},w.prototype._requestDescriptionRe=function(e,t,i,n,r){if(clearTimeout(t),r.syncProductId==i.syncProductId){w._descriptionLoadState||(w._descriptionLoadState=new o),!0===r.isTranslationChunk?(w._descriptionLoadState.addTranslationChunk(r.locale,r.chunkNumber,r.description,r.chunkCount),w._descriptionLoadState.addTranslationTitle(r.locale,r.title),w._descriptionLoadState.translationLanguageCount=r.translationCount):(w._descriptionLoadState.descriptionChunks[r.chunkNumber]=r.description,w._descriptionLoadState.descriptionChunkCount=r.chunkCount,w._descriptionLoadState.productTitle=r.title,w._descriptionLoadState.translationLanguageCount=r.translationCount);var a=w._descriptionLoadState.isAllTranslationsLoaded(),s=w._descriptionLoadState.isAllDescriptionChunksLoaded();if(a&&s){var l=w._descriptionLoadState.productTitle,c=w._descriptionLoadState.getDescription(),d=w._descriptionLoadState.getTranslations();w._descriptionLoadState=null,n(e,i,l,c,r.sizeGuideExists,r.hasImperialSizeGuide,r.hasMetricSizeGuide,r.canEditDescription,d)}}},w.prototype.requestNativeDescription=function(e,t){var i=w.LOAD_SUCCESSFUL;Object(T.a)("sync/queue-native-description-retrieval",{syncProductId:e.syncProductId},this._requestNativeDescriptionRe.bind(this,i,e,t))},w.prototype._requestNativeDescriptionRe=function(e,t,i,n){if(!n)return i(e=w.LOAD_IN_PROGRESS);i(e,t,n.title,n.description,n.sizeGuideExists,n.hasImperialSizeGuide,n.hasMetricSizeGuide,n.canEditDescription)},w.prototype.queueDescriptionEditing=function(e,t){Object(T.a)("sync/queue-description-editing",{data:e},t)},w.GetPar=function(){},w.GetPar.prototype.storeId=null,w.GetPar.prototype.targetStoreId=null,w.GetPar.prototype.syncProductType=null,w.GetPar.prototype.syncedProductType=null,w.GetPar.prototype.search="",w.GetPar.prototype.page=null,w.GetPar.prototype.perPage=null,w.GetPar.prototype.callback=null,w.GetPar.prototype.searchInAll=!0,w.GetPar.prototype.isSampleOrder=!1,(globalThis||{}).PFRepositoriesSyncRepository=w},TOJy:function(e,t,i){"use strict";i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return c})),i.d(t,"c",(function(){return d})),i.d(t,"d",(function(){return m}));var n=i("9Nv7");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(n.a)("pro-subscription/check-features",{features:e})}var a=i("LvDl");function o(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function s(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function s(e){o(a,n,r,s,l,"next",e)}function l(e){o(a,n,r,s,l,"throw",e)}s(void 0)}))}}var l="background-removal-tool",c="additional-clipart-content",d="getty-images",u={};function h(e,t){var i;return null==t||null===(i=t.features)||void 0===i?void 0:i[e]}function p(){return g.apply(this,arguments)}function g(){return(g=s(regeneratorRuntime.mark((function e(){var t,i,n,r,o,s,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.length>0&&void 0!==l[0]?l[0]:[],i=Object(a.pick)(u,t),n={},r=0;case 4:if(!(r<Object.keys(i).length)){e.next=13;break}return o=Object.keys(i)[r],e.next=8,i[t];case 8:s=e.sent,n[o]=!!h(o,s);case 10:r++,e.next=4;break;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return _.apply(this,arguments)}function _(){return(_=s(regeneratorRuntime.mark((function e(){var t,i,n,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:[],i={},t.forEach((function(e){e in u&&(i[e]=u[e])})),(n=t.filter((function(e){return!(e in i)}))).length&&(a=r(n),n.forEach((function(e){u[e]=a}))),e.next=7,p(t);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return v.apply(this,arguments)}function v(){return(v=s(regeneratorRuntime.mark((function e(){var t,i,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,f([t]);case 3:return i=e.sent,e.abrupt("return",!(null==i||!i[t]));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},Te2b:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("l19W"),r=i("nF4n");function a(){var e,t;return(null===(e=PF)||void 0===e||null===(t=e.FileLibraryConfig)||void 0===t?void 0:t.DropBoxPicker)||{}}var o=function(e){this.onFilePickedCallback=e,this.node=Object(r.a)({tag:"a",className:"pf-btn pf-btn-outline pf-btn-block pf-btn-square",els:[this.nodeImage=Object(r.a)({tag:"img",src:"/static/lightbox/img/loading.gif",attr:{width:16,height:16}})],attr:{title:dlang("library","Upload files from Dropbox")},prop:{onclick:$.proxy((function(){n.a.showPopup($.proxy(this.onClick,this))}),this),style:{paddingLeft:0,paddingRight:0}}}),$(this.node).tooltip({html:!0}),this.prepare()};o.prototype=new r.a.Base,o.isScriptLoaded=!1,o.waitingRetries=0,o.prototype.prepare=function(){if(!a().APP_KEY)return o.waitingRetries+=1,o.waitingRetries>50?void(this.nodeImage.src="/static/images/plugins/uzmanibu-ikona@2x.png"):void setTimeout($.proxy(this.prepare,this),100);o.isScriptLoaded||(o.isScriptLoaded=!0,Object(r.a)({tag:"script",id:"dropboxjs",attr:{type:"text/javascript",src:"https://www.dropbox.com/static/api/2/dropins.js","data-app-key":a().APP_KEY}}).append(document.body)),this.nodeImage.src="/static/images/layout/dropbox.png"},o.prototype.onClick=function(){ga("send",{hitType:"event",eventCategory:"FileLibrary",eventAction:"DropBox file upload"}),Dropbox.choose({linkType:"direct",multiselect:!0,success:$.proxy(this.onDropBoxPicked,this)})},o.prototype.onDropBoxPicked=function(e){for(var t in e)this.onFilePickedCallback(e[t].link,e[t].name)},(globalThis||{}).PFFileLibraryDropBoxPicker=o},UIgN:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o}));var n=i("xeH2"),r=i.n(n);function a(e){return!!function(e){if(e.disabled)return!1;if(e.tabIndex>=0)return!0;switch(e.nodeName.toLowerCase()){case"a":return!!e.href&&"ignore"!==e.rel;case"input":return"hidden"!==e.type&&"file"!==e.type;case"button":case"select":case"textarea":return!0;default:return!1}}(e)&&("function"==typeof e.focus?e.focus():r()(e).focus(),document.activeElement===e)}function o(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];if(a(i)||o(i))return!0}return!1}},UYP3:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("3Dht"),r=i("dqhU"),a=i("nF4n"),o=Class({par:null,__construct:function(e){this.par=new o.Par,a.a.O2O(this.par,e);var t=new n.a;t.minValue=this.par.min,t.maxValue=this.par.max,t.value=this.par.value,t.incrementStep=this.par.step,t.className="pf-mb-8",t.onSlide=this.par.onSlide,t.onValueChanged=this.par.onSlideEnded,this._range=new r.a(t),this.node=tag("div","slider-component",[tag("span",{className:"icon-minus",onclick:this._onClick.bind(this,-1)}),this._range=new r.a(t),tag("span",{className:"icon-plus",onclick:this._onClick.bind(this,1)})])},_onClick:function(e){this.setValue(this.getValue()+15*e),this.par.onSlide(this.getValue(),this)},getValue:function(){return parseFloat(this._range.value)},setValue:function(e){e=Math.max(Math.min(e,this.par.max),this.par.min),this._range.setValue(e)}},a.a.Base);o.Par=Class({min:0,max:100,value:0,step:1,onSlide:null,onSlideEnded:null}),window&&((globalThis||{}).PFComponentsSlider=o)},UzRV:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("97Au"),r=Class({__construct:function(e,t,i){var r=new n.a.Par;r.modalDialogClass="modal-md",r.onClose=i;var a=new n.a(r);a.setHeaderContent("");var o=dnlang("generator","You haven't uploaded <strong>{files}</strong> file","You haven't uploaded <strong>{files}</strong> files",e.length).replace("{files}",e.join(", ")),s=tag("div","",[tag("h4","",dlang("generator","Yikes! Missing files")),tag("div","pf-text-muted pf-ui-body",[tag("span",{innerHTML:o}),tag("br"),dnlang("generator","Proceed without it?","Proceed without them?",e.length)])]);a.setContent(s);var l=tag("div","container-fluid pf-d-block pf-d-md-flex pf-align-items-stretch",[tag("a",{className:"pf-btn pf-btn-secondary pf-mr-0 pf-mr-md-12 pf-mb-12 pf-mb-md-0 pf-w-100 pf-w-md-auto",onclick:function(e){a.remove(),"function"==typeof i&&i()}},lang("No, I'll fix it")),tag("a",{className:"pf-btn pf-btn-primary pf-w-100 pf-w-md-auto",onclick:function(e){a.remove(),t()}},lang("Yes, continue"))]);a.setFooterContent(l),a.show()}});window&&((globalThis||{}).PFComponentsMissingPrintfilesPopup=r)},V5mN:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("nBn9"),r=i("nF4n"),a=Class({_bulletPoint:{tag:"img",src:"/static/images/icons/bullet-point-green.svg",style:{width:"17px",height:"15px",position:"absolute",marginTop:"3px"}},_headerContent:tag("div","col-sm-12"),__construct:function(e){this._par=e||new a.Par;var t=this._getSignUpContent(this._par.signUpContent),i=this._getSignUpContent(this._par.signInContent),o=this._par.returnUrl?"?returnUrl="+encodeURIComponent(this._par.returnUrl):"",s=langUrl("/auth/register")+o,l=langUrl("/auth")+o,c=window.location.pathname;ga("send","event","Sign up to continue pop-up","Banner appeared",c),null!=this._par.signUpInHeader&&(r.a.clearNode(this._headerContent),this._par.signUpInHeader.append(this._headerContent)),new n.a({title:lang("Sign up with Printful to continue"),bodyContent:tag("div","sign-up-popup-container",[tag("div","row",[this._headerContent,tag("div","col-sm-6",[tag("div",{className:"sign-up-popup-container__box sign-up-popup-container__box--thick",prop:{onclick:function(){ga("send","event","Sign up to continue pop-up","Sign up clicked",c),window.location=s}}},[tag("div","sign-up-popup-container__header",[tag("strong",null,lang("Sign up to Printful"))]),tag("div","sign-up-popup-container__content",[tag("ul","pf-p-0",[this._getContent(t,!0)])]),tag("a",{className:"pf-btn pf-btn-primary sign-up-popup-container__btn",href:s},[lang("Sign up")])])]),tag("div","col-sm-6",[tag("div",{className:"sign-up-popup-container__box",prop:{onclick:function(){ga("send","event","Sign up to continue pop-up","Sign in clicked",c),window.location=l}}},[tag("div","sign-up-popup-container__header",[lang("Already Printful user?")]),tag("div","text-center sign-up-popup-container__content",[this._getContent(i,!1)]),tag("a",{className:"pf-btn pf-btn-secondary sign-up-popup-container__btn",href:l},[lang("Sign in")])])])])]),showFooterContent:!1})},_getSignUpContent:function(e){return"string"==typeof e?JSON.parse(e):e},_getContent:function(e,t){var i=[];for(var n in e){var r=e[n];t?i.push(this._getListElement(r)):i.push(r)}return i},_getListElement:function(e){return{tag:"li",els:[this._bulletPoint,{tag:"div",els:[e]}]}}});a.Par=Class({returnUrl:"",signUpContent:null,signInContent:null,signUpInHeader:null}),window&&((globalThis||{}).PFComponentsSignUpPopup=a)},VpOd:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("qs6/"),r=i("x0He"),a=i("SBaP");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=g(e);if(t){var r=g(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return h(this,i)}}function h(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function _(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var m=new WeakMap,v=new WeakMap,y=new WeakSet,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,e);var t,i,r,a=u(o);function o(e){var t;return l(this,o),t=a.call(this),y.add(p(t)),m.set(p(t),{writable:!0,value:void 0}),v.set(p(t),{writable:!0,value:void 0}),t.node=tag("div","discount-countdown-mke"),_(p(t),m,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(p(t),y,P).call(p(t)),t}return t=o,r=[{key:"createDiscountCountdown",value:function(e){var t=e.countdownText,i=void 0===t?"":t,n=e.endTime,r=e.showTopTriangle,a=void 0!==r&&r,o=e.showBottomTriangle,s=void 0!==o&&o,l=e.justifyContentEndOnXxs,c=void 0!==l&&l,d=e.customBlockClass,u=void 0===d?"":d,h=new C;return h.endTime=1e3*n,h.text=i,h.showTopTriangle=a,h.showBottomTriangle=s,h.justifyContentEndOnXxs=c,h.customBlockClass=u,new this(h)}},{key:"getPeriodicPriceCountdownFromCartOrderItem",value:function(e){var t=e.cartOrderItem,i=e.showTopTriangle,r=void 0!==i&&i,a=e.showBottomTriangle,o=void 0!==a&&a,s=e.customBlockClass,l=void 0===s?"":s,c=e.justifyContentEndOnXxs,d=void 0!==c&&c,u=e.containerClass,h=void 0===u?"":u;if(e.tooltipPlacement,t&&t.priceData.discountedPrice&&n.a.DISCOUNT_PERIODIC_TYPES.includes(t.priceData.discountType)){var p=this.createDiscountCountdown({countdownText:n.a.DISCOUNT_COUNTDOWN_TEXT_MAP[t.priceData.discountType],endTime:t.priceData.getPeriodicPriceExpiryTime(),showTopTriangle:r,showBottomTriangle:o,justifyContentEndOnXxs:d,customBlockClass:l});return tag("div",h,[p])}return""}},{key:"getPeriodicPriceCountdownFromPriceRange",value:function(e){var t,i=e.priceRange,r=e.showTopTriangle,a=void 0!==r&&r,o=e.showBottomTriangle,s=void 0!==o&&o,l=e.customBlockClass,c=void 0===l?"":l,d=e.justifyContentEndOnXxs,u=void 0!==d&&d,h=e.containerClass,p=void 0===h?"":h,g=null===(t=i.minPriceDiscount)||void 0===t?void 0:t.discountType;if(i.minPriceDiscount&&n.a.DISCOUNT_PERIODIC_TYPES.includes(g)&&i.minPriceDiscount.discountExpiryDate&&1e3*i.minPriceDiscount.discountExpiryDate>=Date.now()){var f=this.createDiscountCountdown({countdownText:n.a.DISCOUNT_COUNTDOWN_TEXT_MAP[g],endTime:i.minPriceDiscount.discountExpiryDate,showTopTriangle:a,showBottomTriangle:s,justifyContentEndOnXxs:u,customBlockClass:c});return tag("div",p,[f])}return""}}],(i=null)&&c(t.prototype,i),r&&c(t,r),o}(a.a),P=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new r.b).components={"discount-countdown":function(){return i.e(196).then(i.bind(null,"2YnG"))}},t.template='\n            <discount-countdown\n                :end-time="endTime"\n                :show-top-triangle="showTopTriangle"\n                :show-bottom-triangle="showBottomTriangle"\n                :custom-block-class="customBlockClass"\n                :justify-content-end-on-xxs="justifyContentEndOnXxs"\n                :text="text"\n            />\n        ',t.initialData={endTime:f(this,m).endTime,text:f(this,m).text,showTopTriangle:f(this,m).showTopTriangle,showBottomTriangle:f(this,m).showBottomTriangle,justifyContentEndOnXxs:f(this,m).justifyContentEndOnXxs,customBlockClass:f(this,m).customBlockClass},_(this,v,new r.a(t)),f(this,v).append(this.node);case 6:case"end":return e.stop()}}),e,this)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){s(a,n,r,o,l,"next",e)}function l(e){s(a,n,r,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),C=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,e),this.endTime=t.endTime,this.text=t.text,this.showBottomTriangle=t.showBottomTriangle,this.showTopTriangle=t.showTopTriangle,this.customBlockClass=t.customBlockClass,this.justifyContentEndOnXxs=t.justifyContentEndOnXxs}},WLCh:function(e,t,i){"use strict";function n(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}i.d(t,"a",(function(){return a}));var a=Class({sizeConfig:null,colorConfig:null,activeRegion:[],isSampleOrder:!1,productOptionsValues:null,placementPrices:{},fileTags:{},__construct:function(){this.setSizeConfig(new a.ConfigBlueprint).setColorConfig(new a.ConfigBlueprint)},setSizeConfig:function(e){return this.sizeConfig=e,this},setColorConfig:function(e){return this.colorConfig=e,this},setActiveRegion:function(e){"string"==typeof e&&(e=[e]);var t,i=n(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;-1===this.activeRegion.indexOf(r)&&this.activeRegion.push(r)}}catch(e){i.e(e)}finally{i.f()}return this},setPlacementPrices:function(e){return this.placementPrices=e,this},setSampleOrderStatus:function(e){return this.isSampleOrder=e,this},setFileTags:function(e,t){return this.placementGroups=e,this.fileTags=t,this},getFileTag:function(e,t){if(!this.placementGroups||!this.fileTags)return"";var i=t+"_"+this.placementGroups[e];return this.fileTags[i]?"tag: "+this.fileTags[i]:""},setOptionsValues:function(e){return this.productOptionsValues=e,this}});a.TYPE_SIZE="size",a.TYPE_COLOR="color",a.TYPE_PRODUCT_OPTIONS="productOptions",a.ConfigBlueprint=Class({maxValues:0,defaultValue:null,isPopoverEnabled:!1,__construct:function(e,t,i){void 0!==e&&(this.maxValues=e),void 0!==t&&(this.defaultValue=t),void 0!==i&&(this.isPopoverEnabled=i)}}),window&&((globalThis||{}).PFVariantPickerPickersConfig=a)},X4PR:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({_fonts:null,_font:null,onChange:null});window&&((globalThis||{}).PFComponentsFontDropdownPar=n)},XPj6:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("WLCh"),r=Class({store:null,product:null,ctaText:lang("Proceed"),onProductDesigned:null,onBack:null,onFooterRender:null,isOrderFlowMode:!1,isFooterVisible:!0,isMockupGeneratorMode:!1,arePickersVisible:!0,isProductPushMode:!1,isChangePrintfileMode:!1,isProductlessMode:!1,isPromoMakerMode:!1,isMockupMakerMode:!1,onReady:null,designerState:null,orderLineItem:null,onFileRemoved:null,onPositionsChanged:null,onPickerChanged:null,placementDependentOptions:!1,withGlobalDropZone:!0,mockupMainMaxWidth:800,mockupMainMaxHeight:800,pushMockupMainMaxWidth:561,pushMockupMainMaxHeight:561,mockupZoomMaxWidth:1e3,observer:null,generatorParameters:null,generatorDesignKey:"",useGeneratedDesignRpcUrl:!1,disableLayerManipulations:!1,hideZoomButton:!1,hideEmptyPlacements:!1,onActiveLayerChanged:null,disableOutOfBoundsErrorMessages:!1,existingVariants:null,autoLoad:!0,pickerConfig:new n.a,isCustomizerEnabled:!1,forceOrientation:"",previewMockupVariant:null,isCustomizingMode:!1,isModalDesigner:!1,isCustomizerEnabledJS:!1,defaultPlacementId:null,productTemplateEditorState:null,onLoaderToggle:null,onProductLoaded:null,onCanContinueChange:null,shouldShowPrice:!0,disableDesignerLeaveWarning:!1,isProductPreloaded:!1,onDisabledSizesWarn:null,onActiveDesignerTabChanged:null,initDesignerTechnique:null,productChanged:!1,keepDesignerModules:!1});r.UNAVAILABLE={DESC:dlang("generator","Sorry, this size and color combination is out of stock. Please choose a different size and color combination."),DESC_SIZE_ONLY:dlang("generator","Sorry, this size is out of stock. Please choose a different size"),DESC_COLOR_ONLY:dlang("generator","Sorry, this color is out of stock. Please choose a different color.")},window&&((globalThis||{}).PFProductPushDesignerPar=r)},Xapb:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(){};n.HAS_MARKETPLACE_CATEGORY_PICKER="HAS_MARKETPLACE_CATEGORY_PICKER",n.CAN_CHOOSE_PUSH_CATEGORIES="CAN_CHOOSE_PUSH_CATEGORIES",n.CAN_CHOOSE_SHIPPING_PROFILE="CAN_CHOOSE_SHIPPING_PROFILE",n.CAN_PUSH_VIDEOS="CAN_PUSH_VIDEOS",n.HAS_LIMITED_AVAILABLE_PRINTFUL_PRODUCTS="HAS_LIMITED_AVAILABLE_PRINTFUL_PRODUCTS",n.HAS_CUSTOM_TAX_RULES="HAS_CUSTOM_TAX_RULES",n.CAN_PUSH_EXISTING="CAN_PUSH_EXISTING",n.HAS_MULTI_LANGUAGE_PRODUCT_DETAILS="HAS_MULTI_LANGUAGE_PRODUCT_DETAILS",n.CAN_SYNC_INCOMPLETE_ITEMS_FROM_ANOTHER_STORE="CAN_SYNC_INCOMPLETE_ITEMS_FROM_ANOTHER_STORE",n.SQUARESPACE_HAS_OAUTH="SQUARESPACE_HAS_OAUTH",n.ALLOW_FREE_SHIPPING_PUSH="ALLOW_FREE_SHIPPING_PUSH",n.SUPPORTS_MULTIPLE_MARKETPLACES="SUPPORTS_MULTIPLE_MARKETPLACES",n.HAS_NO_WORKING_MARKETPLACES="HAS_NO_WORKING_MARKETPLACES",n.FLAG_CUSTOM_INSIDE_LABELS_ALLOWED="CUSTOM_INSIDE_LABELS_ALLOWED",n.FLAG_LIVE_RATES="HAS_LIVE_RATES_ENABLED",n.FLAG_FREE_SHIPPING_FOR_LIVE_RATES="HAS_FREE_SHIPPING_FOR_LIVE_RATES",n.FLAG_SUPPORTS_ADVANCED_SIZE_GUIDE="SUPPORTS_ADVANCED_SIZE_GUIDE",n.FLAG_HAS_DEFAULT_SELLING_REGION_SET="HAS_DEFAULT_SELLING_REGION_SET",n.FLAG_IS_LIMITED_BY_DSR_SETTINGS="IS_LIMITED_BY_DSR_SETTINGS",n.FLAG_CAN_SET_SKU_PREFIX_IN_PUSH="CAN_SET_SKU_PREFIX_IN_PUSH",window&&((globalThis||{}).PFItemsStoreItemFlags=n)},Y6pR:function(e,t,i){"use strict";i.d(t,"b",(function(){return c})),i.d(t,"a",(function(){return d})),i.d(t,"c",(function(){return u}));var n=i("o0qH"),r=i("7QI8"),a=i("LvDl"),o=i.n(a);function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t){var i,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=null,(n="productPrintPrices")in(i=this)?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,this.productPrintPrices=t}var t,i,n;return t=e,(i=[{key:"getPrintPrice",value:function(e,t,i){var n=this._getPrintPrices(e,i);return o.a.find(n,["placementName",t])}},{key:"getPlacementPickerPrintPrice",value:function(e,t,i){var n=this._getPlacementPickerPrintPrices(e,i);return o.a.find(n,["placementName",t])}},{key:"getMinPrintPriceByTechnique",value:function(e){return e||(e=this._getFallbackTechnique()),this._findByTechnique(e).minPrintPrice}},{key:"_getPrintPrices",value:function(e,t){var i=this._findByTechnique(e),n=this._findByPlacementNames(i,t),r=o.a.cloneDeep(n);if(this._hasPriceEqualToPrice(n,i.minPrintPrice.discountedPrice))return r;var a=this._getHighestCostPrintPrice(n);if(!a)return r;for(var s in r){var l=r[s],c=l.discountedPrice==a.discountedPrice,d=l.discountedPrice<i.minPrintPrice.discountedPrice;return c&&d&&(r[s].price=i.minPrintPrice.price,r[s].discountedPrice=i.minPrintPrice.discountedPrice),r}return r}},{key:"_getPlacementPickerPrintPrices",value:function(e,t){var i=this._findByTechnique(e),n=this._findByPlacementNames(i,t),r=o.a.cloneDeep(n);if(this._hasPriceEqualToPrice(n,i.minPrintPrice.discountedPrice)){for(var a in r)if(r[a].discountedPrice==i.minPrintPrice.discountedPrice){r[a].price=0,r[a].discountedPrice=0;break}return r}var s=this._getHighestCostPrintPrice(n);if(!s)return r;for(var l in r){var c=r[l],d=c.discountedPrice==s.discountedPrice,u=c.discountedPrice>=i.minPrintPrice.discountedPrice;if(d)return u?(r[l].discountedPrice=n[l].discountedPrice-i.minPrintPrice.discountedPrice,r[l].price=n[l].price-i.minPrintPrice.price):(r[l].price=0,r[l].discountedPrice=0),r}return r}},{key:"_getHighestCostPrintPrice",value:function(e){return o.a.maxBy(e,"discountedPrice")}},{key:"_hasPriceEqualToPrice",value:function(e,t){return!!o.a.find(e,["discountedPrice",t])}},{key:"_findByTechnique",value:function(e){return o.a.find(this.productPrintPrices.techniquePrices,["technique",e])}},{key:"_findByPlacementNames",value:function(e,t){return o.a.filter(e.defaultPrintPrices,(function(e){return t.includes(e.placementName)}))}},{key:"_getFallbackTechnique",value:function(){return o.a.first(this.productPrintPrices.techniquePrices).technique}}])&&s(t.prototype,i),n&&s(t,n),e}(),c=Class({_placementPrices:null,_placementIdsWithLayers:[],_availablePlacements:[],_product:null,_licensedAssetsPrice:0,_printPriceCalculator:null,__construct:function(e,t){this._product=e,t&&this.updatePlacementPrices(t),this._printPriceCalculator=new l(null==e?void 0:e.productPrintPrices)},updatePlacementPrices:function(e){return this._placementPrices=e,this},updatePlacementsWithLayers:function(e){return this._placementIdsWithLayers=e,this},setAvailablePlacements:function(e){return this._availablePlacements=e.map((function(e){return e.id})),this},getFormattedPlacementPrices:function(){var e={};return this._placementIdsWithLayers.length<=1&&!this._hasOnlyInsideLabel()&&!this.shouldUseNewPricing()||this._availablePlacements.filter((function(e){return this._placementIdsWithLayers.indexOf(e)>-1}),this).forEach((function(t){e[t]=this.getPlacementPriceData(new d(t))}),this),e},getPlacementPriceData:function(e){if(this.shouldUseNewPricing())return this.getNewPlacementPriceData(e);var t=!!this._getFirstPlacementWithLayers(),i=this._isLabelAvailable(),n=t&&this._hasFrontOrBack(),a=this._getPlacementPrice([r.a.TYPE_BACK,r.a.TYPE_EMBROIDERY_BACK]),o=null,s=this._getFirstPlacementWithLayers();return(this._hasLayers(e.getId())||(e.isFront()||e.isBack())&&!n&&i)&&(t=!1),this._hasLayers(e.getId())&&!e.isLabel()&&e.getId()!==s&&(t=!0),e.isLabel()&&(t=!0),t&&(e.isFront()||e.isEmbroideryFront())&&(o=a),{canDisplayPrice:t,basePrice:this._placementPrices.getDiscountedPrice(e.getId()),finalPrice:o,currency:this._product.priceRange.currency}},getTotal:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.shouldUseNewPricing())return this.getNewTotal(e,t);var i=!0,n=!0,r=!0,a=this._adjustBasePrice(e.priceData.price);return t&&(a=this._adjustBasePrice(e.priceData.discountedPrice)),a+=this.getLicensedAssetsPrice(),this._placementIdsWithLayers.forEach((function(e){var o=new d(e);(!o.isBack()&&!o.isOutsideLabel()||this._hasFront())&&(this._shouldIgnoreExtraSleevePrice(n)?n=!1:this._shouldIgnoreExtraLegPrice(r)?r=!1:!o.isEmbroiderySide()&&!o.isEmbroideryBack()||this._hasFrontEmbroidery()||!i?a+=t?this._placementPrices.getDiscountedPrice(o.getId()):this._placementPrices.getPrice(o.getId()):i=!1)}),this),a},shouldUseNewPricing:function(){return this._product.useNewPricing&&null!=this._product.productPrintPrices},getNewTotal:function(e,t){var i=t?e.priceData.discountedPrice:e.priceData.price,n=this._getCurrentTechnique();i+=this.getLicensedAssetsPrice();var r=e.priceData.includedPrintPriceItem;if(!this._hasPlacementsWithLayers()){var a=this._printPriceCalculator.getMinPrintPriceByTechnique(n);return i+=t?a.discountedPrice-r.discountedPrice:a.price-r.price}return i-=t?r.discountedPrice:r.price,this._placementIdsWithLayers.forEach((function(e){var r=this._printPriceCalculator.getPrintPrice(n,e,this._placementIdsWithLayers),a=t?r.discountedPrice:r.price;i+=a}),this),i},getNewPlacementPriceData:function(e){var t=this._printPriceCalculator.getPlacementPickerPrintPrice(this._getCurrentTechnique(),e.getId(),this._placementIdsWithLayers);return{canDisplayPrice:!(0==t.price),basePrice:t.discountedPrice,finalPrice:t.discountedPrice,currency:this._product.priceRange.currency}},setLicensedAssetsPrice:function(e){return this._licensedAssetsPrice=e,this},getLicensedAssetsPrice:function(){return this._licensedAssetsPrice},_adjustBasePrice:function(e){var t=this._getActiveTechnique();if(this._product.type!==t&&!this._hasPlacementsWithLayers()){var i=this._placementPrices.getPlacementsByTechnique(t);i.length&&(e+=this._placementPrices.getPrice(i[0]))}return e},_hasLayers:function(e){return this._placementIdsWithLayers.indexOf(e)>-1},_getFirstPlacementWithLayers:function(){return this._hasPlacementsWithLayers()?this._placementIdsWithLayers.slice().shift():null},_getPlacementPrice:function(e){for(var t in e){var i=this._placementPrices.getDiscountedPrice(e[t]);if(i)return i}return null},_isLabelAvailable:function(){return this._availablePlacements.filter((function(e){return new d(e).isLabel()})).length>0},_hasOnlyInsideLabel:function(){return 1===this._placementIdsWithLayers.length&&1===this._placementIdsWithLayers.filter((function(e){return new d(e).isInsideLabel()})).length},_hasFrontOrBack:function(){return this._placementIdsWithLayers.filter((function(e){var t=new d(e);return t.isFront()||t.isBack()})).length>0},_hasFront:function(){return this._placementIdsWithLayers.filter((function(e){return new d(e).isFront()})).length>0},_shouldIgnoreExtraSleevePrice:function(e){return!!(this._product&&this._product.isDtgShirt()&&e)&&this._placementIdsWithLayers.filter((function(e){return new d(e).isSleeve()&&!this._hasFrontOrBack()}),this).length>0},_shouldIgnoreExtraLegPrice:function(e){return!!(this._product&&this._product.isDtgShirt()&&e)&&this._placementIdsWithLayers.filter((function(e){return new d(e).isLeg(this._product)}),this).length>0},_hasPlacementsWithLayers:function(e){return e||(e=0),this._placementIdsWithLayers.length>e},_getActiveTechnique:function(){return Object(n.a)(this._product.productId).getTechniqueFromMemory()},_getCurrentTechnique:function(){var e;return null!==(e=this._getActiveTechnique())&&void 0!==e?e:this._product.type},_hasFrontEmbroidery:function(){return this._placementIdsWithLayers.filter((function(e){return new d(e).isEmbroideryFront()})).length>0}}),d=Class({_placementId:"",__construct:function(e){this._placementId=e},getId:function(){return this._placementId},isMockup:function(){return this._is([r.a.TYPE_MOCKUP])},isFront:function(){return this._is([r.a.TYPE_FRONT,r.a.TYPE_POCKET,r.a.TYPE_DEFAULT])},isBack:function(){return this._is([r.a.TYPE_BACK])},isLabel:function(){return this._is([r.a.TYPE_LABEL_OUTSIDE,r.a.TYPE_LABEL_INSIDE])},isInsideLabel:function(){return this._is([r.a.TYPE_LABEL_INSIDE])},isOutsideLabel:function(){return this._is([r.a.TYPE_LABEL_OUTSIDE])},isSleeve:function(){return this._is([r.a.TYPE_SLEEVE_LEFT,r.a.TYPE_SLEEVE_RIGHT])},isLeg:function(e){var t=[r.a.TYPE_LEG_LEFT,r.a.TYPE_LEG_RIGHT,r.a.TYPE_LEG_FRONT_LEFT,r.a.TYPE_LEG_FRONT_RIGHT,r.a.TYPE_LEG_BACK_LEFT,r.a.TYPE_LEG_BACK_RIGHT];return e.isJoggerWithPocket()&&t.push(r.a.TYPE_POCKET),this._is(t)},isEmbroideryFront:function(){return this._is([r.a.TYPE_EMBROIDERY_FRONT])},isEmbroideryBack:function(){return this._is([r.a.TYPE_EMBROIDERY_BACK])},isEmbroiderySide:function(){return this._is([r.a.TYPE_EMBROIDERY_LEFT,r.a.TYPE_EMBROIDERY_RIGHT])},isHangTag:function(){return this._is([r.a.TYPE_HANG_TAG])},_is:function(e){return e.indexOf(this._placementId)>-1}}),u=Class({items:[],add:function(e,t,i,n){this.items.push({placementId:i,discountedPrice:n,price:e,technique:t})},getPrice:function(e){var t=this._findItem(e);return t?t.price:null},getDiscountedPrice:function(e){var t=this._findItem(e);return t?t.discountedPrice:null},getTechnique:function(e){var t=this._findItem(e);return t?t.technique:null},getPlacementsByTechnique:function(e){return this.items.filter((function(t){return t.technique===e})).map((function(e){return e.placementId}))},_findItem:function(e){return this.items.filter((function(t){return t.placementId===e})).slice().shift()}});(globalThis||{}).PFVariantPickerPriceCalculator=c,(globalThis||{}).PFVariantPickerPlacementChecker=d,(globalThis||{}).PFVariantPickerPricesCollection=u},Yh49:function(e,t,i){"use strict";i.d(t,"a",(function(){return z})),i.d(t,"b",(function(){return K}));var n=i("4Ru2"),r=i("V5mN"),a=i("SBaP"),o=i("nuUa"),s=i("LvDl"),l=i.n(s),c=i("cCrT"),d=i("9eNC"),u=i("4CFC");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=P(e);if(t){var r=P(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return y(this,i)}}function y(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function T(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function I(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var w=new WeakMap,S=new WeakMap,E=new WeakMap,k=new WeakMap,O=new WeakMap,A=new WeakMap,L=new WeakMap,N=new WeakMap,D=new WeakMap,R=new WeakMap,x=new WeakMap,F=new WeakMap,M=new WeakSet,B=new WeakSet,V=new WeakSet,j=new WeakSet,U=new WeakSet,z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,i,n,r=v(a);function a(e){var t;return f(this,a),t=r.call(this),U.add(b(t)),j.add(b(t)),V.add(b(t)),B.add(b(t)),M.add(b(t)),w.set(b(t),{writable:!0,value:null}),S.set(b(t),{writable:!0,value:null}),E.set(b(t),{writable:!0,value:null}),k.set(b(t),{writable:!0,value:[]}),O.set(b(t),{writable:!0,value:[]}),A.set(b(t),{writable:!0,value:[]}),L.set(b(t),{writable:!0,value:[]}),N.set(b(t),{writable:!0,value:null}),D.set(b(t),{writable:!0,value:null}),R.set(b(t),{writable:!0,value:!1}),x.set(b(t),{writable:!0,value:null}),F.set(b(t),{writable:!0,value:!0}),t.node=tag("div",null,[tag("div","pf-mb-8",[tag("h6",null,lang("Stocked in"))]),t.dropdownNode=tag("div","pf-mb-8"),t.availabilityNode=tag("div","regions-dropdown__sub--description text-muted")]),I(b(t),w,e),I(b(t),E,T(b(t),w).onChanged),I(b(t),N,T(b(t),w).regionData),I(b(t),k,T(b(t),N).availableRegions),I(b(t),A,("string"==typeof T(b(t),w).activeValue?[T(b(t),w).activeValue]:T(b(t),w).activeValue)||[]),I(b(t),x,new c.a),I(b(t),F,T(b(t),w).shouldShowAvailabilityInfo),C(b(t),M,G).call(b(t)),t}return t=a,(i=[{key:"getLastSelectedRegion",value:function(){return T(this,S)}},{key:"setRegion",value:function(e){var t=this;if(!T(this,R)){"string"==typeof e&&(e=[e]);var i=e.filter((function(e){return T(t,k).indexOf(e)>-1}));if(i.length){var n=i.map((function(e){return{name:Object(u.b)(e),value:e,id:btoa(e)}}));I(this,A,i),T(this,D).setActiveItems(n),C(this,j,q).call(this,n)}}}},{key:"getFirstActiveRegion",value:function(){return T(this,A).length?T(this,A)[0]:T(this,N).availableRegions[0]}},{key:"getSelectedRegionsCount",value:function(){return T(this,A).length}},{key:"isRegionInactive",value:function(e){return this.getInactiveItems().indexOf(e)>-1}},{key:"setActiveValue",value:function(e){this.setRegion(e)}},{key:"getActiveValue",value:function(){return T(this,A)}},{key:"isRegionSelected",value:function(e){return T(this,A).indexOf(e)>-1}},{key:"getActiveItems",value:function(){return T(this,k)}},{key:"getFirstActiveItem",value:function(){return this.getSelectedRegionsCount()?T(this,A)[0]:T(this,N).availableRegions[0]}},{key:"isVariantAvailableInRegion",value:function(e,t){return!(!e||!T(this,N).variantsByRegion[t])&&-1!==T(this,N).variantsByRegion[t].indexOf(e)}},{key:"isVariantAvailableInSelectedRegions",value:function(e){var t=T(this,A),i=!0;if(!e)return!1;if(T(this,N).allowedSellingRegions){for(var n in t){var r=t[n];if(T(this,N).variantsByRegion[r]&&T(this,N).variantsByRegion[r].includes(e))return!0}return!1}for(var a in t){var o=t[a];T(this,N).variantsByRegion[o]&&-1===T(this,N).variantsByRegion[o].indexOf(e)&&(i=!1)}return i}},{key:"getInactiveItems",value:function(){return T(this,O)}},{key:"hasSelectedValuesHaveInactiveRegions",value:function(){var e=this.getInactiveItems();return!!this.getActiveValue().filter((function(t){return e.indexOf(t)>-1})).length}},{key:"setInactiveItems",value:function(e){I(this,O,e)}}])&&_(t.prototype,i),n&&_(t,n),a}(a.a),G=function(){var e=this;for(var t in T(this,N).variantsByRegion)0===T(this,N).variantsByRegion[t].length&&T(this,O).push(t);var i=T(this,N).allowedSellingRegions;i&&(i.length>0?I(this,O,T(this,O).concat(T(this,N).availableRegions.filter((function(e){return!i.includes(e)})))):I(this,O,T(this,N).availableRegions.slice())),T(this,O)&&I(this,k,T(this,N).availableRegions.filter((function(t){return-1===T(e,O).indexOf(t)}))),I(this,L,T(this,k).map((function(e){return{name:Object(u.b)(e),value:e,id:btoa(e)}})));var n=1;if(I(this,R,p(T(this,k)).every((function(t){return l.a.isEqual(T(e,N).variantsByRegion[t].sort(),T(e,N).variantsByRegion[T(e,k)[0]].sort())}))),T(this,R)&&(I(this,A,T(this,k)),T(this,w).shouldLimitPickableRegionCount&&(n=T(this,A).length)),!T(this,A).length){var r=C(this,V,Y).call(this);r.length?I(this,A,r):T(this,A).push(T(this,k)[0])}var a=T(this,A).map((function(e){return{name:Object(u.b)(e),value:e,id:btoa(e)}}));(I(this,D,new o.a(new o.b({activeItems:a,items:[{items:T(this,L)}],isMultiselectable:!0,minimumSelectedValues:n,showValuesInline:!0,onChange:C(this,j,q).bind(this)}))),T(this,D).append(this.dropdownNode),1===T(this,L).length)&&(tag("div","regions-dropdown__region-picker pf-px-12 pf-py-8 pf-mb-8 single",[T(this,L)[0].name]).append(this.dropdownNode),T(this,D).node.classList.add("hidden"));T(this,F)&&C(this,B,H).call(this)},H=function(){var e,t=(new c.a).path.indexOf("custom/")>-1,i=PF.Customer.isLogged(),n=lang("Fulfillment location is set based on shipping destination, routing preferences and {linkStart}stock availability{linkEnd}.");(t||i)&&(e=n.replace("{linkStart}",'<a class="pf-link" href="#">').replace("{linkEnd}","</a>")),t||i||(e=n.replace("{linkStart}","").replace("{linkEnd}",""));var a=tag("div","",[lang("All products ship worldwide.")," ",tag("span",{innerHTML:e,onclick:function(e){var n=(new c.a).toString()+"#availability",a=[lang("Please sign in to check product availability.")],o=[[tag("span",{innerHTML:lang("<strong>Automatic</strong> order fulfillment")})],[tag("span",{innerHTML:lang("Download free print file <strong>templates</strong> and <strong>mockups</strong>")})],lang("No upfront or monthly fees")];if("A"===e.target.nodeName){if(i)d.l("showProductAvailability");else if(t){var s=r.a.Par;s.returnUrl=n,s.signUpContent=o,s.signInContent=a,new r.a(s)}e.preventDefault()}}})]);this.availabilityNode.appendChild(a)},Y=function(){var e=this,t=[];return Object.keys(T(this,x).query).forEach((function(i){if("region"===i||0===i.indexOf("region[")){var n=T(e,x).query[i];Array.isArray(n)?t=[].concat(p(t),p(n)):t.push(n)}})),t=t.filter((function(t){return e.getActiveItems().indexOf(t)>-1})),T(this,x).query.isEuropeDefaultFilter&&T(this,N).availableRegions.indexOf(n.a.REGION_EUROPE)>-1&&(t=n.a.REGION_EUROPE),t},q=function(e){var t=e.map((function(e){return e.value}));C(this,U,W).call(this,t),I(this,S,t.pop()),T(this,E).call(this,t)},W=function(e){I(this,A,p(new Set(e.filter(Boolean))))},K=function e(t){var i=t.regionData,n=void 0===i?null:i,r=t.onChanged,a=void 0===r?null:r,o=t.activeValue,s=void 0===o?null:o,l=t.shouldShowAvailabilityInfo,c=void 0===l||l,d=t.shouldLimitPickableRegionCount,u=void 0!==d&&d;f(this,e),this.regionData=n,this.onChanged=a,this.activeValue=s,this.shouldShowAvailabilityInfo=c,this.shouldLimitPickableRegionCount=u}},YvQZ:function(e,t,i){"use strict";i.d(t,"c",(function(){return o})),i.d(t,"b",(function(){return s})),i.d(t,"d",(function(){return l})),i.d(t,"a",(function(){return c}));var n=i("KLvT"),r=i("t8qe"),a=i("0nZy");function o(e){Object(n.a)().commit(r.d(r.i),e)}function s(){Object(n.a)().commit(r.d(r.g),a.c)}function l(e){Object(n.a)().commit(r.d(r.j),e)}function c(){Object(n.a)().commit(r.d(r.f))}},Z4u1:function(e,t,i){"use strict";i.d(t,"d",(function(){return a})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return l}));var n=i("Zwo4"),r="".concat(n.a,"/fonts"),a="m_setHasLoadedAllFonts",o="g_hasLoadedAllFonts",s="a_loadFonts",l=function(e){return"".concat(r,"/").concat(e)}},Z5vq:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("5B9T"),r=i("cCrT"),a=i("XLZy"),o=i("GJiQ"),s=i.n(o),l=Class({_colors:[],_paletteColors:null,_replacementColors:null,_callback:null,_image:null,__construct:function(e,t,i){for(var a in this._callback=i,this._colors=[],t)this._colors.push(n.a.hexToRgb(t[a]));this._image=new Image,this._image.onload=this._onImageLoaded,this._image.crossOrigin="Anonymous";var o=new r.a(e);o.query.cache=(new Date).getTime(),this._image.src=o.toString()},_onImageLoaded:function(){var e=document.createElement("canvas");e.width=this._image.width,e.height=this._image.height;var t=e.getContext("2d");t.drawImage(this._image,0,0);for(var i=t.getImageData(0,0,this._image.width,this._image.height),n=i.data,r=0,a=n.length;r<a;r+=4)if(n[r+3]=n[r+3]<127?0:255,0!=n[r+3]){var o=this._getNearestColor(n[r],n[r+1],n[r+2]);o&&(n[r]=o.r,n[r+1]=o.g,n[r+2]=o.b)}t.putImageData(i,0,0),this._callback(e.toDataURL())},_getNearestColor:function(e,t,i){var n,r=1/0;for(var a in this._colors){var o=this._colors[a];if(o){var s=Math.sqrt(Math.pow(e-o.r,2)+Math.pow(t-o.g,2)+Math.pow(i-o.b,2));s<r&&(r=s,n=o)}}return n},colorizeImage:function(e,t,i,r){var a,o=t.map(n.a.Color.fromHex);a=i?o.map((function(e,t){return i[t]?i[t]?n.a.Color.fromHex(i[t]):e:null})):this._paletteColors,this._loadImage(e,this._colorizeOnImageLoaded.bind(this,r,o,a))},_quantizeImage:function(e,t,i,r,o){var c=new s.a(l.RGB_QUANT_DEFAULTS);this._loadImage(e,(function(e){try{c.sample(e);var s=c.palette(!0,!0)}catch(e){return console.error(e),a.a.hide(i),void(o&&o())}var l=s.length;s=(s=(s=s.map((function(e){return n.a.Color.fromArray(e)}))).filter((function(e,t,i){for(var n=0;n<t;n++)if(c.colorDist(e.toArray(),i[n].toArray())<.08)return!1;return!0}))).slice(0,t),r(s,l)}))},quantizeWithPaletteColors:function(e,t,i,r,a,o,s){i=i.map((function(e){return n.a.Color.fromHex(e)})),this._quantizeImage(e,t,a,function(e,t){var n={},a=i,s=this._getRgbPaletteAsArray(a);e.forEach(function(e){var t=l.getNearestColor(e.r,e.g,e.b,s);n[e.toHex()]=a[t].toHex(),this._updateSelectedPalette(i,r,t),s=this._getRgbPaletteAsArray(a)}.bind(this)),o(n,t)}.bind(this),s)},_updateSelectedPalette:function(e,t,i){e.length>i&&(e[i].isContainedBy(t)||t.push(e[i]))},_getRgbPaletteAsArray:function(e){return e.map((function(e){return e.toArray()}))},_loadImage:function(e,t){var i=new r.a(e);i.query.cache="CORS";var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){t(n)},n.src=i.toString()},_colorizeOnImageLoaded:function(e,t,i,n){var r=document.createElement("canvas");r.width=n.width,r.height=n.height;var a=r.getContext("2d");a.drawImage(n,0,0,r.width,r.height);for(var o,s=a.getImageData(0,0,r.width,r.height),c=s.data,d=t.map((function(e){return e.toArray()})),u=(i=i.map((function(e){return e?e.toArray():null})),0),h=c.length;u<h;u+=4)c[u+3]=c[u+3]<127?0:255,0!=c[u+3]&&((o=i[l.getNearestColor(c[u],c[u+1],c[u+2],d)])?(c[u]=o[0],c[u+1]=o[1],c[u+2]=o[2]):c[u+3]=0);a.putImageData(s,0,0),r.toBlob?r.toBlob((function(t){var i=URL.createObjectURL(t);e(i)})):e(r.toDataURL())}});l.RGB_QUANT_DEFAULTS={method:2,boxSize:[8,8],boxPxls:10,colors:64},l.getNearestColor=function(e,t,i,n){for(var r,a,o,s=1/0,l=0;l<n.length;l++)o=n[l],(a=Math.pow(e-o[0],2))>s||(a+=Math.pow(t-o[1],2))>s||(a+=Math.pow(i-o[2],2))<s&&(s=a,r=l);return r},window&&((globalThis||{}).PFUtilsColorMapper=l)},ZPm7:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("7pSD"),r=i("6t3j"),a=i("QLN8"),o=i("5B9T"),s=i("iQ/s"),l=i("JA1v"),c=i("cCrT"),d=i("nF4n");function u(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var p=Class({_PRODUCTS_WITHOUT_REGION_POPOVER:[],_variants:[],_variant:null,_availableColors:null,_discontinuedColors:[],_disabledRegionColors:[],_unavailableColors:[],_sellingRegionLimitedColors:[],_selectedColor:null,_isHats:!1,nodeError:null,__construct:function(e,t,i,n){this.setVariants(e),this._allColors=this._getUniquePushableColors(e),this._productId=i,n&&(this._marginClass=n);var o=this._getColorCount();if(0!==o){if(1===o)for(var s in e){this._variant=e[s],this._setSelectedColor(this._variant.color);break}var l=(new r.a).getCachedProductById(i);l.isInCategory(a.a.CATEGORY_HATS)&&(this._isHats=!0),this.node=Object(d.a)({tag:"div",className:this._marginClass||"margin-bottom-30",els:[{tag:"div",className:"margin-bottom-5",els:[{tag:"b",text:l.getColorPickerTitle(1)}]},this._nodePicker=Object(d.a)({tag:"div"}),this.nodeError=Object(d.a)({tag:"div",className:"alert alert-danger text-center hidden padding-10 margin-top-15",text:lang("Please choose a color!")})]}),this._onColorChangedCallback=t,this.render()}else this.node=Object(d.a)({tag:"div"})},_render:function(){var e;if(d.a.clearNode(this._nodePicker),this._isButtonPicker())for(var t in this._availableColors){e=this._availableColors[t];var i="btn btn-empty btn-sm pf-mb-4 pf-mr-4 color-picker__item";this._selectedColor===t&&(i+=" color-picker__item--active"),this._unavailableColors.indexOf(t)>-1&&(i+=" btn-default"),this._discontinuedColors.indexOf(t)>-1&&(i+=" color-picker__item--disabled"),Object(d.a)({tag:"a",className:i,text:t,onclick:this._onButtonSelectorPicked.bind(this,t)}).append(this._nodePicker)}else{var n=new s.a;n.maxCount=1,n.showHuge=!0,n.preSelectFirst=!0,n.canDeselectLast=!1,n.colors=this._availableColors,n.onChange=this._onColorPicked,this._variant&&(n.selectedColors=[this._variant.color]),this._picker=new l.a(n),this._picker.append(this._nodePicker);var r=this._picker.getSelectedColors();if(r){var a=this.getAvailableVariantByColor(r[0]);a&&this.setVariant(a)}var o=new c.a;if(o.query.color)for(e in this._availableColors)e===o.query.color&&this._setSelectedColor(o.query.color)}},render:function(){this._picker?(this._picker.render(),this.togglePopover()):this._render()},_getColorCount:function(){return Object.keys(this._availableColors).length},getValueCount:function(){return this._getColorCount()},_onColorPicked:function(e){this._selectedColor=this._picker?this._picker.getSelectedColors()[0]:null,e[0]===this._selectedColor&&this._onColorChangedCallback(this._selectedColor),this.togglePopover(e[0])},_onButtonSelectorPicked:function(e){this._selectedColor=e,this._onColorChangedCallback(this._selectedColor),this._render()},setVariants:function(e){this._variants=e,this._availableColors=o.a.fetchColorsFromVariants(this._variants)},getAvailableVariantByColor:function(e){for(var t in this._variants){var i=this._variants[t];if(i.color===e)return i}return null},getColor:function(){return this._selectedColor},setVariant:function(e){var t=this._getColorCount();if(this._variant=e,this._variant)this._setSelectedColor(this._variant.color);else if(1===t)for(var i in this._variants){this._variant=this._variants[i],this._setSelectedColor(this._variant.color);break}},setUnavailableColors:function(e){this._unavailableColors=e,this._isColorsAvailable()&&this._picker.setUnavailableColors(e)},setDiscontinuedColors:function(e){this._discontinuedColors=e,this._isColorsAvailable()&&this._picker.setDiscontinuedColors(e)},setDisabledRegionColors:function(e){this._disabledRegionColors=e,this._isColorsAvailable()&&this._picker.setDisabledRegionColors(e)},setSellingRegionLimitedColors:function(e){this._sellingRegionLimitedColors=e,this._isColorsAvailable()&&this._picker.setDisabledRegionColors(e)},setVariantsAndDisabledRegionColors:function(e,t,i){this.getAvailableColors()&&(this.setVariants(e),this.setSelectedRegionDisabledValues(e,t,"color",i),this.setDisabledRegionColors(this.getSelectedRegionDisabledValues("color")),this.render())},_isColorsAvailable:function(){return!(!this._getColorCount()||0===this._getColorCount())&&(!!this._picker||(this._render(),!1))},_isButtonPicker:function(){for(var e in this._variants){var t=this._variants[e];if(t.color&&!t.colorCode)return!0}return!1},isValuePicked:function(){return!!this.getColor()},hasAtLeastOneValue:function(){return!!this._getColorCount()},togglePopover:function(e){if((e=e||this._selectedColor)&&this._picker){var t="",i="",r=this.getAvailableAttributeRegion(e,"color");this.isColorDiscontinued(e)?(t=p.POPOVER.DISCONTINUED.TITLE,i=p.POPOVER.DISCONTINUED.DESC,this._variants[0].size||(i=p.POPOVER.DISCONTINUED.DESC_COLOR_ONLY)):this._sellingRegionLimitedColors.includes(e)?t=n.a.POPOVER.DSR_LIMITED.DESC_COLOR.replace("{linkStart}","").replace("{linkEnd}",""):this._picker.getUnavailableColors().indexOf(e)>-1||!r&&this._picker.getDisabledRegionColors().indexOf(e)>-1?(t=n.a.POPOVER.UNAVAILABLE.TITLE,i=n.a.POPOVER.UNAVAILABLE.DESC,this._variants[0].size||(i=n.a.POPOVER.UNAVAILABLE.DESC_COLOR_ONLY)):this._picker.getDisabledRegionColors().indexOf(e)>-1&&!this._PRODUCTS_WITHOUT_REGION_POPOVER.includes(this._productId)&&(t=n.a.POPOVER.REGION.TITLE.replace("{region}",r),i=n.a.POPOVER.REGION.DESC),(t||i)&&this._picker.showPopover(e,t,i)}},isColorDiscontinued:function(e){return!!this._picker&&this._picker.getDiscontinuedColors().includes(e)},getAvailableColors:function(){var e=[];for(var t in this._availableColors)-1===e.indexOf(t)&&e.push(t);return e},getAllColors:function(){return u(this._allColors)},_setSelectedColor:function(e){this._selectedColor=e,this._picker&&this._picker.setSelectedColor(e)},_getUniquePushableColors:function(e){return e.reduce((function(e,t){var i=t.color,n=t.isDisabledInPush,r=t.hasStock;return!i||e.includes(i)||n&&!r||e.push(i),e}),[])}},n.a);p.POPOVER={DISCONTINUED:{TITLE:lang("Discontinued"),DESC:dlang("generator","Sorry, this size and color combination is discontinued. Please choose a different size and color combination."),DESC_SIZE_ONLY:dlang("generator","Sorry, this size is discontinued. Please choose a different size."),DESC_COLOR_ONLY:dlang("generator","Sorry, this color is discontinued. Please choose a different color.")}},(globalThis||{}).PFVariantPickerColorPicker=p},ZtlV:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("u8P0"),r=i("6JZw"),a=i("nF4n"),o=Class({optionId:0,customProductId:0,name:"",optionValuesString:"",optionValues:[],toArrayKeys:["optionId","customProductId","name","optionValues"],buildOptionValuesFromString:function(){if(this.optionValues=[],this.optionValuesString.indexOf(",")){var e=this.optionValuesString.split(",");for(var t in e)this.optionValues.push(n.a.fromArray({optionId:this.optionId,option:{optionId:this.optionId,customProductId:this.customProductId,name:this.name},optionName:this.name,value:e[t]}))}}},r.a);o.fromArray=function(e){var t=new o;if(a.a.O2O(t,e),e.optionValues){var i=[];for(var r in t.optionValues=[],e.optionValues){var s=n.a.fromArray(e.optionValues[r]);i.push(s.value),s.option=this,t.optionValues.push(s)}t.optionValuesString=i.join(",")}return t},window&&((globalThis||{}).PFItemsCustomProductVariantOption=o)},Zwo4:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"j",(function(){return r})),i.d(t,"k",(function(){return a})),i.d(t,"g",(function(){return o})),i.d(t,"f",(function(){return s})),i.d(t,"d",(function(){return l})),i.d(t,"c",(function(){return c})),i.d(t,"h",(function(){return d})),i.d(t,"b",(function(){return u})),i.d(t,"i",(function(){return h})),i.d(t,"e",(function(){return p}));var n="designer/assetsModule",r="m_setLocalCachedState",a="m_setVersionMeta",o="g_isAssetUpdateRequired",s="g_getVersionMeta",l="a_fetchDesignerAssetStates",c="a_checkDesignerAssets",d="a_loadVersionMeta",u="a_addVersionMeta",h="a_removeVersionMeta";function p(e){return n+"/"+e}},a3yQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("nF4n"),r=Class({rowspans:{},__construct:function(e,t,i){for(var r in this.rowspans=t,this.activeColumns=i,this.node=Object(n.a)({tag:"tr"}),e){var a=e[r];null!==a.value&&this._isCellVisible(a.key)&&this._renderCell(a,parseInt(r)).append(this.node)}},_isCellVisible:function(e){return this.activeColumns.indexOf(e)>-1},_renderCell:function(e,t){var i=this.rowspans[t]?this.rowspans[t]:1,r=Object(n.a)({tag:"td",attr:{rowspan:i}});return"title"===e.type?(Object(n.a)({tag:"strong",innerHTML:e.value}).append(r),r):"link"===e.type?(Object(n.a)({tag:"a",className:"pf-link",text:lang("Download"),href:e.value}).append(r),r):(r.innerHTML=e.value,r)}},n.a.Base);window&&((globalThis||{}).PFProductsCatalogComponentsSizingTableRow=r);var a=i("X5Ic"),o=Class({dataRows:[],allowedColumns:["description","type","size","printArea","printFileSize","recommendedSize","downloadUrl"],activeColumns:[],columnTitles:{},columnTypes:{description:"title",type:"value",size:"value",printArea:"value",printFileSize:"value",recommendedSize:"value",downloadUrl:"link"},disclaimers:{},__construct:function(e,t){this.dataRows=e.sort(this._sortRows).map(this._filterData),this.columnTitles=this._getColumnTitles(t),this.node=tag("div",{className:this.dataRows.length<1?"hidden":"",id:"guidelines"},[tag("div","table-responsive",[tag("table","table table-bordered catalog__guidelines__table",[tag("thead","",[tag("tr","",this.allowedColumns.filter(this._filterColumn).map(this._getHeader))]),tag("tbody","",this.dataRows.map(this._getBodyRow))])])]),this._getDisclaimers()},_filterColumn:function(e){return this.activeColumns.indexOf("string"==typeof e?e:e.key)>-1},_sortRows:function(e,t){return e.isBrandingTemplate>t.isBrandingTemplate},_getColumnTitles:function(e){return{description:dlang("products","Placement"),type:dlang("products","Type"),size:dlang("products","Sizes"),printArea:this._getPrintAreaText(e),printFileSize:this._getPrintFileSizeText(e),recommendedSize:this._getRecommendedSizeText(e),downloadUrl:this._getDownloadUrlText(e)}},_getRecommendedSizeText:function(e){return this._isTechniqueEngraving(e)?dlang("products","Engraving file template"):this._isTypeEmbroidery(e)?dlang("products","Recommended embroidery file size"):dlang("products","Recommended print file size")},_getPrintAreaText:function(e){return this._isTypeEmbroidery(e)?dlang("products","Max embroidery area"):dlang("products","Max print area")},_getPrintFileSizeText:function(e){return this._isTypeEmbroidery(e)?dlang("products","Embroidery file size"):dlang("products","Print file size")},_getDownloadUrlText:function(e){return this._isTypeEmbroidery(e)?dlang("products","Embroidery file template"):dlang("products","Print file template")},_isTypeEmbroidery:function(e){return e===a.a.TYPE_EMBROIDERY},_isTechniqueEngraving:function(e){return e===a.a.TECHNIQUE_ENGRAVING},_getPrintOrEmbroidery:function(e,t){var i=e?dclang("products","Technique","embroidery"):dclang("products","Technique","print");return t?i.charAt(0).toUpperCase()+i.slice(1):i},_getHeader:function(e){var t=this.columnTitles[e];return this.disclaimers[e]&&(t+=Array(Object.keys(this.disclaimers).indexOf(e)+2).join("*")),tag("th","",[t])},_getBodyRow:function(e){return e.map(function(t,i){return new r(t,this._getRowSpanValues(t,e,i),this.activeColumns)}.bind(this))},_getDisclaimers:function(){var e=[];for(var t in this.disclaimers){var i=Array(Object.keys(this.disclaimers).indexOf(t)+2).join("*")+" "+this.disclaimers[t];e.push(tag("div","",[i]))}e.length&&tag("div",{className:"margin-bottom-25 padding-bottom-15 disclaimer-text",style:{fontStyle:"italic",borderBottom:"1px solid #ddd"}},e).append(this.node)},_getRowSpanValues:function(e,t,i){var n={},r={};for(var a in e)for(var o in t)parseInt(o)<=i||(t[o][a].value?r[a]=!0:r[a]||(n[a]||(n[a]=1),n[a]+=1));return n},_filterData:function(e){var t=[];for(var i in this.allowedColumns){var n=this.allowedColumns[i];e[n]&&this.activeColumns.indexOf(n)<0&&this.activeColumns.push(n);var r=e[n]?e[n]:"";t.push({key:n,type:this.columnTypes[n],value:this._hasNewline(r)?r.split("\n"):r}),e.disclaimers[n]&&!this.disclaimers[n]&&(this.disclaimers[n]=e.disclaimers[n])}return this._parseRows(t)},_parseRows:function(e){for(var t=this._getLongestArray(e),i=[],n=0;n<t;n++)i.push(e.map(this._normalize.bind(this,t,n)));return i},_normalize:function(e,t,i){var n="string"==typeof i.value?0===t?i.value:null:i.value[t]?i.value[t]:null;return{key:i.key,type:i.type,value:n}},_getLongestArray:function(e){var t=1;for(var i in e)e[i].value instanceof Array&&e[i].value.length>t&&(t=e[i].value.length);return t},_hasNewline:function(e){return e.indexOf("\n")>-1}},n.a.Base);window&&((globalThis||{}).PFProductsCatalogComponentsSizingTable=o)},aLTI:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("X4PR"),r=i("X5Ic"),a=i("nF4n"),o=i("sjGI"),s=i("Jkv8"),l=Class({_par:null,_fontNodes:null,_fonts:null,_font:null,_nodeButton:null,_nodeActiveTitle:null,_nodeDropdown:null,_nodeList:null,_validFontKeys:null,_activeFontIndexInValidFontKeys:-1,__construct:function(e){e=e||new n.a,this._par=e,this._fonts=Object.values(this._par.fonts),this._font=this._par.font,"jp"===o.a.language&&(this._fonts=l.sortLanguageFonts(l.JP_FONTS,this._fonts)),this.node=tag("div","font-dropdown",[this._nodeButton=tag("button",{className:"btn btn-block btn-empty pf-px-8 text-left font-dropdown__button",onclick:this._toggleDropdown},[this._nodeActiveTitle=tag("span","",[this._font.name])]),this._nodeDropdown=tag("div","font-dropdown__dropdown dropdown-menu pf-p-0",[this._nodeList=tag("ul","pf-p-0 pf-m-0")])]),this._addFonts()},_outsideClick:function(e){var t=this.node;t.contains(e.target)||t===e.target||this.closeDropdown()},_addFonts:function(){for(var e in a.a.clearNode(this._nodeList),this._fonts)if(this._fonts.hasOwnProperty(e)){var t=this._fonts[e].fontKey===this._font.fontKey?"font-dropdown__font--active":"",i="jp"===o.a.language?"font-dropdown__font--jp":"";tag("li","pf-p-0",[tag("a",{className:"pf-p-4 font-dropdown__font font-dropdown__font--"+this._fonts[e].fontKey+" "+t+" "+i,onclick:this.setFont.bind(this,this._fonts[e],!1)},[this._fonts[e].name])]).append(this._nodeList)}},_toggleDropdown:function(e){a.a.hasClassName(this._nodeDropdown,"font-dropdown__dropdown--open")?this.closeDropdown():this.openDropdown()},_onKeyDown:function(e){if(!([38,40].indexOf(this._getKeyCodeFromEvent(e))<0)){if(e.preventDefault(),null===this._validFontKeys)return!1;var t=this._getFontKeyIndexClosestToActiveFont(this._getKeyCodeFromEvent(e)),i=this._validFontKeys[t];return this.setFont(this._fonts[i]),!1}},_getKeyCodeFromEvent:function(e){return e.which||e.keyCode||0},_getFontKeyIndexClosestToActiveFont:function(e){var t=null;switch(e){case 38:(t=this._activeFontIndexInValidFontKeys-1)<0&&(t=this._validFontKeys.length-1);break;case 40:(t=this._activeFontIndexInValidFontKeys+1)>=this._validFontKeys.length&&(t=0)}return t},_getValidFontKeys:function(){return Object.keys(this._fonts).filter((function(e,t){return!!this._nodeList.children[t]}),this)},_focusFont:function(e){this._activeFontIndexInValidFontKeys=this._validFontKeys.indexOf(e.fontKey);for(var t=Object.keys(this._fonts),i=0;i<t.length;i++){var n=this._nodeList.children[i];if(n){var r=n.firstElementChild;this._fonts[t[i]].fontKey===e.fontKey?(a.a.addClassName(r,"font-dropdown__font--active"),r.focus()):(a.a.removeClassName(r,"font-dropdown__font--active"),r.blur())}}},openDropdown:function(){document.body.addEventListener("click",this._outsideClick,!0),document.body.addEventListener("keydown",this._onKeyDown),a.a.addClassName(this._nodeDropdown,"font-dropdown__dropdown--open"),a.a.addClassName(this._nodeButton,"font-dropdown__button--open"),this._validFontKeys=this._getValidFontKeys(),this._font&&this._focusFont(this._font)},closeDropdown:function(){document.body.removeEventListener("click",this._outsideClick,!0),document.body.removeEventListener("keydown",this._onKeyDown,!1),a.a.removeClassName(this._nodeDropdown,"font-dropdown__dropdown--open"),a.a.removeClassName(this._nodeButton,"font-dropdown__button--open"),this._validFontKeys=null,this._activeFontIndexInValidFontKeys=-1},setFont:function(e,t){this._font.fontKey!==e.fontKey&&(this._font=e,a.a.setNodeText(this._nodeActiveTitle,this._font.name),t||(this._focusFont(e),this._par.onChange&&this._par.onChange(this._font)))},getFont:function(){return this._font},getFonts:function(){return this._fonts}},a.a.Base);l.defaultFonts=function(e){if(!e)return Object(s.getPFCanvasFonts)().FONTS;var t={};for(var i in Object(s.getPFCanvasFonts)().FONTS){var n=Object(s.getPFCanvasFonts)().FONTS[i],a=n.options[e];(!([r.a.TYPE_EMBROIDERY,r.a.TECHNIQUE_ENGRAVING].includes(e)||l.UNAVAILABLE_BY_DEFAULT.includes(i))||a&&a.isAvailable)&&(t[i]=n)}return t},l.JP_FONTS=["sawarabi-mincho","noto-serif-jp-bold","noto-sans-jp-black","noto-sans-jp","m-plus-rounded-medium","m-plus-rounded-extrabold","m-plus-extrabold","m-plus","kosugi-maru","kosugi"],l.UNAVAILABLE_BY_DEFAULT=["bad-script","sofia"],l.sortLanguageFonts=function(e,t){for(var i=function(i){var n=t.findIndex((function(t){return t.fontKey===e[i]}));t.unshift(t.splice(n,1)[0])},n=0;n<e.length;n++)i(n);return t},window&&((globalThis||{}).PFComponentsFontDropdown=l)},aRUU:function(e,t,i){"use strict";i.d(t,"a",(function(){return V}));var n=i("SGrL"),r=i("bXkz"),a=i("2BaQ"),o=i("Gv5l"),s=i("oixo"),l=i("6t3j"),c=i("8vlB"),d=i("Q1Td"),u=Class({title:null,color:null,size:null,generatorVariant:null,designData:null,variants:[],selectedVariant:null,onVariantSelected:null});(globalThis||{}).PFMockupGeneratorOrderPreviewRowPar=u;var h=i("L8zU"),p=i("oAts"),g=i("nF4n"),f=Class({_sizePicker:null,__construct:function(e){this._par=e,this.node=tag("div","order-preview__row row"),this._initSizePicker(),this.render()},render:function(){g.a.clearNode(this.node),tag("div","col-xs-12 col-sm-4",[this._getImage(this._par.generatorVariant)]).append(this.node),tag("div","col-xs-12 col-sm-8",[tag("div","order-preview__title pf-mb-8",[tag("b","",this._par.title)]),tag("div","order-preview__additional-info",[this._getColorInfo(),this._getSizeInfo()])]).append(this.node)},_getImage:function(e){return this._par.designData.getMockupPreview(e,150,160)},_getColorInfo:function(){return this._par.color?tag("p",{innerHTML:p.a.getColorTitle(this._par.designData.product)+": {color}".replace("{color}",this._par.color)}):""},_initSizePicker:function(){this._sizePicker=Object(h.a)(this._par.variants,this._onSizeChanged.bind(this),""),this._par.selectedVariant&&this._sizePicker.setVariant(this._par.selectedVariant)},_getSizeInfo:function(){return this._par.size?tag("p",{innerHTML:lang("Size: {size}").replace("{size}",this._par.size)}):this._sizePicker},_onSizeChanged:function(e){this._sizePicker.updateErrorStatus();var t=this._getVariantBySize(e);console.log("Variant selected: ",t),console.log("Size selected: ",e),this._par.onVariantSelected&&this._par.onVariantSelected(t)},_getVariantBySize:function(e){return this._par.variants.filter((function(t){return t.size===e})).pop()},checkErrorState:function(){this._sizePicker.updateErrorStatus()}},g.a.Base);(globalThis||{}).PFMockupGeneratorOrderPreviewRow=f;var _=i("o0qH"),m=i("CvqS"),v=i("7QI8"),y=i("NXHT"),b=i("mw8R"),P=i("Vx67"),C=i("2+Fj"),T=i("X5Ic"),I=(i("cCrT"),i("XLZy")),w=i("Sucz"),S=i("QUqn"),E=i("2ovl"),k=i("mJTt"),O=i("9eNC"),A=i("8qnk");function L(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return N(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var D=Class({_selectedVariantIds:[],_par:null,footerNode:null,_state:0,_isInProcess:!1,_rows:[],_data:{},_optionsPicker:null,__construct:function(e){this._par=e,this._repo=new l.a,this._storeId=this._par.storeId||o.a.ANONYMOUS_STORE_ID,this._data.options=$.extend({},this._par.designData.productOptions),this.node=tag("div","order-preview"),this._par.contentScrollable&&(this.node.style.overflowX="hidden",this.node.style.overflowY="auto",this.node.style.maxHeight="500px"),this._selectedVariantIds=this._restoreSelectedVariantIdsFromStorage(),this._shouldShowOptions()&&this._initOptionsPicker(),this.render()},render:function(){g.a.clearNode(this.node);var e=this._getVariantsGrouped();e.forEach(function(e){var t=new u;t.title=this._par.designData.product.getFullTitle(),t.color=e.color,t.size=e.size,t.generatorVariant=e.generatorVariants.slice().shift(),t.variants=e.variants,t.designData=this._par.designData,t.selectedVariant=this._getSelectedVariant(e.variants.map((function(e){return e.variantId}))),t.onVariantSelected=this._onVariantSelected.bind(this,e.variants),1===t.variants.length&&(this._getSelectedVariant([t.variants[0].variantId])||this._selectedVariantIds.push(t.variants[0].variantId));var i=new f(t);i.append(this.node),this._rows.push(i)}.bind(this)),this._cleanUpSelectedVariantIds(e),console.log(this._selectedVariantIds),this._shouldShowOptions()&&tag("div","row",[tag("div","col-xs-12 col-sm-8 offset-sm-4",[this._getOptionsInfo()])]).append(this.node)},getFooterNode:function(){if(this.footerNode)return this.footerNode;var e=this._isProceedToPricingDisabled()?" disabled":"";return this.footerNode=tag("div","row",[tag("div","col-md-12",[this.ctaButtonNode=tag("a",{className:"pf-btn pf-btn-primary pull-left"+e,onclick:this._onProceedToPricing.bind(this),style:{pointerEvents:"auto"}},this._storeId===o.a.ANONYMOUS_STORE_ID?dlang("site","Add to cart"):dlang("generator","Proceed to pricing")),tag("a",{className:"pf-link pull-left margin-left-20 pf-py-0",style:{lineHeight:"39px"},onclick:this._onEditDesign},dlang("generator","Edit design"))]),this._footerErrorNode=tag("div","pf-text-red pf-bold text-center")])},_onEditDesign:function(){this._state+=1,this._saveSelectedVariantIdsToStorage(this._selectedVariantIds),this._par.onEditDesign&&this._par.onEditDesign()},_hasPartial3dPuffEmbroideryType:function(){if(!this._par.designData||!this._par.designData.templates)return!1;var e=this._par.generatorParams.availablePlacements.map((function(e){return e.id}));for(var t in e){if(S.a.getEmbrTypeForPlacement(this._par.designData.templates,e[t])===v.a.DIGITIZATION_BOTH)return!0}return!1},_isEmbroideryNotesEmpty:function(){return!this._data.options[C.a.NAME_NOTES]},_shouldShowEmbrNotesMissingError:function _shouldShowEmbrNotesMissingError(){return this._hasPartial3dPuffEmbroideryType()&&this._isEmbroideryNotesEmpty()},_isProceedToPricingDisabled:function(){return this._getVariantsGrouped().length!==this._selectedVariantIds.length||this._shouldShowOptions()&&!this._optionsPicker.isValuePicked()||this._shouldShowEmbrNotesMissingError()},_onProceedToPricing:function(){var e=this;if(this._isProceedToPricingDisabled())this._renderRowErrors();else if(this._isInProcess)console.error("One request is already in process");else{this._storeId===o.a.ANONYMOUS_STORE_ID?(ga("send","event","MockupGenerator","Clicked Add to cart","Confirm variations view"),ga("send","event","Button Clicks","Add to Cart Button","Mockup generator confirm variations view")):ga("send","event","MockupGenerator","Clicked proceed to pricing",this._par.viewName),this._clearSelectedVariantIdsFromStorage(),E.a.isDesignCachedInSession()?(E.a.unsetDesignCachedInSession(),(new d.a).transferAnonymousFilesToStore(this._storeId,(function(){return I.a.show(e.node)}))):I.a.show(this.node),this._isInProcess=!0,this.node.style.overflowY="hidden",g.a.addClassName(this.ctaButtonNode,"disabled");var t=this._buildDesignDataForOrderPreview(),i=t.isEmbroidery()?[v.a.TYPE_MOCKUP]:[v.a.TYPE_MOCKUP].concat(L(this._getPlacementIdsToSave()));(new d.a).generateLibraryFiles(t,i,!1,this._par.isVariantSyncFlow,!1,{onProgress:this._onMockupGenerationInProgress,onCompleted:this._onMockupGenerationCompleted.bind(this,this._state),onFailed:this._onMockupGenerationFailed,onStarted:this._onMockupGenerationStarted})}},_renderRowErrors:function(){this._rows.forEach((function(e){e.checkErrorState()})),this._shouldShowOptions()&&this._optionsPicker.updateErrorStatus(),this._setFooterErroMsgIfNeeded()},_cleanUpSelectedVariantIds:function(e){for(var t=e.reduce((function(e,t){var i=t.variants.map((function(e){return e.variantId}));return e.concat(i)}),[]),i=this._selectedVariantIds.length-1;i>=0;i--)-1===t.indexOf(this._selectedVariantIds[i])&&this._selectedVariantIds.splice(i,1)},_getTemplateKeysToSave:function(){var e=[];for(var t in this._par.designData.templates)e.push(t);return e},_getPlacementIdsToSave:function(){return this._par.designData.getPlacementIdsWithDesign()},_onMockupGenerationInProgress:function(e){this.ctaButtonNode&&(this.ctaButtonNode.textContent=dlang("generator","In progress - {status}").replace("{status}",e))},_onMockupGenerationCompleted:function(e,t){var i=this;this._stateCheck(e)&&(this.ctaButtonNode&&(this.ctaButtonNode.textContent=lang("Completed")),console.log(t),this._storeId===o.a.ANONYMOUS_STORE_ID?this._getItems(t).forEach((function(e,t){return setTimeout((function(){return i._addToShoppingCart(e)}),750*t)})):this._newOrder(t))},_onMockupGenerationFailed:function(){this.ctaButtonNode&&(this.ctaButtonNode.textContent=dlang("generator","Generating failed. Please try again."),g.a.removeClassName(this.ctaButtonNode,"disabled")),this._isInProcess=!1},_onMockupGenerationStarted:function(e,t,i){this.ctaButtonNode.textContent=lang("Processing files..."),i&&(this._par.generatorDesignId=i)},_getLocalStorage:function(){try{return window.localStorage}catch(e){return null}},_restoreSelectedVariantIdsFromStorage:function(){var e,t=this._getLocalStorage();if(null===t)return[];try{e=t.getItem(D.STORAGE_KEY)}catch(e){console.error("Order preview - could not get selected variant ids")}if(!e)return[];var i=JSON.parse(e);return Array.isArray(i)?i:[]},_saveSelectedVariantIdsToStorage:function(e){var t=this._getLocalStorage();if(null===t)return!1;try{t.setItem(D.STORAGE_KEY,JSON.stringify(e))}catch(e){console.error("Order preview - Could not save selected variant ids")}return!0},_clearSelectedVariantIdsFromStorage:function(){this._saveSelectedVariantIdsToStorage([])},_getSelectedVariant:function(e){for(var t in e)if(-1!==this._selectedVariantIds.indexOf(e[t]))return this._repo.getCachedVariantById(e[t]);return null},_onVariantSelected:function(e,t){e&&e.forEach(function(e){-1!==this._selectedVariantIds.indexOf(e.variantId)&&this._selectedVariantIds.splice(this._selectedVariantIds.indexOf(e.variantId),1)}.bind(this)),t&&!this._getSelectedVariant([t.variantId])&&this._selectedVariantIds.push(t.variantId),this.ctaButtonNode&&!this._isProceedToPricingDisabled()&&g.a.removeClassName(this.ctaButtonNode,"disabled"),console.log(this._selectedVariantIds)},_getVariantsGrouped:function(){var e=this._par.generatorParams.colors.length>0,t=-1!==[T.a.TYPE_T_SHIRT,T.a.TYPE_CUT_SEW,T.a.TYPE_SHOES,T.a.TYPE_JEWELRY,T.a.TYPE_SUBLIMATION].indexOf(this._par.designData.product.type),i=[T.a.TYPE_MUG],n=[T.a.ID_COLOR_MUG],r=-1!==i.indexOf(this._par.designData.product.type)&&-1===n.indexOf(this._par.designData.product.productId),a=(e||t)&&!r&&!this._par.designData.product.isPillow()&&!this._par.designData.product.isLaptopSleeve();return this._getGroupedVariantsBy(a?"color":"size")},_getGroupedVariantsBy:function(e){var t=[null];return this._par.designData[e+"s"]&&this._par.designData[e+"s"].length&&(t=this._par.designData[e+"s"]),t.map(function(t){var i=this._getMappedVariantsByType(e,t);return{color:"color"===e?t:null,size:"size"===e?t:null,mappedVariants:i,variants:i.filter(function(e){return-1!==this._par.designData.sizes.indexOf(e.size)||null===e.size}.bind(this)).map(function(e){return this._repo.getCachedVariantById(e.variantId)}.bind(this)),generatorVariants:this._getGeneratorVariantsFromMapping(i)}}.bind(this))},_getMappedVariantsByType:function(e,t){return this._par.generatorParams.variantMapping.filter((function(i){return i[e]===t}))},_getGeneratorVariantsFromMapping:function(e){return e.reduce(function(e,t){var i;for(i in t.mockupIds)e=e.concat(this._par.designData.generatorVariants.filter((function(e){return t.mockupIds[i]===e.generatorVariantId})));for(i in t.templateIds)e=e.concat(this._par.designData.generatorVariants.filter((function(e){return t.templateIds[i]===e.generatorVariantId})));return e}.bind(this),[])},_buildDesignDataForOrderPreview:function(){var e=this._par.designData.cloneDesignData();e.templateKeysToSave=this._getTemplateKeysToSave();var t=[];for(var i in this._selectedVariantIds){var n=this._filterVariantMappingByVariantId(this._selectedVariantIds[i]),r=this._getDefaultGeneratorVariantId(n);null!==r&&t.push(r)}return e.generatorVariantsIdsToSave=t.filter((function(e,t,i){return i.indexOf(e)===t})),e.multipleMockups=!0,e.storeId=this._storeId,e.productOptions=this._data.options,e},_includesMockupGeneratorVariantIds:function(){return this._par.designData.generatorVariants.reduce((function(e,t){return-1===[P.a.ROLE_TEMPLATE,P.a.ROLE_ADVANCED_TEMPLATE].indexOf(t.role)||e}),!1)},_newOrder:function(e){Object(w.a)("order/new-order",{storeId:this._storeId,isSampleOrder:this._par.orderType===r.a.ORDER_TYPE_SAMPLE?1:0,isScreenMode:0},this._newOrderRe.bind(this,this._state,e))},_newOrderRe:function(e,t,i){if(this._stateCheck(e)){var n=this._getItems(t),r=new c.PFRepositoriesOrderRepository;if(i.success){var a={orderItem:b.a.fromArray({storeId:this._storeId}),items:n,itemsToRemove:[],callback:this._calculateEstimatedShippingCostsIfNecessary.bind(this,this._state)};r.saveDraft(a)}else alert("Could not create new order")}},_calculateEstimatedShippingCostsIfNecessary:function(e,t){PF.Customer.isLogged()&&!PF.Customer.isB2cStarter()?this._saveDraftRe(e,t):(new c.PFRepositoriesOrderRepository).calculateEstimatedShippingCostsForShoppingCart({callback:this._saveDraftRe.bind(this,e,t)})},_saveDraftRe:function(e,t){if(this._stateCheck(e)){I.a.hide(this.node),this._isInProcess=!1,this.node.style.overflowY="auto",this.ctaButtonNode&&g.a.removeClassName(this.ctaButtonNode,"disabled"),console.log("Order 'created'"),console.log(t);var i=langUrl("/dashboard/order/update");ga("send",{hitType:"event",eventCategory:"Button Clicks",eventAction:"Continue Button",eventLabel:"Continue to checkout (step 1) button clicked"}),console.log("Order saved. Redirecting..."),console.log(i),k.a.disable=!0;try{location.assign(i)}catch(e){location.href=i}}},_addToShoppingCart:function(e){var t=this;O.l(A.a.EVENT_ITEM_ADD,e,(function(){return t._par.parentModal.modalNode.hide()}))},_getItems:function(e){var t=[];return this._selectedVariantIds.forEach(function(i){var n=new y.PFItemsOrderLineItem;n.options=this._data.options,n.variantId=i,n.quantity=1,n.itemFiles=this._filterFilesForOrderLineItem(i,e),n.designId=this._par.generatorDesignId?this._par.generatorDesignId:null;var r=this._repo.getCachedVariantById(i);r&&(n.technique=new _.a(r.productId).getTechniqueFromMemory()),t.push(n)}.bind(this)),t},_filterFilesForOrderLineItem:function(e,t){var i=this._filterVariantMappingByVariantId(e);console.log(i);var n=this._getPossibleGeneratorVariantIds(i);console.log(n);var r=this._getGeneratorVariantsByIds(n),a=r.map((function(e){return e.generatorVariantId})),o=r.map((function(e){return e.templateId})),s=this._getRelatedTemplateIds(o);console.log(r);var l=[],c=[];for(var d in t){t[d].filter(this._filterVariantPlacementFilesFunction.bind(this,a,o,s)).forEach(function(e,t){-1!==c.indexOf(e)&&e===v.a.TYPE_MOCKUP||(e===v.a.TYPE_MOCKUP&&c.push(e),l.push(this._fileToItemFile(t)))}.bind(this,d))}for(var u in this._par.designData.templates){var h=this._par.designData.templates[u];if(0!==h.layers.length&&(this._isTemplateSimpleDesign(h)&&(-1!==s.indexOf(h.templateId)||-1!==o.indexOf(h.templateId))&&-1===c.indexOf(h.placementId))){var p=h.layers.slice(0,1).pop(),g=new v.a;g.type=h.placementId,g.fileId=p.isLicensedAssetLayer()?p.licensedAssetItem.licensedAssetId:p.fileItem.fileId,g.position=p.position,l.push(g),c.push(h.placementId)}}return l},_fileToItemFile:function(e){var t=new v.a;return t.type=e.placementId,t.status=e.status,t.fileId=e.fileId,t.group=e.group,t.fileErrors=[],t},_filterVariantMappingByVariantId:function(e){return this._par.generatorParams.variantMapping.filter((function(t){return t.variantId===e}))},_getPossibleGeneratorVariantIds:function(e){return e.reduce((function(e,t){var i;for(i in t.templateIds)e.push(t.templateIds[i]);for(i in t.mockupIds)e.push(t.mockupIds[i]);for(i in t.extraIds)e=e.concat(t.extraIds[i]);return e}),[])},_getDefaultGeneratorVariantId:function(e){var t=this._getPlacementIdsToSave();for(var i in e){var n=e[i];for(var r in t){var a=t[r];if(n.mockupIds[a])return n.mockupIds[a];if(n.extraIds[a])return n.extraIds[a][0]}}return null},_getGeneratorVariantsByIds:function(e){var t=Object.keys(this._par.generatorParams.generatorVariants).filter(function(t){return!e||-1!==e.indexOf(this._par.generatorParams.generatorVariants[t].generatorVariantId)}.bind(this)).map(function(e){return this._par.generatorParams.generatorVariants[e]}.bind(this));if(this._includesMockupGeneratorVariantIds())return t;var i=[];for(var n in this._par.generatorParams.generatorVariants){var r=this._par.generatorParams.generatorVariants[n];e&&-1===e.indexOf(r.generatorVariantId)||-1===this._par.designData.generatorVariantsIdsToSave.indexOf(r.generatorVariantId)||i.push(r)}return t.concat(i)},_getRelatedTemplateIds:function(e){var t,i,n=[];for(i in this._par.designData.templates)(t=this._par.designData.templates[i]).parentTemplateId&&-1!==e.indexOf(t.templateId)&&n.push(t.parentTemplateId);var r=[];for(i in this._par.designData.templates)t=this._par.designData.templates[i],-1===n.indexOf(t.parentTemplateId)&&-1===n.indexOf(t.templateId)||r.push(t.templateId);return r},_filterVariantPlacementFilesFunction:function(e,t,i,n){var r=null===n.generatorVariantId||-1!==e.indexOf(n.generatorVariantId),a=-1!==t.concat(i).indexOf(n.templateId);return r&&a},raiseState:function(){this._state+=1,console.log(this._state)},_stateCheck:function(e){return e!==this._state&&console.log("States didn't match, skipping...",this._state,e),e===this._state},_shouldShowOptions:function(){return-1!==[T.a.TYPE_CUT_SEW,T.a.TYPE_SUBLIMATION,T.a.TYPE_EMBROIDERY].indexOf(this._par.designData.product.type)},_initOptionsPicker:function(){var e=new m.a;e.values=this._data.options,e.onChange=this._onOptionPickedCallback,e.inputNamePrefix="op_",e.optionItems=this._par.designData.product.getOptionItems(this._par.designData.product.getOptionExceptions().concat([C.a.NAME_THREAD_COLORS,C.a.NAME_THREAD_COLORS_3D,C.a.NAME_THREAD_COLORS_LEFT,C.a.NAME_THREAD_COLORS_RIGHT,C.a.NAME_THREAD_COLORS_BACK,C.a.NAME_THREAD_COLORS_APPAREL,C.a.NAME_THREAD_COLORS_APPAREL_BACK,C.a.NAME_THREAD_COLORS_CHEST_CENTER,C.a.NAME_THREAD_COLORS_LARGE_CENTER,C.a.NAME_THREAD_COLORS_CHEST_LEFT,C.a.NAME_THREAD_COLORS_CORNER_LEFT,C.a.NAME_THREAD_COLORS_CORNER_RIGHT])).map((function(e){return e.isEmbroideryType()&&(e.visible=!1),e})),this._optionsPicker=new s.a(e),this._optionsPicker.setFileTypesWithFiles(this._getPlacementsWithFiles())},_getPlacementsWithFiles:function(){var e=[];for(var t in this._par.designData.filesIdsByPlacement)e.push(t);return e},_onOptionPickedCallback:function(e){this._data.options[e.getName()]=e.getValue(),this._optionsPicker.hideError(),this.ctaButtonNode&&(this._isProceedToPricingDisabled()?g.a.addClassName(this.ctaButtonNode,"disabled"):g.a.removeClassName(this.ctaButtonNode,"disabled"),this._setFooterErroMsgIfNeeded()),this._par.onProductOptionsChanged&&this._par.onProductOptionsChanged(this._data.options)},_setFooterErroMsgIfNeeded:function(){this._footerErrorNode.innerHTML=this._shouldShowEmbrNotesMissingError()?dlang("dashboard","To continue, please specify which parts of your design are Flat and which 3D in the Embroidery notes"):""},_getOptionsInfo:function(){return!!this._optionsPicker&&this._optionsPicker},_isTemplateSimpleDesign:function(e){return!this._par.designData.hasPlacementDesignFillColorSet(e.placementId)&&e.isSimple()}},g.a.Base);D.STORAGE_KEY="mockupGeneratorSelectedVariants",(globalThis||{}).PFMockupGeneratorOrderPreview=D;var R=i("pnlN"),x=i("nBn9"),F=Class({__construct:function(e,t){var i=new Url;i.query.transferFiles=1;var n=i.path+(i.query.toString()?"?"+i.query.toString():""),r="/auth/?returnUrl="+encodeURIComponent(n),a=new x.a({title:"How would you like to continue",bodyContent:Object(g.a)({tag:"div",className:"sign-up-popup-container",els:[{tag:"div",className:"row",els:[{tag:"div",className:"col-sm-6",els:[{tag:"div",className:"sign-up-popup-container__box sign-up-popup-container__box--thick",onclick:function(){t&&t(),window.location=r},els:[{tag:"div",className:"sign-up-popup-container__header",els:[{tag:"strong",text:"Already Printful user?"}]},{tag:"div",className:"sign-up-popup-container__content",els:[{tag:"div",className:"col-sm-10 col-xs-12 text-center",els:["Sign in to your existing Printful account"]}]},{tag:"a",className:"pf-btn pf-btn-primary sign-up-popup-container__btn",text:"Sign in",href:r,onclick:function(e){e.stopPropagation(),t&&t()}}]}]},{tag:"div",className:"col-sm-6",els:[{tag:"div",className:"sign-up-popup-container__box",onclick:function(e){this._onProceedClicked()}.bind(this),els:[{tag:"div",className:"sign-up-popup-container__header",text:"Don't have an account?"},{tag:"div",className:"text-center sign-up-popup-container__content",els:[{tag:"div",className:"col-xs-12 text-center",els:["Continue without signing in"]}]},{tag:"a",className:"pf-btn pf-btn-secondary sign-up-popup-container__btn",text:"Continue",onclick:function(e){e.stopPropagation(),this._onProceedClicked()}.bind(this)}]}]}]}]}),showFooterContent:!1});this._modal=a.getModalInstance(),this._onProceedCallback=e},_onProceedClicked:function(){this._modal&&this._modal.remove(),this._onProceedCallback&&this._onProceedCallback()}});window&&((globalThis||{}).PFComponentsGeneratorLoginPopup=F);var M=i("/w+P"),B=i("97Au"),V=Class({__construct:function(e){this._par=e||new R.a,beginOrderTracking("generator",this._par.designData.hasTextLayers()?" with text":""),this._shouldShowPopup(),this._proceedWithOrderPreview()},_shouldShowPopup:function(){return!PF.Customer.isLogged()},_showLoginPopup:function(){new F(this._proceedWithOrderPreview,this._onSignInCallback)},_proceedWithOrderPreview:function(){this._pickStore()},_pickStore:function(){if(PF.Customer.isLogged()){var e=new M.b;e.callback=this._pickOrderType,M.a.popup(e,dlang("generator","Choose store to save toâ€¦"))}else this._pickOrderType(o.a.ANONYMOUS_STORE_ID)},_pickOrderType:function(e){console.log("Store ID: ",e);var t=a.a;if(e!==o.a.ANONYMOUS_STORE_ID&&!t.containsDisallowedVariants(this._par.designData,this._par.generatorParams)&&t.canBeSampleOrder(this._par.designData)){var i=new B.a,s=new n.a({types:[r.a.ORDER_TYPE_SAMPLE,r.a.ORDER_TYPE_BASIC],isSimpleBasicPanel:!0,callback:function(t,i){t.remove(),this._showOrderPreview(e,i)}.bind(this,i)});i.setTitle(lang("Start new order")),i.setContent(s),i.show()}else this._showOrderPreview(e,r.a.ORDER_TYPE_BASIC)},_showOrderPreview:function(e,t){PF.Customer.isLogged()?ga("send","event","MockupGenerator","Clicked order","Product view"):ga("send","event","MockupGenerator","Clicked Add to cart","Product view");var i={modalNode:null},n=new D({designData:this._par.designData,generatorParams:this._par.generatorParams,onEditDesign:this._editDesign.bind(this,i),storeId:e,contentScrollable:!0,viewName:"Product view",onProductOptionsChanged:this._par.onChildComponentProductOptionsChanged,orderType:t,parentModal:i});i.modalNode=new B.a({closeOnClick:!1,onClose:n.raiseState.bind(n)}),i.modalNode.setFooterContent(n.getFooterNode()),i.modalNode.setTitle(dlang("generator","Confirm variations")),i.modalNode.setContent(n.node),i.modalNode.show()},_editDesign:function(e){e.modalNode&&e.modalNode.remove(),this._par.editDesignCallback&&this._par.editDesignCallback()},_onSignInCallback:function(){new E.a(this._par.designData.productId).rememberTemplates(this._par.designData)}});(globalThis||{}).PFMockupGeneratorBundleOrderPreview=V},aUd0:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6JZw"),r=i("nF4n"),a=Class({temporaryFileId:"",fileType:"",isPrintfile:!1,downloadUrl:"",generatorVariantId:0,placementId:"",filename:"",templateId:0,generatedSuffix:"",toArrayKeys:["temporaryFileId","fileType","isPrintfile","filename"]},n.a);a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsGeneratorDownloadItem=a)},atGO:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return s}));var o=new WeakMap,s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),a(this,"sourceFile",void 0),o.set(this,{writable:!0,value:{canDelete:!1,canMove:!1,canRename:!1}}),this.sourceFile=t.sourceFile}var t,i,s;return t=e,(i=[{key:"id",get:function(){return this.sourceFile.fileId}},{key:"getCapabilities",value:function(){return[]}},{key:"getInteractionMenuRefName",value:function(){return"file-library__file-menu-".concat(this.id)}},{key:"isCopyrighted",value:function(){return this.sourceFile.isCopyrighted}},{key:"isSelectable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.sourceFile.isSelectable(e)}}])&&r(t.prototype,i),s&&r(t,s),e}()},bGr9:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("cCrT"),r=Class({_availability:{},_variants:[],__construct:function(e){this._variants=e,this._availability=this._getSortedByAvailability()},_getMatchingColors:function(e,t){var i=[];for(var n in e){var r=e[n];(r.size||"")===t&&i.push(r.color)}return i},_getMatchingSizes:function(e,t){var i=[];for(var n in e){var r=e[n];(r.color||"")===t&&i.push(r.size)}return i},getUnAvailableColors:function(e){var t=this._availability.outOfStock;return this._getMatchingColors(t,e)},getDiscontinuedColors:function(e){var t=this._availability.discontinued;return this._getMatchingColors(t,e)},getDiscontinuedSizes:function(e){var t=this._availability.discontinued;return this._getMatchingSizes(t,e)},getUnavailableSizes:function(e,t){var i=this._availability.outOfStock,n=[];for(var r in i){var a=i[r];(a.color||"")===e&&n.push(a.size)}return n},getNonExistentColors:function(e,t){if(!e)return[];for(var i in this._variants){var n=this._variants[i],r=t.indexOf(n.color);n.size===e&&-1!==r&&t.splice(r,1)}return t},getNonExistentSizes:function(e,t){if(!e)return[];for(var i in this._variants){var n=this._variants[i],r=t.indexOf(n.size);(n.color||"")===e&&-1!==r&&t.splice(r,1)}return t},_getSortedByAvailability:function(){var e={available:[],outOfStock:[],discontinued:[]},t=(new n.a).path.indexOf("/dashboard/sync")>-1;for(var i in this._variants){var r=this._variants[i];r.isTemporaryOutOfStock?e.outOfStock.push(r):r.hasStock&&!t?e.available.push(r):r.hasStock&&!t||!r.isDisabledInPush?r.hasStock||e.outOfStock.push(r):e.discontinued.push(r)}return e},isVariantDiscontinued:function(e){for(var t in this._availability.discontinued){var i=this._availability.discontinued[t];if(e.variantId===i.variantId)return!0}return!1},areAllVariantsDiscontinued:function(){return this._availability.discontinued.length===this._variants.length}});(globalThis||{}).PFVariantPickerVariantAvailability=r},bRD6:function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var n=i("edgZ"),r=i("7h5t"),a=i("+erO"),o=Class({originalPosition:null,shouldUseOriginalAreaSize:!1});o.fromArray=function(e){var t=new o;return t.originalPosition=a.a.fromArray(e.originalPosition),t.shouldUseOriginalAreaSize=e.shouldUseOriginalAreaSize,t},window&&((globalThis||{}).PFComponentsGeneratorMockupGeneratorOptions=o);var s=i("gqyd"),l=i("pWIn"),c=i("+I3z"),d=i("y70k"),u=i("6JZw"),h=i("qqZP"),p=i("0Dko"),g=i("n6mh"),f=i("wo5H"),_=i("1tjy"),m=i("boP+"),v=i("gQ2J");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return P(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var C=function(){this.layers=[]};C.prototype=new u.a,C.prototype.toArrayKeys=["templateId","placementId","layers","technique","placementName"],C.prototype.templateId=null,C.prototype.placementId=null,C.prototype.parentTemplateId=null,C.prototype.layers=null,C.prototype.width=0,C.prototype.height=0,C.prototype.fillMode="",C.prototype.technique="",C.prototype.placementName="",C.prototype.centerDefaultYPosition=!0,C.prototype.getKey=function(){return this.placementId+"_"+this.templateId},C.prototype.getLowestDPI=function(e){var t=0;for(var i in this.layers){var n=this.layers[i].getDPI(!0,e);(0===t||n<t)&&(t=n)}return t},C.prototype.hasCustomizableLayersWithMultiLineText=function(){var e;return null===(e=this.layers)||void 0===e?void 0:e.some((function(e){return e.isCustomizable&&e.hasMultipleLines}))},C.prototype.hasCustomizableLayersWithArcText=function(){var e;return null===(e=this.layers)||void 0===e?void 0:e.some((function(e){return e.isCustomizable&&e.arcAngle}))},C.prototype.hasCustomizableLayersWithColorGraphicText=function(){var e;return null===(e=this.layers)||void 0===e?void 0:e.some((function(e){return e.isCustomizable&&e.colorGraphic}))},C.prototype.hasCustomizableLayersWithCropImage=function(){var e;return null===(e=this.layers)||void 0===e?void 0:e.some((function(e){return e.isCustomizable&&e.cropPosition}))},C.prototype.hasLayers=function(e){return e?this.layers.filter((function(t){return t instanceof e})).length>0:this.layers.length>0},C.prototype.hasLayer=function(e){var t;return null===(t=this.layers)||void 0===t?void 0:t.some((function(t){return t.uniqueId===e}))},C.prototype.getLayerByCustomizeKey=function(e){for(var t in this.layers)if(this.layers[t].customizeKey===e)return this.layers[t];return!1},C.prototype.getMirroredLayers=function(){return this.layers.filter((function(e){return e.parentLayerUniqueId}))},C.prototype.hasUnmirroredLayers=function(){var e,t=this;return null===(e=this.layers)||void 0===e?void 0:e.some((function(e){return!t.getMirroredLayer(e)}))},C.prototype.getMirroredLayer=function(e){var t,i=b(this.layers);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(e){if(e.uniqueId==n.parentLayerUniqueId||e.parentLayerUniqueId==n.uniqueId)return n}else if(n.parentLayerUniqueId)return n}}catch(e){i.e(e)}finally{i.f()}return null},C.prototype.getLayerIndex=function(e){for(var t=0,i=this.layers.length;t<i;t++)if(this.layers[t].uniqueId===e.uniqueId)return t;return-1},C.prototype.getCloneWithLayers=function(e){var t=new C;return t.templateId=this.templateId,t.placementId=this.placementId,t.parentTemplateId=this.parentTemplateId,t.width=this.width,t.height=this.height,t.fillMode=this.fillMode,t.technique=this.technique,t.placementName=this.placementName,t.centerDefaultYPosition=this.centerDefaultYPosition,t.layers=this.layers.filter((function(t){return t.isValidForTechnique(e)})).map((function(e){return e.getOriginalClone(!0)})),t},C.prototype.isRelated=function(e){var t=this.placementId===e.placementId,i=this.templateId===e.templateId,n=this.parentTemplateId===e.templateId,r=e.parentTemplateId&&e.parentTemplateId===this.templateId,a=e.parentTemplateId&&e.parentTemplateId===this.parentTemplateId&&e.templateId!==this.templateId;return t&&(r||n||a||i)},C.prototype.isSimple=function(){return!this.layers.length||1===this.layers.length&&this.layers[0].isSimple()},C.prototype.isCover=function(){return"cover"===this.fillMode},C.prototype.layersToArray=function(e,t){return this.layers.map((function(i){return i.toArray(e,t)}))},C.prototype.areLayersOverlapping=function(e){var t=this,i=e.layerTypeInstances,n=e.allowedExceptions,r=function(e){var r=t.layers[e],a=r.position;if(i&&!i.filter((function(e){return r instanceof e})).length)return"continue";var o=function(e){var o=t.layers[e],s=o.position;return i&&!i.filter((function(e){return o instanceof e})).length||o.uniqueId===r.uniqueId||null!=n&&n.some((function(e){return e.layerPropertyValues.includes(r[e.layerProperty])&&e.layerPropertyValues.includes(o[e.layerProperty])}))?"continue":a.hasIntersectionWith(s)?{v:{v:!0}}:void 0};for(var s in t.layers){var l=o(s);if("continue"!==l&&"object"===y(l))return l.v}};for(var a in this.layers){var o=r(a);if("continue"!==o&&"object"===y(o))return o.v}return!1},C.prototype.exceededTextLayerCharacterLimit=function(){var e,t,i,n=this.layers.find((function(e){return e.isTextLayer()&&!e.isValid()}));return n?(null==n||null===(e=n.font)||void 0===e||null===(t=e.options)||void 0===t||null===(i=t[this.technique])||void 0===i?void 0:i.maxCharacters)||f.k:null},C.prototype.getDefaultPositions=function(){return a.a.fromArray({areaWidth:this.width,areaHeight:this.height,width:this.width,height:this.height,top:0,left:0})},C.prototype.getFileId=function(){return 1!==this.layers.length||this.hasTextLayersOnly()?d.a.ID_TEMP_GENERATOR_FILE:this.layers.filter((function(e){return e instanceof c.a})).map((function(e){return e.fileItem.fileId})).shift()},C.MUG_V1_11_OZ_TEMPLATE_ID=43,C.MUG_V1_15_OZ_TEMPLATE_ID=44,C.MUG_V1_SIDE_CENTER_DIST_RATIO=293/1352,C.MUG_V2_11_OZ_TEMPLATE_ID=140,C.MUG_V2_15_OZ_TEMPLATE_ID=141,C.MUG_V2_SIDE_CENTER_DIST_RATIO=208.5/1258,C.prototype.getSideCenterDistanceRatio=function(){switch(this.templateId){case C.MUG_V1_11_OZ_TEMPLATE_ID:case C.MUG_V1_15_OZ_TEMPLATE_ID:return C.MUG_V1_SIDE_CENTER_DIST_RATIO;case C.MUG_V2_11_OZ_TEMPLATE_ID:case C.MUG_V2_15_OZ_TEMPLATE_ID:return C.MUG_V2_SIDE_CENTER_DIST_RATIO}},C.layerFromArray=function(e){var t;switch(e.type){case c.a.TYPE:if(t=new c.a,(new n.a).hasCachedFile(e.fileId)||(new n.a).cacheFile(d.a.fromArray(e.fileItem)),t.fileItem=(new n.a).getCachedFile(e.fileId),t.overrideColors=null,e.overrideColors){for(var i=0,u=Object.keys(e.overrideColors);i<u.length;i++){var f=u[i];e.overrideColors[f]===p.a.EMBROIDERY_NONE_COLOR_BE_LCASE_VALUE&&(e.overrideColors[f]=null)}t.overrideColors=e.overrideColors}t.embroideryType=e.embroideryType||null,t.isUpscaled=e.isUpscaled||!1,t.isRemovedBg=e.isRemovedBg||!1,t.removeBgPreview=e.removeBgPreview||null;break;case s.a.TYPE:t=new s.a,e.clipartItem&&!Object(_.e)(e.clipartItemId)&&Object(_.b)([e.clipartItem]),t.clipartItem=Object(_.e)(e.clipartItemId),e.svg&&t.clipartItem&&(t.clipartItem.svg=e.svg),t.fillColor=e.fillColor;break;case l.a.TYPE:(t=l.a.fromArray(e.textInput||e)).embroideryType=e.embroideryType||null;break;case r.a.TYPE:(t=r.a.fromArray(e.textInput||e)).embroideryType=e.embroideryType||null;break;case h.a.TYPE:t=h.a.fromLicensedAssetItem(e.licensedAssetItem||e)}return t?(t.position=a.a.fromArray(e.position),e.cropPosition&&(t.cropPosition=a.a.fromArray(e.cropPosition),t.cropPosition.areaWidth=t.position.areaWidth,t.cropPosition.areaHeight=t.position.areaHeight,t.cropPosition.rotation=t.position.rotation),t.originalPosition=a.a.fromArray(e.position),t.isCustomizable=e.isCustomizable,t.customizeKey=e.customizeKey,t.patternType=e.patternType||null,t.patternSpacing=e.patternSpacing||null,t.flipX=e.flipX||!1,t.flipY=e.flipY||!1,t.quickDesignId=e.quickDesignId||null,t.groupType=(null==e?void 0:e.groupType)||(e.quickDesignId?g.a.GROUP_QUICK_DESIGN:null),t.groupId=e.groupId||null,t.isExisting=!0,e.generatorOptions&&Object.keys(e.generatorOptions).length>0&&(t.generatorOptions=o.fromArray(e.generatorOptions)),Object(m.c)()&&Object(v.b)(t),t):null},C.fromArray=function(e){var t=new C;for(var i in t.templateId=e.templateId,t.placementId=e.placementId,t.parentTemplateId=e.parentTemplateId,t.width=e.width,t.height=e.height,t.fillMode=e.fillMode,t.technique=e.technique,t.placementName=e.placementName,t.centerDefaultYPosition=e.centerDefaultYPosition,e.layers){var n=this.layerFromArray(e.layers[i]);n&&t.layers.push(n)}return t},C.getCustomizableLayersCount=function(e){var t=0;for(var i in e.layers)e.layers[i].isCustomizable&&t++;return t},C.prototype.hasTextLayersOnly=function(){for(var e in this.layers)if(!this.layers[e].isTextLayer())return!1;return!0},C.prototype.getMergedLayerBoundingBoxSize=function(){var e={left:0,right:0,top:0,bottom:0,width:0,height:0};for(var t in this.layers){var i=this.layers[t].position.getBoundingBox();e.left=Math.min(0===e.left?i.left:e.left,i.left),e.right=Math.max(0===e.right?i.right:e.right,i.right),e.top=Math.min(0===e.top?i.top:e.top,i.top),e.bottom=Math.max(0===e.bottom?i.bottom:e.bottom,i.bottom)}return e.width=e.right-e.left,e.height=e.bottom-e.top,e},C.prototype.isTouchToolPrintFile=function(){return this.templateId===C.ID_TOUCH_TOOL_PRINT_FILE},C.ID_TOUCH_TOOL_PRINT_FILE=233,window&&((globalThis||{}).PFItemsGeneratorTemplateItem=C)},bXkz:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("SGrL"),r=i("2el7"),a=i("Gv5l"),o=i("/w+P"),s=i("cCrT"),l=i("nF4n"),c=i("97Au"),d=Class({_par:null,__construct:function(e){this.par=new r.a,l.a.O2O(this.par,e||{}),ga("send",{hitType:"event",eventCategory:PF.Customer.isLogged()?"Generator interactions in Order flow":"Generator interactions in Product catalog",eventAction:PF.Customer.isLogged()?"Designer pop-up appeared - signed-in users":"Designer pop-up appeared - anonymous users"}),this._process()},_process:function(){var e=PF.Customer.customerId;if(e||this.par.orderType!=d.ORDER_TYPE_SAMPLE||(this.par.requireLogin=!0),!e&&!this.par.requireLogin)return this.par.orderType=d.ORDER_TYPE_ANONYMOUS,void this._goToOrder();this.par.storeId||!e?this.par.orderType||!e?this._goToOrder():this._selectOrderType():this._selectStore()},_selectStore:function(){var e=new o.b;e.callback=this._selectStoreCallback,e.type=a.a.CACHE_KEY_ORDER_FLOW,e.withAvailableProductId=this.par.allowStoresWithAvailableProductId||null,e.withAvailableVariantId=this.par.allowStoresWithAvailableVariantId||null;var t=new o.a(e);setTimeout(function(){this.par.storeId||this._popup(t)}.bind(this),10)},_selectStoreCallback:function(e){this.par.storeId=e,this._process()},_selectOrderType:function(){var e={callback:this._selectOrderTypeCallback};if(this.par.storeId){var t=(new a.a).getCachedStore(this.par.storeId);t&&!t.isNative()&&!t.supportsPrintfulProducts&&t.supportsCustomProducts&&(e.types=[d.ORDER_TYPE_BASIC])}this.par.productTemplateId&&(e.types=[d.ORDER_TYPE_BASIC,d.ORDER_TYPE_SAMPLE]),this._popup(new n.a(e,this.modal))},_selectOrderTypeCallback:function(e){this.par.orderType=e,ga("send",{hitType:"event",eventCategory:"Button Clicks",eventAction:"Order Type Button",eventLabel:"Create "+e+" order button clicked"}),this._process()},_popup:function(e){var t=new c.a.Par;t.title=lang("Start new order"),t.modalDialogClass=this.par.storeId?"modal-md":"modal-lg",t.closeOnClick=!1,this.modal?this.modal.swapBody(e,!0):(this.modal=new c.a(t),this.modal.setContent(e),this.modal.show())},_goToOrder:function(){var e=new s.a(d.NEW_ORDER_URL);switch(this.par.storeId&&(e.query.storeId=this.par.storeId),this.par.categoryId&&(e.query.categoryId=this.par.categoryId),this.par.productId&&(e.query.productId=this.par.productId),this.par.productTemplateId&&(e.query.productTemplateId=this.par.productTemplateId),this.par.productSize&&(e.query.size=this.par.productSize),this.par.productColor&&(e.query.color=this.par.productColor),this.par.productTechnique&&(e.query.technique=this.par.productTechnique),this.par.productRegion&&this.par.productRegion.length&&(e.query["region[]"]=this.par.productRegion),this.par.ref&&(e.query.ref=this.par.ref),this.par.orderType){case d.ORDER_TYPE_ANONYMOUS:e.query.ref=d.B2C_FLOW_KEY;break;case d.ORDER_TYPE_BASIC:break;case d.ORDER_TYPE_SAMPLE:e.query.isSample=1;break;default:return void this._process()}location.href=e.toString()}},l.a.Base);d.ORDER_TYPE_ANONYMOUS="anonymous",d.ORDER_TYPE_BASIC="basic",d.ORDER_TYPE_SAMPLE="sample",d.NEW_ORDER_URL=langUrl("/dashboard/order/add-product"),d.REF_LANDING="landing",d.B2C_FLOW_KEY="b2c",(globalThis||{}).PFOrderBegin=d},"boP+":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"e",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return l})),i.d(t,"f",(function(){return c})),i.d(t,"d",(function(){return d}));var n=i("KLvT"),r=i("Bxww");function a(){return Object(n.a)().getters[r.a(r.d)]}function o(e){Object(n.a)().commit(r.a(r.g),{productItem:e})}function s(){return!!Object(n.a)().getters[r.a(r.d)]}function l(){return Object(n.a)().getters[r.a(r.c)]}function c(e){Object(n.a)().commit(r.a(r.f),{placements:e})}function d(e){return Object(n.a)().getters[r.a(r.c)].includes(e)}},bvdp:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={_track:function(e,t,i){var n={hitType:"event",eventCategory:"MockupGenerator",eventAction:e};if(void 0!==t&&(n.eventLabel=t),void 0!==i&&(n.eventValue=i),PF.DEV){var r='Track MockupGenerator action "'+n.eventAction+'"';n.eventLabel&&(r+=" (label: "+n.eventLabel+")"),void 0!==n.eventValue&&(r+=" with value "+n.eventValue),console.log(r)}else ga("send",n)},_getCustomerLabel:function(){return PF.Customer.customerId>0?PF.Customer.createdAt+1800>moment().unix()?"Just registered":PF.Customer.createdAt+2592e3>moment().unix()?"New user":"Old user":"Anonymous"},trackEvent:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.BLOCKED_LABELS[e]||(i&&(this.BLOCKED_LABELS[e]=!0),PF.DEV&&console.log('Track GA Event "'+e+'": '+JSON.stringify(t)),window.dataLayer=window.dataLayer||[],dataLayer.push(t))},unblockEvent:function(e){delete this.BLOCKED_LABELS[e]},trackTransparencyWarningContinue:function(e){this.trackEvent("transparency-warning-continue",{event:"transparency-warning",eventCategory:"Generator transparency warning message",eventAction:"Continue button clicked",eventLabel:e||null})},trackViewDesigner:function(){n._track("View designer",n._getCustomerLabel()),ga("send",{hitType:"event",eventCategory:(PF.Customer.isLogged(),"Generator interactions in Mockup generator"),eventAction:PF.Customer.isLogged()?"Product opened in Mockup generator - signed-in users":"Product opened in Mockup generator - anonymous users"})},trackViewDownloadPage:function(){n._track("View download page",n._getCustomerLabel())},trackGenerateClick:function(e){n._track("Clicked generate",n._getCustomerLabel(),e)},trackGeneratePercentClick:function(e){n._track("Percent of files generated",n._getCustomerLabel(),e)},trackDownloadClick:function(e){n._track("Clicked download",n._getCustomerLabel(),e)},trackSaveToLibrary:function(e){n._track("Save to library",n._getCustomerLabel(),e)},trackSingleFileCheckToggle:function(e,t){n._track(t?"Check one file to generate":"Un-check one file to generate",e)},trackFileRowCheckToggle:function(e,t){n._track(t?"Check row to generate":"Un-check row to generate",e)},trackFilenameChanged:function(){n._track("Filename changed",n._getCustomerLabel())},trackCompleteFileSavingAfterLogin:function(){n._track("Finish file saving after login",n._getCustomerLabel())},_getEventCategory:function(e){var t="";return e?t=PF.Customer.isLogged()?"in Order flow":"in Product catalog":e||(t="in Mockup generator"),"Generator interactions "+t},_getEventLabel:function(e,t){var i=0,n="";for(var r in e.getTemplates())for(var a in e.getTemplates()[r])i+=e.getTemplates()[r][a].layers.length;return 1===i?n="".concat(t," - 1"):2===i?n="".concat(t," - 2"):i>2&&(n="".concat(t," 3+")),"Clicked "+n+" layer/s"},trackDesignTabsInProductOrDesignTab:function(e,t,i,n){if(n.isMockupGeneratorMode||n.isOrderFlowMode){var r="";"product"===t?r=PF.Customer.isLogged()?"Next steps designing options clicked - signed-in users":"Next steps designing options clicked - anonymous users":"design"===t&&(r=PF.Customer.isLogged()?"Designing options clicked in design tab - signed-in users":"Designing options clicked in design tab - anonymous users"),ga("send",{hitType:"event",eventCategory:this._getEventCategory(e),eventAction:r,eventLabel:i})}},trackAddFirstLayer:function(e,t,i){var n=!1;if((i.isMockupGeneratorMode||i.isOrderFlowMode)&&(1===t[0].layers.length||"QUICK_DESIGN"===t[0].layers[0].groupType)&&!n){n=!0;var r="";"QUICK_DESIGN"===t[0].layers[0].groupType?r="Quick design layer":t[0].layers[0].isImageLayer()?r="File layer":t[0].layers[0].isTextLayer()?r="Text layer":t[0].layers[0].isClipartLayer()?r="Clipart layer":t[0].layers[0].isLicensedAssetLayer()&&(r="Premium images layer"),ga("send",{hitType:"event",eventCategory:this._getEventCategory(e),eventAction:PF.Customer.isLogged()?"First design layer added - signed-in users":"First design layer added - anonymous users",eventLabel:r})}},trackClickedOnFinish:function(e,t){(t.isMockupGeneratorMode||t.isOrderFlowMode)&&ga("send",{hitType:"event",eventCategory:"Generator interactions in Mockup generator",eventAction:PF.Customer.isLogged()?"Continue with design clicked - signed-in users":"Continue with design clicked - anonymous users",eventLabel:PF.Customer.isLogged()?this._getEventLabel(e,"order"):this._getEventLabel(e,"add to cart")})},trackClickedOnContinue:function(e,t){(t.isMockupGeneratorMode||t.isOrderFlowMode)&&ga("send",{hitType:"event",eventCategory:"Generator interactions in Mockup generator",eventAction:PF.Customer.isLogged()?"Continue with design clicked - signed-in users":"Continue with design clicked - anonymous users",eventLabel:PF.Customer.isLogged()?this._getEventLabel(e,"generate files"):this._getEventLabel(e,"continue")})},trackClickedOnContinueInPopup:function(e){var t=0,i="",n=e.getDesignData().templates;for(var r in n)t+=n[r].layers.length;1===t?i="Continue clicked - 1 layer":2===t?i="Continue clicked - 2 layers":t>2&&(i="Continue clicked 3+ layers"),ga("send",{hitType:"event",eventCategory:PF.Customer.isLogged()?"Generator interactions in Order flow":"Generator interactions in Product catalog",eventAction:PF.Customer.isLogged()?"Continue with design clicked - signed-in users":"Continue with design clicked - anonymous users",eventLabel:i})},trackClickedOnSaveToTemplates:function(e,t){(t.isMockupGeneratorMode||t.isOrderFlowMode)&&ga("send",{hitType:"event",eventCategory:"Generator interactions in Mockup generator",eventAction:"Continue with design clicked - signed-in users",eventLabel:this._getEventLabel(e,"Save to templates")})},trackClickedOnDesignTab:function(e,t){(t.isMockupGeneratorMode||t.isOrderFlowMode)&&ga("send",{hitType:"event",eventCategory:this._getEventCategory(e),eventAction:PF.Customer.isLogged()?"Design tab opened - signed-in users":"Design tab opened - anonymous users"})},BLOCKED_LABELS:{}};(globalThis||{}).PFMockupGeneratorTracking=n},c2KS:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("nF4n"),r=function(e,t,i){for(var n in this.node=tag("div","col-12"),e){var r=e[n],a=r.fileId===t.fileId;tag("div",{className:"pf-mr-16 library-preview__thumb",onclick:function(e){i(e)}.bind(this,r)},[tag("a","preview-navigation-link vertical-center "+(a?"border-red":""),[tag("img",{src:r.urlThumb})])]).append(this.node)}};r.prototype=new n.a.Base,(globalThis||{}).PFFileLibraryPreviewThumbList=r;var a=i("edgZ"),o=i("A8Hf"),s=i("N62G"),l=Class({__construct:function(e){this._fileItem=e,this.node=Object(n.a)({tag:"div",className:"file-name"}),e.group===s.a.PRINTFILE_PREVIEW?Object(n.a)({tag:"div",els:[this._fileItem.filename+" "]}).append(this.node):this._renderEditable()},_renderEditable:function(){n.a.clearNode(this.node);var e="";this._fileItem.isSample||(e=Object(n.a)({tag:"a",className:"icon-edit edit-icons",style:{color:"#a7a7a7"},onclick:this._renderEditing,title:lang("Edit file name")}),$(e).tooltip({html:!0})),Object(n.a)({tag:"div",els:[this._fileItem.filename+" ",e]}).append(this.node)},_renderEditing:function(){n.a.clearNode(this.node),this.textarea=Object(n.a)({tag:"textarea",text:this._fileItem.filename,prop:{onkeydown:this._onEditKeyDown,onkeyup:this._onEditKeyUp,onblur:this._approveEditedName},style:{height:"39px"}}).append(this.node),Object(o.a)(this.textarea),this.textarea.select()},_onEditKeyUp:function(e){e.stopPropagation(),27==e.keyCode&&(this.textarea.onblur=null,this._renderEditable())},_onEditKeyDown:function(e){e.stopPropagation(),13==e.keyCode&&(e.preventDefault(),this.textarea.onblur=null,this._approveEditedName())},_approveEditedName:function(){var e=$.trim(this.textarea.value);e&&(new a.a).renameFile(this._fileItem,e,this._onFileRenamed)},_onFileRenamed:function(e){this._fileItem=e,this._renderEditable()}},n.a.Base);(globalThis||{}).PFFileLibraryPreviewName=l;var c=i("97Au"),d=i("jhOU"),u=function(e,t){if(this._fileItem=e,this.node=tag("div","row"),t&&e.isSelectable(!0)&&tag("div","col-xs-12 col-sm-4 pf-mb-12 col-md-9 pf-pr-sm-4 pf-pr-md-12",[tag("a",{className:"pf-btn pf-btn-primary pf-w-100",onclick:t},lang("Choose file"))]).append(this.node),e.isDownloadable()&&tag("div","col-xs-12 col-sm-4 pf-mb-12 col-md-9 pf-pr-sm-4 pf-pr-md-12",[tag("a",{href:e.urlDownload,className:"pf-btn pf-btn-secondary pf-w-100"},lang("Download file"))]).append(this.node),e.canViewInBrowser()&&tag("div","col-xs-12 col-sm-4 pf-mb-12 col-md-9 pf-pr-sm-4 pf-pr-md-12",[tag("a",{href:e.urlFullSize,className:"pf-btn pf-btn-secondary pf-w-100",attr:{target:"_blank"}},dclang("library","View print file in full size","View full size"))]).append(this.node),e.isRemovable()&&tag("div","col-xs-12 col-sm-4 col-md-9 pf-pr-md-12",[tag("a",{className:"pf-btn pf-btn-secondary pf-w-100",onclick:this._deleteFile.bind(this)},lang("Delete file"))]).append(this.node),e.containsLicensedAssets||e.needsProResubscription){var i=e.containsLicensedAssets?dlang("generator","Print files canâ€™t be downloaded for designs with Stock images"):dlang("generator","Your Printful Pro subscription isnâ€™t active"),n=e.containsLicensedAssets?dlang("generator","Your design contains a premium stock image and itâ€™s not available for download."):dlang("generator","Please {hl}renew your Pro Plan{/hl} or remove the design layer with the Pro features to continue").replace("{hl}",'<a href="/dashboard/settings/account-subscription-plan">').replace("{/hl}","</a>");tag("div","pf-mb-16 warning pf-mr-2",[new d.a({type:"warning",heading:i,content:n})]).append(this.node)}this._showDeletePopup=function(){var e=new c.a.Par;e.title=lang("Are you sure?"),e.modalDialogClass="modal-md file-delete-modal";var t=tag("div","",[tag("p","pf-m-0 pf-text-muted pf-ui-subheading",[dlang("library","Really delete this image from your library?")]),tag("p","pf-m-0 pf-text-muted pf-ui-subheading",[dlang("library","This cannot be undone!")])]),i=tag("div","text-left",[tag("a",{className:"pf-btn pf-btn-primary pf-mr-12",text:lang("Delete file"),onclick:this._onDelete.bind(this)}),tag("a",{className:"pf-btn pf-btn-secondary",text:lang("Cancel"),onclick:this._onCancel.bind(this)})]);this.modal=new c.a(e),this.modal.setContent(t),this.modal.setFooterContent(i),this.modal.show()},this._onDelete=function(){(new a.a).deleteFile(this._fileItem,this._onCancel.bind(this))},this._onCancel=function(){this.modal.hide()}};(u.prototype=new n.a.Base)._deleteFile=function(){this._showDeletePopup()},(globalThis||{}).PFFileLibraryPreviewMenu=u;var h=function(e){this.node=Object(n.a)({tag:"div"});var t,i=e.employee.name;t=i?Object(n.a)({tag:"span",className:"designerName",text:i+" / ",style:{fontWeight:"bold"}}):Object(n.a)({}),null!=e.employee&&Object(n.a)({tag:"div",className:"pf-mt-6",els:[{tag:"span",className:"pf-text-muted pf-mb-2",text:dlang("library","Uploaded by:")+" "},{tag:"span",className:"pf-text-muted",els:[t,{tag:"span",text:dlang("library","Printful design services")}]},{tag:"div",className:"pf-link pf-mb-24",text:e.employee.email}]}).append(this.node)};h.prototype=new n.a.Base,(globalThis||{}).PFFileLibraryPreviewDesignServices=h;var p=i("E17x"),g=i("y70k"),f=i("yLV6"),_=i.n(f),m=i("9eNC"),v=i("XLZy"),y=i("NhST"),b=function(e,t,i,n,r,o){this._onPickedCallback=i,this.minimalistic=!!n,this._popupBackgroundColor=r,this.repository=new a.a;var s=new c.a.Par;(s.nodeClass="library-preview",this.minimalistic||(s.modalDialogClass="modal-lg"),s.onClose=$.proxy(this._onModalClose,this),this._minPageLoaded=e.page,this._maxPageLoaded=e.page,this.modal=new c.a(s),this.modal._nodeBody.id="libraryPreviewModal",this.keyupEventNamespace=".preview"+(new Date).getTime(),this._isSingleFile=e.fileIds&&1===e.fileIds.length,this.init(),this.modal.show(),this._activeFileItem=t,o?this._loadListRe(o):(this._searchPar=e,this._loadList()),m.n(a.a.EVENT_FILE_DELETED,this._onFileDeleted,this),PF.DEV||Object(p.b)())&&new _.a(this.imageNode).on("swipeleft swiperight",function(e){this.onSwipe(e.type)}.bind(this))};b.prototype.modal=null,b.prototype._minPageLoaded=null,b.prototype._maxPageLoaded=null,b.prototype._totalPages=null,b.prototype._isSingleFile=null,b.prototype._onFileDeleted=function(e){var t=this.getNextFile();t||(t=this.getPreviousFile()),this._fileItems=this._fileItems.filter((function(t){return t.fileId!=e.fileId})),t?this._loadFile(t):this.modal.remove()},b.prototype._loadList=function(){this._searchPar.onlySampleFiles?this.repository.getSampleFiles(this._searchPar,this._loadListRe.bind(this)):this.repository.getFiles(this._searchPar,this._loadListRe.bind(this))},b.prototype._loadListRe=function(e){if(this._fileItems=e.items,this._totalPages=e.pages,!this._activeFileItem)for(var t in this._fileItems){this._activeFileItem=this._fileItems[t];break}this._loadFile(this._activeFileItem)},b.prototype.init=function(){if(this.minimalistic){var e=this._popupBackgroundColor?" library-preview__content--minimalistic-mockup":"";this.previewNode=tag("div","row library-preview__content library-preview__content--minimalistic"+e,[tag("div","modal-header",[tag("button",{className:"close pf-m-0",attr:{"data-dismiss":"modal"}},[tag("i","pf-i pf-i-close pf-i-24"),tag("span","sr-only",lang("Close"))]),tag("h4","pf-m-0",lang("Preview"))]),tag("div","col-md-12 library-preview__image-row",[tag("div","row",[tag("div","col-xs-12 text-center",[this.imageNode=tag("img","preview-image")])])])])}else this.previewNode=tag("div","row library-preview__content",[tag("div","col-md-4 order-2 library-preview__detail-row",[tag("div","pf-p-12",[tag("div","row",[tag("div","col-md-12 text-right",[tag("button",{className:"close pf-m-0",style:{height:"60px"},attr:{"data-dismiss":"modal"}},[tag("i","pf-i pf-i-close pf-i-36"),tag("i","sr-only",lang("Close"))])])]),tag("div","row",[tag("div","col-md-12",[this.nameNode=tag("h4","word-wrap-break pf-w-75"),this.sizeNode=tag("p","pf-text-muted pf-m-0 pf-mb-4"),this.dateNode=tag("p","pf-text-muted pf-m-0 pf-mb-24"),this.errorMessageNode=tag("p","pf-text-red"),this.designServicesNode=tag("div"),this.menuNode=tag("div")])])])]),tag("div","col-md-8 order-1 library-preview__image-row clearfix",[tag("div","row library-preview__image-wrapper pf-mx-0 pf-align-items-center",[tag("div","row library-preview__image pf-mx-0 pf-p-16 pf-py-xs-32 text-center",[tag("div","col-1 pf-my-auto pf-d-none pf-d-xs-block text-right"+(this._isSingleFile?" hidden":""),[tag("a",{className:"preview-navigate-left black-gray cgray padding-10 round hover-cwhite",onclick:this.onNavigateLeft.bind(this)},[tag("i","glyphicon glyphicon-chevron-left")])]),tag("div","col-12 col-xs-10 pf-px-4 preview-image__wrap pf-my-auto",[this.imageNode=tag("img","preview-image pf-px-0 pf-px-xs-16")]),tag("div","col-1 pf-my-auto pf-d-none pf-d-xs-block text-left"+(this._isSingleFile?" hidden":""),[tag("a",{className:"preview-navigate-right black-gray cgray pf-p-12 round hover-cwhite",onclick:this.onNavigateRight.bind(this)},[tag("i","glyphicon glyphicon-chevron-right")])])]),this.previewThumbRowNode=tag("div","row pf-d-none pf-d-xs-block text-center pf-pb-32 pf-m-0 library-preview__thumbs"+(this._isSingleFile?" hidden":"")),tag("div","pf-d-block pf-d-xs-none pf-mb-24",[tag("div","row pf-mx-0",[tag("div","col-2 pf-my-auto text-right"+(this._isSingleFile?" hidden":""),[tag("a",{className:"preview-navigate-left black-gray cgray padding-10 round hover-cwhite",onclick:this.onNavigateLeft.bind(this)},[tag("i","glyphicon glyphicon-chevron-left")])]),this.previewThumbRowNodeMobile=tag("div","col-8 text-center pf-m-0 library-preview__thumbs"+(this._isSingleFile?" hidden":"")),tag("div","col-2 pf-my-auto text-left"+(this._isSingleFile?" hidden":""),[tag("a",{className:"preview-navigate-right black-gray cgray pf-p-12 round hover-cwhite",onclick:this.onNavigateRight.bind(this)},[tag("i","glyphicon glyphicon-chevron-right")])])])])])])]);this.previewNode.append(this.modal._nodeBody),$(this.modal._nodeContent).html($(this.modal._nodeBody)),this.initKeyboardEvents()},b.prototype.initKeyboardEvents=function(){$(document).on("keyup"+this.keyupEventNamespace,$.proxy((function(e){this._isPageLoadingCurrently||(37==e.keyCode&&this.onNavigateLeft(),39==e.keyCode&&this.onNavigateRight())}),this))},b.prototype.onNavigateLeft=function(){var e=this.getPreviousFile();e&&this._loadFile(e)},b.prototype.onNavigateRight=function(){var e=this.getNextFile();e&&this._loadFile(e)},b.prototype.onSwipe=function(e){"swipeleft"==e?this.onNavigateRight():"swiperight"==e&&this.onNavigateLeft()},b.prototype.getPreviousFile=function(){var e=this._getActiveIndex()-1;return this._fileItems[e]?this._fileItems[e]:null},b.prototype._getActiveIndex=function(){for(var e in this._fileItems)if(this._fileItems[e].fileId==this._activeFileItem.fileId)return parseInt(e,10);return 0},b.prototype.getNextFile=function(){var e=this._getActiveIndex()+1;return this._fileItems[e]?this._fileItems[e]:null},b.prototype._loadFile=function(e){e=this.repository.getCachedFile(e.fileId),this.imageNode.src=e.getUrlPreviewOrLoading(),this._activeFileItem=e,this.minimalistic?this.modal.setTitle(lang("Preview")):(this.sizeNode.textContent=e.getSizeReadable()+" / "+e.inchDimensionsWithFallback,this.dateNode.textContent=(new y.a).formatWithShortMonthDayTime(moment.unix(e.createdAt)),this.errorMessageNode.textContent=e.isCorrupted()?dlang("generator","Files must be one page long"):"",n.a.clearNode(this.designServicesNode),e.employee&&new h(e).append(this.designServicesNode),n.a.clearNode(this.menuNode),n.a.clearNode(this.nameNode),new l(e).append(this.nameNode),new u(e,this._onPickedCallback?$.proxy(this._onFilePicked,this,e):null,this.minimalistic).append(this.menuNode),n.a.clearNode(this.previewThumbRowNodeMobile),n.a.clearNode(this.previewThumbRowNode),new r(this._getThumbnailList(2),e,$.proxy(this._loadFile,this)).append(this.previewThumbRowNodeMobile),new r(this._getThumbnailList(6),e,$.proxy(this._loadFile,this)).append(this.previewThumbRowNode)),this._checkAndPreloadIsNeeded();var t=function(e){e&&((new Image).src=e.getUrlPreviewOrLoading())};t(this.getNextFile()),t(this.getPreviousFile())},b.prototype._onFilePicked=function(e){this._onPickedCallback(e),this.modal.remove()},b.prototype._onModalClose=function(){this.modal.remove(),this.modal=null,$(document).unbind(this.keyupEventNamespace),m.m(a.a.EVENT_FILE_DELETED,this._onFileDeleted)},b.prototype._getThumbnailList=function(e){var t=this._getActiveIndex(),i=e,n=this._fileItems.length;if(n<=i)return this._fileItems.slice();if(0==t||t-i<0)return this._fileItems.slice(0,i);if(t+i>n)return this._fileItems.slice(n-i,n);var r=Math.ceil(i/2);return this._fileItems.slice(t-r,t+r)},b.prototype._preloadNextPage=function(){this._minPageLoaded>=this._totalPages||(this._maxPageLoaded+=1,this._preloadPage(this._maxPageLoaded))},b.prototype._preloadPreviousPage=function(){this._minPageLoaded<=1||(this._minPageLoaded-=1,this._preloadPage(this._minPageLoaded))},b.prototype._preloadPage=function(e){v.a.show(this.previewNode),this._searchPar.page=e,this._isPageLoadingCurrently=!0,this._searchPar.onlySampleFiles?this.repository.getSampleFiles(this._searchPar,this._pageLoaded.bind(this)):this.repository.getFiles(this._searchPar,this._pageLoaded.bind(this))},b.prototype._checkAndPreloadIsNeeded=function(){var e=this._getActiveIndex();e<5&&this._preloadPreviousPage(),e>this._fileItems.length-5&&this._preloadNextPage()},b.prototype._pageLoaded=function(e){v.a.hide(this.previewNode),this._totalPages=e.pages,this._isPageLoadingCurrently=!1;var t,i=this._fileItems;if(this._fileItems=[],e.page==this._minPageLoaded)for(t in e.items)this._fileItems.push(e.items[t]);for(t in i)this._fileItems.push(i[t]);if(e.page==this._maxPageLoaded)for(t in e.items)this._fileItems.push(e.items[t])},b.viewList=function(e){var t=new a.a.SearchPar;for(var i in t.page=1,t.perPage=10,t.fileIds=[],e){var n=e[i];n===g.a.ID_TEMP_GENERATOR_FILE||t.fileIds.indexOf(n)>-1||t.fileIds.push(n)}new b(t)},(globalThis||{}).PFFileLibraryPreview=b},c4GQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return _}));var n=i("TbQS"),r=i("D/Ov"),a=i("6t3j"),o=i("o0qH"),s=i("AUjr"),l=i("a3yQ"),c=i("eYhR"),d=i("nwx2"),u=i("fQ40"),h=i("L5Qw"),p=i("nF4n"),g=Class({_product:null,_productRepository:null,__construct:function(e,t,i){this._product=e,this._productRepository=new a.a,this._productRepository.setCurrency(this._product.priceRange.currency);var n=new d.a("primary"),r=new c.a;return r.caption=lang("Info"),r.onclick=this._onInfoClicked,r.isActive=t===g.TAB_INFO,n.add(r),(e.isDtgShirt()||e.isEmbroidery())&&((r=new c.a).caption=lang("Pricing"),r.onclick=this._onPricingClicked,r.isActive=t===g.TAB_PRICING,n.add(r)),(r=new c.a).caption=lang("Print file templates"),r.onclick=this._onTemplatesClicked,r.isActive=t===g.TAB_TEMPLATES,n.add(r),i&&((r=new c.a).caption=lang("Reviews"),r.onclick=this._onReviewsClicked.bind(this,1),r.isActive=t===g.TAB_REVIEWS,n.add(r)),this.node=Object(p.a)({tag:"div",className:"row",els:[{tag:"div",className:"col-md-12 pf-m-0",els:[n,this.nodeContainer=Object(p.a)({tag:"div",className:"col-md-12 pf-p-0"+(i?" margin-top-20":""),els:[{tag:"div"}]})]}]}),"info"==t?this._onInfoClicked():this._onReviewsClicked(1),this.node},_onTemplatesClicked:function(){this._productRepository.getDetails(this._product.productId,this._onTemplatesLoaded)},_onTemplatesLoaded:function(e){var t=Object(o.a)(this._product.productId).getTechniqueFromMemory()||this._product.type;p.a.clearNode(this.nodeContainer),tag("div","",[new l.a(e.templates,t),{tag:"a",href:this._product.getGuidelinesTabUrl(),target:"_blank",className:"pf-link bold",style:{fontWeight:"bold"},text:dlang("products","See full guidelines, tips, and video tutorials")}]).append(this.nodeContainer)},_onInfoClicked:function(){this._productRepository.getDetails(this._product.productId,this._onInfoLoaded)},_onPricingClicked:function(){this._productRepository.getDetails(this._product.productId,this._onPricingLoaded)},_onInfoLoaded:function(e){p.a.clearNode(this.nodeContainer),Object(p.a)({tag:"div",els:[{tag:"h6",text:lang("Price")},{tag:"h4",className:"client",innerHTML:this._setPrice(e.product)},{tag:"h6",className:"margin-top-30",text:lang("Description")},{tag:"div",className:"pf-text-muted",innerHTML:e.description}]}).append(this.nodeContainer)},_onPricingLoaded:function(e){if(p.a.clearNode(this.nodeContainer),!$.isEmptyObject(e.pricing)){var t=new s.a(e.product,e.pricing);tag("div",null,[t.getContent()]).append(this.nodeContainer)}},_setPrice:function(e){return e.getDisplayPriceString()},_onReviewsClicked:function(e){var t=new n.a(this._product);(new a.a).getReviews({reviewableItemId:t.getId(),reviewableItemType:t.getType(),page:e,stars:0,locale:null,withPictures:!1,sortBy:null,perPage:3,callback:this._onReviewsLoaded})},_onReviewsLoaded:function(e){if(p.a.clearNode(this.nodeContainer),e.items.length){for(var t in e.items)new r.a(e.items[t]).append(this.nodeContainer);var i=new u.a;i.page=e.page,i.pages=e.pages,i.callback=this._onReviewsClicked,new h.a(i).append(this.nodeContainer)}else Object(p.a)({tag:"div",className:"text-center",text:dlang("products","This product doesnâ€™t have any reviews yet.")}).append(this.nodeContainer)}},p.a.Base);g.TAB_INFO="info",g.TAB_REVIEWS="reviews",g.TAB_TEMPLATES="templates",g.TAB_PRICING="pricing",(globalThis||{}).PFProductInfo=g;var f=i("97Au"),_=Class({_par:void 0,_modal:void 0,_productInfo:void 0,__construct:function(e){e.activeTab=e.activeTab||g.TAB_INFO,this._par=e,this._init()},_init:function(){var e=new f.a.Par;e.title=this._par.product.getFullTitle(),e.modalDialogClass="modal-lg",this._productInfo=new g(this._par.product,this._par.activeTab,!!this._par.showReviews);var t=new f.a(e);t.setContent(this._productInfo),t.show(),this._modal=t},getModal:function(){return this._modal},getProductInfo:function(){return this._productInfo}});(globalThis||{}).PFProductInfoModal=_},cKxm:function(e,t,i){"use strict";i.d(t,"a",(function(){return P})),i.d(t,"b",(function(){return T}));var n=i("x0He"),r=i("SBaP"),a=i("oCYn"),o=i("e7F3");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=f(e);if(t){var r=f(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p(this,i)}}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function m(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var v=new WeakMap,y=new WeakMap,b=new WeakSet,P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,e);var t,i,n,r=h(a);function a(e){var t;return c(this,a),t=r.call(this),b.add(g(t)),v.set(g(t),{writable:!0,value:void 0}),y.set(g(t),{writable:!0,value:void 0}),t.node=tag("div","form-input-field-mke"),m(g(t),v,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(g(t),b,C).call(g(t)),t}return t=a,(i=[{key:"destroy",value:function(){_(this,y).destroy(),m(this,y,null)}}])&&d(t.prototype,i),n&&d(t,n),a}(r.a),C=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.default.use(o.c),(t=new n.b).components={"input-field":function(){return i.e(256).then(i.bind(null,"/CSp"))}},t.template='\n            <input-field\n                :name="name"\n                :placeholder="placeholder"\n                :id="id"\n                :value="value"\n                :label="label"\n                :type="type"\n                :labelHelpText="labelHelpText"\n                :infoIcon="infoIcon"\n                :infoIconDelay="infoIconDelay"\n                :infoIconName="infoIconName"\n                :isReadOnly="isReadOnly"\n                :tooltip="tooltip"\n                :prefix="prefix"\n                :prefixClass="prefixClass"\n                :suffix="suffix"\n                :suffixClass="suffixClass"\n                :prefixSwitcher="prefixSwitcher"\n                :suffixSwitcher="suffixSwitcher"\n                :className="className"\n                :inputSize="inputSize"\n                :validation="validation"\n                :switcherOptions="switcherOptions"\n                :activeSwitcherOption="activeSwitcherOption"\n                :showClearButton="showClearButton"\n                :autocomplete="autoComplete"\n                @onChange="emitEvent(\'onChange\', $event)"\n                @onKeyUp="emitEvent(\'onKeyUp\', $event)"\n                @onFocus="emitEvent(\'onFocus\', $event)"\n                @onBlur="emitEvent(\'onBlur\', $event)"\n                @onSwitcherValueChange="emitEvent(\'onSwitcherValueChange\', $event)"\n                @onValidated="emitEvent(\'onValidated\', $event)"\n            />\n        ',t.initialData={name:_(this,v).name,placeholder:_(this,v).placeholder,id:_(this,v).id,value:_(this,v).value,label:_(this,v).label,type:_(this,v).type,labelHelpText:_(this,v).labelHelpText,infoIcon:_(this,v).infoIcon,infoIconDelay:_(this,v).infoIconDelay,infoIconName:_(this,v).infoIconName,isReadOnly:_(this,v).isReadOnly,tooltip:_(this,v).tooltip,prefix:_(this,v).prefix,prefixClass:_(this,v).prefixClass,suffix:_(this,v).suffix,suffixClass:_(this,v).suffixClass,prefixSwitcher:_(this,v).prefixSwitcher,suffixSwitcher:_(this,v).suffixSwitcher,className:_(this,v).className,inputSize:_(this,v).inputSize,validation:_(this,v).validation,switcherOptions:_(this,v).switcherOptions,activeSwitcherOption:_(this,v).activeSwitcherOption,showClearButton:_(this,v).showClearButton,autoComplete:_(this,v).autoComplete},t.emitEvent=function(e,t){switch(e){case"onChange":_(r,v).onChange&&_(r,v).onChange(t);break;case"onKeyUp":_(r,v).onKeyUp&&_(r,v).onKeyUp(t);break;case"onFocus":_(r,v).onFocus&&_(r,v).onFocus(t);break;case"onBlur":_(r,v).onBlur&&_(r,v).onBlur(t);break;case"onSwitcherValueChange":_(r,v).onSwitcherValueChange&&_(r,v).onSwitcherValueChange(t);break;case"onValidated":_(r,v).onValidated&&_(r,v).onValidated(t)}},m(this,y,new n.a(t)),_(this,y).append(this.node);case 8:case"end":return e.stop()}}),e,this)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),T=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,e),this.name=t.name||"default Name",this.placeholder=t.placeholder||void 0,this.id=t.id||void 0,this.value=t.value||void 0,this.label=t.label||void 0,this.type=t.type||void 0,this.labelHelpText=t.labelHelpText||void 0,this.infoIcon=t.infoIcon||void 0,this.infoIconDelay=t.infoIconDelay||void 0,this.infoIconName=t.infoIconName||void 0,this.isReadOnly=t.isReadOnly||void 0,this.tooltip=t.tooltip||void 0,this.prefix=t.prefix||void 0,this.prefixClass=t.prefixClass||void 0,this.suffix=t.suffix||void 0,this.suffixClass=t.suffixClass||void 0,this.prefixSwitcher=t.prefixSwitcher||void 0,this.suffixSwitcher=t.suffixSwitcher||void 0,this.className=t.className||void 0,this.inputSize=t.inputSize||void 0,this.validation=t.validation||void 0,this.switcherOptions=t.switcherOptions||void 0,this.activeswitcherOption=t.activeswitcherOption||void 0,this.onChange=t.onChange||void 0,this.onKeyUp=t.onKeyUp||void 0,this.onFocus=t.onFocus||void 0,this.onBlur=t.onBlur||void 0,this.onSwitcherValueChange=t.onSwitcherValueChange||void 0,this.activeSwitcherOption=t.activeSwitcherOption||void 0,this.showClearButton=t.showClearButton||void 0,this.onValidated=t.onValidated||void 0,this.autoComplete=t.autoComplete||void 0}},cVO5:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({isChecked:null,onChange:null,showSlider:null,onSliderChange:null,layerType:null});window&&((globalThis||{}).PFProductPushCanCustomizeCheckboxPar=n)},cejl:function(e,t,i){"use strict";i.d(t,"a",(function(){return E}));var n=i("QLN8"),r=i("E17x"),a=i("vUhP"),o=i("skaT"),s=i("sjGI"),l=i("nF4n"),c=i("TbQS"),d=i("A9n+"),u=i("FHCs"),h=i("9Nv7"),p=i("YBfo"),g=i("4Ru2"),f=i("4CFC"),m=i("Op/+"),v=i("N6Gp"),y=i("GGNF"),b=i("Rsrl"),P=i("Kiz0"),C=i("9eNC"),T=i("Tt8e"),I=i("wy2R"),w=i.n(I),S=i("NhST"),E=function(e){var t,i=this;this.product=e.product,this.variant=e.variant,this.showFulfillmentCountries=e.showFulfillmentCountries,this.technique=e.technique,this.chooseButtonTitle=e.chooseButtonTitle||lang("Choose"),this.productUrl=e.url,this.isModal=e.isModal,this.sellingRegion=(null==e?void 0:e.sellingRegion)||null,this.isRecentlyViewedItem=(null==e?void 0:e.isRecentlyViewedItem)||!1;var s=e.callback;e.className=e.className||"col-md-3 col-xs-6";var c,d=[],h=e.isSampleOrderContext&&this.product.isDisabledInSample,g=this.product.isPersonalUseBrand()&&!p.a.isProductsPricing()&&!p.a.isOrderFlow(),f="";this.product.isSterlingSilver&&(f=tag("span","pf-ui-legal pf-bold",dclang("products","Product feature","Sterling Silver"))),this.product.hasClearance&&(c=tag("span","pf-badge pf-badge-rect pf-badge--primary pf-badge-position-card",dclang("products","badge","clearance"))),this.product.isPopular&&(c=tag("span","pf-badge pf-badge-rect pf-badge--primary pf-badge-position-card",dclang("products","badge","bestseller"))),this.product.hasBetaAccess&&(c=tag("span","pf-badge pf-badge-rect pf-badge--beta pf-badge-position-card",dclang("products","badge","beta"))),this.product.isNew&&(c=tag("span","pf-badge pf-badge-rect pf-badge--new pf-badge-position-card",dclang("products","badge","new"))),c&&d.push(c),this._showMadeInUsBadge()&&d.push(tag("span",{className:"product-item__badge  product-item__badge--usa",attr:{title:dclang("products","badge","Made in USA")}},[tag("span",{innerHTML:dclang("products","Product origin label","MADE IN {flag}").replace("{flag}","<img src='/static/images/layout/usa-flag.png' alt='"+dclang("products","badge","Made in USA")+"'>")})])),h&&(d=[tag("span","product-item__badge product-item__badge--disabled",[dclang("products","Product is","Not available for sample orders")])]),e.isUnavailable&&(d=[tag("span","product-item__badge product-item__badge--disabled",[dclang("products","Product is","Temporarily unavailable")])]),this.product.isTemporaryOutOfStock&&(d=[tag("span","product-item__badge product-item__badge--out-of-stock",[lang("Out of stock")])]),g&&(d=[tag("span","product-item__badge product-item__badge--disabled",[dclang("products","Product is","Only available for personal orders")])]),d.length&&d[0].setAttribute("tabindex","0");var _={};this.product.isInCategory(n.a.CATEGORY_HATS)&&(_.backgroundSize="contain",_.backgroundColor="white"),_.width="100%";var C="";(this.product.isTemporaryOutOfStock||h||e.isUnavailable||g)&&(C=" square-box--out-of-stock"),this.product.doesNotMatchSellingRegion&&(_.opacity="0.5");var T=this._getProductImageByType(this.product.images,this.product.mainCatalogCategoryId),I=(null==T?void 0:T.primary)||this.product.urlImage,w=(null==T?void 0:T.hover)||null,S=tag("div","square-box pf-rounded-top--medium"+C,[this._squareContent=tag("div","square-content",[tag("img",{className:w?"square-box__img":"",prop:{width:"254",src:u.a,loading:e.skipLazyLoad?"eager":"lazy",alt:this.product?this.product.customTitle:""},data:{src:I},style:_}),w?tag("img",{className:"square-box__hover-img",prop:{width:"254",src:u.a,loading:e.skipLazyLoad?"eager":"lazy",alt:this.product?this.product.customTitle:""},data:{src:w},style:_}):"",tag("span","product-item__empty-content",d)])]);y.a.isFavoriteProductsEnabled().then((function(t){var n=(new m.PFProductsCatalogUtilsStore).categories.getActiveCategoryId();!t||(i.product.isTemporaryOutOfStock||e.isUnavailable)&&n!==v.a.ID_FAKE_FAVORITES||(tag("span",{className:"pf-d-flex pf-justify-content-center pf-align-items-center product-item__favorites-icon pf-mx-8 pf-mb-8",attr:{"data-toggle":"tooltip","data-container":"body",title:i._getFavoritesNodeHoverTitle()}},[i._favoritesNode=tag("i",{className:i._getFavoritesNodeClassName(),onclick:i._openFavoritesLink.bind(i),prop:{onmouseover:i._onMouseoverFavorite.bind(i),onmouseout:i._onMouseoutFavorite.bind(i)},attr:{"data-toggle":"tooltip","data-container":"body",title:i._getFavoritesNodeHoverTitle()}}),i._favoritesOverlay=tag("span")]).prepend(i._squareContent),Object(r.b)()||$(i._favoritesNode).tooltip())}));var E=o.a.fromProduct(this.product);l.a.addClassName(E.node,"detail pf-m-0 pf-mb-12");var k=this.variant?this.variant.name:this.product.model||this.product.title;this.product.brand&&(k=this.product.brand+" "+k),this.product.displayName&&(k=this.product.displayName);var O=this.product.reviewRating;if(O&&O.reviewCount)for(var A=[],L=1;L<=5;L++){var N=this.product.reviewRating.rating,D="";parseInt(N)!==N&&Math.round(N)===L?D="-half":L>N&&(D="-empty"),A.push(tag("span","icon-star"+D+" star-rating__star"))}var R,x=e.url&&!e.isUnavailable,F=e.overrideTitle||k,M=this.product.isTemporaryOutOfStock||e.isUnavailable||this.product.doesNotMatchSellingRegion?" product-item--disabled":"",B=this.sellingRegion||b.a.sellingRegion;B?(R=[this._averageDeliveryNode=tag("div")],this._renderAverageDelivery(B)):R=[this._getFulfillmentDaysNode(),this._getFulfillmentCountries(),this._getBrandingOptionsNode()],this.product.doesNotMatchSellingRegion&&(x=!1);var V=tag(x?"a":"div",{className:"product-item pf-mb-16 pf-mb-md-24 pf-mb-lg-32 pf-rounded--medium"+M,attr:{"aria-label":F,role:"button",target:e.isNewTab?"_blank":"_self",draggable:!1}},[S,tag("div","pf-pt-12 pf-px-12 pf-pb-8",[f,this._getFastShippingNode(),tag("div",{className:"product-item__detail pf-mb-12 pf-ui-body",attr:{"aria-hidden":"true"}},F),a.a.createPeriodicPriceDiscountAnnouncement(this.product.priceRange,!1,"pf-mb-16"),!e.hideRating&&O&&O.reviewCount?this._getProductReviewNode(O,A):"",tag("div","product-item__detail__price pf-my-12",[this._getProductPriceNode(),this.product.hasFreeShipping?tag("span","product-item__detail__free-shipping",dclang("products","badge"," + free shipping")):""]),e.hideColors?"":E,e.showSizes||!e.hideProfile&&this.product.isEmbroidery()&&!this.product.hasEmbroideryProfile()?tag("div","product-item__sizes pf-pb-8 pf-text-muted pf-ui-caption pf-bold",[this._getSizeText()]):"",!e.hideProfile&&this.product.isEmbroidery()&&this.product.hasEmbroideryProfile()?tag("div","product-item__embroidery-profile pf-my-12",[dclang("products","low/high/beanie profile","{type} profile").replace("{type}",this.product.getEmbroideryProfile())]):"",e.hideAdditionalInfo?"":R,!this.variant&&this.product.extraDescription?tag("div",{innerHTML:this.product.extraDescription}):"",e.showChooseButton?tag("div","product-item__choose-button",[tag("div","pf-p-12",[tag("span","pf-btn pf-btn-primary pf-btn-block",[this.chooseButtonTitle])])]):""])]),j=!this.product.isTemporaryOutOfStock&&!h;(j||(null===(t=this.category)||void 0===t?void 0:t.id)===v.a.ID_FAKE_FAVORITES)&&(e.callback&&(V.onclick=function(t){if(j&&!t.target.classList.contains("product-item__favorite")){if(document.querySelector("#review-tooltip-".concat(i.product.productId)))return!!t.target.matches(".pf-link")&&t.target.click();if(window.getSelection().toString())return!1;if(e.url===e.product.getMockupGeneratorUrl()&&p.a.addRecentMockup({title:F,url:e.url,image:image}),!((2==t.which||4==t.button||t.metaKey||t.ctrlKey)&&x)){var n=t.defaultPrevented,r=window.location.href;s(i.product,t);var a=n!==t.defaultPrevented,o=r!==window.location.href;t.preventDefault(),!x||a||o||(window.location.href=e.url)}}}),j&&x&&(V.href=e.url),this.product.doesNotMatchSellingRegion&&(V.onclick=function(e){document.querySelectorAll(".does-not-match-selling-region-tooltip-container").forEach((function(e){$(e).tooltip("destroy"),e.remove()}));var t=tag("span",{className:"pf-position-absolute pf-d-block does-not-match-selling-region-tooltip-container",style:{top:"".concat(e.pageY,"px"),left:"".concat(e.pageX,"px")},attr:{tabindex:0}});t.append(document.body);var i=dlang("sellingRegion","Adjust your {linkStart}default catalog and delivery preferences{linkEnd} to select this product");PF.Customer.isLogged()&&!PF.Customer.isB2cStarter()&&(i=dlang("products","Adjust your {linkStart}default selling preferences{linkEnd} to select this product")),$(t).tooltip({template:'<div class="tooltip does-not-match-selling-region-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"focus",placement:"top",html:!0,title:i.replace("{linkStart}",'<a href="javascript:">').replace("{linkEnd}","</a>")}),$(t).focus(),$(t).on("shown.bs.tooltip",(function(){document.querySelector(".does-not-match-selling-region-tooltip a").addEventListener("click",(function(){Object(P.b)()}))}))})),this.node=tag("div",e.className,[V])};E.prototype=new l.a.Base,E.prototype._openFavoritesLink=function(){var e=this,t=(new m.PFProductsCatalogUtilsStore).categories.getActiveCategoryId(),i=this.product.favoriteCatalogCategoryId;return t&&t!==v.a.ID_FAKE_FAVORITES||(t=i||this.product.mainCatalogCategoryId),Object(h.a)("favorite-product/update-favorite-product",{productId:this.productId||this.product.productId,catalogCategoryId:t}).then((function(t){t&&(e.product.isFavorite=!e.product.isFavorite,e._favoritesNode.className=e._getFavoritesNodeClassName(),e._favoritesNode.setAttribute("data-original-title",e._getFavoritesNodeHoverTitle()),e._favoritesNode.classList.add("product-item__favorites-icon--bouncy"),e.product.isFavorite&&e._favoritesOverlay.classList.add("product-item__favorites-icon--ripple"),setTimeout((function(){e._favoritesNode.classList.remove("product-item__favorites-icon--bouncy"),e._favoritesOverlay.classList.remove("product-item__favorites-icon--ripple")}),450),delete b.a.cachedData[e.product.productId])})),!1},E.prototype._getFavoritesNodeClassName=function(){return(this.product.isFavorite?"pf-i-heart pf-text-red":"pf-i-heart-outline pf-i-dark")+" pf-i pf-i-24 pf-pointer product-item__favorite"},E.prototype._onMouseoverFavorite=function(){this.product.isFavorite?(l.a.removeClassName(this._favoritesNode,"pf-text-red"),l.a.addClassName(this._favoritesNode,"pf-text-dark-red")):l.a.removeClassName(this._favoritesNode,"pf-i-dark")},E.prototype._onMouseoutFavorite=function(){this.product.isFavorite?(l.a.addClassName(this._favoritesNode,"pf-text-red"),l.a.removeClassName(this._favoritesNode,"pf-text-dark-red")):l.a.addClassName(this._favoritesNode,"pf-i-dark")},E.prototype._getBrandingOptionsNode=function(){var e="";return this.product.hasTearAwayLabel()&&(e=tag("span",{className:"product-item__label product-item__label--branding",attr:{"data-toggle":"tooltip",title:dlang("products","Tear-away label"),tabindex:"0","aria-label":dlang("products","Tear-away label")}},[tag("i",{className:"pf-i pf-i-tag pf-i-18",attr:{"aria-hidden":"true"}})]),Object(r.b)()||$(e).tooltip({html:!0})),e},E.prototype._getFulfillmentDaysNode=function(){var e="";if(null!==this.product.fulfillmentDays){var t=Math.round(10*this.product.fulfillmentDays)/10,i=langUrl("/faq/shipping-packaging-fulfillment/192-how-long-is-fulfillment-time-");e=tag("div","pf-mb-12 product-item__fulfilment-days",[this.moreInfoSpan=tag("span",{className:"pf-link",text:dclang("products","fulfillment","Ready in"),onclick:function(e){e.stopPropagation(),e.preventDefault(),window.open(i,"_blank")}}),tag("strong","",[tag("span","product-item__fulfilment-days__tilde"," ~ "),dnclang("products","fulfillment","{days} business day","{days} business days",Math.floor(t)).replace("{days}",t)])]),this.moreInfoSpan.addEventListener("mousedown",(function(e){4===e.buttons&&(e.stopPropagation(),e.preventDefault(),window.open(i,"_blank"))}))}return e},E.prototype._getSizeText=function(){var e=this.variant&&this.variant.size?[this.variant.size]:this.product.sizes.slice(0);if(0===e.length)return"";if(1===e.length){var t=e.pop();return t===E.ONE_SIZE&&(t=E.ONE_SIZE_TRANSLATED),t}var i=e.shift(),n=e.pop();return i.indexOf("yrs")&&(i=i.replace("yrs",dclang("products","Product size (human years)","yrs"))),i.indexOf("in")&&(i=i.replace("in",dclang("products","Product size (inches)","in"))),n.indexOf("yrs")&&(n=n.replace("yrs",dclang("products","Product size (human years)","yrs"))),n.indexOf("in")&&(n=n.replace("in",dclang("products","Product size (inches)","in"))),i+" - "+n},E.ONE_SIZE="One Size",E.ONE_SIZE_TRANSLATED=dlang("products","One Size"),E.prototype._getProductPriceNode=function(){var e=0;this.technique&&(e=this.product.priceRange.getAdjustmentPrice(this.technique));var t=this.product.shouldShowTaxInclusion();return this.variant?a.a.createDiscountElementFromPriceData({priceData:this.variant.priceData,basePriceAdjustment:e,showTaxInclusion:t}):a.a.createDiscountElementFromPriceRange(this.product.priceRange,e,t)},E.prototype._getFastShippingNode=function(){var e;if(this.sellingRegion||b.a.sellingRegion)return"";if(null===(e=PF.Customer)||void 0===e||!e.location)return"";var t={ES:{region:g.a.REGION_EUROPE_SPAIN,label:clang("fast shipping label","Fast delivery in Spain")},JP:{region:g.a.REGION_JAPAN,label:clang("fast shipping label","Fast delivery in Japan")},CA:{region:g.a.REGION_CANADA,label:clang("fast shipping label","Quick delivery to Canada"),class:"ca-fs"}},i=PF.Customer.location.country,n=t[i];return n&&Object.values(this.product.fulfillmentCountriesMap).indexOf(n.region)>-1?tag("div","pf-ui-caption product-item__fast-shipping-container",[tag("span","flag ".concat(n.class||i.toLowerCase())),tag("strong","pf-text-dark",n.label)]):""},E.prototype._getFulfillmentCountries=function(){if(!this.showFulfillmentCountries)return!1;var e=this.variant?this.variant.getFulfillmentCountries():this.product.fulfillmentCountries,t=Object.keys(e).map((function(e){return Object(f.b)(e)})).join(s.a.isJp()?"ã€":", "),i=dlang("products","Ships worldwide, stocked in the {regions}").replace("{regions}",t),n=tag("span",{className:"fulfillmentLabelContainer",attr:{"data-toggle":"tooltip",tabindex:"0","aria-label":i,title:i}},[Object.keys(e).map((function(t){return tag("span",{className:"pf-badge pf-badge-location pf-mr-4 pf-mb-4",style:{"background-color":e[t].color},attr:{"aria-hidden":"true"}},Object(f.a)(e[t].title))}))]);return Object(r.b)()||$(n).tooltip({html:!0}),n},E.prototype._getProductReviewNode=function(e,t){var i=this,n=tag("span","",[tag("span","star-rating__stars star-rating__stars--inline pf-mr-0",t),tag("i",{className:"pf-i pf-i-18 pf-i-chevron-down pf-text-muted product-item__review-arrow",id:"review-arrow-".concat(this.product.productId)})]),r=tag("span",{className:"product-item__review no-outline",attr:{tabindex:0,"aria-label":lang("{rating} out of 5 stars").replace("{rating}",e.rating),"data-toggle":"tooltip","data-placement":"bottom","data-container":this.isModal?"":"body","data-html":"true","data-trigger":"focus"},innerHTML:n.outerHTML});return $(r).tooltip({html:!0,template:'\n                <div class="tooltip product-item__review-tooltip '.concat(this.isModal?"":"catalog",'">\n                     <div id="review-tooltip-arrow" class="tooltip-arrow"></div>\n                     <div id="review-tooltip-').concat(this.product.productId,'" class="pf-mx-8 tooltip-inner pf-ui-caption product-item__review-tooltip-content pf-border"></div>\n                </div>\n            ')}),document.addEventListener("click",this._resetReviewArrow),r.addEventListener("mousedown",(function(){i._resetReviewArrow(),r.classList.add("no-outline");var e=r.querySelector("#review-arrow-".concat(i.product.productId));if(document.querySelector("#review-tooltip-".concat(i.product.productId)))$(r).tooltip("hide");else{e.classList.add("product-item__review-arrow--open"),e.classList.remove("product-item__review-arrow--close"),$(r).tooltip("show");var t=document.querySelector("#review-tooltip-".concat(i.product.productId));if(t){var n=t.querySelectorAll(".pro-star-text"),a=Math.max.apply(Math,Object.values(n).map((function(e){return e.offsetWidth})));n.forEach((function(e){return e.style.minWidth="".concat(a,"px")}))}}})),r.addEventListener("focus",(function(){window.addEventListener("keyup",(function(e){"Tab"===e.key&&r.classList.remove("no-outline")}))})),r.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault()})),this._getProductReviewOverview(r,e,t),tag("div","product-item__rating pf-ui-caption",[tag("div","product-item__rating-stars star-rating__stars star-rating__stars--inline pf-d-none",t),tag("span","review-tooltip pf-mr-8 collapsed",[r]),tag("span","pf-m-0 pf-mt-4 pf-d-inline-block",nlang("%d review","%d reviews",e.reviewCount))])},E.prototype._getProductReviewOverview=function(e,t,i){var n=new c.a(this.product),r=this.productUrl+"#reviews",a=tag("div","",[tag("div","star-rating__stars star-rating__stars--inline",[tag("div","pf-mt-16",[i,tag("span","pf-ml-8 pf-bold",dlang("products","{rating} out of 5").replace("{rating}",t.rating))]),tag("span","pf-m-0 pf-mt-4 pf-d-inline-block",nlang("%d review","%d reviews",t.reviewCount))]),d.a.getReviewOverview(n,null,!1,r),tag("div","pf-mb-4 pf-mt-8 text-center",[tag("a",{target:this.isModal||p.a.isGenerator()?"_blank":"_self",className:"pf-link",href:r},[dlang("products","See all reviews")])])]);e.setAttribute("data-original-title",a.outerHTML)},E.prototype._resetReviewArrow=function(){var e=document.querySelector(".product-item__review-arrow--open");e&&(e.classList.add("product-item__review-arrow--close"),e.classList.remove("product-item__review-arrow--open"))},E.prototype._getFavoritesNodeHoverTitle=function(){return this.product.isFavorite?dlang("products","Remove from favorites"):dlang("products","Add to favorites")},E.prototype._renderAverageDelivery=function(e){this._averageDeliveryNode&&l.a.clearNode(this._averageDeliveryNode);var t=this.product;if(!t.doesNotMatchSellingRegion&&!this.isRecentlyViewedItem){var i=T.a.getCachedProductEDT(t.productId,e.sellingRegionId);if(e.isSingleCountry())if(i){var n,r,a;if(PF.Customer.isLogged()&&!PF.Customer.isB2cStarter())n=i.fromDays,r=i.toDays,a=dclang("products",'A range of days, E.g. "2-3"',"Average delivery in {daysFromTo} days");else{n=w()(i.from),r=w()(i.to);var o=new S.a(s.a.locale),c=o.format(n,r,!0),d=o.shortMonthDay;n=n.format(d),r=r.format(c),a=dclang("products",'A range of dates, E.g. "Nov 19-Nov 23"',"Estimated delivery {datesFromTo}")}if(!a||!n||!r)return;var u=n===r?n:"".concat(n).concat(s.a.isJp()?"ã€œ":"â€“").concat(r);a=a.replace("{daysFromTo}",u).replace("{datesFromTo}",u),tag("div","",[tag("img",{src:e.getIcon(),className:"pf-mr-4",style:{width:"24px",marginTop:"-4px"}}),a]).append(this._averageDeliveryNode)}else C.n(C.h+t.productId,this._renderAverageDelivery.bind(this,e));else{var h=Object.keys(t.fulfillmentLocationsMap).map((function(e){return Number(e)})),p=e.isWorldwide()?h:_.intersection(h,e.getFulfilmentLocationIds()),g=_.filter(t.fulfillmentLocationsMap,(function(e,t){return p.includes(Number(t))})).map((function(e){return e.localizedName})).filter((function(e,t,i){return i.indexOf(e)===t})).sort(),f=g.length,m=dnlang("products","Fulfilled in {count} country","Fulfilled in {count} countries",f);e.isWorldwide()&&(m=dnlang("products","Fulfilled in {count} country worldwide","Fulfilled in {count} countries worldwide",f)),e.isNorthAmerica()&&(m=dnlang("products","Fulfilled in {count} country in North America","Fulfilled in {count} countries in North America",f)),e.isEurope()&&(m=dnlang("products","Fulfilled in {count} country in Europe","Fulfilled in {count} countries in Europe",f));var v=dlang("products","Fulfilled In: {countryNameList}").replace("{countryNameList}",g.join("; "));if(f){var y=tag("p",{innerHTML:m.replace("{count}","<strong>"+f.toString()+"</strong>"),title:v,attr:{"data-toggle":"tooltip","data-placement":"top"}});$(y).tooltip(),y.append(this._averageDeliveryNode)}}}},E.prototype._showMadeInUsBadge=function(){var e=this.sellingRegion||b.a.sellingRegion,t=this.product.isMadeInUSA();return e?e.isNorthAmerica()&&t:t},E.prototype._getProductImageByType=function(e,t){var i=e.filter((function(e){return e.category_id===t}));if(i.length)return i[0];var n=e.filter((function(e){return 0===e.category_id}));return n.length?n[0]:null},window&&((globalThis||{}).PFComponentsProductListItem=E)},"dJr+":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({storeId:null,allowStoreChange:!0,includeSwatches:!1,productId:null,technique:null,productType:null,showSearch:!0,showTabSelector:!0,search:"",fileGroup:"",perPage:24,onPickCallback:null,onPickMultipleCallback:null,uploadUrl:null,uploadCallbackUrl:"library/upload-callback",uploadDataUrl:"library/retrieve-upload-data",uploadButtonClasses:null,loadFileList:!0,withDropZone:!0,onDoneCallback:null,withInstructions:!0,activeTab:null,isModal:!1,hideSampleFiles:!1,sampleBannerImage:"",__construct:function(){var e=Math.round(5*Math.random())+1;this.sampleBannerImage="/static/images/library/quotes-design-services-"+e+"_image.png?v=2"}});(globalThis||{}).PFFileLibraryPar=n},dVbR:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return l}));var n=i("y70k"),r=i("MSZa");i("gWUq");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.id=t.id||0===t.id?parseInt(t.id):null,this.name=t.name||null,this.index=t.index||0===t.index?parseInt(t.index):null,this.image=t.image?n.a.fromArray(t.image):null,this.extra=t.extra?t.extra:{},this.height=t.height?parseInt(t.height):null,this.width=t.width?parseInt(t.width):null,this.type=t.type||null,this.previewHeight=t.previewHeight?parseInt(t.previewHeight):null,this.previewWidth=t.previewWidth?parseInt(t.previewWidth):null,this.previewPrintareaHeight=t.previewPrintareaHeight?parseInt(t.previewPrintareaHeight):null,this.previewPrintareaLeft=t.previewPrintareaLeft?parseInt(t.previewPrintareaLeft):null,this.previewPrintareaTop=t.previewPrintareaTop?parseInt(t.previewPrintareaTop):null,this.previewPrintareaWidth=t.previewPrintareaWidth?parseInt(t.previewPrintareaWidth):null,this.isActive=t.isActive||!1},s=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.id=t.id||0===t.id?parseInt(t.id):null,this.name=t.name||null,this.index=t.index||0===t.index?parseInt(t.index):null,this.image=t.image?n.a.fromArray(t.image):null,this.extra=t.extra?t.extra:{},this.designData=t.designData||[],this.groupId=t.groupId||t.groupId?parseInt(t.groupId):null,this.width=t.width?parseInt(t.width):null,this.height=t.height?parseInt(t.height):null},l=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.id=t.id||null,this.mainImage=t.mainImage?new r.a(t.mainImage):null,this.rawDesign=t.rawDesign||t.design,this.templateId=t.templateId||null,this.groupId=t.groupId||null,this.updatedAt=t.updatedAt||null,this.height=t.height?parseInt(t.height):null,this.width=t.width?parseInt(t.width):null,this.height||this.width||!t.parent||(this.height=t.parent.height,this.width=t.parent.width)}},dqhU:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({_params:null,value:"",_nodeInput:null,_nodeInputManually:null,__construct:function(e){this._params=e,this.node=tag("div",this._params.className+" "+(this._params.isVisible?"":"hidden")),this.value=this._getFormattedValue(e.value),this.render()},render:function(){n.a.clearNode(this.node),this._nodeInputManually=this._params.hasNumberInput?tag("input",{type:"text",className:"text-center pf-px-4 col-3",value:this.value,data:{prevent:"Delete, Backspace, ArrowLeft, ArrowRight, ArrowUp, ArrowDown"},prop:{onkeypress:this._cleanupInput.bind(this),onchange:this._onValueChangedManually.bind(this,!0),onblur:this._onValueChangedManually.bind(this,!0),onkeyup:this._onValueChangedManually.bind(this,!1)}}):"",tag("div","pf-bold pf-mb-8",[this._params.title,this._params.showNewBadge?tag("span","pf-badge pf-badge-small pf-badge-new pf-badge--primary pf-ml-8",clang("Badge","New")):""]).append(this.node),tag("div","input-group input-group__range",[this._nodeInput=tag("input",{type:"range",className:this._params.hasNumberInput?"pf-px-4 col-9 pf-p-0 pf-pr-12":"pf-px-4",value:this.value,data:{prevent:"Delete, Backspace, ArrowLeft, ArrowRight, ArrowUp, ArrowDown"},prop:{min:this._params.minValue,max:this._params.maxValue,step:this._params.incrementStep,onchange:this._onValueChanged.bind(this),oninput:this._onSlide.bind(this)}}),this._nodeInputManually]).append(this.node)},show:function(){n.a.removeClassName(this.node,"hidden")},hide:function(){n.a.addClassName(this.node,"hidden")},setValue:function(e){this.value=this._validateValue(e),this._nodeInput.value=this.value,this._params.hasNumberInput&&(this._nodeInputManually.value=this.value)},setMinValue:function(e){this._params.minValue!==e&&(this._params.minValue=e,this._nodeInput.min=e)},_getFormattedValue:function(e){return parseFloat(e).toFixed(this._params.fractionDigits).toString()},_cleanupInput:function(e){var t=e.key,i=null;isNaN(t)&&-1===[".",",","-","+","Backspace","Delete"].indexOf(t)&&(i=e.target.value),null!==i&&(e.target.value=i,e.preventDefault())},_onSlide:function(e){this.value=this._validateValue(e.target.value),e.target.value=this.value,this._params.hasNumberInput&&(this._nodeInputManually.value=this.value),this._params.onSlide(this.value,this)},_onValueChanged:function(e){this.value=this._validateValue(e.target.value),e.target.value=this.value,this._params.hasNumberInput&&(this._nodeInputManually.value=this.value),this._afterValueChanged()},_onValueChangedManually:function(e,t){this._adjustInputValue(t,this._params.incrementStep)||(this.value=this._validateValue(t.target.value),this._nodeInput.value=this.value,e&&(this._nodeInputManually.value=this.value),this._afterValueChanged())},_adjustInputValue:function(e,t){var i=null;return"ArrowUp"===e.key?i=t:"ArrowDown"===e.key&&(i=-t),null!==i&&(this._onIncrement(i),e.target.value=parseFloat(parseFloat(e.target.value)+i).toFixed(this._params.fractionDigits),this._nodeInput.focus(),!0)},_onIncrement:function(e,t){t&&t.stopPropagation(),e*=this._params.incrementStep,this.value=this._validateValue(parseFloat(this.value)+e),this._afterValueChanged()},_validateValue:function(e){if(e=parseFloat(e),isNaN(e)&&(e=this._params.defaultValue),null!==this._params.minValue&&e<this._params.minValue||null!==this._params.maxValue&&e>this._params.maxValue){if((null==this._params.minValue||this.value>=this._params.minValue)&&(null==this._params.maxValue||this.value<=this._params.maxValue))return this.value;e=this._params.defaultValue}return e.toFixed(this._params.fractionDigits)},_afterValueChanged:function(){this._params.onValueChanged(this.value,this)}},n.a.Base);window&&((globalThis||{}).PFFormsRange=r)},eYhR:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function e(){this.uniqueId=++e.counter};n.prototype.uniqueId=0,n.prototype.customId=null,n.prototype.icon="",n.prototype.badge="",n.prototype.caption="",n.prototype.subtitle="",n.prototype.onclick=null,n.prototype.href="javascript:",n.prototype.isActive=!1,n.prototype.isDisabled=!1,n.counter=0,n.prototype.tooltipTitle=null,n.prototype.tooltipAutoShowDuration=null,window&&((globalThis||{}).PFComponentsTabsItem=n)},ehgC:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return l}));var n=i("Xapb"),r=i("6JZw"),a=i("nF4n"),o=i("SvWC"),s=function(){};s.prototype=new r.a,s.prototype.storeId=0,s.prototype.name="",s.prototype.integrationName="",s.prototype.urlLogo="",s.prototype.urlTypeLogo="",s.prototype.status="",s.prototype.type="",s.prototype.syncError="",s.prototype.integrationVersionWarning=null,s.prototype.returnAddress=null,s.prototype.canPushProducts=null,s.prototype.canPushCustomProducts=null,s.prototype.supportsCustomProducts=!0,s.prototype.canPushPrintfulProducts=null,s.prototype.supportsPrintfulProducts=!0,s.prototype.customProductBranchWhitelist=null,s.prototype.isInMaintenance=!1,s.prototype.isIntegrationDisabled=!1,s.prototype.showIntegrationBranding=!1,s.prototype.isSyncDisabled=!1,s.prototype.isPushDisabled=!1,s.prototype.flags=null,s.prototype.hasFlag=function(e){return this.flags&&this.flags.hasOwnProperty(e)&&this.flags[e]},s.prototype.getStorefrontLanguages=function(){var e=this.getFlagData(n.a.HAS_MULTI_LANGUAGE_PRODUCT_DETAILS);return e?e.availableLanguages:[]},s.prototype.getStorefrontPrimaryLanguage=function(){var e=this.getFlagData(n.a.HAS_MULTI_LANGUAGE_PRODUCT_DETAILS);return e?e.mainLanguage:null},s.prototype.isStorefrontPrimaryLanguage=function(e){return e&&e===this.getStorefrontPrimaryLanguage()},s.prototype.getFlagData=function(e){return this.flags&&this.flags.hasOwnProperty(e)?this.flags[e]:null},s.prototype.volumeDiscount=null,s.prototype.canSyncIncompleteItemsFromAnotherStore=function(){return this.hasFlag(n.a.CAN_SYNC_INCOMPLETE_ITEMS_FROM_ANOTHER_STORE)},s.prototype.canRepushSyncedProducts=function(){return this.hasFlag(n.a.CAN_PUSH_EXISTING)},s.prototype.hasCustomTaxRules=function(){return this.hasFlag(n.a.HAS_CUSTOM_TAX_RULES)},s.prototype.canGetPushCategories=function(){return!!this.hasFlag(n.a.CAN_CHOOSE_PUSH_CATEGORIES)||-1===[s.TYPE_AMAZON,s.TYPE_NATIVE,s.TYPE_EBAY,s.TYPE_WISH,s.TYPE_API_LAUNCHCART,s.TYPE_API_3DCART,s.TYPE_BONANZA].indexOf(this.type)},s.prototype.canPushMultipleCategories=function(){var e=this.getFlagData(n.a.CAN_CHOOSE_PUSH_CATEGORIES);return e?e.canPushMultipleCategories:-1===[s.TYPE_ETSY,s.TYPE_EBAY].indexOf(this.type)},s.prototype.isPushCategoryRequired=function(){var e=this.getFlagData(n.a.CAN_CHOOSE_PUSH_CATEGORIES);return!!e&&!!e.isCategoryRequired},s.prototype.canChooseShippingProfile=function(){return this.hasFlag(n.a.CAN_CHOOSE_SHIPPING_PROFILE)},s.prototype.canPushVideos=function(){return this.hasFlag(n.a.CAN_PUSH_VIDEOS)},s.prototype.canUpdateMockupsOnStorefront=function(){return-1!==[s.TYPE_SHOPIFY,s.TYPE_ETSY,s.TYPE_WOOCOMMERCE,s.TYPE_NATIVE,s.TYPE_API_LAUNCHCART,s.TYPE_API_3DCART,s.TYPE_WIX].indexOf(this.type)},s.prototype.canManageStock=function(){return-1!==[s.TYPE_EBAY].indexOf(this.type)},s.prototype.supportsMarketplaces=function(){return this.hasFlag(n.a.SUPPORTS_MULTIPLE_MARKETPLACES)},s.prototype.supportsAdvancedSizeGuide=function(){return this.hasFlag(n.a.FLAG_SUPPORTS_ADVANCED_SIZE_GUIDE)},s.prototype.hasDefaultSellingRegionSet=function(){return this.hasFlag(n.a.FLAG_HAS_DEFAULT_SELLING_REGION_SET)},s.prototype.canUpdateStock=function(){return!!this.canManageStock()&&-1!==[].indexOf(this.type)},s.prototype.canUpdateIntegrationProduct=function(){return-1!==[s.TYPE_EBAY].indexOf(this.type)},s.prototype.canSetVisibility=function(){return-1===[s.TYPE_AMAZON,s.TYPE_NATIVE,s.TYPE_ETSY,s.TYPE_EBAY,s.TYPE_API_LAUNCHCART,s.TYPE_API_3DCART,s.TYPE_WIX,s.TYPE_BONANZA,s.TYPE_WEBFLOW,s.TYPE_SQUARE].indexOf(this.type)},s.prototype.isUnsupportedPushSource=function(){return[s.TYPE_NATIVE,s.TYPE_SHIPSTATION,s.TYPE_SQUARESPACE,s.TYPE_API_3DCART,s.TYPE_API_LAUNCHCART].indexOf(this.type)>-1},s.prototype.needsAllVariantCombinations=function(){return[s.TYPE_ETSY,s.TYPE_WEBFLOW].indexOf(this.type)>-1},s.prototype.currency=null,s.prototype.retailCurrency=null,s.prototype.retailCurrencyRate=null,s.prototype.hasSyncProducts=null,s.prototype.isNative=function(){return this.type===s.TYPE_NATIVE||this.isAnonymous()},s.prototype.isThirdPartyApiIntegration=function(){return[s.TYPE_API_3DCART,s.TYPE_API_LAUNCHCART].indexOf(this.type)>-1},s.prototype.hasDifferentRetailCurrency=function(){return this.currency!==this.retailCurrency},s.prototype.isAnonymous=function(){return this.type===s.TYPE_ANONYMOUS},s.prototype.isEtsy=function(){return this.type===s.TYPE_ETSY},s.prototype.isEbay=function(){return this.type===s.TYPE_EBAY},s.prototype.isStorenvy=function(){return this.type===s.TYPE_STORENVY},s.prototype.isWix=function(){return this.type===s.TYPE_WIX},s.prototype.isWish=function(){return this.type===s.TYPE_WISH},s.prototype.isBigcommerce=function(){return this.type===s.TYPE_BIGCOMMERCE},s.prototype.isAmazon=function(){return this.type===s.TYPE_AMAZON},s.prototype.isShopify=function(){return this.type===s.TYPE_SHOPIFY},s.prototype.isBonanza=function(){return this.type===s.TYPE_BONANZA},s.prototype.isWoocommerce=function(){return this.type===s.TYPE_WOOCOMMERCE},s.prototype.isSquarespace=function(){return this.type===s.TYPE_SQUARESPACE},s.prototype.hasPersonalLogo=!1,s.prototype.isRemoved=function(){return"removed"==this.status},s.prototype.isSyncDisabled=null,s.prototype.hasPaymentMethods=null,s.prototype.hasNewProductBetaAccess=!1,s.prototype.isHidden=!1,s.fromArray=function(e){var t=e.type||null,i=new s;return t===s.TYPE_EBAY&&(i=new l),i.returnAddress=o.a.fromArray(e.returnAddress),delete e.returnAddress,a.a.O2O(i,e),i},s.prototype.isIntegrationUnavailable=function(){return this.isIntegrationDisabled},s.prototype.getIntegrationUnavailableText=function(){return this.isInMaintenance?dlang("stores","Temporarily unavailable"):this.isIntegrationDisabled?dlang("stores","Integration disabled"):""},s.prototype.getPushDisabledText=function(){return dlang("stores","Product push temporary disabled")},s.prototype.getSyncDisabledText=function(){return dlang("stores","Store sync temporary disabled")},s.prototype.shouldAllowFreeShippingPush=function(){return this.hasFlag(n.a.ALLOW_FREE_SHIPPING_PUSH)},s.TYPE_SHOPIFY="shopify",s.TYPE_OPENCART="opencart",s.TYPE_ANONYMOUS="anonymous",s.TYPE_NATIVE="native",s.TYPE_BIGCOMMERCE="bigcommerce",s.TYPE_BIGCARTEL="bigcartel",s.TYPE_ECWID="ecwid",s.TYPE_TICTAIL="tictail",s.TYPE_AMAZON="amazon",s.TYPE_WEEBLY="weebly",s.TYPE_SQUARESPACE="squarespace",s.TYPE_STORENVY="storenvy",s.TYPE_WOOCOMMERCE="woocommerce",s.TYPE_SHIPSTATION="shipstation",s.TYPE_ETSY="etsy",s.TYPE_EBAY="ebay",s.TYPE_WISH="wish",s.TYPE_PRESTASHOP="prestashop",s.TYPE_API_3DCART="3dcart",s.TYPE_API_LAUNCHCART="launchcart",s.TYPE_MAGENTO2="magento2",s.TYPE_WIX="wix",s.TYPE_BONANZA="bonanza",s.TYPE_WEBFLOW="webflow",s.TYPE_SQUARE="square";var l=function(){};l.prototype=new s,l.prototype.newProductLimits=null,l.prototype.hasEnabledLimits=function(){return!!this.newProductLimits.enabled},window&&((globalThis||{}).PFItemsStoreItem=s,(globalThis||{}).PFItemsStoreItemsEbayStoreItem=l)},ezUM:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return r}));var n=Object.freeze({STORAGE_KEY:"generatorQuickDesignItems",CACHE_VERSION:2,MAX_RECENT_CACHE:24,MAX_RECENT_SHOW:4}),r=Object.freeze({HAS_LOADED_ALL:"HAS_LOADED_ALL"})},"fM+x":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Object.freeze({HAS_CUSTOM_MOCKUP_ACCESS:"HAS_CUSTOM_MOCKUP_ACCESS",IS_IN_MODAL:"IS_IN_MODAL",CUSTOM_MOCKUP_FLOW:"CUSTOM_MOCKUP_FLOW",CUSTOM_MOCKUP_STEP:"CUSTOM_MOCKUP_STEP"})},g357:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("6t3j"),r=i("Op/+"),a=i("5OoY"),o=i("n5ho"),s=i("cCrT"),l=i("YBfo"),c=i("JIEg"),d=i("R7ut"),u=Class({prefix:"",category:null,products:[],totalProductCount:null,variantIds:[],activeProductId:null,activeVariantId:null,filter:null,skipHistory:!1,openedFirstTime:!1,productSearchKeywords:null,activeTab:"",customMainHeader:"",documentTitle:"",action:l.a.EVENT_NAME,catalogType:"",productsViewPage:1,productColor:null,productSize:null,productRegion:null,isOnPopstate:!1,scrollToTop:!1,geoElementId:"",__construct:function(){this.catalogType=l.b.catalogType||l.a.TYPE_PP},getCategoryId:function(){return this.category?this.category.id:0},getObject:function(){return{action:this.action,activeProductId:this.activeProductId,category:this.category?JSON.stringify(this.category):null,products:this.products?JSON.stringify(this.products):null,activeTab:this.activeTab,filter:this.filter?JSON.stringify(this.filter):null}},getTitle:function(){if(this.customMainHeader)return this.customMainHeader;if(!this.category||!this.category.id)return l.a.PAGE_TITLES[this.catalogType];if(this.category.seo[this.catalogType]){var e=this.category.seo[this.catalogType],t=Object.values(e).pop();if(t&&t.mainHeading)return t.mainHeading}return this.category.settings&&this.category.settings.thumbnailTitle?this.category.settings.thumbnailTitle:this.category.title},getSubtitle:function(){return this.category&&this.category.id?"":l.a.PAGE_SUBTITLES[this.catalogType]?l.a.PAGE_SUBTITLES[this.catalogType]:""},getDocumentTitle:function(){var e=l.a.TITLES[this.catalogType];if(this.documentTitle)return this.documentTitle;if(this.activeProductId){e=this.catalogType===l.a.TYPE_PP?" | Printful":" | "+e;var t=this.getActiveProduct().getFullTitle();return this.getActiveProduct().customTitle&&(t=this.getActiveProduct().customTitle),t+e}if(!this.category||!this.category.id)return l.a.BASE_TITLES[this.catalogType]||e;if(this.category.seo[this.catalogType]){var i=this.category.seo[this.catalogType],n=Object.values(i).pop();if(n&&n.pageTitle)return n.pageTitle}return e},getUrl:function(){var e=new s.a;if(e.path=this.prefix+"/",e.query.clear(),!this.category)return e.toString();if(e.path+=this.category.slug,e.hash=this.activeTab?this.activeTab:"",this.activeProductId)return e.path+="/"+this.getActiveProduct().slug,this.productColor&&(e.query.color=this.productColor),this.productTechnique&&(e.query.technique=this.productTechnique),this.productSize&&(e.query.size=this.productSize),this.productRegion&&this.productRegion.length&&(e.query["region[]"]=this.productRegion),this.activeVariantId&&(e.query.variant=this.activeVariantId),e.toString();if(0===this.category.id&&this.prefix===l.a.OLD_PRODUCT_CATALOG_INDEX_SLUG&&(e.path=l.a.NEW_PRODUCT_CATALOG_INDEX_SLUG),!this._hasUrlParams())return e.hash="",e.toString();for(var t in this.filter){var i=this.filter[t].join("!");i&&(e.query[t]=i)}return this.productSearchKeywords&&(e.query.search=this.productSearchKeywords),this.productsViewPage>1&&(e.query.page=this.productsViewPage),e.toString()},getProducts:function(){var e=new n.a,t=this.products?this.products.map(e.getCachedProductById.bind(e)):[],i=this.variantIds?this.variantIds.map(e.getCachedVariantById.bind(e)):[];return[].concat.apply(i,t.map((function(t){return-1===d.a.getConfig().expandTypes.indexOf(t.type)?t:e.getCachedVariantsByProductId(t.productId)})))},getActiveProduct:function(){return this.activeProductId?(new n.a).getCachedProductById(this.activeProductId):null},pushToHistory:function(){if(this.getDocumentTitle()&&(document.title=this.getDocumentTitle()),this._shouldPushToHistory()){var e=this.getObject(),t=this.getTitle(),i=this.getUrl();this.openedFirstTime||a.a.isVariantChanged&&!c.a.isClicked?(a.a.isVariantChanged&&(e.action=l.a.EVENT_PRODUCT_CHOOSE),window.history.replaceState(e,t,i)):window.history.pushState(e,t,i)}a.a.isVariantChanged=!1,c.a.isClicked=!1},_shouldPushToHistory:function(){var e=[l.a.EVENT_PRODUCTS_LOADED,l.a.EVENT_TOGGLE_LOCK];return!this.skipHistory&&!this.geoElementId&&-1===e.indexOf(this.action)},_hasUrlParams:function(){return this._hasFilter()||this.productSearchKeywords||this.activeTab||this.productsViewPage>1},_hasFilter:function(){return this.filter||!$.isEmptyObject(this.filter)}});u.createFromObject=function(e,t){var i=new u;if(!e)return i;for(var n in e)i[n]=e[n];var a=e.category?JSON.parse(e.category):null;return i.products=e.products?JSON.parse(e.products):[],i.category=a?(new r.PFProductsCatalogUtilsStore).categories.getById(a.id):null,i.filter=e.filter?JSON.parse(e.filter):{},i.isOnPopstate=void 0!==t&&t,i},u.clone=function(e,t){!e instanceof u&&(e=u.createFromObject(e));var i=new u;for(var n in e)if("function"!=typeof e[n]){var r=e[n];r&&!$.isEmptyObject(r)||!t[n]||(r=t[n]),i[n]=r}return i},u.createAndDispatch=function(e,t){var i=new u;for(var n in i.action=e,t)"productsOrVariants"!==n&&(i[n]=t[n]);if(t.productsOrVariants)for(var r in i.totalProductCount=t.totalCount||null,t.productsOrVariants){var a=t.productsOrVariants[r];a instanceof o.a?i.variantIds.push(a.variantId):i.products.push(a.productId)}var s=document.createEvent("CustomEvent");s.initCustomEvent(e,!1,!0,i),document.dispatchEvent(s)},l.c.createAndDispatchEvent=u.createAndDispatch,window&&((globalThis||{}).PFProductsCatalogUtilsState=u)},gQ2J:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o}));var n=i("r4HB"),r=i("boP+");function a(e){return e.areLayersOverlapping({allowedExceptions:[{layerProperty:"engravingStyle",layerPropertyValues:[n.a.ENGRAVING_FILLED]},{layerProperty:"engravingStyle",layerPropertyValues:[n.a.ENGRAVING_OUTLINE]}]})}function o(e){var t;Object(r.a)().isJewelry()&&function(e){if(e.isTextLayer())e.engravingStyle=e.engravingStyle?n.a.ENGRAVING_OUTLINE:n.a.ENGRAVING_FILLED;else if(e.isClipartLayer()){var t;e.engravingStyle=null!==(t=e.clipartItem.extra)&&void 0!==t&&t.engravingStyle?n.a.ENGRAVING_OUTLINE:n.a.ENGRAVING_FILLED}}(e),!e.fillColor&&null!==(t=e.clipartItem)&&void 0!==t&&t.customizable&&(e.fillColor=e.getDefaultColor())}},gWUq:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("bRD6"),r=i("tw/D"),a=i("y70k"),o=i("6JZw"),s=i("nF4n"),l=Class({designId:null,isCustomizable:!1,templates:[],placementOptions:null,placementSvgItems:{},toArrayKeys:["designId","isCustomizable","templates"],isValid:function(){return this.templates.length&&this.templates.filter((function(e){return e.hasLayers()})).length>0},getSvg:function(e){var t=l.svgCache;return this.designId&&t.hasOwnProperty(this.designId)&&t[this.designId].hasOwnProperty(e)?t[this.designId][e]:""},forgetSvgItems:function(e){var t=l.svgCache;return this.designId&&!e&&t.hasOwnProperty(this.designId)&&(t[this.designId]={}),t.hasOwnProperty(this.designId)&&t[this.designId].hasOwnProperty(e)&&(t[this.designId][e]={}),this},hasAnyLayerWithEmbroideryType:function(){return this.templates.some((function(e){return e.layers.some((function(e){return!!e.embroideryType}))}))},getTemplate:function(e){return this.templates.filter((function(t){return t.placementId===e}))},getTemplateTypes:function(){var e=[];return(this.templates||[]).forEach((function(t){-1===e.indexOf(t.placementId)&&e.push(t.placementId)})),e},getFileId:function(e){var t=this.getTemplate(e).shift();return t?t.getFileId():a.a.ID_TEMP_GENERATOR_FILE},hasPlacement:function(e){return this.getTemplate(e).length>0},hasTextLayersOnly:function(){for(var e in this.templates){var t=this.templates[e];if(0===t.layers.length)return!1;for(var i in t.layers)if(!t.layers[i].isTextLayer())return!1}return!0}},o.a);l.fromArray=function(e){var t=new l;for(var i in t.designId=e.designId,t.isCustomizable=e.isCustomizable,e.placements)for(var a in e.placements[i])t.templates.push(n.a.fromArray(e.placements[i][a]));return t.placementOptions=r.a.fromArray(e.placementOptions),t},l.duplicateFrom=function(e){var t=new l;return s.a.O2O(t,e),t},l.fromDesignData=function(e,t){var i=new l;for(var a in i.designId=t||e.generatorDesignId,e.templates){var o=new n.a;s.a.O2O(o,e.templates[a]),i.templates.push(o)}return i.placementOptions=r.a.fromArray(e.rawPlacementOptions),i},l.svgCache={},l.rememberSvg=function(e,t,i){var n=l.svgCache;e&&(n.hasOwnProperty(e)||(n[e]={}),n[e][t]=i)},window&&((globalThis||{}).PFItemsGeneratorDesign=l)},gY30:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("md/F"),r=i("6t3j"),a=i("xeH2"),o=i.n(a),s=i("X5Ic"),l=i("nF4n"),c=i("97Au"),d=Class({_product:null,_isVisible:!1,__construct:function(e,t){this._product=(new r.a).getCachedProductById(e),this._isVisible=t},getButton:function(){return this.canHaveSizeGuide()?Object(l.a)({tag:"a",className:"pull-right margin-right-5 margin-left-30 pf-link",text:dlang("products","See size guide"),onclick:this.show}):""},canHaveSizeGuide:function(){return this._isVisible&&this._product.canHaveSizeGuide},show:function(e){var t=new c.a.Par;t.title=lang("Size guide"),t.modalDialogClass="modal-lg",t.onClose=this.hide.bind(this),t.url=s.a.getSizeChartUrl(this._product.productId),this.sizeGuideModal=new c.a(t),o()(e.target).css("pointer-events","none"),this.sizeGuideModal.show(),o()(this.sizeGuideModal._node).on("hidden.bs.modal",(function(){o()(e.target).css("pointer-events","all")}))},hide:function(){this.sizeGuideModal&&(this.sizeGuideModal.remove(),this.sizeGuideModal=null)}},l.a.Base);window&&((globalThis||{}).PFProductPushSizeGuide=d);var u=i("jI2M"),h=i("1Juc"),p=i("ehgC"),g=i("7pSD"),f=i("2+PC");function _(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var v=Class({_params:null,callback:null,sizes:[],_translatedSizes:[],_unavailableSizes:[],_unavailableSampleSizes:[],_inactiveSizes:[],selectedSizes:[],node:null,nodeCheckboxes:null,buttonPicker:null,_nodeCheckboxCheckAll:null,nodeError:null,_sizeGuide:null,__construct:function(e,t){this._params=e,this._additionalPar=t||{},this.callback=e.onChangedCallback,this.designData=e.designData,this.selectedSizes=e.selectedValues.length>0?e.selectedValues.slice():[],this._sizeGuide=new d(e.productId,this._params.isSizeGuideVisible);var i=this._canHaveMultipleSizes();this.sizes=i?e.values.slice().sort(n.a.sizeSortingCallback):e.allValues.slice().sort(n.a.sizeSortingCallback),this._translatedSizes=e.translatedSizes||{};var r=lang("Select size(s):");this.designData.product.isPhoneCase()&&(r=lang("Select model(s):")),i||(this.selectedSizes=e.selectedValues.length?[e.selectedValues[0]]:[],r=lang("Select size:"),this.designData.product.isPhoneCase()&&(r=lang("Select model:"))),this.node=tag("div","generator-size-picker");var a="";if(this.sizes.length>3&&i){var o=Object(l.a)({tag:"input",type:"checkbox",prop:{checked:this.sizes.length===this.selectedSizes.length}});o.onchange=this._onToggleAll.bind(this,o),a={tag:"label",className:"margin-bottom-5",style:{fontWeight:"normal"},els:[o,{tag:"span",className:"margin-left-10",text:lang("Select all sizes")}]},this._nodeCheckboxCheckAll=o}this.nodeSelector=tag("div"),this.sizeNodeTitle=tag("div"),this._params.isSizeNodeTitleVisible&&(this.sizeNodeTitle=tag("div",{className:"margin-vertical-10",style:{lineHeight:"20px"}},[tag("h6","pf-d-inline",r),this._sizeGuide.getButton()])),tag("div","",[this.sizeNodeTitle,this.sizeCheckboxSelector=tag("div","",[a,this.nodeSelector,this.nodeError=tag("div","alert alert-danger text-center hidden padding-10",lang("Please select at least one size!"))])]).append(this.node),this._render()},_render:function(){if(l.a.clearNode(this.nodeSelector),this._canHaveMultipleSizes()){var e,t=_(this.sizes);try{for(t.s();!(e=t.n()).done;){var i=e.value,n=this._getTranslatedSize(i),r=this.isSizeDisabled(i),a=Object(l.a)({tag:"input",type:"checkbox",className:"margin-right-5",prop:{disabled:r,checked:this.selectedSizes.includes(i),name:"size",value:i},style:{verticalAlign:"text-top"}});a.onchange=this._onSizeChanged.bind(this,i,a),Object(l.a)({tag:"label",className:["one-size",r?"disabled":""].join(" "),els:[a,{tag:"span",text:n}]}).append(this.nodeSelector)}}catch(e){t.e(e)}finally{t.f()}}else this._renderButtonPicker()},_renderButtonPicker:function(){var e=this;l.a.addClassName(this.nodeSelector,"button-picker");var t=this.selectedSizes.length>0?this.selectedSizes[0]:null,i=new u.a;i.values=this.sizes.map((function(t){return{value:t,title:e._getTranslatedSize(t)}})),i.onChanged=this._onSizeChanged,i.activeValue=t,i.valuesDisabled=this._unavailableSizes,i.valuesHidden=this._hiddenSizes||[],i.sampleValuesDisabled=this._unavailableSampleSizes,i.valuesInactive=this._params.disabledSizes.concat(this._inactiveSizes||[]),this.buttonPicker=new h.a(i),this.buttonPicker._nodeItems.append(this.nodeSelector)},_onSizeChanged:function(e,t){if(this._canHaveMultipleSizes()){var i=this.selectedSizes.indexOf(e);i>-1&&this.selectedSizes.splice(i,1)}else this.selectedSizes=[],this.designData.title=this.designData.product.title+" - "+e;this.isSizeDisabled(e)?null!=t&&t.checked&&(t.checked=!1):((!t||null!=t&&t.checked)&&(this.selectedSizes.push(e),ga("send",{hitType:"event",eventCategory:"ProductPush",eventAction:"Check one size",eventLabel:e})),this._nodeCheckboxCheckAll&&(this._nodeCheckboxCheckAll.checked=this.selectedSizes.length===this.sizes.length),this.updateErrorStatus(),this.callback(this.selectedSizes.slice()))},_onToggleAll:function(e){var t=this;this.selectedSizes=[],e.checked&&(this.selectedSizes=this.sizes.filter((function(e){return!t.isSizeDisabled(e)})),ga("send",{hitType:"event",eventCategory:"ProductPush",eventAction:"Check all sizes"})),this._render(),this.callback(this.selectedSizes.slice())},_canHaveMultipleSizes:function(){var e=this.designData.store,t=this.designData.product;return 1!==this._params.selectedLimit&&(e.type!==p.a.TYPE_AMAZON||t.type!==s.a.TYPE_PHONE_CASE)},validateSelectedSize:function(e,t,i,n,r){if(!this._params.isPopoverEnabled)return!0;t&&this.setSelectedRegionDisabledValues(i,n,"size",e);var a="",o="",s=!0,l=this.getAvailableAttributeRegion(t,"size");return this.isSizeDiscontinued(t)?(a=f.a.POPOVER.DISCONTINUED.TITLE,o=f.a.POPOVER.DISCONTINUED.DESC,this._params.designData.product.colors.length||(o=f.a.POPOVER.DISCONTINUED.DESC_SIZE_ONLY),s=!1):this._isSizeSampleDisabled(t)?(a=f.a.POPOVER.SAMPLE.TITLE,o=f.a.POPOVER.SAMPLE.DESC,s=!1):this._isSizeUnavailable(t)||this._isSizeInactive(t)&&!l?(a=f.a.POPOVER.UNAVAILABLE.TITLE,o=f.a.POPOVER.UNAVAILABLE.DESC,this._params.designData.product.colors.length||(o=f.a.POPOVER.UNAVAILABLE.DESC_SIZE_ONLY),s=!1):this._isSizeInactive(t)&&(a=f.a.POPOVER.REGION.TITLE.replace("{region}",l),o=f.a.POPOVER.REGION.DESC,e.allowedSellingRegions&&(a=f.a.POPOVER.DSR_LIMITED.DESC_SIZE.replace("{linkStart}","").replace("{linkEnd}",""),o=""),s=!1),this.buttonPicker&&(a||o)&&this.buttonPicker.togglePopover(t,a,o),s&&this.buttonPicker.setActiveValue(t),s},_getCurrentlySettableSizes:function(){var e=(this.sizes||[]).slice();if(!e||!e.length)return e;var t=this.buttonPicker?this.buttonPicker.getUnavailableItems()||[]:this._unavailableSizes||[],i=[];return e.forEach((function(e){t.indexOf(e)>-1||i.push(e)})),i},_isSizeUnavailable:function(e){return!!this.buttonPicker&&this.buttonPicker.getUnavailableItems().includes(e)},getValueCount:function(){return this.sizes.length},isSelectAllChecked:function(){return this._nodeCheckboxCheckAll&&this._nodeCheckboxCheckAll.checked},isValuePicked:function(){return this.selectedSizes.length>0||this._additionalPar.allowNoSelectedSizes},hasAtLeastOneValue:function(){return!!this.getValueCount()},setSizes:function(e){return this.selectedSizes=e.slice(),this},setUnavailableSizes:function(e){return this.buttonPicker&&this.buttonPicker.setUnavailableItems(e),this._unavailableSizes=e,this},setHiddenSizes:function(e){return this.buttonPicker&&this.buttonPicker.setHiddenItems(e),this._hiddenSizes=e,this},setInactiveSizes:function(e){return this.buttonPicker&&this.buttonPicker.setInactiveItems(e),this._inactiveSizes=e,this},setUnavailableSampleSizes:function(e){return this.buttonPicker&&this.buttonPicker.setDisabledSampleSizes(e),this._unavailableSampleSizes=e,this},render:function(){return this._render(),this},_isSizeInactive:function(e){return!!this.buttonPicker&&this.buttonPicker.getInactiveItems().includes(e)},isSizeDisabled:function(e){return this._params.disabledSizes.includes(e)},isSizeDiscontinued:function(e){return!!this.buttonPicker&&this.buttonPicker.getHiddenItems().includes(e)},_isSizeSampleDisabled:function(e){return!!this.buttonPicker&&this.buttonPicker.getDisabledSampleSizes().includes(e)},_getTranslatedSize:function(e){var t;return null!==(t=this._translatedSizes[e])&&void 0!==t?t:e}},g.a);window&&((globalThis||{}).PFProductPushSizePicker=v)},gYZI:function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var n=i("+I3z"),r=i("E17x"),a=i("nF4n"),o=Class({_option:null,_inputNamePrefix:"",onChange:null,hasError:!1,_expandable:!1,_errorMessage:clang("alternative","Please choose options!"),__construct:function(e,t){this._option=e,this._inputNamePrefix=t,this.node=Object(a.a)({tag:"div",className:"margin-bottom-10"}),this._render()},_render:function(){a.a.clearNode(this.node),Object(a.a)({tag:"label",className:"picker-option-label",els:[{tag:"span",text:this._option.title+(this._option.maxCount?" (max "+this._option.maxCount+")":"")},this._getTooltipNode()]}).append(this.node),this._getNode().append(this.node)},_getTooltipNode:function(){if(this._option.labelTooltipText){var e=Object(a.a)({tag:"span",className:"glyphicon glyphicon-info-sign option-label-sign",attr:{title:this._option.labelTooltipText}});$(e).tooltip({html:!0,delay:{hide:450},container:"body"})}else e=Object(a.a)({});return e},_getNode:function(){throw"_getNode() not implemented for "+this._option.type},getValue:function(){throw"getValue() not implemented for "+this._option.type},validate:function(){return!0},getName:function(){return this._option.name},_onChange:function(){this.onChange&&this.onChange(this)},_addError:function _addError(e){this.hasError||(this.hasError=!0,this._errorNode=Object(a.a)({tag:"div",className:"alert alert-warning margin-vertical-10 padding-10",style:{fontSize:"14px"},els:[{tag:"a",className:"close",text:"Ã—",onclick:this.clearError,style:{color:"#8a6d3b",opacity:.8}},{tag:"span",text:e}]}).append(this.node))},getErrorMessage:function(){return this._errorMessage},clearError:function clearError(){this.hasError=!1,this._errorNode&&(this._errorNode.remove(),this._errorNode=null)},isExpandable:function(){return this._expandable},getOption:function(){return this._option}},a.a.Base);window&&((globalThis||{}).PFComponentsProductOptionsBaseOption=o);var s=i("21+U"),l=i("q+2S"),c=Class({_previousValue:"",_expandable:!0,_errorMessage:lang("Please add notes"),_getNode:function(){var e=new s.a;return e.autoHeight=!0,e.placeholder=this._option.placeholder,e.value=this._option.defaultValue||"",e.onchange=this._onChange,e.prop={},Object(r.b)()&&(e.prop.style={fontSize:"16px"}),this._input=new l.a(e),this._input},_render:function(){a.a.clearNode(this.node);var e=this._getNode();this._nodeToggle=Object(a.a)({tag:"a",className:"pf-link",style:{marginLeft:"20px",fontWeight:"normal"}}),this._input.getValue()?this._showField():this._hideField(),Object(a.a)({tag:"label",els:[this._option.title," ",this._nodeToggle]}).append(this.node),e.append(this.node)},_showField:function(){!this.getValue()&&this._previousValue&&(this._input.setValue(this._previousValue),this._onChange()),this._input.show(),this._nodeToggle.textContent=lang("Remove"),this._nodeToggle.onclick=this._hideField},_hideField:function(){this._previousValue=this._input.getValue(),this._input.setValue(""),this._previousValue&&this._onChange(),this._input.hide(),this._nodeToggle.textContent=lang("Add"),this._nodeToggle.onclick=this._showField},expand:function(){a.a.addClassName(this._nodeToggle,"hidden"),this._showField()},collapse:function(){a.a.removeClassName(this._nodeToggle,"hidden"),this._hideField()},validate:function(){return!this._option.required||""!==this.getValue()},getValue:function(){return this._input.getValue()}},o);window&&((globalThis||{}).PFComponentsProductOptionsTextOption=c);var d=i("taz2"),u=i("Oc5s"),h=Class({_getNode:function(){var e=new u.a;return e.placeholder=this._option.placeholder,e.value=this._option.defaultValue||"",e.onchange=this._onChange,this._input=new d.a(e),this._input},getValue:function(){return this._input.getValue()}},o);window&&((globalThis||{}).PFComponentsProductOptionsSingleLineTextOption=h);var p=Class({_inputs:[],_getNode:function(){var e=Object(a.a)({tag:"div"});for(var t in this._inputs=[],this._option.values){var i=this._option.disabledValues.indexOf(t)>-1,n=i&&this._option.disabledValuesLabelText,r=Object(a.a)({tag:"input",name:this._inputNamePrefix+this._option.name,value:t,type:"radio",prop:{disabled:i,checked:this._option.defaultValue===t,onchange:this._onChange}});r.value=t,this._inputs.push(r);var o=Object(a.a)({tag:"label",className:"margin-right-10 "+(i?"pf-text-muted":""),attr:{title:n?this._option.disabledValuesLabelText:""},els:[r," ",this._option.values[t]]}).append(e);n&&$(o).tooltip()}return Object(a.a)({tag:"div",className:"clearfix"}).append(e),e},getValue:function(){for(var e in this._inputs)if(this._inputs[e].checked)return this._inputs[e].value;return null},getPrice:function(){return this._option.prices||null},setValue:function(e){for(var t in this._inputs)this._inputs[t].value===e?(this._inputs[t].checked=!0,this._onChange()):this._inputs[t].checked=!1},validate:function(){return this.getValue()&&this.getValue().length>0}},o);window&&((globalThis||{}).PFComponentsProductOptionsRadioOption=p);var g=i("iQ/s"),f=i("JA1v"),_=Class({_picker:null,_colorsByName:{},_errorMessage:"Please choose required colors",_getNode:function(){var e=new g.a;for(var t in e.maxCount=this._option.maxCount,e.onChange=this._onChange,e.onError=this._addError,e.showBig=!0,e.colors={},e.selectedColors=[],e.showEmptyGraphic=!0,this._option.values){var i=t,n=this._option.values[t];e.colors[n]=[i],this._colorsByName[n]=i,this._option.defaultValue.indexOf(i)>-1&&e.selectedColors.push(n)}return this._picker=new f.a(e),this._picker},validate:function(){return this.getValue().length>0},getValue:function(){var e=this._picker.getSelectedColors(),t=[];for(var i in e){var n=e[i];t.push(this._colorsByName[n])}return t},setValue:function(e){this._picker.setSelectedColor(e)}},o);window&&((globalThis||{}).PFComponentsProductOptionsColorOption=_);var m=i("Cj9M"),v=i("M3Ia"),y=Class({_getNode:function(){var e=new m.a;return e.value="1",e.isChecked=!!this._option.defaultValue,e.label=this._option.title,e.onchange=this._onChange,this._input=new v.a(e),this._input},getValue:function(){return this._input.isChecked()},_render:function(){a.a.clearNode(this.node),this._getNode().append(this.node)}},o);window&&((globalThis||{}).PFComponentsProductOptionsCheckboxOption=y);var b=i("7QI8"),P=i("2+Fj"),C=Class({_onChange:null,_optionNodes:[],_placementIdsWithLayers:[],_placementIdsWithImageLayers:[],_generatorPlacements:null,_selectedPlacementId:null,errorMessage:"Please choose options!",__construct:function(e){this._par=e,this._onChange=this._par.onChange;var t=this._par.values||{};for(var i in this.node=Object(a.a)({tag:"div"}),this._optionNodes=[],this._par.optionItems){var n=this._par.optionItems[i];void 0!==t[n.name]&&(n.defaultValue=t[n.name]);var r=this._getBaseOptionFromType(n.type);if(r){var o=new r(n,this._par.inputNamePrefix);o.onChange=this._onOptionChanged.bind(this,o),a.a.addClassName(o.node,"product-option"),this._optionNodes.push(o)}else console.error("Option component unknown for",n)}this.renderOptions()},renderOptions:function(){for(var e in a.a.clearNode(this.node),this._optionNodes){var t=this._optionNodes[e],i=t.getOption();this._shouldOptionBeVisible(i)&&this._isPlacementConditionPassing(i)&&(P.a.CUT_SEW_OPTIONS.indexOf(i.name)>-1&&a.a.addClassName(t.node,"product-option--compact-column"),t.append(this.node),t.isExpandable()&&(this._shouldOptionBeExpanded(t.getOption())?t.expand():t.getValue()||t.collapse()))}},setGeneratorPlacements:function(e){this._generatorPlacements=e},_getBaseOptionFromType:function(e){return this._getTypeMap()[e]||null},_getTypeMap:function(){var e={};return e[P.a.TYPE_RADIO]=p,e[P.a.TYPE_TEXT]=c,e[P.a.TYPE_SINGLE_LINE_TEXT]=h,e[P.a.TYPE_COLOR]=_,e[P.a.TYPE_CHECKBOX]=y,e[P.a.TYPE_DATA]=C.DataOption,e},_onOptionChanged:function(e){this._onChange&&this._onChange(e),this._clearErrors(e),this.renderOptions()},getValues:function(){var e={};for(var t in this._optionNodes){var i=this._optionNodes[t],n=i.getOption();if(this._shouldOptionBeVisible(n)||!n.isVisible()){var r=i.getValue();if(!r&&(n.isTypeText()||n.isTypeBoolean()))continue;if(n.isTypeColor()&&0==r.length)continue;e[i.getName()]=r}}return e},getPrices:function(){var e={};for(var t in this._optionNodes){var i=this._optionNodes[t];if(i.getPrice){var n=i.getPrice();n&&(e[i.getName()]=n)}}return e},setValue:function(e,t){for(var i in this._optionNodes)if(this._optionNodes[i].getName()===e){this._optionNodes[i].setValue&&this._optionNodes[i].setValue(t);break}return!1},_shouldOptionBeVisible:function(e){return(e.isStitchColors()||this._isFileConditionPassing(e))&&this._isLayerTypesConditionPassing(e)&&this._isOptionConditionPassing(e)&&e.isVisible()},_isLayerTypesConditionPassing:function(e){return!e.condition||!e.condition.layerTypes||e.condition.layerTypes.filter((function(t){return t===n.a.TYPE&&e.condition.fileTypes.filter((function(e){return this._placementIdsWithImageLayers.indexOf(e)>-1}),this).length>0}),this).length>0},_shouldOptionBeExpanded:function(e){return this._isExpandedFileConditionPassing(e)&&this._isExpandedOptionConditionPassing(e)},_shouldOptionBeValidated:function(e){return this._isRequiredFileConditionPassing(e)&&this._isRequiredOptionConditionPassing(e)},_isOptionConditionPassing:function(e){if(!e.hasOptionCondition())return!0;var t=e.getConditionOptions();for(var i in t){var n=i,r=t[i];for(var a in this._optionNodes){var o=this._optionNodes[a];if(o.getOption().name==n&&r.indexOf(o.getValue())<0)return!1}}return!0},_isFileConditionPassing:function(e){if(!e.hasFileCondition())return!0;var t=e.getConditionFilesTypes();if(!this._placementIdsWithLayers.length)return!1;for(var i in t)if(this._placementIdsWithLayers.indexOf(t[i])<0)return!1;return!0},_isPlacementConditionPassing:function(e){if(null==this._selectedPlacementId||""==this._selectedPlacementId)return!0;var t=e.getConditionFilesTypes();if(0==t.length)return!0;for(var i in t)if(t[i]==this._selectedPlacementId)return!0;return!1},_isExpandedFileConditionPassing:function(e){if(!e.hasExpandedFileCondition())return!0;var t=e.getExpandedConditionFilesTypes();if(!this._placementIdsWithLayers.length)return!1;for(var i in t)if(this._placementIdsWithLayers.indexOf(t[i])<0)return!1;return!0},_isExpandedOptionConditionPassing:function(e){if(!e.hasExpandedCondition())return!1;var t=e.getExpandedConditionOptions();for(var i in t){var n=i,r=t[i];for(var a in this._optionNodes){var o=this._optionNodes[a];if(o.getOption().name==n&&r.indexOf(o.getValue())>-1)return!0}}return!1},_isRequiredOptionConditionPassing:function(e){if(!e.hasRequiredOptions())return!0;var t=e.getRequiredOptions();for(var i in t){var n=i,r=t[i];for(var a in this._optionNodes){var o=this._optionNodes[a];if(o.getOption().name==n&&r.indexOf(o.getValue())<0)return!1}}return!0},_isRequiredFileConditionPassing:function(e){if(!e.hasRequiredFileCondition())return!0;if(!this._placementIdsWithLayers.length)return!1;var t=e.getRequiredConditionFilesTypes();for(var i in t)if(this._placementIdsWithLayers.indexOf(t[i])<0)return!1;return!0},setPlacementIdsWithLayers:function(e){return this._placementIdsWithLayers=e,this},setPlacementIdsWithFiles:function(e){return this._placementIdsWithImageLayers=e,this},getExtraPrice:function(){var e=this.getValues(),t=0;for(var i in this._optionNodes){var n=this._optionNodes[i].getOption(),r=e[n.name];t+=n.getPrice(r)}return t},hasValidOptions:function(){var e=this._optionNodes;for(var t in this._selectedPlacementId&&(e=e.sort(function(e,t){var i=this._getOptionItemLocation(e.getOption());return i&&i.id===this._selectedPlacementId?-1:1}.bind(this))),e){var i=e[t],n=i.getOption();if(this._shouldOptionBeVisible(n)&&(this._shouldOptionBeValidated(n)&&!i.validate())){var r=i.getErrorMessage(),a=this._getOptionItemLocation(n);return a&&(r=r+" ("+a.title+")"),this.errorMessage=r,!1}}return!0},hasOption:function(e){for(var t in this._optionNodes)if(this._optionNodes[t].getName()==e)return!0;return!1},_getOptionItemLocation:function(e){var t=e.getConditionFilesTypes();if(!this._generatorPlacements||!t)return null;for(var i=0;i<t.length;i++)for(var n=t[i],r=0;r<this._generatorPlacements.length;r++){var a=this._generatorPlacements[r];if(a.id===n)return a}return null},_clearErrors:function(e){for(var t in this._optionNodes){var i=this._optionNodes[t];i.hasError&&i!==e&&this._optionNodes[t].clearError()}},hasSameValues:function(e,t){var i=this.getValues();if(Object.keys(i).length!==Object.keys(e).length)return!1;for(var n in i){if(!t||!b.a.PLACEMENT_COLOR_MAP[t]||b.a.getThreadNameByPlacement(t)===n)if(JSON.stringify(i[n])!==JSON.stringify(e[n]))return!1}return!0},hasVisibleOptions:function(){for(var e in this._optionNodes){var t=this._optionNodes[e].getOption();if(this._shouldOptionBeVisible(t))return!0}return!1},setSelectedPlacementId:function(e){this._selectedPlacementId=e,this.renderOptions()}},a.a.Base);window&&((globalThis||{}).PFComponentsProductOptions=C)},gqiv:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"o",(function(){return r})),i.d(t,"j",(function(){return a})),i.d(t,"k",(function(){return o})),i.d(t,"q",(function(){return s})),i.d(t,"l",(function(){return l})),i.d(t,"u",(function(){return c})),i.d(t,"r",(function(){return d})),i.d(t,"s",(function(){return u})),i.d(t,"p",(function(){return h})),i.d(t,"b",(function(){return p})),i.d(t,"e",(function(){return g})),i.d(t,"h",(function(){return f})),i.d(t,"f",(function(){return _})),i.d(t,"i",(function(){return m})),i.d(t,"t",(function(){return v})),i.d(t,"n",(function(){return y})),i.d(t,"m",(function(){return b})),i.d(t,"d",(function(){return P})),i.d(t,"c",(function(){return C})),i.d(t,"g",(function(){return T}));var n="logoMaker/index/",r="m_setFlag",a="m_loadItemsIntoRepo",o="m_loadLogoTemplatesIntoRepo",s="m_setItemsResponseMetadata",l="m_loadSavedItem",c="m_updateItemFiles",d="m_toggleDeleteModal",u="m_toggleEditorModal",h="m_setGeneratorParams",p="m_cleanupDeletedItemData",g="g_getFlag",f="g_getPageItems",_="g_getItem",m="g_getTemplateItem",v="a_updateFilterAndLoad",y="a_loadUsingFilter",b="a_loadSingleItem",P="a_duplicateItem",C="a_deleteItems";function T(e){return e.logoMaker.index}},gqyd:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("n6mh"),r=i("+erO"),a=i("X5Ic"),o=i("1tjy"),s=Class({fillColor:"",clipartItem:null,_getNewLayer:function(){return new s},getType:function(){return s.TYPE},isClipartLayer:function(){return!0},getOriginalClone:function(e){var t=this._getNewLayer();return e||(t.uniqueId=this.uniqueId),t.fillColor=this.fillColor,t.clipartItem=this.clipartItem,t.overrideImage=this.overrideImage,t.position=this.position.getFromOriginalRatio(),t.originalPosition=this.originalPosition,t.parentLayerUniqueId=this.parentLayerUniqueId,t.patternType=this.patternType,t.patternSpacing=this.patternSpacing,t.flipX=this.flipX,t.flipY=this.flipY,t.isExisting=this.isExisting,t.quickDesignId=this.quickDesignId,t.groupType=this.groupType,t.groupId=this.groupId,t.engravingStyle=this.engravingStyle,t},getSourceWidth:function(){return this.clipartItem.width},getSourceHeight:function(){return this.clipartItem.height},isVector:function(){return!0},isSimple:function(){return!1},toArray:function(e,t){return{type:s.TYPE,fillColor:this.fillColor,clipartItemId:this.clipartItem?this.clipartItem.id:null,url:this._getUrl(e),svg:t&&this.clipartItem?this.clipartItem.svg:null,position:this.position?this.position.toArray():{},isCustomizable:this.isCustomizable?1:0,customizeKey:this.customizeKey,uniqueId:this.uniqueId,parentLayerUniqueId:this.parentLayerUniqueId,overrideImage:this.overrideImage,patternType:this.patternType,patternSpacing:this.patternSpacing,flipX:this.flipX,flipY:this.flipY,isExisting:this.isExisting,quickDesignId:this.quickDesignId,groupType:this.groupType,groupId:this.groupId,engravingStyle:this.engravingStyle}},_getUrl:function(e){var t=null;return this.clipartItem&&this.clipartItem.image&&(t=this.clipartItem.image.urlLarge),e&&this.clipartItem&&this.clipartItem.image&&(t=this.clipartItem.image.urlThumb),t},getInitialScale:function(e){return e.technique===a.a.TECHNIQUE_ENGRAVING?e.isTouchToolPrintFile()?5:1.08:4},isValidForTechnique:function(e){var t=Object(o.e)(this.clipartItem.id),i=Object(o.d)(this.clipartItem.groupId);return!((null==i?void 0:i.unavailableTechniques.indexOf(e))>-1||(null==t?void 0:t.unavailableTechniques.indexOf(e))>-1)}},n.a);s.TYPE="clipart",s.fromClipartItem=function(e){var t=new s;return t.clipartItem=e,t.originalPosition=new r.a,t.position=t.originalPosition.getClone(),t},window&&((globalThis||{}).PFComponentsGeneratorMockupClipartLayer=s)},hwc9:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("6t3j"),r=function(){this.items=[],this.brands=[],this.materials=[]};r.prototype.page=0,r.prototype.pages=0,r.prototype.total=0,r.prototype.items=null,r.prototype.brands=null,r.prototype.materials=null,window&&((globalThis||{}).PFItemsProductList=r);var a=i("X5Ic"),o=i("nF4n"),s=i("Sucz"),l=function(){this.productRepository=new n.a};l.prototype.getProducts=function(e){var t=new l.GetProductsPar;o.a.O2O(t,e);var i=this.productRepository.getCachedProductList(t);!1===i?Object(s.a)("products/get",{categoryId:t.categoryId,storeId:t.storeId,page:t.page,perPage:t.perPage,brand:t.brand,search:t.search,isScreenMode:t.isScreenMode?1:0,includeDisabledInPush:t.includeDisabledInPush?1:0,activeOnly:t.activeOnly?1:0,withMedia:t.withMedia?1:0,withRelatedMediaLibraryItems:t.withRelatedMediaLibraryItems?1:0,isForGenerator:t.isForGenerator?1:0,isForProductTemplates:t.isForProductTemplates?1:0},$.proxy(this.getProductsRe,this,t)):t.callback(i)},l.prototype.getProductsRe=function(e,t){var i=t.products,n=new r;n.page=i.page,n.pages=i.pages,n.total=i.total,n.brands=i.brands,n.materials=i.materials,n.availableLocales=i.availableLocales,Object.values(i.items).forEach((function(e){var t=a.a.fromArray(e);t.availableLocales=i.availableLocales,n.items.push(t)})),this.productRepository.cacheProductList(e,n),e.callback(n)},l.prototype.clearCache=function(){this.productRepository.clearCache()},l.prototype.getCachedProductById=function(e){return this.productRepository.getCachedProductById(e)},l.prototype.getCachedVariantById=function(e){return this.productRepository.getCachedVariantById(e)},l.GetProductsPar=function(){this.categoryId=0,this.storeId=null,this.page=1,this.perPage=20,this.callback=function(){console.error("No callback defined")}},l.GetProductsPar.prototype.callback=null,l.GetProductsPar.prototype.categoryId=0,l.GetProductsPar.prototype.isScreenMode=!1,l.GetProductsPar.prototype.page=0,l.GetProductsPar.prototype.perPage=0,l.GetProductsPar.prototype.includeDisabledInPush=!1,l.GetProductsPar.prototype.activeOnly=!0,l.GetProductsPar.prototype.withRelatedMediaLibraryItems=!1,l.GetProductsPar.prototype.isForGenerator=!1,l.GetProductsPar.prototype.brand="",l.GetProductsPar.prototype.search="",l.GetProductsPar.prototype.getHash=function(){var e=[];for(var t in this)this.hasOwnProperty(t)&&e.push(this[t]);return e.join("|")},(globalThis||{}).PFCatalog=l},iKM3:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({id:null,name:"",groupId:null,index:0,designData:null,extra:{},unavailableTechniques:[],isActive:!0,image:{}});r.fromArray=function(e){var t=new r;return n.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsGeneratorQuickDesignItem=r)},"iiV/":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("o0qH"),r=i("ji4W"),a=i("X5Ic"),o=Class({_state:null,_categoriesStore:null,__construct:function(){this._categoriesStore=new r.a},apply:function(e){return this._state=e,this[e.action]&&this[e.action](),this},continue:function(e){return e&&e(this._state),this},productCatalogProductChosen:function(){this._categoriesStore.getPath().filter((function(e){return e.isEmbroideryShirts()})).length>0&&Object(n.a)(this._state.activeProductId).rememberLastUsedTechnique(a.a.TYPE_EMBROIDERY)}});window&&((globalThis||{}).PFProductsCatalogUtilsMiddleware=o);var s=i("g357"),l=i("N6Gp"),c=(i("v49Q"),i("cCrT")),d=i("YBfo"),u=Class({events:[d.a.EVENT_NAME,d.a.EVENT_ALL_LOADED,d.a.EVENT_PRODUCTS_FILTER,d.a.EVENT_PRODUCTS_LOADED,d.a.EVENT_PRODUCT_CHOOSE,d.a.EVENT_TAB_CHOOSE,d.a.EVENT_VARIANT_CHANGED,d.a.EVENT_TOGGLE_LOCK],params:null,state:null,middleware:null,__construct:function(e){this.params=e,this.state=new s.a,this.middleware=new o,this._initEventHandler(),this._initEventListeners()},goTo:function(e,t){var i={category:e&&e,activeProductId:t&&t.productId,productSearchKeywords:this._getFromUrl("search"),activeTab:(new c.a).hash,filter:u.getFiltersFromUrl(),productColor:this._getFromUrl("color"),productSize:this._getFromUrl("size"),activeVariantId:parseInt(this._getFromUrl("variant")),skipHistory:!e,openedFirstTime:!0,productsViewPage:parseInt(this._getFromUrl("page")),productTechnique:this._getFromUrl("technique"),productRegion:this._getRegionsFromUrl(),geoElementId:this._getFromUrl("geoElementId")};s.a.createAndDispatch(t?d.a.EVENT_PRODUCT_CHOOSE:d.a.EVENT_NAME,i)},goToIndex:function(){s.a.createAndDispatch(d.a.EVENT_NAME,{category:new l.a})},getCatalogType:function(){return this.params.catalogType},popState:function(e){this.state=s.a.createFromObject(e.state,!0),this.update()},addState:function(e){this.state=e,!this.params.skipHistory&&e.pushToHistory()},update:function(){this.params.onUpdate&&this.middleware.apply(this.state).continue(this.params.onUpdate)},updateParams:function(e){this._destroyEventListeners(),this.params=e,this._initEventHandler(),this._initEventListeners()},_getFromUrl:function(e){var t=new c.a;return t.query[e]?t.query[e]:null},_getRegionsFromUrl:function(){var e=new c.a,t=e.query["region[]"]||[];return Object.keys(e.query).forEach((function(i){/^region\[[0-9]+\]$/.test(i)&&(t.push(e.query[i]),delete e.query[i])})),t},_initEventHandler:function(){this._changeHandlerObject={handleEvent:u.onChange.bind(this,this.params)}},_initEventListeners:function(){window.onpopstate=this.popState,this.events.map(this._addListener)},_destroyEventListeners:function(){this.events.map(this._removeListener)},_addListener:function(e){document.addEventListener(e,this._changeHandlerObject,!0)},_removeListener:function(e){document.removeEventListener(e,this._changeHandlerObject,!0)}});u.instance=null,u.getInstance=function(e){return u.instance||(u.instance=new u(e)),u.instance},u.onChange=function(e,t){var i=u.getInstance(e),n=s.a.clone(t.detail,{category:i.state.category,prefix:i.params.prefix});n.catalogType=i.getCatalogType(),i.addState(n),i.update()},u.getFiltersFromUrl=function(){var e=new c.a,t={};for(var i in d.a.FILTER_TYPES){var n=(e.query[i]||"").split("!")||[];n=n.filter((function(e){return!!e})),t[d.a.FILTER_TYPES[i]]=n}return t},u.Par=Class({productsCatalog:null,prefix:"",onUpdate:null,skipHistory:!1,catalogType:d.a.TYPE_PP}),window&&((globalThis||{}).PFProductsCatalogUtilsRouter=u)},jI2M:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({values:[],valuesDisabled:[],valuesHidden:[],valuesInactive:[],sampleValuesDisabled:[],onChanged:null,activeValue:null,ariaLabel:"",singleAriaLabel:"{title}"});window&&((globalThis||{}).PFComponentsButtonPickerPar=n)},jhOU:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({_par:null,__construct:function(e){this._par=e,this.node=tag("div","pf-banner pf-banner-"+this._par.type+" "+(this._par.className||""),[this._par.closable?tag("i",{className:"pf-banner__close-icon pf-i pf-i-close pf-i-20 pf-text-gray pf-cursor-pointer pf-position-absolute",prop:{onclick:function(){if(!this._par.onCloseClick)return this._prettyRemove(),!1;this._par.onCloseClick()}.bind(this)}}):"",tag("div","pf-banner__content row",[tag("div","col-sm",[tag("div","row no-gutters",[this._par.icon?tag("div","col-auto",[tag("img",{className:"pf-banner__logo pf-mr-24",src:this._par.icon})]):"",tag("div","col",[tag("div","row",[tag("div","col pf-ui-body",[this._par.heading?tag("div","pf-bold",this._par.heading):"",tag("div",{innerHTML:this._par.content}),this._par.linkText?tag("a",{className:"pf-d-inline-block pf-mt-2",onclick:this._par.onLinkClick},this._par.linkText):""]),this._par.buttonText?tag("div","col-sm-auto pf-mt-8 pf-my-sm-auto",[tag("a",{className:"pf-btn pf-btn-outline",onclick:this._par.onButtonClick},this._par.buttonText)]):""])])])])])])},_prettyRemove:function(){var e=this;n.a.removeClassName(this.node,"pf-banner pf-banner-"+this._par.type),setTimeout((function(){n.a.removeNode(e.node),e._par.onAfterElementRemoved&&e._par.onAfterElementRemoved()}),300)}},n.a.Base);r.show=function(e,t){new r(t).append(e)},window&&((globalThis||{}).PFComponentsBanner=r)},ji4W:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Tt8e"),r=i("N6Gp"),a=i("YBfo"),o=i("t8U3"),s=Class({__construct:function(){this._initConfigureStore(this)},_categories:[],getAll:function(e){return this._getSubCategories(e)},getAllWithInactive:function(e){return this._getSubCategories(e,!0)},getById:function(e,t,i){t||(t=s.cache[a.b.catalogType]),void 0===i&&(i=!0);var n=this._findCategoryById(e,t);if(n||!i)return n;for(var r in t){var o=this.getById(e,t[r].children);if(o){n=o;break}}return n},getPath:function(e){void 0===e&&(e=this.getActiveCategoryId());var t=[],i=this.getById(e);if(!i)return[];for(t.push(i);i.parentId&&(i=this.getById(i.parentId));)t.push(i);return t.reverse()},getTopLevelCategory:function(){var e=this.getPath();return e.length?e[0]:this.getActiveCategory()},setActiveCategoryId:function(e){s.activeCategoryId=e},getActiveCategoryId:function(){return s.activeCategoryId},getActiveCategory:function(){return-1===this.getActiveCategoryId()?r.a.getTemporaryFavoritesCategory():this.getById(this.getActiveCategoryId())},getCategoryChildIds:function(e){var t=[e.id];for(var i in e.children)t.push(e.children[i].id);return t},cache:function(e){"Array"!=typeof e&&(e=n.a.convertToArray(e)),s.cache[a.b.catalogType]=e.map(this._getCategoryItem)},_getSubCategories:function(e,t,i){var n=s.cache[a.b.catalogType];if(!n.length)return console.log("Categories not found"),[];e||(e=0);var r=i&&i.length?i:n;return r=r.filter(this._filterCategoryByParentId.bind(this,e)),t||(r=r.filter(this._filterActiveCategory.bind(this))),r.length||(!i&&n&&(i=n),i.map(function(i){r=r.concat(this._getSubCategories(e,t,i.children))}.bind(this))),r},_findCategoryById:function(e,t){var i=null;return t.map(function(t){if(t.id===e)return i=t,!1}.bind(this)),i},_filterCategoryByParentId:function(e,t){return t.parentId===e},_filterActiveCategory:function(e){return e.isActive},_getCategoryItem:function(e){return r.a.fromArray(e)},_initConfigureStore:function(){if(!s._storeInitCallbackExecuted){s._storeInitCallbackExecuted=!0;var e=o.a.getCategoriesStoreInitCallback();e&&e(this)}}});s.cache={},s.activeCategoryId=0,s._storeInitCallbackExecuted=!1,window&&((globalThis||{}).PFProductsCatalogUtilsStoreCategories=s)},jorx:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("Q1Td"),r=i("nF4n"),a=Class({_timeStarted:0,_timeEnded:0,__construct:function(e,t){this._designData=e,this.node=Object(r.a)({tag:"div",className:"live-mockups",els:[this._nodeStatus=Object(r.a)({tag:"div"}),this._nodeMain=Object(r.a)({tag:"div",className:"live-mockups__main"}),this._nodeThumbs=Object(r.a)({tag:"div",className:"live-mockups__thumbs"})]}),t?this._onProgress(t,!0):this._generate()},_generate:function(){this._onProgress(lang("Waiting for magic to happenâ€¦")),this._timeStarted=(new Date).getTime(),(new n.a).generateMockups(this._designData,{onProgress:this._onProgress,onCompleted:this._onGenerated,onFailed:this._onFailed,onStarted:this._onStarted},!0)},_onStarted:function(){this._onProgress(a.PROCESSING_FILES_STATE)},_onFailed:function(){this._nodeStatus.textContent=lang("Generating failed. Please")+" ",Object(r.a)({tag:"a",text:clang("action","try again"),className:"pf-link",onclick:this._generate}).append(this._nodeStatus),this._nodeStatus.appendChild(document.createTextNode("!"))},_onProgress:function(e,t){this._nodeStatus.textContent=a.getStatusMessage(e),t||Object(r.a)({tag:"div",className:"margin-top-10 text-center",els:[{tag:"img",src:"/static/images/layout/spinner-white.gif"}]}).append(this._nodeStatus)},_onGenerated:function(e){this._nodeStatus.textContent="",this._timeEnded=(new Date).getTime(),console.log("Generation took "+(this._timeEnded-this._timeStarted)/1e3+" seconds");var t=!0;for(var i in e){var n=e[i];t&&(this._showMain(n.downloadUrl),t=!1),e.length>1&&Object(r.a)({tag:"div",className:"live-mockups__thumb",onclick:$.proxy(this._showMain,this,n.downloadUrl),els:[{tag:"img",src:n.downloadUrl}]}).append(this._nodeThumbs)}},_showMain:function(e){r.a.clearNode(this._nodeMain),Object(r.a)({tag:"img",src:e}).append(this._nodeMain)}},r.a.Base);a.getStatusMessage=function(e){switch(e){case a.GENERATING_MOCKUPS_STATE:return dlang("generator","Generating mockupsâ€¦");case a.GENERATING_PRINTFILES_STATE:return dlang("generator","Generating printfilesâ€¦");case a.PROCESSING_FILES_STATE:return lang("Processing filesâ€¦");default:return e}},a.getShortStatusMessage=function(e){switch(e){case a.GENERATING_MOCKUPS_STATE:case a.GENERATING_PRINTFILES_STATE:return dlang("generator","Generating");case a.PROCESSING_FILES_STATE:return lang("Processing");default:return e}},a.GENERATING_MOCKUPS_STATE="generating_mockups",a.GENERATING_PRINTFILES_STATE="generating_printfiles",a.PROCESSING_FILES_STATE="processing_files",window&&((globalThis||{}).PFProductPushLiveMockups=a)},kLof:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({type:[],className:null,heading:"",content:"",linkText:"",onLinkClick:null,buttonText:"",onButtonClick:null,onCloseClick:null,onAfterElementRemoved:null,closable:!1,icon:""});n.fromArray=function(e){return Object.assign(new n,e||{})},window&&((globalThis||{}).PFComponentsBannerPar=n)},kT3P:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("iiV/"),r=i("g357"),a=i("Op/+"),o=i("yDyG"),s=Class({store:null,activeCategoryId:0,activeStoreId:null,enableSidebar:!0,enableCategoriesSidebar:!0,enableProductsSidebar:!0,enableTabs:!0,enableTitle:!0,enableStickyHeader:!0,enableProductBanners:!1,customTitle:"",enableSearch:!0,searchType:o.a.SEARCH_TYPE_PRODUCTS,enableBreadcrumbs:!0,breadcrumbsIndexCategoryTitle:dlang("products","Products"),isOrderFlow:!1,isMockupGenerator:!1,isPush:!1,isClean:!1,onProductChoose:null,onCategoryChoose:null,containerClass:"",textBlockData:{},banners:[],bannersPerPage:null,headingNode:null,breadcrumbsNode:null,allowedFulfillmentRegions:[],isRenderRequired:!0,pagNumber:null,isProductTemplate:!1,isFeaturedReviews:!1,featuredReviews:{},sellingRegion:null,isEmbedded:!1,__construct:function(){this.store=new a.PFProductsCatalogUtilsStore},isStickyHeaderEnabled:function(){return this.enableBreadcrumbs&&!this.isClean&&!this.isOrderFlow&&PF.Cookies.arePreferencesSet()},isEmbeddedView:function(){return this.isPush||this.isEmbedded}});window&&((globalThis||{}).PFProductsCatalogPar=s);var l=i("oi7h"),c=i("N6Gp"),d=i("YBfo"),u=Class({params:null,catalogParams:null,productsCatalog:null,router:null,__construct:function(e){this.params=e,this._initCatalogParams(),this.catalogParams.isRenderRequired=!1,this.productsCatalog=new l.a(this.catalogParams),this.catalogParams.isRenderRequired=!0,this._initRouter(this.getActiveCategory(),this.getActiveProduct())},updateParams:function(e){this.params.activeCategoryId=e.activeCategoryId||null},_initCatalogParams:function(){var e=new s;this.params.store&&(e.store=this.params.store),e.store.setActiveCategoryId(this.params.activeCategoryId),e.activeStoreId=this.params.storeId,e.store.setCurrency(this.params.currency),e.allowedFulfillmentRegions=this.params.allowedFulfillmentRegions,e.onProductChoose=this.params.onProductChoose,e.onCategoryChoose=this.params.onCategoryChoose,e.isOrderFlow=this.params.isOrderFlow,e.isPush=this.params.isPush,e.customTitle=this.params.title,e.isClean=this.params.isClean,e.storeProductLimitations=this.params.storeProductLimitations,e.isProductTemplate=this.params.isProductTemplate,e.isEmbedded=this.params.isEmbedded,e.banners=this.params.banners,e.bannersPerPage=this.params.bannersPerPage,e.headingNode=this.params.headingNode,e.breadcrumbsNode=this.params.breadcrumbsNode,e.isFeaturedReviews=this.params.isFeaturedReviews,e.sellingRegion=this.params.sellingRegion,this.params.isOrderFlow&&(e.enableTabs=!1,e.enableCategoriesSidebar=!0,e.enableTitle=!1,e.enableSearch=!1,e.breadcrumbsIndexCategoryTitle=dclang("products","Root category name","All departments"),this.params.isAnonymousOrderFlow&&(e.enableBreadcrumbs=!1)),this.params.isMockupGenerator&&(e.isMockupGenerator=this.params.isMockupGenerator,e.enableSearch=!0,e.enableTabs=!1,e.searchType=o.a.SEARCH_TYPE_PRODUCTS_GENERATOR,e.breadcrumbsIndexCategoryTitle=dclang("products","Root category name","All departments")),this.params.isOrderFlow||this.params.isMockupGenerator||(e.enableProductBanners=!0),this.params.isClean&&(e.enableCategoriesSidebar=!!this.params.enableCategoriesSidebar,e.enableProductsSidebar=!1,e.enableTabs=!1,e.enableSearch=!1,e.enableTitle=!1),this.params.isProductTemplate&&(e.enableTitle=!1,e.enableProductBanners=!1,e.enableTabs=!1),e.enableSearch=!1,this.params.isOrderFlow||this.params.isAnonymousOrderFlow||this.params.isMockupGenerator||(e.containerClass="container"),this.catalogParams=e,d.b.urlPrefix=this.params.urlPrefix},_initRouter:function(e,t){var i=new n.a.Par;i.productsCatalog=this.productsCatalog,i.onUpdate=this.productsCatalog.updateFromState,i.skipHistory=this.params.shouldSkipHistory(),i.prefix=this.params.urlPrefix,this.params.isMockupGenerator?i.catalogType=d.a.TYPE_MG:this.params.isPush||this.params.isProductTemplate?i.catalogType=d.a.TYPE_PUSH:this.params.isOrderFlow?i.catalogType=d.a.TYPE_OF:i.catalogType=d.a.TYPE_PP;var a=!!n.a.instance;this.router=n.a.getInstance(i),a&&(this.router.updateParams(i),this.router.state=new r.a),this.router.goTo(e,t)},getActiveCategory:function(){return this.catalogParams.store.categories.getActiveCategoryId()===c.a.ID_FAKE_FAVORITES?c.a.getTemporaryFavoritesCategory():this.catalogParams.store.categories.getActiveCategory()},getActiveProduct:function(){return this.catalogParams.store.products.getActive()},append:function(e){this.productsCatalog.node.append(e)}});u.instance=null,u.getInstance=function(e,t){if(!u.instance||t){var i=u.instance;!e.store&&i&&i.catalogParams.store&&(e.store=i.catalogParams.store),u.instance=new u(e)}else if(null!=e&&e.activeCategoryId){var n=(new a.PFProductsCatalogUtilsStore).categories.getById(e.activeCategoryId);u.instance.router.goTo(n)}else u.instance.router.goToIndex();return u.instance},window&&((globalThis||{}).PFProductsCatalogInitializer=u)},ka4h:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("7h5t"),r=i("pWIn"),a=i("UYP3"),o=i("nF4n"),s=Class({_par:null,_checkbox:null,_titleNode:null,_labelNode:null,_infoButton:null,_slider:null,_sliderComponent:null,__construct:function(e){var t;this._par=e,this._checkbox=tag("input",{type:"checkbox",className:"product-push-customizer-options__checkbox",prop:{checked:this._par.isChecked,onchange:this._changeCheckboxState}}),t=this._par.layerType===r.a.TYPE||this._par.layerType===n.a.TYPE?dlang("dashboard","Allow text personalization"):dlang("dashboard","Allow image personalization"),this._titleNode=tag("h6",{className:"product-push-customizer-options__title "+(this._par.layerType===r.a.TYPE||this._par.layerType===n.a.TYPE?"product-push-customizer-options__title--text-layer":""),prop:{onclick:this._changeCheckboxState}},[t]),this._labelNode=tag("span",{className:"margin-left-10 product-push-customizer-options__label",prop:{onclick:this._changeCheckboxState}},[dlang("dashboard","Let your customers create personalized versions of your design in real-time on your store")]),this.node=tag("div",null,[tag("div","product-push-customizer-options",[this._titleNode,tag("div","product-push-customizer-options__checkbox-wrapper",[this._checkbox,this._labelNode])])]),this._renderSlider(),this._initTooltip()},_changeCheckboxState:function(){this._par.isChecked=!this._par.isChecked,this._checkbox.checked=this._par.isChecked,this._checkbox.setAttribute("checked",this._par.isChecked?"checked":""),this._renderSlider(),this._par.onChange&&this._par.onChange(this._par.isChecked)},_initTooltip:function(){setTimeout((function(){$(".text-picker__can-customize-tooltip").tooltip()}),10)},setSliderValue:function(e){this._sliderComponent&&this._sliderComponent.setValue(e)},_renderSlider:function(){this._par.showSlider&&(this._par.isChecked?this._addSlider():this._removeSlider())},_addSlider:function(){var e=new a.a.Par;e.onSlide=this._par.onSliderChange,e.max=99,e.onSlideEnded=function(){},this._infoButton=tag("a",{className:"margin-left-5"},[tag("img",{src:"/static/images/layout/icons/info.png",alt:lang("Info"),data:{toggle:"tooltip",html:!0},className:"text-picker__can-customize-tooltip",title:dlang("dashboard","Set an area size that's wide enough for longer words")})]),this._slider=tag("div","row",[tag("div","col-xs-12 margin-top-20",[tag("strong",null,[dlang("dashboard","Customizable text area"),this._infoButton])]),tag("div","col-xs-12 margin-top-10 text-picker__can-customize-slider",[this._sliderComponent=new a.a(e)])]),this._slider.append(this.node)},_removeSlider:function(){this._slider&&(o.a.removeNode(this._slider),this._sliderComponent=null,this._slider=null)}},o.a.Base);window&&((globalThis||{}).PFProductPushCanCustomizeCheckbox=s)},l19W:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("edgZ"),r=i("nF4n"),a=i("97Au"),o=function(e){this.node=Object(r.a)({tag:"div",className:"copyright-warning",els:[{tag:"div",className:"list-header",text:dlang("library","By uploading or saving a design you agree that:")},{tag:"ul",els:[{tag:"li",els:[{tag:"span",innerHTML:dlang("library",'All content complies with our <a href="{termsUrl}" class="pf-link" target="_blank">Terms of Service</a> and <a href="{guidelinesUrl}" class="pf-link" target="_blank">Acceptable Content Guidelines</a>.').replace("{termsUrl}",langUrl("/terms")).replace("{guidelinesUrl}",langUrl("/content-guidelines"))}]},{tag:"li",text:dlang("library","You hold full rights to commercially reproduce this content.")},{tag:"li",text:dlang("library","Your content does not express hate towards any person or group.")},{tag:"li",text:dlang("library","Your content does not depict illegal activities.")},{tag:"li",text:dlang("library","You understand that we act under your instructions and are not obligated in any way to check or confirm the legal use of reproducing any content.")},{tag:"li",text:dlang("library","You indemnify and defend Printful for any claims made as a result of alleged infringements.")},{tag:"li",text:dlang("library","All content is subject to review and may be removed at any time without prior notice.")}]},{tag:"label",els:[this.nodeCheckbox=Object(r.a)({tag:"input",type:"checkbox",className:"margin-right-5",prop:{onchange:this.onChange.bind(this)}})," ",dlang("library","I understand and accept these conditions.")]},this.nodeAccept=Object(r.a)({tag:"a",className:"pf-btn pf-btn-primary disabled margin-top-10",text:dlang("library","I accept"),onclick:$.proxy((function(){ga("send",{hitType:"event",eventCategory:"FileLibrary",eventAction:"Accept copyright warning"}),(new n.a).confirmCopyrights(),this.rememberShown(),e()}),this)})]})};o.prototype=new r.a.Base,o.prototype.storageKey="copyrightWarningSeen3",o.prototype.onChange=function(){r.a.removeClassName(this.nodeAccept,"disabled"),this.nodeCheckbox.checked||r.a.addClassName(this.nodeAccept,"disabled")},o.prototype.shouldShow=function(){return PF.Customer.isLogged()?!PF.Customer.copyright_seen:localStorage&&"seen"!==localStorage.getItem(this.storageKey)},o.prototype.rememberShown=function(){try{PF.Customer.copyright_seen=1,localStorage.setItem(this.storageKey,"seen")}catch(e){alert(dlang("library",'Your web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.'))}},o.showPopup=function(e){var t,i=new o((function(){t.remove(),e()}));if(i.shouldShow()){ga("send",{hitType:"event",eventCategory:"FileLibrary",eventAction:"See copyright warning"});var n=new a.a.Par;n.modalDialogClass="copyright-warning-popup",n.title=dlang("library","Uploading photos and Images"),(t=new a.a(n)).setContent(i.node),t.show()}else e()},(globalThis||{}).PFFileLibraryCopyrightWarning=o},l99J:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("96ed"),r=i("GCEm"),a=i("edgZ");function o(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(l)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,i){if(e!==t)throw new TypeError("Private static access of wrong provenance");return i.get?i.get.call(e):i.value}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,s;return t=e,s=[{key:"listen",value:function(t,i){var o,s=(t=(new a.a).getCachedFile(t.fileId)).storeId!==r.a&&t.storeId>0;if(t.isProcessing()&&!c(e,e,u)[t.fileId]){var l,d,h,p=(o=s?n.a.subscribeStore(t.storeId,n.a.CHANNEL_LIBRARY,n.a.EVENT_COMPLETED,i):n.a.subscribeAnonymousUpload(t.fileId,n.a.EVENT_COMPLETED,i)).subscribed&&(null===(l=o.callbacks)||void 0===l||null===(d=l._callbacks)||void 0===d||null===(h=d.completed)||void 0===h?void 0:h.length);c(e,e,u)[t.fileId]=o,p||(console.warn("".concat(s?"Store":"Anonymous"," file event listener FAILED to subscribe, starting delayed manual check!")),e.DelayedCheck())}}},{key:"unbind",value:function(t,i){var a=t.storeId!==r.a&&t.storeId>0;c(e,e,u)[t.fileId]&&(delete c(e,e,u)[t.fileId],a&&(n.a.unbindStore(t.storeId,n.a.CHANNEL_LIBRARY,n.a.EVENT_COMPLETED,i),console.log("Store event listener un-registered")))}},{key:"DelayedCheck",value:function(){Object.keys(c(e,e,u)).length&&!c(e,e,h)&&function(e,t,i,n){if(e!==t)throw new TypeError("Private static access of wrong provenance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}}(e,e,h,setTimeout((function(){var t=Object.keys(c(e,e,u))||[];(new a.a).getByIds(t,(function(t){if(t&&t.length){var i,n=o(t);try{for(n.s();!(i=n.n()).done;){var r,a,s=i.value;if(!s.isProcessing()){if(!c(e,e,u)[s.fileId])return;var l,d=o((null===(r=c(e,e,u)[s.fileId].callbacks)||void 0===r||null===(a=r._callbacks)||void 0===a?void 0:a.completed)||[]);try{for(d.s();!(l=d.n()).done;)(0,l.value)(s)}catch(e){d.e(e)}finally{d.f()}delete c(e,e,u)[s.fileId]}}}catch(e){n.e(e)}finally{n.f()}}clearTimeout(c(e,e,h)),e.DelayedCheck()}),!0)}),c(e,e,p)))}}],(i=null)&&l(t.prototype,i),s&&l(t,s),e}(),u={writable:!0,value:{}},h={writable:!0,value:null},p={writable:!0,value:2e3}},mJTt:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("9eNC"),r=i("97Au"),a=i("2ovl");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=Class({_DESIGNER_CONTENT:"js--product-push-designer",_DESIGNER_HAS_BEFORE_CLOSE:"js--has-before-close",_VARIANT_CONTINUE_BUTTON:"js--variant-picker-continue-button",_BACK_TO_CATALOG_LINK:"js--back-to-catalog-link",_NAVIGATION_BACK:"js--back",_NAVIGATION_BUTTONS:"dynamic-sticky-footer",_ORDER_STEPS:"pf-steps__item",_isOkToLeave:!1,_didDesignChange:!1,_templates:null,_templateLayers:null,_isModalDesigner:null,_placementOptions:null,_initialPlacementOptions:null,__construct:function(e,t,i){n.l(n.b),this._isOkToLeave=!1,this._didDesignChange=!1,this._templates=e,this._templateLayers=this._getAllLayersToArray(),this._isModalDesigner=t,this._placementOptions=i,this._initialPlacementOptions=this._placementOptions.getData();var a=new r.a.Par;a.title=dlang("generator","Are you sure?"),a.modalDialogClass="modal-md",a.nodeClass="pf-p-0",a.closeOnClick=!1,a.allowEsc=!1,a.deleteOnHide=!0,this.modal=new r.a(a);var o=tag("div","pf-ui-body",dlang("generator","If you leave, your changes won't be saved.")),s=tag("div","pf-d-flex pf-flex-column pf-flex-xs-row",[tag("a",{onclick:this._backToDesigner.bind(this),className:"pf-btn pf-btn-primary pf-mb-12 pf-mb-xs-0 pf-mr-xs-12",text:dlang("generator","Stay")}),tag("a",{onclick:this._leaveDesigner.bind(this),className:"pf-btn pf-btn-secondary",text:dlang("generator","Leave")})]);this.modal.setContent(o),this.modal.setFooterContent(s),this._onClickCheck=this._onClickCheck.bind(this),this._onDocumentLeave=this._onDocumentLeave.bind(this),this._onUpdate=this._onUpdate.bind(this),this._onRemoveWarning=this._onRemoveWarning.bind(this),document.addEventListener("click",this._onClickCheck,!0),window.addEventListener("beforeunload",this._onDocumentLeave),window.addEventListener("unload",this._onDocumentLeaveAccept),n.n(n.d,this._onUpdate),n.n(n.b,this._onRemoveWarning)},_onRemoveWarning:function(){document.removeEventListener("click",this._onClickCheck,!0),window.removeEventListener("beforeunload",this._onDocumentLeave),window.removeEventListener("unload",this._onDocumentLeaveAccept),n.m(n.d,this._onUpdate),n.m(n.b,this._onRemoveWarning)},_onDocumentLeaveAccept:function(){a.a.unsetDesignCachedInSession()},_onUpdate:function(){var e,t,i=this._getAllLayersToArray(),n=this._placementOptions.getData();if(s.isForceUpdateRequred&&(s.isForceUpdateRequred=null),s.updateInitialStateLayers&&(this._templateLayers=s.updateInitialStateLayers,this._didDesignChange=!1,s.updateInitialStateLayers=null),s.updateInitialStateOptions&&(this._initialPlacementOptions=s.updateInitialStateOptions,this._didDesignChange=!1,s.updateInitialStateOptions=null),a.a.isDesignCachedInSession())this._didDesignChange=!!i.length;else if(i.length===this._templateLayers.length&&n.length===this._initialPlacementOptions.length){for(var r=0;r<this._templateLayers.length;r++)if(t=i[r],e=this._templateLayers[r],this._normalizeProperties([t,e]),Object.entries(t).toString()!==Object.entries(e).toString()||Object.entries(t.position).toString()!==Object.entries(e.position).toString())return void(this._didDesignChange=!0);var o=this._comparePlacementOptions(n);this._didDesignChange=!!o}else this._didDesignChange=!0},_comparePlacementOptions:function(e){var t,i,n,r=this,a=function(){if(i=e[t],n=r._initialPlacementOptions[t],i.placement!==n.placement)return{v:!0};if(Object.keys(i.options).length!==Object.keys(n.options).length)return{v:!0};var a=!1,o=void 0,s=void 0;return Object.keys(i.options).forEach((function(e){a||(o=i.options[e],s=n.options[e],o!==s&&(a=!0))})),a?{v:a}:void 0};for(t=0;t<this._initialPlacementOptions.length;t++){var s=a();if("object"===o(s))return s.v}return!1},_getAllLayersToArray:function(){var e=[],t=this._templates.getTemplates();for(var i in t)for(var n in t[i])for(var r in t[i][n].layers){var a=t[i][n].layers[r],o=Object.assign({},a.toArray());e.push(o)}return e},_normalizeProperties:function(e){e.forEach((function(e){delete e.overrideImagePulse,delete e.overrideImage,e.position.top=parseFloat(parseFloat(e.position.top).toFixed(4)),e.position.left=parseFloat(parseFloat(e.position.left).toFixed(4)),e.position.width=parseFloat(parseFloat(e.position.width).toFixed(4)),e.position.height=parseFloat(parseFloat(e.position.height).toFixed(4))}))},_onDocumentLeave:function(e){if(this._didDesignChange){var t=document.querySelectorAll("#"+this._DESIGNER_CONTENT).length>0;s.disable||this._isOkToLeave||!t||(e.preventDefault(),e.returnValue="")}},_backToDesigner:function(){this.modal.hide()},_leaveDesigner:function(){this._isOkToLeave=!0,this.modal.remove(),this.target.click()},_onClickCheck:function(e){if((s.isForceUpdateRequred||s.updateInitialStateLayers||s.updateInitialStateOptions)&&this._onUpdate(),!s.disable){var t=document.querySelectorAll("#"+this._DESIGNER_CONTENT);if(t.length<1)this._isModalDesigner&&this._isTargetNavigatingBack(e.target)&&(s.isForceUpdateRequred=!0);else if(this._didDesignChange&&!this._isOkToLeave){for(var i=t,n=0;n<i.length;n++){var r=e.target.closest(".modal-dialog")&&!e.target.closest(".modal-dialog").contains(i[n]);if(i[n].contains(e.target)&&!this._isTargetConfirmingDesign(e.target)||r)return}this._isTargetConfirmingDesign(e.target)?this._didDesignChange=!1:this._isTargetClickWithinDesigner(e.target)||this._setTargetAndShowModal(e)}}},_isTargetConfirmingDesign:function(e){if(e.id===this._VARIANT_CONTINUE_BUTTON&&e.className.indexOf("disabled")<0)return!0;if("A"!==e.nodeName||this._isTargetNavigatingBack(e))return!1;for(;e&&e!==document;e=e.parentNode)if(e.classList.contains(this._NAVIGATION_BUTTONS))return!0;return!1},_isTargetClickWithinDesigner:function(e){return!(this._isTargetCloseButton(e)||this._isTargetAnchorWithLink(e)||this._isTargetProductPushProductLink(e)||this._isTargetNavigatingBack(e))},_isTargetCloseButton:function(e){if("SPAN"===e.nodeName&&-1!==e.className.indexOf("pf-modal__close-icon")){for(;e&&e!==document;e=e.parentNode)if(e.classList.contains(this._DESIGNER_HAS_BEFORE_CLOSE))return!1;return!0}},_isTargetAnchorWithLink:function(e){return"A"===e.nodeName&&e.href.indexOf("javascript")<0},_isTargetProductPushProductLink:function(e){for(var t=0;e&&e!==document&&t<3;){if("A"===e.nodeName&&e.classList.contains(this._ORDER_STEPS)&&-1!==e.innerText.indexOf(lang("Product")))return!0;e=e.parentNode,t++}},_isTargetNavigatingBack:function(e){return"A"===e.nodeName&&(e.id===this._BACK_TO_CATALOG_LINK||e.id===this._NAVIGATION_BACK)},_setTargetAndShowModal:function(e){e.stopImmediatePropagation(),e.preventDefault(),this.target=e.target,this._isOkToLeave=!1,this.modal.show()}});s.disable=!1,s.updateInitialStateLayers=null,s.updateInitialStateOptions=null,s.isForceUpdateRequred=!1,(globalThis||{}).PFPopupDesignerLeaveWarning=s},mTkf:function(e,t,i){"use strict";i.d(t,"d",(function(){return v})),i.d(t,"f",(function(){return y})),i.d(t,"c",(function(){return b})),i.d(t,"e",(function(){return P})),i.d(t,"g",(function(){return T})),i.d(t,"b",(function(){return I})),i.d(t,"a",(function(){return w})),i.d(t,"h",(function(){return S}));var n=i("RW1+"),r=i("CXOy"),a=i("LvDl"),o=i.n(a),s=i("Cc5H"),l=i("oCYn"),c=i("vCXY");function d(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function u(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){d(a,n,r,o,s,"next",e)}function s(e){d(a,n,r,o,s,"throw",e)}o(void 0)}))}}function h(e){return p.apply(this,arguments)}function p(){return(p=u(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)(null,(function(){return i.e(116).then(i.bind(null,"+zYX"))}));case 2:return n=e.sent,r=n.deps.PFComponentsSvgThumb,e.abrupt("return",new r(t));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function m(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){_(a,n,r,o,s,"next",e)}function s(e){_(a,n,r,o,s,"throw",e)}o(void 0)}))}}function v(e){switch(e){case r.h.CREATED_DATE_ASC:return{type:r.c.CREATED_DATE,dir:r.b.ASC};case r.h.CREATED_DATE_DESC:return{type:r.c.CREATED_DATE,dir:r.b.DESC};case r.h.UPDATED_DATE_ASC:return{type:r.c.UPDATED_DATE,dir:r.b.ASC};case r.h.UPDATED_DATE_DESC:return{type:r.c.UPDATED_DATE,dir:r.b.DESC};case r.h.TITLE_ASC:return{type:r.c.TITLE,dir:r.b.ASC};case r.h.TITLE_DESC:return{type:r.c.TITLE,dir:r.b.DESC}}return null}function y(e,t){if(t===r.b.ASC)switch(e){case r.c.CREATED_DATE:return r.h.CREATED_DATE_ASC;case r.c.UPDATED_DATE:return r.h.UPDATED_DATE_ASC;case r.c.TITLE:return r.h.TITLE_ASC}else if(t===r.b.DESC)switch(e){case r.c.CREATED_DATE:return r.h.CREATED_DATE_DESC;case r.c.UPDATED_DATE:return r.h.UPDATED_DATE_DESC;case r.c.TITLE:return r.h.TITLE_DESC}return null}function b(e,t){if(!t)return e;if(t.sortBy&&(Object.values(r.c).includes(t.sortBy)||(t.sortBy=r.c.CREATED_DATE)),t.sortDir&&(Object.values(r.b).includes(t.sortDir)||(t.sortDir=r.b.DESC)),t.page){var i=parseInt(t.page+"");(!i||i<0)&&(i=1),t.page=i}return new r.d(o.a.merge({},e||{},t))}function P(e,t){return C.apply(this,arguments)}function C(){return(C=m(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var a=new n.a;a.template=t.getTemplate(i).shift(),a.async=!0,t.placementOptions&&(a.placementOptions=t.placementOptions.getOptionsForPlacement(i)),a.onSvgProcessedCallback=function(t){e(t)};try{h(a).catch(r)}catch(e){r(e)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return!e.getters[s.i](r.f.FLAG_KEYS.IS_LOADING)&&(e.commit(s.t,{key:r.f.FLAG_KEYS.IS_LOADING,value:!0}),!0)}function I(e,t){t&&t.responseFlags&&Object.keys(t.responseFlags).forEach((function(i){e.commit(s.t,{key:i,value:t.responseFlags[i]})}))}function w(e,t){if(t){e.commit(s.o,{items:t.items});var i=(t.items||[]).map((function(e){return e.id})),n=new r.e({itemIds:g(i),page:t.page,totalPages:t.pages,totalItems:t.total,filter:t.usedFilter,itemsPerPage:t.itemsPerPage});t.responseFlags&&I(e,t),e.commit(s.u,{metadata:n}),e.commit(s.t,{key:r.f.FLAG_KEYS.IS_LOADING,shouldUnset:!0})}else e.commit(s.t,{key:r.f.FLAG_KEYS.IS_LOADING,shouldUnset:!0})}function S(e,t){var i,n;if(null!==(i=e.currentItemsResponseMetadata)&&void 0!==i&&i.itemIds&&null!==(n=e.filter)&&void 0!==n&&n.sortBy&&e.itemRepository&&t){var a=e.currentItemsResponseMetadata.itemIds;if(-1===a.indexOf(t.id)){var o=a.map((function(t){return e.itemRepository[t]})).filter((function(e){return!!e}));if(a.length!==o.length)throw new Error("ItemRepository and current itemIds mismatch!");o.push(t);var s=e.filter;switch(s.sortBy){case r.c.CREATED_DATE:case r.c.UPDATED_DATE:var c=s.sortBy===r.c.CREATED_DATE?"createdAt":"updatedAt";o.sort((function(e,t){return e[c]||t[c]?e[c]&&t[c]?e[c].isSame(t[c])?0:s.sortDir===r.b.ASC?e[c].isBefore(t[c])?-1:1:e[c].isBefore(t[c])?1:-1:e[c]?s.sortDir===r.b.ASC?-1:1:s.sortDir===r.b.ASC?1:-1:0}));break;case r.c.TITLE:o.sort((function(e,t){if(!e.title&&!t.title)return 0;if(!e.title||!t.title)return e.title?s.sortDir===r.b.ASC?-1:1:s.sortDir===r.b.ASC?1:-1;var i=e.title.localeCompare(t.title);return 0===i?0:s.sortDir===r.b.ASC?i<0?-1:1:i<0?1:-1}))}var d=e.currentItemsResponseMetadata.itemsPerPage,u=o.slice(0,d).map((function(e){return e.id}));l.default.set(e.currentItemsResponseMetadata,"itemIds",u)}}}},"md/F":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={SIZE_ORDER:["NB","3-6m","6M","6-12m","12M","12-18m","18M","18-24m","24M","2T (1-2yr)","2T","2","2yrs","Toddlers","3","3T","4T (2-3yr)","2-3y","4T","4yrs","4","5","5 (3-4yr)","4-5y","5/6","5T","6 (5-6yr)","6yrs","6","6X","6X (6-7yr)","7","Kids","8yrs","10yrs","12yrs","XXS","XS","XS/SM","S","S/M","M","M/L","L/XL","L","XL","2XL","3XL","4XL","5XL","6XL","iPhone 7/8","iPhone 7/8/SE","iPhone 7 Plus/8 Plus","iPhone X/XS","iPhone XS Max","iPhone XR","iPhone 11","iPhone 11 Pro","iPhone 11 Pro Max","iPhone SE","iPhone 12 mini","iPhone 12","iPhone 12 Pro","iPhone 12 Pro Max","50 x 100 cm","70 x 140 cm","100 x 210 cm"],sizeSortingCallback:function(e,t){var i=function(e){e&&e.toString().indexOf(" (")&&(e=e.toString().split(" (")[0]);var t=n.SIZE_ORDER.indexOf(e);if(-1===t&&e){var i=e.match(/([0-9\.]+)(x|Ã—)([0-9\.]+)\s*(cm|in)?/);if(i)return parseFloat(i[1])*parseFloat(i[3])/("cm"===i[4]?Math.pow(2.54,2):1)}return t},r=i(e),a=i(t);return r>-1&&a>-1?r-a:e-t},variantSortingBySizeCallback:function(e,t){return n.sizeSortingCallback(e.size,t.size)}};(globalThis||{}).PFUtilsProduct=n},mrkb:function(e,t,i){"use strict";i.d(t,"a",(function(){return et})),i.d(t,"b",(function(){return tt})),i.d(t,"c",(function(){return it}));var n,r,a=i("KLvT"),o=i("Bxww"),s=i("X5Ic");function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var c,d,u,h={state:{productItem:null,placementsWithOnlyBackgroundColor:[],optionGroupTagInfo:i("sXh8").a},namespaced:!0,mutations:(n={},l(n,o.g,(function(e,t){var i=t.productItem;e.productItem=i?i instanceof s.a?i:s.a.fromArray(i):null})),l(n,o.f,(function(e,t){var i=t.placements;e.placementsWithOnlyBackgroundColor=null!=i?i:[]})),l(n,o.e,(function(e,t){e.optionGroupTagInfo=t})),n),getters:(r={},l(r,o.d,(function(e){return e.productItem})),l(r,o.c,(function(e){return e.placementsWithOnlyBackgroundColor})),l(r,o.b,(function(e){return e.optionGroupTagInfo})),r)},p=Object.freeze({IS_LOADING_QUICK_DESIGNS:"IS_LOADING_QUICK_DESIGNS"}),g=i("oCYn"),f=i("Rq5c"),_=i("DD1l"),m=i("xyjD"),v=i("FpxJ"),y=i("OmXI"),b=i("xRbm"),P=function(e){return Object.values(e).map((function(e){return y.a.fromArray(e)}))},C=function(e,t){var i=e.filter((function(e){return!T(e,t)&&e.isActive&&e.items.length}));return i.forEach((function(e){var i;e.items=null===(i=e.items)||void 0===i?void 0:i.filter((function(e){return!T(e,t)}))})),i},T=function(e,t){var i;return null===(i=e.unavailableTechniques)||void 0===i?void 0:i.includes(t)},I=function(){try{var e=window.localStorage.getItem(Object(m.d)(b.b));return e&&"[]"!==e?P(JSON.parse(e)):null}catch(e){return null}},w=function(){try{return JSON.parse(window.localStorage.getItem(Object(m.e)(b.b)))||{}}catch(e){return{}}},S=i("9Nv7"),E=function(){return Object(S.a)("designer/get-quick-designs")},k=function(e){return Object(S.a)("designer/get-quick-design-items",e)},O=function(){return Object(S.a)("designer/get-fonts")},A=function(){return Object(S.a)("designer/get-color-graphics")},L=function(){return Object(S.a)("designer/get-cliparts")};function N(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function D(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){N(a,n,r,o,s,"next",e)}function s(e){N(a,n,r,o,s,"throw",e)}o(void 0)}))}}function R(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var x,F,M,B={state:{clipartGroupRepository:{},clipartRepository:{},recentCache:{},loadingPromise:null},namespaced:!0,mutations:(c={},R(c,v.j,(function(e,t){var i=t.hasLoaded,n=void 0!==i&&i;Object(f.b)(e,{key:b.a.HAS_LOADED_ALL,value:n,shouldUnset:!n})})),R(c,v.h,(function(e,t){t.forEach((function(t){g.default.set(e.clipartRepository,t.id,t)}))})),R(c,v.k,(function(e,t){var i=t.clipartItemId,n=t.technique;Object.values(e.recentCache).length||(e.recentCache=w());var r=e.recentCache[n];r||(r=[]);var a=r.indexOf(i);a>-1&&r.splice(a,1),r.unshift(i),e.recentCache[n]=r.slice(0,b.b.MAX_RECENT_CACHE);try{window.localStorage.setItem(Object(m.e)(b.b),JSON.stringify(e.recentCache))}catch(e){console.warn("Could not save recent clipart items in local storage!")}})),c),actions:(d={},R(d,v.a,(function(e,t){return D(regeneratorRuntime.mark((function i(){var n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=e.state,r=Object(m.g)(m.a.UPDATE_CLIPARTS),e.getters[v.f]&&!r){i.next=5;break}return i.next=5,e.dispatch(v.i,r);case 5:return i.abrupt("return",C(Object.values(n.clipartGroupRepository),t).map((function(e){return e.items=e.items.filter((function(e){return e.isActive})),e})).sort((function(e,t){return e.index-t.index})));case 6:case"end":return i.stop()}}),i)})))()})),R(d,v.g,(function(e,t){t.forEach((function(t){g.default.set(e.state.clipartGroupRepository,t.id,t),e.commit(v.h,t.items)}))})),R(d,v.i,(function(e){var t=arguments;return D(regeneratorRuntime.mark((function i(){var n,r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]&&t[1],!e.getters[v.f]||r){i.next=5;break}return i.abrupt("return");case 5:if(!e.state.loadingPromise||r){i.next=9;break}return i.next=8,e.state.loadingPromise;case 8:return i.abrupt("return",i.sent);case 9:if(a=I(),null===(n=a)||void 0===n||!n.length||r){i.next=15;break}return i.next=13,e.dispatch(v.g,P(a));case 13:return e.commit(v.j,{hasLoaded:!0}),i.abrupt("return");case 15:return i.prev=15,e.state.loadingPromise=L().then(function(){var t=D(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(m.i)(b.b,i),Object(m.k)(m.a.UPDATE_CLIPARTS,!1),a=P(i),t.next=5,e.dispatch(v.g,a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i.next=19,e.state.loadingPromise;case 19:e.commit(v.j,{hasLoaded:!0}),i.next=25;break;case 22:i.prev=22,i.t0=i.catch(15),Object(_.a)(i.t0);case 25:case"end":return i.stop()}}),i,null,[[15,22]])})))()})),R(d,v.e,(function(e,t){return D(regeneratorRuntime.mark((function i(){var n,r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=e.state.recentCache,Object.keys(r).length<1&&(r=w()),null!==(n=r[t])&&void 0!==n&&n.length){i.next=4;break}return i.abrupt("return",[]);case 4:if(a=Object(m.g)(m.a.UPDATE_CLIPARTS),e.getters[v.f]&&!a){i.next=8;break}return i.next=8,e.dispatch(v.i,a);case 8:return i.abrupt("return",e.getters[v.c](r[t]).filter((function(e){return e&&!T(e,t)})).slice(0,b.b.MAX_RECENT_SHOW));case 9:case"end":return i.stop()}}),i)})))()})),d),getters:(u={},R(u,v.f,(function(e){return Object(f.a)(e,{key:b.a.HAS_LOADED_ALL})})),R(u,v.b,(function(e){return function(t){var i;return null===(i=e.clipartGroupRepository)||void 0===i?void 0:i[t]}})),R(u,v.c,(function(e){return function(t){return t.map((function(t){var i;return null===(i=e.clipartRepository)||void 0===i?void 0:i[t]}))}})),u)},V=i("xTp9"),j=i("3Vk9"),U=i("GyOi"),z=function(e){return Object.values(e).map((function(e){return U.a.fromArray(e)}))},G=function(){try{var e=window.localStorage.getItem(Object(m.d)(V.b));return e&&"[]"!==e?z(JSON.parse(e)):null}catch(e){return null}};function H(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Y(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){H(a,n,r,o,s,"next",e)}function s(e){H(a,n,r,o,s,"throw",e)}o(void 0)}))}}function q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var W={state:{colorGraphicRepository:{},loadingPromise:null},namespaced:!0,mutations:(x={},q(x,j.g,(function(e,t){var i=t.hasLoaded,n=void 0!==i&&i;Object(f.b)(e,{key:V.a.HAS_LOADED_ALL,value:n,shouldUnset:!n})})),q(x,j.f,(function(e,t){t.forEach((function(t){return g.default.set(e.colorGraphicRepository,t.id,t)}))})),x),actions:(F={},q(F,j.a,(function(e){return Y(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.state,n=Object(m.g)(m.a.UPDATE_COLOR_GRAPHICS),e.getters[j.d]&&!n){t.next=5;break}return t.next=5,e.dispatch(j.e,n);case 5:return t.abrupt("return",Object.values(i.colorGraphicRepository).filter((function(e){return e.isActive})));case 6:case"end":return t.stop()}}),t)})))()})),q(F,j.e,(function(e){var t=arguments;return Y(regeneratorRuntime.mark((function i(){var n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.length>1&&void 0!==t[1]&&t[1],!e.getters[j.d]||n){i.next=5;break}return i.abrupt("return");case 5:if(!e.state.loadingPromise||n){i.next=9;break}return i.next=8,e.state.loadingPromise;case 8:return i.abrupt("return",i.sent);case 9:if(null==(r=G())||!r.length||n){i.next=14;break}return e.commit(j.f,r),e.commit(j.g,{hasLoaded:!0}),i.abrupt("return");case 14:return i.prev=14,e.state.loadingPromise=A().then((function(t){Object(m.i)(V.b,t),Object(m.k)(m.a.UPDATE_COLOR_GRAPHICS,!1),e.commit(j.f,z(t))})),i.next=18,e.state.loadingPromise;case 18:e.commit(j.g,{hasLoaded:!0}),i.next=24;break;case 21:i.prev=21,i.t0=i.catch(14),Object(_.a)(i.t0);case 24:case"end":return i.stop()}}),i,null,[[14,21]])})))()})),F),getters:(M={},q(M,j.d,(function(e){return Object(f.a)(e,{key:V.a.HAS_LOADED_ALL})})),q(M,j.b,(function(e){return function(t){return t.map((function(t){var i;return null===(i=e.colorGraphicRepository)||void 0===i?void 0:i[t]}))}})),M)},K=i("Kv+z"),Z=i("iKM3"),Q=i("nF4n"),X=Class({id:null,name:"",items:[],unavailableTechniques:[],index:0,extra:{},image:{},isActive:!1});X.fromArray=function(e){var t=new X;return Q.a.O2O(t,e),e.items&&(t.items=e.items.map((function(e){return Z.a.fromArray(e)}))),t},window&&((globalThis||{}).PFItemsGeneratorQuickDesignGroup=X);var $,J,ee,te=i("ezUM"),ie=function(e){return Object.values(e).map((function(e){return X.fromArray(e)}))},ne=function(){try{var e=window.localStorage.getItem(Object(m.d)(te.b));return e&&"[]"!==e?ie(JSON.parse(e)):null}catch(e){return null}},re=function(){try{return JSON.parse(window.localStorage.getItem(Object(m.e)(te.b)))||{}}catch(e){return{}}},ae=function(e,t){var i=e.filter((function(e){return!oe(e,t)&&e.isActive&&e.items.length}));return i.forEach((function(e){var i;e.items=null===(i=e.items)||void 0===i?void 0:i.filter((function(e){return!oe(e,t)}))})),i},oe=function(e,t){var i;return null===(i=e.unavailableTechniques)||void 0===i?void 0:i.includes(t)};function se(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function le(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){se(a,n,r,o,s,"next",e)}function s(e){se(a,n,r,o,s,"throw",e)}o(void 0)}))}}function ce(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var de={state:{quickDesignGroupRepository:{},quickDesignRepository:{},recentCache:{},loadingPromise:null},namespaced:!0,mutations:($={},ce($,K.k,(function(e,t){var i=t.hasLoaded,n=void 0!==i&&i;Object(f.b)(e,{key:te.a.HAS_LOADED_ALL,value:n,shouldUnset:!n})})),ce($,K.i,(function(e,t){t.forEach((function(t){g.default.set(e.quickDesignRepository,t.id,t)}))})),ce($,K.l,(function(e,t){var i=t.quickDesignItemId,n=t.technique;Object.values(e.recentCache).length||(e.recentCache=re());var r=e.recentCache[n];r||(r=[]);var a=r.indexOf(i);a>-1&&r.splice(a,1),r.unshift(i),e.recentCache[n]=r.slice(0,te.b.MAX_RECENT_CACHE);try{window.localStorage.setItem(Object(m.e)(te.b),JSON.stringify(e.recentCache))}catch(e){console.warn("Could not save recent quick design items in local storage!")}})),$),actions:(J={},ce(J,K.a,(function(e,t){return le(regeneratorRuntime.mark((function i(){var n,r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=e.state,r=Object(m.g)(m.a.UPDATE_QUICK_DESIGNS),e.getters[K.f]&&!r){i.next=5;break}return i.next=5,e.dispatch(K.j,r);case 5:return a=ae(Object.values(n.quickDesignGroupRepository),t),i.abrupt("return",a.filter((function(e){return e.isActive})).map((function(e){return e.items=e.items.filter((function(e){return e.isActive})),e})).sort((function(e,t){return e.index-t.index})));case 7:case"end":return i.stop()}}),i)})))()})),ce(J,K.g,(function(e,t){t.forEach((function(t){g.default.set(e.state.quickDesignGroupRepository,t.id,t),e.commit(K.i,t.items)}))})),ce(J,K.j,(function(e){var t=arguments;return le(regeneratorRuntime.mark((function i(){var n,r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]&&t[1],!e.getters[K.f]||r){i.next=5;break}return i.abrupt("return");case 5:if(!e.state.loadingPromise||r){i.next=9;break}return i.next=8,e.state.loadingPromise;case 8:return i.abrupt("return",i.sent);case 9:if(a=ne(),null===(n=a)||void 0===n||!n.length||r){i.next=15;break}return i.next=13,e.dispatch(K.g,ie(a));case 13:return e.commit(K.k,{hasLoaded:!0}),i.abrupt("return");case 15:return i.prev=15,e.state.loadingPromise=E().then(function(){var t=le(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(m.i)(te.b,i),Object(m.k)(m.a.UPDATE_QUICK_DESIGNS,!1),a=ie(i),t.next=5,e.dispatch(K.g,a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i.next=19,e.state.loadingPromise;case 19:e.commit(K.k,{hasLoaded:!0}),i.next=25;break;case 22:i.prev=22,i.t0=i.catch(15),Object(_.a)(i.t0);case 25:case"end":return i.stop()}}),i,null,[[15,22]])})))()})),ce(J,K.h,(function(e,t){return le(regeneratorRuntime.mark((function i(){var n,r,a,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.itemIds,r=t.forTechnique,a=e.getters[K.d](n),n.filter((function(e){var t=a.find((function(t){return(null==t?void 0:t.id)===e}));if(!t)return!0;var i=t.designData.length>0,n=t.unavailableTechniques.includes(r);return!i||n})).length){i.next=5;break}return i.abrupt("return",a);case 5:return i.prev=5,i.next=8,k(t);case 8:if((o=i.sent).length){i.next=11;break}return i.abrupt("return",[]);case 11:return e.commit(K.i,(s=o,Object.values(s).map((function(e){return Z.a.fromArray(e)})))),i.abrupt("return",e.getters[K.d](n));case 15:return i.prev=15,i.t0=i.catch(5),Object(_.a)(i.t0),i.abrupt("return",[]);case 19:case"end":return i.stop()}var s}),i,null,[[5,15]])})))()})),ce(J,K.e,(function(e,t){return le(regeneratorRuntime.mark((function i(){var n,r,a,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=e.state.recentCache,Object.keys(r).length<1&&(r=re()),Array.isArray(r)){a=r,(r={})[t]=a;try{window.localStorage.setItem(Object(m.e)(te.b),JSON.stringify(r))}catch(e){console.warn("Could not save recent quick design items in local storage!")}}if(null!==(n=r[t])&&void 0!==n&&n.length){i.next=5;break}return i.abrupt("return",[]);case 5:if(o=Object(m.g)(m.a.UPDATE_QUICK_DESIGNS),e.getters[K.f]&&!o){i.next=9;break}return i.next=9,e.dispatch(K.j,o);case 9:return i.abrupt("return",e.getters[K.d](r[t]).filter((function(e){return e&&!oe(e,t)})).slice(0,te.b.MAX_RECENT_SHOW));case 10:case"end":return i.stop()}}),i)})))()})),J),getters:(ee={},ce(ee,K.f,(function(e){return Object(f.a)(e,{key:te.a.HAS_LOADED_ALL})})),ce(ee,K.c,(function(e){return function(t){var i;return null===(i=e.quickDesignGroupRepository)||void 0===i?void 0:i[t]}})),ce(ee,K.d,(function(e){return function(t){return t.map((function(t){var i;return null===(i=e.quickDesignRepository)||void 0===i?void 0:i[t]}))}})),ee)},ue=i("8GdZ"),he=i("Z4u1"),pe=i("1z/T"),ge=i("u9iW"),fe=i.n(ge);function _e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var me=function(){try{var e=window.localStorage.getItem(Object(m.d)(ue.b));return e&&"[]"!==e?JSON.parse(e):null}catch(e){return null}},ve=function(e){return fe.a.setInitialFonts(function(e){for(var t={},i=0,n=Object.values(e);i<n.length;i++){var r=n[i];(!window._USE_OLD_TEXT_LAYERS||window._USE_OLD_TEXT_LAYERS&&r["path-js"])&&(t[r.fontKey]=pe.a.fromArray(r))}return t}(e[ue.c.FONTS]),e[ue.c.FONTS_JS_URLS],e[ue.c.FONTS_TTF_URLS])},ye=function(e){return e&&e[ue.c.FONTS]&&e[ue.c.FONTS_JS_URLS]&&e[ue.c.FONTS_TTF_URLS]},be=function(e){var t;if(!ye(e))throw new Error("Malformed fonts data!");return _e(t={},ue.c.FONTS,JSON.parse(e[ue.c.FONTS])),_e(t,ue.c.FONTS_JS_URLS,JSON.parse(e[ue.c.FONTS_JS_URLS])),_e(t,ue.c.FONTS_TTF_URLS,JSON.parse(e[ue.c.FONTS_TTF_URLS])),t};function Pe(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ce(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Pe(a,n,r,o,s,"next",e)}function s(e){Pe(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Te(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Ie,we,Se,Ee={state:{loadingPromise:null},namespaced:!0,mutations:Te({},he.d,(function(e,t){var i=t.hasLoaded,n=void 0!==i&&i;Object(f.b)(e,{key:ue.a.HAS_LOADED_ALL,value:n,shouldUnset:!n})})),actions:Te({},he.c,(function(e){var t=arguments;return Ce(regeneratorRuntime.mark((function i(){var n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.length>1&&void 0!==t[1]&&t[1],!e.getters[he.b]||n){i.next=5;break}return i.abrupt("return");case 5:if(!e.state.loadingPromise||n){i.next=9;break}return i.next=8,e.state.loadingPromise;case 8:return i.abrupt("return",i.sent);case 9:if(r=me(),!ye(r)||n){i.next=14;break}return ve(r),e.commit(he.d,{hasLoaded:!0}),i.abrupt("return");case 14:return i.prev=14,e.state.loadingPromise=O().then((function(e){var t=be(e);Object(m.i)(ue.b,t),ve(t)})),i.next=18,e.state.loadingPromise;case 18:e.commit(he.d,{hasLoaded:!0}),i.next=24;break;case 21:i.prev=21,i.t0=i.catch(14),Object(_.a)(i.t0);case 24:case"end":return i.stop()}}),i,null,[[14,21]])})))()})),getters:Te({},he.b,(function(e){return Object(f.a)(e,{key:ue.a.HAS_LOADED_ALL})}))},ke=i("Zwo4");function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Le(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ne(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Le(a,n,r,o,s,"next",e)}function s(e){Le(a,n,r,o,s,"throw",e)}o(void 0)}))}}function De(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Re,xe,Fe={state:{flags:p,loadingValues:null,shouldUpdateStorage:{},versionMeta:null},modules:{cliparts:B,colorGraphics:W,quickDesigns:de,fonts:Ee},namespaced:!0,mutations:(Ie={},De(Ie,ke.j,(function(e,t){var i=t.flag,n=t.value;Object(m.h)(i)&&(e.shouldUpdateStorage[i]=n)})),De(Ie,ke.k,(function(e,t){e.versionMeta=t})),Ie),actions:(we={},De(we,ke.d,(function(e){return Ne(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.loadingValues){t.next=4;break}return t.next=3,e.state.loadingValues;case 3:return t.abrupt("return",t.sent);case 4:return e.state.loadingValues=Object(S.a)("designer/get-designer-asset-state").then((function(t){if(!t)throw new Error("Malformed designer assets data!");for(var i=0,n=Object.entries(t);i<n.length;i++){var r=Oe(n[i],2),a=r[0],o=r[1];e.commit(ke.j,{flag:a,value:o})}})),t.next=7,e.state.loadingValues;case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))()})),De(we,ke.c,(function(e,t){return Ne(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.dispatch(ke.d);case 2:if(!Object(m.h)(t)){i.next=4;break}return i.abrupt("return",!!e.state.shouldUpdateStorage[t]);case 4:return i.abrupt("return",!1);case 5:case"end":return i.stop()}}),i)})))()})),De(we,ke.h,(function(e){null===e.state.versionMeta&&e.commit(ke.k,Object(m.f)())})),De(we,ke.b,(function(e,t){return Ne(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.dispatch(ke.h);case 2:e.state.versionMeta.includes(t)||(e.state.versionMeta.push(t),Object(m.j)(e.state.versionMeta));case 3:case"end":return i.stop()}}),i)})))()})),De(we,ke.i,(function(e,t){return Ne(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.dispatch(ke.h);case 2:e.state.versionMeta.includes(t)&&(e.state.versionMeta.splice(e.state.versionMeta.indexOf(t),1),Object(m.j)(e.state.versionMeta));case 3:case"end":return i.stop()}}),i)})))()})),we),getters:(Se={},De(Se,ke.g,(function(e){return function(t){return e.shouldUpdateStorage[t]||!1}})),De(Se,ke.f,(function(e){return e.versionMeta})),Se)},Me=i("fM+x"),Be=i("B8kU"),Ve=function(){return Object(S.a)("designer/has-custom-mockup-access")};function je(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ue(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){je(a,n,r,o,s,"next",e)}function s(e){je(a,n,r,o,s,"throw",e)}o(void 0)}))}}function ze(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Ge,He,Ye={state:{mockupType:null,mockupProduct:null},namespaced:!0,data:function(){return{hasLoaded:!1}},mutations:(Re={},ze(Re,Be.g,(function(e,t){var i=t.key,n=t.value,r=t.shouldUnset;Object(f.b)(e,{key:i,value:n,shouldUnset:r})})),ze(Re,Be.i,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.mockupType=t})),ze(Re,Be.h,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.mockupProduct=t})),Re),getters:(xe={},ze(xe,Be.b,(function(e){return function(t){return Object(f.a)(e,{key:t})}})),ze(xe,Be.d,(function(e){return Object(f.a)(e,{key:Me.a.HAS_CUSTOM_MOCKUP_ACCESS})||!1})),ze(xe,Be.f,(function(e){return e.mockupProduct})),xe),actions:ze({},Be.e,(function(e){var t=arguments,i=this;return Ue(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.length>1&&void 0!==t[1]&&t[1],!i.hasLoaded||r){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,Ve();case 6:(a=n.sent).success||console.error("Something went wrong retrieving mockup access!"),e.commit(Be.g,{key:Me.a.HAS_CUSTOM_MOCKUP_ACCESS,value:a.hasAccess||!1}),i.hasLoaded=!0,n.next=15;break;case 12:n.prev=12,n.t0=n.catch(3),Object(_.a)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[3,12]])})))()}))},qe=i("t8qe"),We=i("0nZy"),Ke=i("86cz");function Ze(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Qe={state:{chooserElements:[],activeView:We.c},namespaced:!0,data:function(){return{}},mutations:(Ge={},Ze(Ge,qe.h,(function(e,t){e.chooserElements=t})),Ze(Ge,qe.g,(function(e,t){e.activeView=t})),Ze(Ge,qe.i,(function(e,t){var i=t.key,n=t.value;Object(f.b)(e,{key:i,value:n,shouldUnset:!n,stateFlagProp:We.a})})),Ze(Ge,qe.j,(function(e,t){var i=t.key,n=t.value,r=t.shouldUnset;Object(f.b)(e,{key:i,value:n,shouldUnset:r,stateFlagProp:We.j})})),Ze(Ge,qe.f,(function(e){e[We.j]={}})),Ge),getters:(He={},Ze(He,qe.c,(function(e){return function(t){return Object(f.a)(e,{key:t,stateFlagProp:We.a})}})),Ze(He,qe.b,(function(e){return e.chooserElements.filter((function(t){var i,n,r,a;return t.id===Ke.a.TYPE_MOCKUP?null==e||null===(i=e[We.a])||void 0===i?void 0:i[We.b.IS_PROMO_MOCKUP_PICKER_AVAILABLE]:t.id===Ke.a.TYPE_QUICKDESIGN?null==e||null===(n=e[We.a])||void 0===n?void 0:n[We.b.IS_QUICK_DESIGNS_PICKER_AVAILABLE]:t.id===Ke.a.LICENSED_ASSET?null==e||null===(r=e[We.a])||void 0===r?void 0:r[We.b.IS_LICENSED_ASSET_PICKER_AVAILABLE]:!We.f.includes(t.id)||(null==e||null===(a=e[We.a])||void 0===a?void 0:a[We.b.IS_MOCKUP_MAKER_MODE])}))})),Ze(He,qe.e,(function(e){return function(t){return Object(f.a)(e,{key:t,stateFlagProp:We.j})}})),He),actions:{}},Xe={modules:{productModule:h,assetsModule:Fe,mockupModule:Ye,layerPickerModule:Qe},namespaced:!0};i("NhST"),i("wy2R");function $e(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Je(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){$e(a,n,r,o,s,"next",e)}function s(e){$e(a,n,r,o,s,"throw",e)}o(void 0)}))}}function et(){Object(a.d)("designer")&&Object(a.f)("designer"),tt()}function tt(){Object(a.d)("designer")||Object(a.e)("designer",Xe,{skipIfAlreadyRegistered:!0})}function it(e){return nt.apply(this,arguments)}function nt(){return(nt=Je(regeneratorRuntime.mark((function e(t){var i,n=this,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.length>1&&void 0!==r[1]?r[1]:100,e.abrupt("return",new Promise((function(e){(function i(n){var r=this;t()?e():setTimeout((function(){return i.call(r,n)}),n)}).call(n,i)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},mw8R:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("wRc6"),r=i("6JZw"),a=i("nF4n"),o=i("SvWC"),s=function(){this.items=[],this.sampleItems=[],this.incompleteItems=[],this.gift=null,this.recipient=new o.a};s.prototype=new r.a,s.prototype.toArrayKeys=["orderId","storeId","status","currency","isSample","sampleErrorType","sampleLogEntry","identity","displayShipping","handling","isScreenMode","grandTotal","storeInWarehouse","forcedBranch","retailPriceData","allowedFulfillmentRegions","requiresSubscription","canStoreInWarehouseIfBranchesAvailable"],s.prototype.lowestRetailPrice=.99,s.prototype.orderId=0,s.prototype.storeId=0,s.prototype.store=null,s.prototype.status="",s.prototype.currency="",s.prototype.discountPercent=0,s.prototype.isSample=null,s.prototype.sampleErrorType=null,s.prototype.sampleLogEntry=null,s.prototype.isScreenMode=null,s.prototype.retailPriceData=null,s.prototype.allowedFulfillmentRegions=null,s.prototype.isCharged=null,s.prototype.identity="",s.prototype.displayShipping="",s.prototype.items=null,s.prototype.sampleItems=null,s.prototype.incompleteItems=null,s.prototype.recipient=null,s.prototype.handling=null,s.prototype.canHaveDuplicateBrandingItems=!1,s.prototype.couponCode="",s.prototype.isExemptDigitizationFee=!1,s.prototype.grandTotal=0,s.prototype.storeInWarehouse=!1,s.prototype.forcedBranch=null,s.prototype.requiresSubscription=!1,s.prototype.canStoreInWarehouseIfBranchesAvailable=!1,s.prototype.isEmpty=function(){return 0==this.items.length},s.prototype.getUrlShipping=function(e){var t="";return e&&(t="?ref="+e),this.getBaseUrl()+"shipping"+t},s.prototype.getUrlReview=function(e){var t="";return e&&(t="?ref="+e),this.getBaseUrl()+"review"+t},s.prototype.getUrlChangeSample=function(){return this.getBaseUrl()+"sample"},s.prototype.getBaseUrl=function(){return langUrl("/dashboard/order/")+(this.orderId>0?this.orderId+"/":"")},s.prototype.isUnapprovedScreenMode=function(){return this.isScreenMode&&"approved"!==this.status},s.fromArray=function(e){var t=new s;return a.a.O2O(t,e),e.forcedBranch&&(t.forcedBranch=n.a.fromArray(e.forcedBranch)),t},s.STATUS_DRAFT="draft",s.STATUS_PENDING="pending",s.SAMPLE_ORDER_ERROR_TYPE_ITEM_LIMIT_EXCEEDED=1,s.SAMPLE_ORDER_ERROR_TYPE_AMOUNT_EXCEEDED=2,s.prototype.isManualOrder=null,window&&((globalThis||{}).PFItemsOrderItem=s)},n6mh:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("6JZw"),r=i("wo5H"),a=i("boP+"),o=Class({__construct:function(){this.uniqueId=++o._instanceCounter},position:null,uniqueId:0,customizeKey:null,isCustomizable:!1,originalPosition:null,overrideImage:null,overrideImagePulse:null,parentLayerUniqueId:null,patternType:null,patternSpacing:null,flipX:null,flipY:null,generatorOptions:null,isExisting:null,quickDesignId:null,groupType:null,groupId:null,engravingStyle:null,isOutOfBounds:function(){return this.position.isOutOfBounds()},isPartiallyOutOfBounds:function(){return this.position.isPartiallyOutOfBounds()},getDefaultColor:function(){var e=Object(a.a)();switch(!0){case null==e?void 0:e.isBlackMug():return r.g;case null==e?void 0:e.isTouchTool():return r.e;case null==e?void 0:e.isJewelry():return r.f;default:return r.d}},getType:function(){},isSimple:function(){return!(this.position.rotation||this.patternType||this.flipX||this.flipY||this.isUpscaled||this.isRemovedBg||this.cropPosition)},isTextLayer:function(){return!1},isClipartLayer:function(){return!1},isLicensedAssetLayer:function(){return!1},isImageLayer:function(){return!1},isTextLayerPartiallyOutOfBounds:function(){return this.isTextLayer()&&this.isPartiallyOutOfBounds()},isChanged:function(e){return!this.isConfigurationSame(e)||this.position.isDifferent(e.position)},wasMirrored:function(){return void 0===this.parentLayerUniqueId},toArray:function(){},getDPI:function(){},isVector:function(){},getOriginalClone:function(e){},getSourceWidth:function(){},getSourceHeight:function(){},getSourceDpi:function(){},getDefaultSize:function(e){var t=this.hasNaturalSize()?this.getSourceDpi():e,i=parseFloat((this.getSourceWidth()/t).toFixed(4)),n=parseFloat((this.getSourceHeight()/t).toFixed(4)),r=n<.75?.75/n:1,a=i<.75?.75/i:1,o=Math.max(a,r);return{width:i*o,height:n*o}},isConfigurationSame:function(e){},hasNaturalSize:function(){return!1},isValidForTechnique:function(e){return!0},getInitialScale:function(e){return 1},removeFromGroupType:function(){this.groupType=null,this.quickDesignId=null,this.groupId=null},addToGroupType:function(e,t){if("unavailableTechniques"in e)this.groupType=o.GROUP_QUICK_DESIGN;else{if(!("isSelected"in e))return void console.error("Unknown group type");this.groupType=o.GROUP_LOGO_TEMPLATE}this.quickDesignId=e.id,this.groupId=t},isCropPositionUpdateNeeded:function(){return!1}},n.a);o._instanceCounter=0,o.GROUP_QUICK_DESIGN="QUICK_DESIGN",o.GROUP_LOGO_TEMPLATE="LOGO_TEMPLATE",o.TYPE_FILL="designFillColor",window&&((globalThis||{}).PFComponentsGeneratorMockupLayer=o)},nBn9:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("cCrT"),r=i("nF4n"),a=i("97Au"),o=Class({__construct:function(e){var t={title:"Sign in",bodyContent:"You need to sign in to perform this action.",signInText:"Sign in",signUpText:"Sign up",signUpCallback:function(){return!0},showFooterContent:!0,pullLeftFooter:!1,extraButtons:!1,onClose:function(){ga("send","event","Sign up to continue pop-up","Exit clicked",window.location.pathname)}};r.a.O2O(t,e||{});var i=new a.a(t);i.setContent(Object(r.a)({tag:"div",els:[t.bodyContent]}));var n=this._getValidatedReturnUrl(t.returnUrl);t.showFooterContent&&i.setFooterContent(Object(r.a)({tag:"div",els:[!!t.signInText&&{tag:"a",className:"pf-btn pf-btn-secondary"+(t.pullLeftFooter?" pull-left":""),text:t.signInText,href:"/auth/?returnUrl="+encodeURIComponent(n)},!!t.signUpText&&{tag:"a",className:"pf-btn pf-btn-primary"+(t.pullLeftFooter?" pull-left":""),text:t.signUpText,href:"/auth/register/?returnUrl="+encodeURIComponent(n),onclick:t.signUpCallback},!!t.extraButtons&&t.extraButtons]})),i.show(),this._modal=i},_getValidatedReturnUrl:function(e){var t=new n.a(e||null);return t.path+(t.query.toString()&&"?"+t.query.toString())},getModalInstance:function(){return this._modal}});window&&((globalThis||{}).PFComponentsLoginPopup=o)},nfGG:function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=l(e);if(t){var r=l(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return s(this,i)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i.d(t,"a",(function(){return c}));var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,e);var t,i,n,s=o(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this)).node=tag("div","scroll-shadow pf-position-relative",[t.topShadow=tag("div","scroll-shadow__top pf-position-absolute pf-w-100"),t.content=tag("div","scroll-shadow__content",e),t.bottomShadow=tag("div","scroll-shadow__bottom pf-position-absolute pf-w-100")]),t}return t=l,(i=[{key:"updateScrollShadowing",value:function(){var e,t,i=this.content.scrollTop,n=this.content.scrollHeight-this.content.clientHeight;null===(e=this.topShadow)||void 0===e||e.classList.remove("pf-d-none"),null===(t=this.bottomShadow)||void 0===t||t.classList.remove("pf-d-none"),this.topShadow&&0===i&&this.topShadow.classList.add("pf-d-none"),this.bottomShadow&&i===n&&this.bottomShadow.classList.add("pf-d-none")}},{key:"addScrollEventListener",value:function(){var e=this;this.updateScrollShadowing(),this.content.addEventListener("scroll",(function(){return e.updateScrollShadowing()}))}}])&&r(t.prototype,i),n&&r(t,n),l}(i("SBaP").a)},nuUa:function(e,t,i){"use strict";i.d(t,"a",(function(){return P})),i.d(t,"b",(function(){return T}));var n=i("x0He"),r=i("SBaP"),a=i("oCYn"),o=i("e7F3");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=f(e);if(t){var r=f(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p(this,i)}}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function m(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var v=new WeakMap,y=new WeakMap,b=new WeakSet,P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,e);var t,i,n,r=h(a);function a(e){var t;return c(this,a),t=r.call(this),b.add(g(t)),v.set(g(t),{writable:!0,value:void 0}),y.set(g(t),{writable:!0,value:void 0}),t.node=tag("div"),m(g(t),v,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(g(t),b,C).call(g(t)),t}return t=a,(i=[{key:"destroy",value:function(){_(this,y).destroy(),m(this,y,null)}},{key:"setNewSearchedProps",value:function(e,t){_(this,y).setDataProp("items",e),_(this,y).setDataProp("showCtaButton",t)}},{key:"setActiveItems",value:function(e){_(this,y).setDataProp("activeItems",e)}}])&&d(t.prototype,i),n&&d(t,n),a}(r.a),C=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.default.use(o.c),(t=new n.b).components={"dropdown-input":function(){return Promise.all([i.e(0),i.e(200)]).then(i.bind(null,"MMOI"))}},t.template='\n            <dropdown-input\n                :items="items"\n                :placeholder="placeholder"\n                :hasInlineSearch="hasInlineSearch"\n                :inlineSearchPlaceholder="inlineSearchPlaceholder"\n                :isMultiselectable="isMultiselectable"\n                :showTags="showTags"\n                :activeItems="activeItems"\n                :imageWidth="imageWidth"\n                :imageHeight="imageHeight"\n                :inputSearch="inputSearch"\n                :searchPlaceholder="searchPlaceholder"\n                :showCtaButton="showCtaButton"\n                :ctaButtonText="ctaButtonText"\n                :label="label"\n                :labelHelpText="labelHelpText"\n                :infoIcon="infoIcon"\n                :infoIconDelay="infoIconDelay"\n                :infoIconName="infoIconName"\n                :inputSize="inputSize"\n                :isRequired="isRequired"\n                :requiredErrorMessage="requiredErrorMessage"\n                :showValuesInline="showValuesInline"\n                :inlineValuesSeparator="inlineValuesSeparator"\n                :minimumSelectedValues="minimumSelectedValues"\n                :value="value"\n                @onChange="emitEvent(\'onChange\', $event)"\n                @onSearchChange="emitEvent(\'onSearchChange\', $event)"\n                @onCtaButtonClick="emitEvent(\'onCtaButtonClick\', $event)"\n            />\n        ',t.initialData={items:_(this,v).items,placeholder:_(this,v).placeholder,hasInlineSearch:_(this,v).hasInlineSearch,inlineSearchPlaceholder:_(this,v).inlineSearchPlaceholder,isMultiselectable:_(this,v).isMultiselectable,showTags:_(this,v).showTags,activeItems:_(this,v).activeItems,imageWidth:_(this,v).imageWidth,imageHeight:_(this,v).imageHeight,inputSearch:_(this,v).inputSearch,searchPlaceholder:_(this,v).searchPlaceholder,showCtaButton:_(this,v).showCtaButton,ctaButtonText:_(this,v).ctaButtonText,label:_(this,v).label,labelHelpText:_(this,v).labelHelpText,infoIcon:_(this,v).infoIcon,infoIconDelay:_(this,v).infoIconDelay,infoIconName:_(this,v).infoIconName,inputSize:_(this,v).inputSize,isRequired:_(this,v).isRequired,requiredErrorMessage:_(this,v).requiredErrorMessage,showValuesInline:_(this,v).showValuesInline,inlineValuesSeparator:_(this,v).inlineValuesSeparator,minimumSelectedValues:_(this,v).minimumSelectedValues,value:_(this,v).value},t.emitEvent=function(e,t){_(r,v)[e]&&_(r,v)[e](t)},m(this,y,new n.a(t)),_(this,y).append(this.node);case 8:case"end":return e.stop()}}),e,this)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),T=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,e),this.items=t.items||void 0,this.placeholder=t.placeholder||void 0,this.hasInlineSearch=t.hasInlineSearch||void 0,this.inlineSearchPlaceholder=t.inlineSearchPlaceholder||void 0,this.isMultiselectable=t.isMultiselectable||void 0,this.showTags=t.showTags||void 0,this.activeItems=t.activeItems||void 0,this.imageWidth=t.imageWidth||void 0,this.imageHeight=t.imageHeight||void 0,this.inputSearch=t.inputSearch||void 0,this.searchPlaceholder=t.searchPlaceholder||void 0,this.showCtaButton=t.showCtaButton||void 0,this.ctaButtonText=t.ctaButtonText||void 0,this.label=t.label||void 0,this.labelHelpText=t.labelHelpText||void 0,this.infoIcon=t.infoIcon||void 0,this.infoIconDelay=t.infoIconDelay||void 0,this.infoIconName=t.infoIconName||void 0,this.inputSize=t.inputSize||void 0,this.isRequired=t.isRequired||void 0,this.requiredErrorMessage=t.requiredErrorMessage||void 0,this.onChange=t.onChange||void 0,this.onSearchChange=t.onSearchChange||void 0,this.onCtaButtonClick=t.onCtaButtonClick||void 0,this.showValuesInline=t.showValuesInline||void 0,this.inlineValuesSeparator=t.inlineValuesSeparator||void 0,this.minimumSelectedValues=t.minimumSelectedValues||void 0,this.value=t.value||void 0}},nvph:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({maxWidth:null,maxHeight:null,generatorVariant:null,template:null,isPrintfile:null,designFillColor:null});window&&((globalThis||{}).PFComponentsGeneratorMockupPreviewPar=n)},nwx2:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("E17x"),r=i("SaSb"),a=i("eYhR"),o=i("nF4n"),s=Class({items:null,tabNodes:null,_fixed:null,__construct:function(e,t){this.items=[],this.tabNodes=[],this._fixed=t;var i=[];i.push("pf-tabs "+e),Object(n.b)()&&i.push("touch"),this.node=tag("ul",i.join(" ")),this._fixed&&(document.removeEventListener("scroll",this._scrollEvent),document.addEventListener("scroll",this._scrollEvent)),this._nodeWrap=tag("div","tab-wrap"),setTimeout(function(){this._resizeTabCheck(),this._scrollCheck()}.bind(this),200),window.removeEventListener("resize",this._resizeTabCheck.bind(this)),window.addEventListener("resize",this._resizeTabCheck.bind(this)),this._nodeWrap.removeEventListener("scroll",this._scrollWrapEvent),this._nodeWrap.addEventListener("scroll",this._scrollWrapEvent)},_scrollEvent:function(e){var t=this,i=$(this.node).find(".nav-arrow.right"),n=$(this.node).find(".nav-arrow.left"),a=this.node.getBoundingClientRect().height+2*parseInt(this.node.style.borderWidth||0);if(this._nodeHolder||(this._nodeHolder=tag("div",{className:"pf-tabs-holder",style:{height:a+"px",marginTop:-a+"px"}}),this.node.parentNode.insertBefore(this._nodeHolder,this.node.nextSibling)),"none"!==window.getComputedStyle(this._nodeHolder).display){var o=this._nodeHolder.getBoundingClientRect(),s=$(".header").outerHeight(),l=$(".header .navigation-wrap").outerHeight(),c=o.top-a-(s-l)<0;if(document.querySelector(".catalog__product__tabs"))new IntersectionObserver((function(e){e[0].isIntersecting&&c?t._makeTabsSticky(s,i):t._makeTabsStatic(a,n,i)})).observe(document.querySelector(".catalog__product__tabs"));else c?this._makeTabsSticky(s,i):this._makeTabsStatic(a,n,i)}else r.a.isWindowBiggerThan(r.a.SIZES.XS)&&r.a.isWindowSmallerThan(r.a.SIZES.SM)&&n.hasClass("hidden")&&this.items.length>3&&i.removeClass("hidden")},_makeTabsSticky:function(e,t){this._nodeHolder.style.marginTop=0,o.a.addClassName(this.node,"fixed"),this.node.style.top=e+"px",window.innerWidth>580&&t.addClass("hidden")},_makeTabsStatic:function(e,t,i){this._nodeHolder.style.marginTop=-e+"px",o.a.removeClassName(this.node,"fixed"),this.node.style.top=0,t.hasClass("hidden")&&this.items.length>3&&i.removeClass("hidden")},_resizeTabCheck:function(){"fixed"!==window.getComputedStyle(this.node).position&&(this._nodeHolder&&(this._nodeHolder.style.marginTop=0),o.a.removeClassName(this.node,"fixed"),this.node.style.top=0),this._nodeWrap.scrollWidth<=this._nodeWrap.offsetWidth?$(this._nodeWrap).siblings(".nav-arrow").addClass("hidden"):this._scrollWrapEvent({target:this._nodeWrap})},_scrollCheck:function(){var e=!!$(this.node).find(".tab.active").length&&$(this.node).find(".tab.active")[0];if(e){var t=e.getBoundingClientRect().left,i=e.getBoundingClientRect().right,n=$(this._nodeWrap).siblings(".nav-arrow.left")[0].getBoundingClientRect().right-t,r=i-$(this._nodeWrap).siblings(".nav-arrow.right")[0].getBoundingClientRect().left,a=n>0?-n:r>0?r:0;$(this._nodeWrap).animate({scrollLeft:Math.min(this._getMaxScroll(),this._nodeWrap.scrollLeft+a)},300)}},_scrollWrapEvent:function(e){var t=$(e.target).siblings(".nav-arrow.left"),i=$(e.target).siblings(".nav-arrow.right");e.target.scrollLeft<1?t.addClass("hidden"):t.removeClass("hidden"),Math.ceil(e.target.scrollLeft)>=e.target.scrollWidth-e.target.clientWidth?i.addClass("hidden"):i.removeClass("hidden")},append:function(e){this.node.append(e),this.render()},render:function(){var e=this._nodeWrap?this._nodeWrap.scrollLeft:0;for(var t in o.a.clearNode(this.node),o.a.clearNode(this._nodeWrap),this._nodeWrap.append(this.node),this.tabNodes=[],this.items){var i=this.items[t],n=[],r=[i.caption];i.isActive&&n.push("active"),i.isDisabled&&n.push("disabled"),i.badge&&r.push(i.badge);var a=tag("li",{className:"tab "+n.join(" "),id:i.customId?"tab-"+i.customId:""},[tag("a",{href:i.href},[i.icon?tag("span","",[i.icon]):"",tag("span","",r),i.subtitle?tag("span","",[i.subtitle]):""])]);if(a.onclick=this._nodeOnClick.bind(this,a,i),a._tabItem=i,i.tooltipTitle){a.title=i.tooltipTitle;var s={html:!0,trigger:"hover",placement:"top",animate:!0,delay:0,container:"body"};i.tooltipAutoShowDuration&&(s.trigger="manual"),$(a).tooltip(s),i.tooltipAutoShowDuration&&(setTimeout(function(e){$(e).tooltip("show")}.bind(this,a),1500),setTimeout(function(e){$(e).tooltip("hide")}.bind(this,a),i.tooltipAutoShowDuration))}this.tabNodes.push(a),a.append(this._nodeWrap)}var l=tag("span","nav-arrow left hidden",[tag("i","pf-i pf-i-chevron-left pf-i-24")]);l.onclick=this._scrollLeft.bind(this),l.append(this.node);var c=tag("span","nav-arrow right hidden",[tag("i","pf-i pf-i-chevron-right pf-i-24")]);c.onclick=this._scrollRight.bind(this),c.append(this.node),this._nodeWrap.scrollLeft=e,this._resizeTabCheck(),this._scrollCheck()},_scrollLeft:function(){$(this._nodeWrap).animate({scrollLeft:Math.max(0,this._nodeWrap.scrollLeft-this._getScrollStep())},300)},_scrollRight:function(){$(this._nodeWrap).animate({scrollLeft:Math.min(this._getMaxScroll(),this._nodeWrap.scrollLeft+this._getScrollStep())},300)},_getScrollStep:function(){return this._nodeWrap.clientWidth/3},_getMaxScroll:function(){return this._nodeWrap.scrollWidth-this._nodeWrap.clientWidth},_nodeOnClick:function(e,t){if(t.isDisabled||this.markTabAsSelected(t),this._fixed&&this._nodeHolder&&"none"!==window.getComputedStyle(this._nodeHolder).display&&Math.abs(parseInt(this.node.style.top))>0){var i=this._nodeHolder.offsetTop-Math.abs(parseInt(this._nodeHolder.style.marginTop))-Math.abs(parseInt(this.node.style.top));$("html, body").animate({scrollTop:i},300)}return this._scrollCheck(),!t.onclick||t.onclick()},markTabAsSelected:function(e){for(var t in this.items)this.items[t].isActive=!1,o.a.removeClassName(this.tabNodes[t],"active");e&&(e.isActive=!0,o.a.addClassName(this._getTabNodeFromTabItem(e),"active"))},markTabAsSelectedById:function(e){for(var t in this.items){var i=this.items[t];if(i.customId===e)return void this.markTabAsSelected(i)}},_getTabNodeFromTabItem:function(e){for(var t in this.tabNodes){var i=this.tabNodes[t];if(i._tabItem.uniqueId===e.uniqueId)return i}return null},add:function(e){var t=new a.a;return o.a.O2O(t,e),this.items.push(t),this.render(),this},clear:function(){this.items=[],this.render()},setActiveTab:function(e){for(var t in this.tabNodes){if(this.tabNodes[t]._tabItem.uniqueId===e.uniqueId)return void this._nodeOnClick(this.tabNodes[t],e)}},getTabById:function(e){for(var t in this.items)if(this.items[t].customId===e)return this.items[t];return null},getActiveTab:function(){for(var e in this.items)if(this.items.hasOwnProperty(e)&&this.items[e].isActive)return this.items[e];return null}},o.a.Base);window&&((globalThis||{}).PFComponentsTabs=s)},o5cA:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("7QI8"),r=i("X5Ic"),a=i("wo5H"),o=i("boP+"),s={getDefaultFontSize:function(e,t){var i=Object(o.a)();return[r.a.TECHNIQUE_PROMO,a.j].includes(t)?a.i:i?i.isPhoneCase()||i.isSocks()||i.isEmbroidery()?.5:i.isMug()?1:i.isSticker()||e&&-1!==[n.a.TYPE_LABEL_OUTSIDE,n.a.TYPE_LABEL_INSIDE,n.a.TYPE_SLEEVE_LEFT,n.a.TYPE_SLEEVE_RIGHT,n.a.TYPE_HANG_TAG,n.a.TYPE_POCKET].indexOf(e)?.5:i.isJewelry()?.2:a.h:a.h}};(globalThis||{}).PFProductPushTextPickerHelpers=s},oAts:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("ohgv"),r=i("iQ/s"),a=i("JA1v"),o=i("2+Fj"),s=i("nF4n"),l=Class({__construct:function(e){var t=e.productItem,i=e.variantItem,n=e.orderLineItem,r=e.extra||{},a=[];this._addProductDetailsToAttributes(a,t,i),a.push(this._buildAttribute(l.TYPE_SIZE,i.translatedSize));var o=this._createOptionsColorPickers(n,t);this._addColorPickersToAttributes(a,o),o=n.options,this._addStitchColorToAttributes(a,o,t.isPillow()),this._addInsidePocketOptionToAttributes(a,o,t.options),this._addNotesToAttributes(a,n.getNotes()),this._addExtrasToAttributes(a,r);var s=this._buildAttributeNodes(a);this.node=tag("div","product-detail-widget",s)},_addProductDetailsToAttributes:function(e,t,i){e.push(this._buildAttribute(l.TYPE_BRAND,t.brand)),i.color&&e.push(this._buildAttribute(l.TYPE_BUILT,tag("div","",[l.getColorTitle(t)+": ",this._getColorSwatch(i),i.color])))},_addExtrasToAttributes:function(e,t){var i;for(i in t)e.push(this._buildAttribute(l.TYPE_BUILT,tag("div","",[i?i+": ":"",t[i]])))},_addNotesToAttributes:function(e,t){t&&e.push(this._buildAttribute(o.a.NAME_NOTES,tag("i","",[t])))},_addColorPickersToAttributes:function(e,t){var i;for(i in 0!==Object.keys(t).length&&e.push(this._buildAttribute(l.TYPE_BUILT,tag("div","pf-my-8 pf-pt-8 pf-border-top",dlang("dashboard","Thread colors")))),t){var n,r=!0;for(n in e)e[n][i]&&(e[n][i].push(t[i]),r=!1);r&&e.push(this._buildAttribute(i,[t[i]]))}0!==Object.keys(t).length&&e.push(this._buildAttribute(l.TYPE_BUILT,tag("div","pf-mb-8")))},_addStitchColorToAttributes:function(e,t,i){if(t[o.a.OPTION_STITCH_COLOR]){var r=n.a.ucFirst(t[o.a.OPTION_STITCH_COLOR]);i?e.push(this._buildAttribute(l.TYPE_ZIPPER_STITCH_COLOR,r)):e.push(this._buildAttribute(o.a.OPTION_STITCH_COLOR,r))}},_addInsidePocketOptionToAttributes:function(e,t,i){if(t[o.a.OPTION_INSIDE_POCKET]){var n=t[o.a.OPTION_INSIDE_POCKET];i[o.a.OPTION_INSIDE_POCKET].values[n]&&e.push(this._buildAttribute(o.a.OPTION_INSIDE_POCKET,i[o.a.OPTION_INSIDE_POCKET].values[n]))}},_buildAttributeNodes:function(e){var t,i=[];for(t in e)for(var n in e[t])if(n!==l.TYPE_BUILT){var r=e[t][n];r&&i.push(tag("div","",[this._getTranslation(n)+": ",r]))}else i.push(e[t][n]);return i},_getColorPicker:function(e,t){var i=new r.a;return i.colors=e,i.showTextSwatches=t,new a.a(i)},_getColorSwatch:function(e){return tag("span","swatches",[tag("span","swatches__item",[tag("span",{style:{background:e.colorCode}}),e.colorCode2?tag("span",{style:{background:e.colorCode2}}):""])])},_buildAttribute:function(e,t){var i={};return i[e]=t,i},_getTranslation:function(e){switch(e){case l.TYPE_BRAND:return dlang("products","Brand");case l.TYPE_SIZE:return dlang("products","Size");case o.a.NAME_THREAD_COLORS:case o.a.NAME_TEXT_THREAD_COLORS_APPAREL:case o.a.NAME_TEXT_THREAD_COLORS_APPAREL_BACK:case o.a.NAME_TEXT_THREAD_COLORS_CHEST_LEFT:case o.a.NAME_TEXT_THREAD_COLORS_CHEST_CENTER:case o.a.NAME_TEXT_THREAD_COLORS_LARGE_CENTER:case o.a.NAME_TEXT_THREAD_COLORS_CORNER_LEFT:case o.a.NAME_TEXT_THREAD_COLORS_CORNER_RIGHT:case o.a.NAME_TEXT_THREAD_COLORS:case o.a.NAME_THREAD_COLORS_APPAREL:case o.a.NAME_THREAD_COLORS_APPAREL_BACK:case o.a.NAME_THREAD_COLORS_CHEST_LEFT:case o.a.NAME_THREAD_COLORS_CHEST_CENTER:case o.a.NAME_THREAD_COLORS_LARGE_CENTER:case o.a.NAME_THREAD_COLORS_CORNER_LEFT:case o.a.NAME_THREAD_COLORS_CORNER_RIGHT:return clang("Thread colors","Flat");case o.a.NAME_THREAD_COLORS_3D:return clang("Thread colors","3D Puff");case o.a.NAME_THREAD_COLORS_LEFT:case o.a.NAME_TEXT_THREAD_COLORS_LEFT:return clang("Thread colors","Left");case o.a.NAME_THREAD_COLORS_RIGHT:case o.a.NAME_TEXT_THREAD_COLORS_RIGHT:return clang("Thread colors","Right");case o.a.NAME_THREAD_COLORS_BACK:case o.a.NAME_TEXT_THREAD_COLORS_BACK:return clang("Back of an object","Back");case o.a.OPTION_STITCH_COLOR:return dlang("products","Stitch color");case l.TYPE_ZIPPER_STITCH_COLOR:return dlang("products","Zipper & Stitch color");case o.a.NAME_NOTES:return dlang("products","Notes");case o.a.NAME_EMBROIDERY_FONT:return dlang("products","Font");case o.a.OPTION_INSIDE_POCKET:return dlang("products","Inside pocket");default:return""}},_isColor:function(e){return[o.a.NAME_THREAD_COLORS_3D,o.a.NAME_THREAD_COLORS_LEFT,o.a.NAME_THREAD_COLORS_RIGHT,o.a.NAME_THREAD_COLORS_BACK,o.a.NAME_THREAD_COLORS,o.a.NAME_THREAD_COLORS_APPAREL,o.a.NAME_THREAD_COLORS_APPAREL_BACK,o.a.NAME_THREAD_COLORS_CHEST_CENTER,o.a.NAME_THREAD_COLORS_LARGE_CENTER,o.a.NAME_THREAD_COLORS_CHEST_LEFT,o.a.NAME_THREAD_COLORS_CORNER_LEFT,o.a.NAME_THREAD_COLORS_CORNER_RIGHT].indexOf(e)>=0||this._isTextColor(e)},_isTextColor:function(e){return[o.a.NAME_TEXT_THREAD_COLORS,o.a.NAME_TEXT_THREAD_COLORS_CHEST_LEFT,o.a.NAME_TEXT_THREAD_COLORS_CHEST_CENTER,o.a.NAME_TEXT_THREAD_COLORS_LARGE_CENTER,o.a.NAME_TEXT_THREAD_COLORS_CORNER_LEFT,o.a.NAME_TEXT_THREAD_COLORS_CORNER_RIGHT,o.a.NAME_TEXT_THREAD_COLORS_LEFT,o.a.NAME_TEXT_THREAD_COLORS_RIGHT,o.a.NAME_TEXT_THREAD_COLORS_BACK,o.a.NAME_TEXT_THREAD_COLORS_APPAREL,o.a.NAME_TEXT_THREAD_COLORS_APPAREL_BACK].indexOf(e)>=0},_createOptionsColorPickers:function(e,t){var i={},n=null;for(var r in e.options)if(r in t.options){if(n=e.options[r],!(this._isColor(r)&&n&&n.length>0))continue;i[r]=this._getColorPicker(n,this._isTextColor(r))}return i}},s.a.Base);l.TYPE_BRAND="brand",l.TYPE_SIZE="size",l.TYPE_ZIPPER_STITCH_COLOR="zipper_stitch_color",l.TYPE_BUILT="built",l.getColorTitle=function(e){return e.isFramedPoster()?dlang("products","Frame color"):e.hasHandleColor()?dlang("products","Handle color"):e.hasPipingColor()?dlang("products","Piping color"):dlang("products","Color")},window&&((globalThis||{}).PFComponentsProductDetails=l)},oclZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({key:"",_timeouts:{},setKey:function(e){this.key=e},clearTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){this._timeouts[this.key]&&clearTimeout(this._timeouts[this.key])})),schedule:function(e,t){this._timeouts[this.key]=setTimeout(e,t||200)}});n.instance=null,n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.delay=function(e,t,i){var r=n.getInstance();r.setKey(e),r.clearTimeout(),r.schedule(t,i)},(globalThis||{}).PFUtilsDelayer=n},oi7h:function(e,t,i){"use strict";i.d(t,"a",(function(){return ci}));var n=i("6t3j"),r=i("QLN8"),a=Class({variableProductId:"dimension2",variablePageType:"dimension3",variableTotalValue:"dimension4",_setVariable:function(e,t){PF.DEV?console.log("GA variable set. "+e+" => "+t):ga("set",e,t)},trackProductView:function(e){var t,i=(new n.a).getCachedProductById(e.productId),a=new r.a;t=i.mainCategoryId&&a.getById(i.mainCategoryId)?a.getById(i.mainCategoryId).name:a.getById(i.categoryIds[0]).name,this._setVariable(this.variableProductId,e.productId+"_"+e.variantId),this._setVariable(this.variablePageType,"product"),this._setVariable(this.variableTotalValue,""+e.priceData.price.toFixed(2)),PF.DEV||ga("send","event","Variant clicked",t,e.name)},trackPageView:function(e){e=e||window.location.pathname,this._setVariable("page",e),ga("send","pageview")}});(globalThis||{}).PFMarketingGoogleAnalytics=a;var o=i("oclZ"),s=i("SaSb"),l=i("nF4n"),c=i("Sucz"),d=i("YBfo"),u=Class({_maximumColumnCount:12,_slideHeight:0,_columnTitleHeight:0,_categoryId:0,_activeData:null,_columns:[],_columnSwitcher:[],_slickOptions:{arrows:!1,dots:!0,fade:!1,lazyLoad:"ondemand",infinite:!1,swipeToSlide:!0,responsive:[{breakpoint:d.a.BREAKPOINT_DOTS,settings:{dots:!0}}]},__construct:function(e,t){this._categoryId=t,this._data=e,this.node=tag("div"),this._getCachedData()?this._render():this._getData()},_getCachedData:function(){return this._data[this._categoryId]||null},_render:function(){this._activeData=this._getCachedData(),this._columns=this._activeData.columns.map(this._setColumns),l.a.clearNode(this.node),this.contentNode=tag("div","pf-pt-24 pf-pb-64",[tag("hr",{className:"pf-my-0 pf-mb-64",attr:{"aria-hidden":"true"}}),this._getTitle(),this.columnsNode=tag("div","row",[this._columns])]),this._renderTextSwitcher(),this.contentNode.append(this.node)},_renderTextSwitcher:function(){1!==this._columns.length&&setTimeout(function(){this._initSlider(),window.addEventListener("resize",this._reInitColumns,!0)}.bind(this))},removeResizeEvent:function(){window.removeEventListener("resize",this._reInitColumns,!0)},_filterEmptyColumns:function(e){return!!e.column.value.length&&e},_cacheData:function(e,t){t.columns=t.columns.filter(this._filterEmptyColumns),(t.title.value.length||t.columns.length)&&(this._data[this._categoryId]=t,e())},_getData:function(){Object(c.a)("product-catalog/get-category-text-block-info",{categoryId:null!==this._categoryId&&-1!==Number(this._categoryId)?this._categoryId:null},this._cacheData.bind(this,this._render))},_getColumnClass:function(e){return" col-sm-"+(1===e?6:this._maximumColumnCount/e)},_reInitColumns:function(){l.a.hasClassName(this.node,"text-block-initialized")&&(this._resetHeightValues(),l.a.removeClassName(this.node,"text-block-initialized"),this._initSlider())},_resetHeightValues:function(){this._slideHeight=0,this._columnTitleHeight=0},_initSlider:function(){if(this._columns.map(this._setTitleHeightValues),this._columns=this._columns.map(this._mapColumnTitles),this._columns.map(this._setColumnHeightValues),this._columns=this._columns.map(this._mapColumns),l.a.addClassName(this.node,"text-block-initialized"),window.innerWidth>d.a.BREAKPOINT_DOTS&&l.a.hasClassName(this.columnsNode,"slick-initialized"))return $(this.columnsNode).slick("destroy");window.innerWidth<=d.a.BREAKPOINT_DOTS&&!l.a.hasClassName(this.columnsNode,"slick-initialized")&&$(this.columnsNode).slick(this._slickOptions)},_setTitleHeightValues:function(e){var t=e.querySelector(".pf-h3");return t.style.minHeight="",this._columnTitleHeight=this._columnTitleHeight<t.offsetHeight?t.offsetHeight:this._columnTitleHeight,e},_setColumnHeightValues:function(e){return e.style.minHeight="",this._slideHeight=this._slideHeight<e.offsetHeight?e.offsetHeight:this._slideHeight,e},_mapColumnTitles:function(e){return e.querySelector(".pf-h3").style.minHeight=this._columnTitleHeight+"px",e},_mapColumns:function(e,t){return e.style.minHeight=this._slideHeight+"px",e},_setColumns:function(e,t){return Object(l.a)({tag:"div",className:this._getColumnClass(this._activeData.columns.length),els:[tag("h3",{className:this._getColumnTitleClass(e),innerHTML:e.title.value}),tag("div",{className:"pf-ui-body",innerHTML:e.column.value})],data:{columnId:"column-"+t}})},_getColumnTitleClass:function(e){return"pf-h3 "+(this._activeData.title.value.length?"":"pf-mt-0 pf-mb-8")+(1!==this._activeData.columns.length||e.title.value.length?"":" pf-my-0")},_getTitle:function(){return this._activeData.title.value.length?tag("div",{className:"col-md-12 pf-my-0 pf-h2 pf-mb-16",innerHTML:this._activeData.title.value}):""}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogViewsTextBlock=u);var h=i("cejl"),p=i("jhOU"),g=i("Kiz0"),f=i("Tt8e"),_=Class({_type:"",_productItems:null,_productsNode:null,_sellingRegion:null,_data:{},__construct:function(e,t,i,r){if(this._type=e,this._productItems=t,this._sellingRegion=i,this._data=r||{},this._shouldNotDisplayBlock())return this.node=tag("div");this.node=tag("div","row",[tag("div",this._isTypeSimilar()||this._data.fullWidth?"col-12":"offset-xs-12 offset-sm-4 offset-md-3 offset-lg-3 offset-xl-2 col-12 col-sm-8 col-md-9 col-lg-9 col-xl-10",[this._getHeader(),this._productsNode=tag("div",{className:"row pf-mb-40 products-pricing-other",attr:{"aria-label":this._getHeaderText(),role:"list"}})])]),(this._isTypeSimilar()||this._isTypeDoesNotMatchSellingRegion())&&this._render(t),this._isTypeRecentlyViewed()&&(new n.a).getRecentlyViewedProducts(this._render)},_render:function(e){for(var t=0,i=e.length;t<i;t++){var n=e[t];new h.a({product:n,className:(this._isTypeSimilar()?"col-6 col-md-4 col-lg-3":"col-6 col-md-4 col-xl-3")+" pf-mt-2 pf-mb-24",showSizes:!n.isEmbroidery()||n.isApparelEmbroidery(),showFulfillmentCountries:!0,url:n.catalogPageUrl,sellingRegion:this._sellingRegion,isRecentlyViewedItem:this._isTypeRecentlyViewed()}).append(this._productsNode)}this._sellingRegion&&this._sellingRegion.isSingleCountry()&&!this._isTypeRecentlyViewed()&&!this._isTypeDoesNotMatchSellingRegion()&&f.a.getProductEstimatedDelivery(e,this._sellingRegion),setTimeout(function(){this._initSlick()}.bind(this),50)},_initSlick:function(){var e=$(this._productsNode);e.hasClass("slick-initialized")&&e.slick("unslick"),e.not(".slick-initialized").slick({arrows:!1,infinite:!1,accessibility:!0,dots:!0,focusOnChange:!0,slidesToShow:4,slidesToScroll:4,rows:0,responsive:[{breakpoint:1600,settings:{slidesToShow:this._isTypeSimilar()?4:3,slidesToScroll:this._isTypeSimilar()?4:3}},{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:2}}]})},_getHeader:function(){var e=this;if(this._isTypeSimilar()||this._isTypeRecentlyViewed()){var t="";return this._isTypeSimilar()?t=dlang("products","You might also like"):this._isTypeRecentlyViewed()&&(t=dlang("products","Recently viewed")),tag("h3","pf-h3 pf-mt-24 pf-mb-16",t)}if(this._isTypeDoesNotMatchSellingRegion()){var i=dlang("products","{count} products don't match your current default catalog and delivery preferences.");PF.Customer.isLogged()&&!PF.Customer.isB2cStarter()&&(i=dlang("products","{count} products don't match your current default selling preferences."));var n=tag("i",{className:"pf-i pf-i-information pf-i-18 pf-text-gray pf-ml-4",style:{outline:"none"},attr:{tabindex:0,title:dlang("sellingRegion","{linkStart}Adjust your preferences{linkEnd} to select them").replace("{linkStart}",'<a class="pf-link dsr-does-not-match-settings-tooltip-link">').replace("{linkEnd}","</a>"),"data-toggle":"tooltip","data-container":"body","data-trigger":"hover","data-delay":'{"hide": 700}',"data-html":!0}});return $(n).tooltip(),$(n).on("shown.bs.tooltip",(function(){document.querySelector(".dsr-does-not-match-settings-tooltip-link").addEventListener("click",(function(){Object(g.b)(e._data.activeStoreId||null)}))})),new p.a({id:"does-not-match-selling-region-products-block",type:"gray",heading:[tag("span","",i.replace("{count}",this._data.productCount)),n],className:"pf-mb-16"})}return""},_getHeaderText:function(){return this._isTypeSimilar()?dlang("products","You might also like"):this._isTypeRecentlyViewed()?dlang("products","Recently viewed"):this._isTypeDoesNotMatchSellingRegion()?dlang("products","Not matching selling region products"):void 0},_isTypeSimilar:function(){return this._type===_.TYPE_SIMILAR},_isTypeRecentlyViewed:function(){return this._type===_.TYPE_RECENTLY_VIEWED},_isTypeDoesNotMatchSellingRegion:function(){return this._type===_.TYPE_DOES_NOT_MATCH_SELLING_REGION},_shouldNotDisplayBlock:function(){return!(!this._isTypeSimilar()||this._productItems&&0!==this._productItems.length)||this._isTypeRecentlyViewed()&&0===(new n.a).getRecentlyViewedProductIds().length}},l.a.Base);_.TYPE_SIMILAR="SIMILAR_PRODUCTS",_.TYPE_RECENTLY_VIEWED="RECENTLY_VIEWED",_.TYPE_DOES_NOT_MATCH_SELLING_REGION="DOES_NOT_MATCH_SELLING_REGION",window&&((globalThis||{}).PFProductsCatalogViewsOtherProducts=_);var m=i("iiV/"),v=i("g357"),y=i("v49Q"),b=Class({_productItems:[],_filters:null,_nodeClearAll:null,_sellingRegionSetting:null,__construct:function(e){this.node=tag("div"),this._sellingRegionSetting=e},render:function(e,t,i,n){l.a.clearNode(this.node),e&&e.length&&(this._productItems=e,this._filters=new y.a(this._productItems,this._onFilter,t||[],i,this._sellingRegionSetting,n),e.length<2||!this._filters._filters.length||(tag("div","catalog__sidebar-filter",[tag("div","catalog__sidebar-filter__title clearfix hidden-xs",[tag("span","clearfix catalog__sidebar-filter__title__toggle",[tag("strong","hidden-xs",[lang("Filter by"),":"]),this._getCollapseNode()]),this._nodeClearAll=tag("a",{className:"catalog__sidebar-filter__clear pf-link hidden",onclick:this.clearAll},[lang("Clear all")])]),tag("div",{className:"navbar-collapse collapse filters-wrap pf-p-0",style:{maxHeight:"none"}},[this._filters])]).append(this.node),this._onFilter()))},clearAll:function(){v.a.createAndDispatch(d.a.EVENT_PRODUCTS_FILTER,{filter:null,productsOrVariants:this._productItems,isOnPopstate:!0})},_getCollapseNode:function(){return Object(l.a)({tag:"a",className:"navbar-toggle collapsed clearfix visible-xs",style:{padding:0,margin:0,display:"block",float:"none",width:"100%"},data:{toggle:"collapse",target:".filters-wrap"},els:[{tag:"strong",text:lang("Filter by")},{tag:"img",className:"pull-right",src:"/static/images/products-catalog/filter.svg",style:{width:"20px",height:"20px"}}]})},_onFilter:function(){this._filters&&this._nodeClearAll&&(this._filters.getAllSelectedValues().length?l.a.removeClassName(this._nodeClearAll,"hidden"):l.a.addClassName(this._nodeClearAll,"hidden"))}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogSidebarFilter=b);var P=i("unRh"),C=i("SUtP"),T=Class({_store:null,_isCategoriesMenuEnabled:!0,_sellingRegionSetting:null,filters:null,__construct:function(e,t,i){this._store=e,this._isCategoriesMenuEnabled=t,this._sellingRegionSetting=i,this.node=tag("div","catalog__sidebar-content"),this._renderCategoriesMenu()._renderFilters()},_renderCategoriesMenu:function(){if(!this._isCategoriesMenuEnabled)return this;var e=new P.a;return e.categories=this._store.categories.getAll(),e.activeTopLevelCategory=this._store.categories.getTopLevelCategory(),e.activeCategoryId=this._store.categories.getActiveCategoryId(),e.isTopLevel=!0,new C.a(e).append(this.node),this},_renderFilters:function(){return this.filters=new b(this._sellingRegionSetting),this.filters.append(this.node),this}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogSidebar=T);var I=i("TbQS"),w=i("A9n+"),S=i("X5Ic"),E=Class({_containerNode:null,_tableNode:null,_loadMoreNode:null,_sizeCheckboxNodes:[],_selectedSizes:[],_visibleColors:[],_productData:null,_regions:[],_oneSize:dlang("products","One Size"),_oneColor:dlang("products","One Color"),_colorCount:20,_inStockLabel:dlang("products","In Stock"),_onDemandLabel:dlang("products","Stocked on Demand"),_supplierOutOfStockLabel:dlang("products","Supplier Out of Stock"),_discontinuedLabel:dlang("products","Discontinued"),initAndGetContainerNode:function(e){this._productData=e,this._selectedSizes=this._getAvailableSizes().slice(),this._visibleColors=this._sortColorsByAvailability(this._getAvailableColors()).slice(0,this._colorCount),this._containerNode=this._getContainerNode();var t=this._onWindowResized;return $(window).on("load resize",(function(){t()})),document.addEventListener("scroll",(function(e){$(e.target).hasClass("color-availability")&&t()}),!0),this._containerNode},_getContainerNode:function(){this._regions=this._getRegions();var e=this._getLegendText(),t=this._getLegendColors(),i=this._getFilters();this._tableNode=this._getTableNode();var n=[];return this._visibleColors.length<this._getAvailableColors().length&&(this._loadMoreNode=this._getLoadMoreNode(),n.push(this._loadMoreNode)),tag("div","availability",[e,t,i,this._tableNode,n])},_getTableNode:function(){var e=this._visibleColors,t=this._selectedSizes,i=this,n=[],r=[],a=[];t.forEach(function(e){a.push({tag:"div",text:this._productData.product.isPhoneCase()?this._getVariantDisplayName(e):e,className:"region-size-header"})}.bind(this)),this._regions.forEach((function(e){1===e.display&&n.push({tag:"div",className:"region",abbreviation:e.abbreviation,regionName:e.regionName,els:[{tag:"div",text:e.regionNameTranslated,className:"region-name"},{tag:"div",className:"region-size-headers",els:a}]})})),e.forEach((function(e){var a={};a=e.colorCode2?tag("div","color-preview-multi-color",[tag("div",{style:{backgroundColor:e.colorCode}}),tag("div",{style:{backgroundColor:e.colorCode2}})]):tag("div",{className:"color-preview",style:{backgroundColor:e.colorCode}}),r.push(tag("div",{className:"color-option",text:e.colorName},[a])),n.forEach((function(n){var r=[];t.forEach((function(t){var a=i._findVariantByColorAndSize(e,t),o=i._getClassNameForVariant(a,n),s=tag("div","region-color-size-availability "+o);$(s).tooltip({html:!0,placement:"top",title:i._getTooltipByClassName(o,a),container:".availability"}),r.push(s)}));var a=tag("div","region-color-row",r);n.els.push(a)}))}));var o=tag("div","color-column",[this._scrollLeft=tag("div",{className:"scroll-left hide-scroll-arrows",onclick:this._scrollTableLeft}),tag("div","color-name-header",clang("noun","Color")),r]);return this._colorAvailability=tag("div","color-availability",n),this._scrollRight=tag("div",{className:"scroll-right hide-scroll-arrows",onclick:this._scrollTableRight}),tag("div","stock-availability-table",[this._colorDivNode=o,this._colorAvailability,this._scrollRight])},_getTooltipByClassName:function(e,t){return e===E.AVAILABILITY_IN_STOCK?this._inStockLabel:e===E.AVAILABILITY_ON_DEMAND?this._onDemandLabel:e===E.AVAILABILITY_SUPPLIER_OUT_OF_STOCK?this._supplierOutOfStockLabel:e===E.AVAILABILITY_DISCONTINUED?this._discontinuedLabel:e===E.AVAILABILITY_FULLFILLED_ONLY_IN_ONE_COUNTRY?this._getAvailableInDifferentCountryTooltip(t):void 0},_getAvailableInDifferentCountryTooltip:function(e){if(!this._getWhereVariantIsAvailable(e))return this._supplierOutOfStockLabel;var t=this._getWhereVariantIsAvailable(e);return dlang("products","Fulfilled in {country}. Ships to locations worldwide.").replace("{country}",t.regionNameTranslated)},_scrollTable:function(e){var t="left"===e?-1:1,i=$(".region-color-size-availability").width()+2,n=$(this._colorAvailability).prop("scrollLeft"),r=this;$(this._colorAvailability).animate({scrollLeft:n+t*i+"px"},"fast",(function(){r.adjustScrollButtons()}))},adjustScrollButtons:function(){var e=$(this._colorAvailability).prop("clientWidth"),t=$(this._colorAvailability).prop("scrollWidth"),i=$(this._colorAvailability).prop("scrollLeft");t>e?(0!==i?l.a.addClassName(this._colorDivNode,"has-shadow"):(l.a.removeClassName(this._colorDivNode,"has-shadow"),l.a.addClassName(this._scrollLeft,"hide-scroll-arrows")),l.a.removeClassName(this._scrollLeft,"hide-scroll-arrows"),l.a.removeClassName(this._scrollRight,"hide-scroll-arrows"),l.a.addClassName(this._colorAvailability,"wide-table"),i+e>=t&&l.a.addClassName(this._scrollRight,"hide-scroll-arrows"),0===i&&l.a.addClassName(this._scrollLeft,"hide-scroll-arrows")):(l.a.addClassName(this._scrollLeft,"hide-scroll-arrows"),l.a.addClassName(this._scrollRight,"hide-scroll-arrows"),l.a.removeClassName(this._colorDivNode,"has-shadow"),l.a.removeClassName(this._colorAvailability,"wide-table"))},_scrollTableLeft:function(){this._scrollTable("left")},_scrollTableRight:function(){this._scrollTable("right")},_getLoadMoreNode:function(){return tag("div",{className:"col-12 col-lg-11 col-xl-8 text-center",onclick:this._onLoadMoreClicked},[tag("button","pf-btn pf-btn-secondary pf-mt-32",lang("Load more"))])},_getLegendText:function(){return tag("div","row",[tag("div","col-md-9 availability-legend-text",[dlang("products","Make sure your product variants are always in stock by checking their availability. There's always stock in our warehouses for the most popular colors and sizes, but others are ordered on demand. Restocking time is included in our estimated delivery times. If a product variant is not available from our supplier, it'll show up here as \"Supplier Out of Stock\".")])])},_getLegendColors:function(){var e=[],t=[],i=this._getLegendsToShow();if(i.availableInDifferentCountry){var n=i.countriesToDisplay.join(" "+lang("or")+" "),r=dlang("products","Fulfilled only in {countries}.").replace("{countries}",n);t=tag("div","availability-legend",[tag("div","availability-legend-color fulfilledOnlyInOneCountry availability-out-of-stock-background"),tag("div","availability-legend-color-label",r)])}return i.discontinued&&(e=tag("div","availability-legend",[tag("div","availability-legend-color discontinued availability-out-of-stock-background"),tag("div","availability-legend-color-label",this._discontinuedLabel)])),tag("div","pf-my-24",[tag("div","availability-legend",[tag("div","availability-legend-color availability-in-stock-background"),tag("div","availability-legend-color-label",this._inStockLabel)]),tag("div","availability-legend",[tag("div","availability-legend-color availability-on-demand-background"),tag("div","availability-legend-color-label",this._onDemandLabel)]),tag("div","availability-legend",[tag("div","availability-legend-color availability-out-of-stock-background"),tag("div","availability-legend-color-label",this._supplierOutOfStockLabel)]),e,t])},_getFilters:function(){var e=this._getAvailableSizes(),t=[];return e.length<=1?{tag:"div"}:(e.forEach((function(e,i){var n=tag("input",{type:"checkbox",attr:{id:"size-checkbox-"+i,checked:!0},data:{size:e},onclick:this._onSizeClicked});this._sizeCheckboxNodes.push(n);var r=tag("label",{className:"noselect pf-mr-32",style:{display:"inline-block",cursor:"pointer",height:"16px"},attr:{for:"size-checkbox-"+i}},[tag("div","fake-checkbox"),tag("span",{style:{fontWeight:"normal",fontSize:"15px",display:"inline-block",position:"relative",top:"1px",left:"5px"},text:e})]);t.push(tag("div","size-selector",[n,r]))}),this),tag("div","pf-mb-24",[tag("div","pf-mt-24 availability-about-sizes",dlang("products","Filter by size")+":"),t]))},_getRegions:function(){var e=this._productData.regions.regionsMap;return Object.keys(e).map((function(t){var i=e[t];return{name:i,abbreviation:t,regionName:i,regionNameTranslated:lang(i),display:0}}))},_getClassNameForVariant:function(e,t){if(this._productData.product.isTemporaryOutOfStock)return E.AVAILABILITY_SUPPLIER_OUT_OF_STOCK;if(!e)return E.AVAILABILITY_DISCONTINUED;if(-1===this._productData.regions.variantsByRegion[t.regionName].indexOf(e.variantId))return this._getWhereVariantIsAvailable(e)?E.AVAILABILITY_FULLFILLED_ONLY_IN_ONE_COUNTRY:E.AVAILABILITY_SUPPLIER_OUT_OF_STOCK;var i=e.availability;return i?i[t.abbreviation]:""},_getWhereVariantIsAvailable:function(e){for(var t=0;t<this._regions.length;t++){var i=this._regions[t];if(-1!==this._productData.regions.variantsByRegion[i.regionName].indexOf(e.variantId))return i}return!1},_onSizeClicked:function(){var e=[];if(this._sizeCheckboxNodes.forEach((function(t){if(t.checked){var i=t.dataset.size;e.push(i)}})),!e.length&&this._sizeCheckboxNodes.length){var t=this._sizeCheckboxNodes[0];return t.click(),void(t.checked=!0)}this._selectedSizes=e,this._visibleColors=this._sortColorsByAvailability(this._visibleColors),this._refreshTableNode()},_onLoadMoreClicked:function(){var e=this._visibleColors.length,t=this._getAvailableColors().length,i=t-e,n=i>=this._colorCount?this._colorCount:i;this._visibleColors=this._sortColorsByAvailability(this._getAvailableColors()).slice(0,e+n),this._refreshTableNode(),e+n===t&&l.a.clearNode(this._loadMoreNode)},_onWindowResized:function(){this.adjustScrollButtons()},_refreshTableNode:function(){var e=this._getTableNode();$(this._tableNode).replaceWith(e),this._tableNode=e,this.adjustScrollButtons()},_sortColorsByAvailability:function(e){var t=[];return e.forEach((function(e){var i=0,n=0;this._getRegions().forEach((function(t){this._selectedSizes.forEach((function(r){var a=this._findVariantByColorAndSize(e,r);if(!a)return!0;var o=a.availability;if(!o)return!0;var s=o[t.abbreviation];s===E.AVAILABILITY_IN_STOCK&&i++,s===E.AVAILABILITY_ON_DEMAND&&n++}),this)}),this),t.push({color:e,colorName:e.colorName,inStockCount:i,onDemandCount:n})}),this),t.sort((function(e,t){return t.inStockCount-e.inStockCount||t.onDemandCount-e.onDemandCount||t.colorName<e.colorName})).map((function(e){return e.color}))},_getAvailableSizes:function(){var e=this._productData.product.sizes;return e.length||(e=[this._oneSize]),e},_getVariantDisplayName:function(e){return e.replace(/iPhone\s|Samsung\s/g,"").split("/").join(" / ")},_getAvailableColors:function(){var e=this._productData.product.colors;if(e.length)return e;var t=new S.a.ColorPair;return t.colorCode=null,t.colorCode2=null,t.colorName=this._oneColor,[t]},_getLegendsToShow:function(){var e=this,t={countriesToDisplay:[],discontinued:null,availableInDifferentCountry:null};return this._regions.forEach((function(i,n){var r=[],a=!1;e._visibleColors.forEach((function(o){e._getAvailableSizes().forEach((function(s){var l=e._findVariantByColorAndSize(o,s),c=e._getClassNameForVariant(l,i);if(c===E.AVAILABILITY_DISCONTINUED&&(t.discontinued=1),c!==E.AVAILABILITY_FULLFILLED_ONLY_IN_ONE_COUNTRY&&c!==E.AVAILABILITY_DISCONTINUED&&(e._regions[n].display=1),c===E.AVAILABILITY_FULLFILLED_ONLY_IN_ONE_COUNTRY){a=!0;var d=e._getWhereVariantIsAvailable(l);if(d){var u=d.regionNameTranslated||d.regionName;r.push(u)}}}))})),a&&1===e._regions[n].display&&(t.countriesToDisplay=t.countriesToDisplay.concat(r),t.availableInDifferentCountry=1)})),t.countriesToDisplay=t.countriesToDisplay.filter((function(e,i){return t.countriesToDisplay.indexOf(e)===i})),t},_findVariantByColorAndSize:function(e,t){var i=this._productData.variants,n=this._findFirstInArray(i,(function(i){return i.size===t&&i.color===e.colorName})),r=e.colorName===this._oneColor,a=t===this._oneSize;return!n&&r&&(n=this._findFirstInArray(i,(function(e){return e.size===t&&null===e.color}))),!n&&a&&(n=this._findFirstInArray(i,(function(t){return null===t.size&&t.color===e.colorName}))),!n&&r&&a&&(n=this._findFirstInArray(i,(function(e){return null===e.size&&null===e.color}))),n},_findFirstInArray:function(e,t){var i;for(i=0;i<e.length;++i)if(t(e[i],i))return e[i]}});E.AVAILABILITY_FULLFILLED_ONLY_IN_ONE_COUNTRY="fulfilledOnlyInOneCountry",E.AVAILABILITY_SUPPLIER_OUT_OF_STOCK="supplierOutOfStock",E.AVAILABILITY_DISCONTINUED="discontinued",E.AVAILABILITY_ON_DEMAND="onDemand",E.AVAILABILITY_IN_STOCK="inStock",(globalThis||{}).PFProductsPricingAvailability=E;var k={createSchema:function(e){var t={"@context":"https://schema.org","@type":"FAQPage",mainEntity:[]};return e.forEach((function(e){t.mainEntity.push({"@type":"Question",name:e.question,acceptedAnswer:{"@type":"Answer",text:e.answer}})})),Object(l.a)({tag:"script",prop:{type:"application/ld+json"},innerHTML:JSON.stringify(t)})}};(globalThis||{}).PFUtilsFaqSchema=k;var O=i("o0qH"),A=i("a3yQ"),L=i("eYhR"),N=i("nwx2"),D=Class({__construct:function(e){if(e.guidelinesAndTemplates&&Object.keys(e.guidelinesAndTemplates).length>0){var t=new N.a("secondary"),i=[],n=Object.keys(e.guidelinesAndTemplates),r=Object(O.a)(e.product.productId).getTechniqueFromMemory()||n[0];for(var a in e.guidelinesAndTemplates)if(e.guidelinesAndTemplates.hasOwnProperty(a)){var o=e.guidelinesAndTemplates[a],s=new L.a;s.caption=S.a.LABELS[a],s.isActive=a===r;var c=tag("div",s.isActive?"":"hidden",[new A.a(o.templates,a),tag("div",{style:{wordWrap:"break-word"},innerHTML:o.guidelines})]);i.push(c),s.onclick=function(t){for(var n=Object.keys(e.guidelinesAndTemplates).indexOf(t),r=0,a=i.length;r<a;r++)if(i.hasOwnProperty(r)){var o=i[r];r===n?l.a.removeClassName(o,"hidden"):l.a.addClassName(o,"hidden")}}.bind(this,a),t.add(s)}n.length<2&&l.a.addClassName(t.node,"hidden"),this.node=tag("div","",[t,tag("div","pf-mt-24",i)])}else{var d=Object(O.a)(e.product.productId).getTechniqueFromMemory()||e.product.type;this.node=tag("div","",[new A.a(e.templates,d),tag("div",{style:{wordWrap:"break-word"},innerHTML:e.guidelines})])}}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogProductTabsGuidelines=D);var R=i("xeH2"),x=i.n(R),F=i("97Au"),M=Class({__construct:function(e){var t=new F.a.Par,i=new F.a(t);i.setTitle(dlang("products","Print care instructions")),i.setContent(this._getContent(e)),i.show()},_getContent:function(e){return tag("div","",[tag("div","pf-d-flex pf-mb-12",[tag("img",{src:"/static/images/icons/01-wash-cold.svg",className:"pf-mr-12",style:{height:"45px"}}),tag("p","pf-m-0",e.careInstructions[0])]),tag("div","pf-d-flex pf-mb-12",[tag("img",{src:"/static/images/icons/02-thubmle-low.svg",className:"pf-mr-12",style:{height:"45px"}}),tag("p","pf-m-0",e.careInstructions[1])]),tag("div","pf-d-flex pf-mb-12",[tag("img",{src:"/static/images/icons/03-iron-cool.svg",className:"pf-mr-12",style:{height:"45px"}}),tag("p","pf-m-0",e.careInstructions[2])]),tag("div","pf-d-flex",[tag("img",{src:"/static/images/icons/04-no-dry-clean.svg",className:"pf-mr-12",style:{height:"45px"}}),tag("p","pf-m-0",e.careInstructions[3])])])}});window&&((globalThis||{}).PFProductsCatalogProductPrintCare=M);var B=i("cCrT"),V=i("9eNC"),j=Class({_tabItems:[],productData:null,_onVariantPicked:null,isTabEventDispatching:!0,_availability:null,__construct:function(e,t){if(this._tabItems=[{id:"description",title:lang("Description"),callback:this._renderDescription}],e.shipping&&this._tabItems.push({id:"shipping",title:lang("Shipping"),callback:this._renderShipping.bind(this)}),e.product.shouldShowFileGuidelineTab()&&this._tabItems.push({id:"guidelines",title:lang("File guidelines"),callback:this._renderGuidelines.bind(this)}),e.product.shouldShowAvailabilityTab()){this._tabItems.push({id:"availability",title:lang("Availability"),callback:this._renderAvailability}),V.n("showProductAvailability",function(){this.setActive("availability"),x()("html, body").animate({scrollTop:x()(this.node).offset().top-x()(".catalog__product__tabs .pf-tabs").outerHeight()},1e3)}.bind(this))}e.product.shouldShowSizingTab()&&(this._tabItems.push({id:"sizing",title:lang("Sizing"),callback:this._renderSizing}),this._tabItems.push({id:"using-tips",title:lang("Using tips"),callback:this._renderUsingTips})),this.productData=e,this._isTestingProduct()&&this._tabItems.push({id:"faq",title:lang("FAQ"),callback:this._renderFaq}),this._onVariantPicked=t,this.node=tag("div","catalog__product__tabs pf-pt-48 pf-mb-64",[this._tabs=new N.a("primary center-fixed",!0),this._tabContent=tag("div","pf-text-muted")]),this._renderTabs()},setActive:function(e){this._tabs.setActiveTab(this.getTab(e))},getActiveTab:function(){return this.getTab((new B.a).hash)},getTab:function(e){var t=this._tabs.items.slice();if(e){var i=t.filter((function(t){return t.customId===e}));if(i.length)return i.shift()}return t.shift()},_renderTabs:function(){this._tabs.items=this._tabItems.map(this._renderTab),this._tabs.render(),this.isTabEventDispatching=!1,this._tabs.setActiveTab(this.getActiveTab())},_renderTab:function(e){var t=new L.a;return t.caption=e.title,t.customId=e.id,this._isTestingProduct()?(this._renderTabContentTest(this._getContent(e),e.id),t.onclick=this._showTabContent.bind(this,e.id)):t.onclick=this._renderTabContent.bind(this,this._getContent.bind(this,e),e.id),t},_getContent:function(e){return tag("div","clearfix row",[e.key?tag("div",{className:"availability"===e.id?"col-md-12":"col-md-9 col-xl-7",innerHTML:e.key.split(":").map(this._getProductDataValue.bind(this)).join("")}):"",e.callback?tag("div","availability"===e.id?"col-md-12":"col-md-9 col-xl-7",[e.callback()]):""])},_getProductDataValue:function(e){return this.productData[e]?this.productData[e]:""},_renderTabContent:function(e,t){l.a.clearNode(this._tabContent),tag("div","pf-pt-24",[e()]).append(this._tabContent),this._shouldDispatchTabEvent()&&v.a.createAndDispatch(d.a.EVENT_TAB_CHOOSE,{activeTab:"description"!==t?t:"",activeProductId:this.productData.product.productId}),x()('[data-toggle="tooltip"]').tooltip(),null!==this._availability&&this._availability.adjustScrollButtons()},_isTestingProduct:function(){return 308===this.productData.product.productId},_renderTabContentTest:function(e,t){tag("div",{className:"pf-pt-24 hidden",id:t},[e]).append(this._tabContent),null!==this._availability&&this._availability.adjustScrollButtons()},_showTabContent:function(e){this._shouldDispatchTabEvent()&&v.a.createAndDispatch(d.a.EVENT_TAB_CHOOSE,{activeTab:"description"!==e?e:"",activeProductId:this.productData.product.productId}),x()(this._tabContent).find("#"+this.activeTab).addClass("hidden"),x()(this._tabContent).find("#"+e).removeClass("hidden"),this.activeTab=e},_renderDescription:function(){var e=tag("div",{className:"pf-mb-24",innerHTML:this._getProductDataValue("productDescription")});return this.productData.product.careInstructions.length&&tag("div",{className:"pf-mb-24",innerHTML:this._getProductDataValue("printCareInstructionsHtml")}).append(e),this.productData.warnings&&this.productData.warnings.length&&tag("div",null,this.productData.warnings.map(this._renderWarning)).append(e),x()(e).find('a[href="#care-instructions"]').on("click",function(e){e.preventDefault(),new M(this.productData.product)}.bind(this)),e},_renderWarning:function(e){return tag("div",{className:"pf-mb-24 pf-alert pf-alert--warning-gray",id:e.htmlId},[tag("span","pf-text-brown pf-alert__icon icon-warning-triangle"),tag("div",{innerHTML:e.htmlDescription})])},_renderGuidelines:function(){return this.productData.guidelines.length?new D(this.productData):""},_renderFaq:function(){var e=[{question:"Can you print an inside/outside label on the Bella + Canvas baby one piece?",answer:"No, it doesn't come with labelling options."},{question:"What sizes does the garment come in?",answer:"The sizes available are 3-6M, 6-12M, 12-18M, 18-25M."},{question:"What's the fit of the Bella + Canvas baby one piece?",answer:"It runs true to size."},{question:"What's the baby one piece made from?",answer:"It's made from 100% combed and ring-spun cotton (except for heather colors)."},{question:"Will you be adding all-over print baby one pieces?",answer:'There\'s no ETA, but in the meantime feel free to add a <a href="/feature-request">Feature Request!</a>'}];return k.createSchema(e).append(document.body),tag("div",null,[tag("h2","pf-h3 pf-mt-0","Frequently Asked Questions"),tag("hr","pf-m-0"),e.map(function(e,t){return this._renderAccordion(e,t)}.bind(this))])},_renderAccordion:function(e,t){return tag("div","pf-border-bottom",[tag("div",{className:"accordion__header",attr:{"data-toggle":"collapse","data-target":".accordion__header:hover + .accordion__content"},onclick:this._onAccordionClicked},[tag("p","pf-py-16 pf-m-0 pf-h5 pf-text-dark",[tag("i","pf-i pf-i-chevron-down pf-text-gray pf-i-24 accordion__icon"+(0===t?" opened":"")),e.question])]),tag("p",{className:"accordion__content pf-text-muted pf-ml-24 collapse"+(0===t?" in":""),innerHTML:e.answer})])},_onAccordionClicked:function(e){x()(e.target.children[0]).hasClass("opened")?x()(e.target.children[0]).removeClass("opened"):x()(e.target.children[0]).addClass("opened")},_renderInsideLabel:function(){var e=tag("div",{innerHTML:this._getProductDataValue("insideLabel")});return setTimeout((function(){PF.Gallery.gallery_items=[],PF.Gallery.init()}),0),e},_renderAvailability:function(){return this._availability=new E,this._availability.initAndGetContainerNode(this.productData)},_renderSizing:function(){return tag("div",{innerHTML:this._getProductDataValue("tabSizing")})},_renderShipping:function(){return tag("div",{innerHTML:this.productData.shipping})},_renderUsingTips:function(){return tag("div",{innerHTML:this._getProductDataValue("tabUsingTips")})},_shouldDispatchTabEvent:function(){return!!this.isTabEventDispatching||(this.isTabEventDispatching=!0,!1)}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogProductTabs=j);var U=Class({_productData:null,columnTypes:["technique","printArea","branding","features"],__construct:function(e,t){this._productData=e;var i=!!this._productData.getPrintInfo("branding"),n=this._productData.getPrintInfo("features").length>0,r=this._productData.getPrintInfo("printArea").length>0,a=this._productData.getPrintInfo("technique").length>0&&(!this._productData.product.isStockProduct()||this._productData.product.isEmbroiderySample());if(r||i||n||a){var o=[lang("Branding options")];i&&this._isDTGAndMultiTechnique()&&o.push(lang("(DTG only)")),this.node=tag("div","whitesmoke pf-pt-32 pf-pb-4",[tag("div","container catalog__product__print-techniques__container",[r&&this._getColumn("printArea",tag("div","",[tag("p","",[lang("File size")]),tag("div","",this._productData.getPrintInfo("printArea").map(function(e){return tag("div","pf-mb-16",[tag("h3","",[e.label+this._getTechniqueLabel(e)]),e.downloadUrl?tag("a",{className:"pf-link",href:e.downloadUrl},[dlang("products","Get print file template")]):""])}.bind(this)))])),i&&this._getColumn("branding",tag("div","",[tag("p","",o.join(" ")),tag("h3",{innerHTML:this._productData.getPrintInfo("branding")}),tag("a",{className:"pf-link",onclick:t},[dlang("products","See guidelines")])])),a&&this._getColumn("technique",tag("div","",[tag("p","",[dlang("products","Technique")]),tag("div","",this._productData.getPrintInfo("technique").map((function(e,t,i){return tag("span","",[tag("h3",{innerHTML:e}),t<i.length-1?tag("div","pf-text-muted",[lang("or")]):""])}))),this._productData.isLogged?"":tag("span",{innerHTML:"&nbsp;"})])),n&&this._getColumn("features",tag("div","",[tag("p","",[dlang("products","Features")]),tag("div","",this._productData.getPrintInfo("features").map((function(e){return tag("span","",[tag("h3",{innerHTML:e})])})))]))])])}else this.node=tag("div")},_getTechniqueLabel:function(e){var t="";return e.techniqueLabel&&(t=" ("+e.techniqueLabel+")"),t},_getColumn:function(e,t){var i="catalog__product__print-techniques";return tag("div",i,[tag("div",i+"__image "+i+"__"+e+"__image"),tag("div",i+"__text",[t])])},_isDTGAndMultiTechnique:function(){var e=this._productData.product.availableTechniques;return-1!==e.indexOf(S.a.TYPE_T_SHIRT)&&e.length>1}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogProductPrintInfo=U);var z=i("Op/+"),G=Class({images:[],videos:[],productTitle:"",onVideoClick:null,onImageClick:null,currentSlide:0});window&&((globalThis||{}).PFProductsCatalogProductMediaGalleryPar=G);var H=i("yV0Q"),Y=i("FHCs"),q=i("E17x");function W(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var K=Class({images:[],videos:[],_onVideoClick:null,_onImageClick:null,currentSlide:0,productTitle:"",emptyImage:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",__construct:function(e){this._onVideoClick=e.onVideoClick,this._onImageClick=e.onImageClick,this.currentSlide=e.currentSlide,this.productTitle=e.productTitle,this.original=null,this.canClick=!1,this.node=tag("div","row catalog__slick",[this._thumbContainer=tag("div","col-sm-2 col-md-3 col-lg-2 hidden-xs",[this._nodeThumbnails=tag("div"),this._nodeVideo=tag("div")]),this._imgContainer=tag("div","col-sm-10 col-md-9 col-lg-10",[this._tooltipNode=this._renderTooltip(),this._nodeImages=tag("div")])]),e.images.length&&this.render(e.images,e.videos),$(this._nodeThumbnails).on("mouseenter",".slick-slide",function(e){var t=$(e.currentTarget),i=$(t).data("slick-index");if(!$(t).hasClass("slick-current")){this.original=$(this._nodeImages).find(".slick-current img");var n=$(this.original).clone(),r=$(this._nodeImages).find("[data-slick-index="+i+"] img"),a=r[0].hasAttribute("data-lazy")?r.attr("data-lazy"):r.attr("src"),o=n.attr("src",a);$(o).addClass("cloned-image");var s=$(this._nodeImages).find(".slick-current div div");$(s).append(o),$(this.original).addClass("pf-d-none")}this._updateTooltipInfo(this._nodeImages.slick.$slides[i])}.bind(this)),$(this._nodeThumbnails).on("mouseleave",".slick-slide",function(){$(".cloned-image").remove(),$(this.original).removeClass("pf-d-none");var e=$(this._nodeImages).find(".slick-current div div")[0];this._updateTooltipInfo(e)}.bind(this)),window.addEventListener("keyup",this._onKeyUp.bind(this))},render:function(e,t){this.imagesToLazyLoad=0,this.images=this._setFilteredImages(e),this.videos=this._setVideos(e,t),this._setThumbs(),this._setImages(),this._initSlickSliders(),this._updateTooltipInfo(this._nodeImages.slick.$slides[0])},_updateBackgroundColor:function(e){$(this._nodeImages).find("img").css("background","0% 0% / contain "+e),$(this._nodeThumbnails).find("img").css("background",e)},_updateBackgroundImage:function(e){$(this._nodeImages).find("img").css("background","url("+e+") 0% 0% / contain"),$(this._nodeThumbnails).find("img").css("background","url("+e+")").css("background-size","100%")},_updateImgUrl:function(e,t){var i=this;["src","data-lazy"].forEach((function(n){$(i._nodeImages).find("img[".concat(n,'*="').concat(e,'"]')).attr(n,t);var r=e.replace("_l","_t"),a=t.replace("_l","_t");$(i._nodeThumbnails).find("img[".concat(n,'*="').concat(r,'"]')).attr(n,a)}))},_updateImgFromVideo:function(e){this._nodeImages.querySelectorAll('img[src="'+e+'"]').forEach((function(e){e.classList.remove("hidden");var t=e.previousElementSibling;t&&t.remove()}))},_updateVideoFromImg:function(e,t,i){this._nodeImages.querySelectorAll('img[src="'+e+'"]').forEach(function(n){n.classList.add("hidden");var r=n.previousElementSibling;r?r.classList.remove("hidden"):(r=this._renderVideoNode(t,e,this._onImageClick&&this._onImageClick.bind(this,i)),n.parentElement.insertBefore(r,n),r.load())}.bind(this))},_updateVideoFromVideo:function(e,t,i,n){this._nodeImages.querySelectorAll('video source[src="'+t+'"]').forEach(function(t){var r=this._renderVideoNode(e,i,this._onImageClick&&this._onImageClick.bind(this,n));t.parentElement.replaceWith(r),r.load()}.bind(this))},_setImages:function(){l.a.hasClassName(this._nodeImages,"slick-initialized")&&$(this._nodeImages).slick("destroy"),l.a.clearNode(this._nodeImages),this.images.map(this._renderImage);for(var e=0;e<this.images.length;e++)this.images[e].forceBackgroundColor&&this._updateBackgroundColor(this.images[e].forceBackgroundColor),this.images[e].forceBackgroundImage&&this._updateBackgroundImage(this.images[e].forceBackgroundImage)},_setThumbs:function(){l.a.hasClassName(this._nodeThumbnails,"slick-initialized")&&$(this._nodeThumbnails).slick("destroy"),l.a.clearNode(this._nodeThumbnails),this.images.concat(this.videos).map(this._renderThumbnail)},_adjustThumbnailHeight:function(){var e=this._nodeThumbnails.querySelectorAll(".slick-slide"),t=-1;e.forEach((function(e){var i=e.getBoundingClientRect().height;i>t&&(t=i)})),e.forEach((function(e){e.style.minHeight=t+"px"}))},_initSlickSliders:function(){var e=this;$(this._nodeThumbnails).off("lazyLoaded").on("lazyLoaded",function(e,t){t.setDimensions(),this._adjustThumbnailHeight(),t.setPosition()}.bind(this)).slick({slidesToShow:this._nodeVideoButton?4:5,slidesToScroll:1,asNavFor:this._nodeImages,lazyLoad:"ondemand",dots:!1,vertical:!0,arrows:!0,verticalSwiping:!1,speed:300,focusOnSelect:!0,accessibility:!0,focusOnChange:!1,adaptiveHeight:!1,prevArrow:'<div role="button" class="catalog__slick__arrow catalog__slick__arrow--vertical catalog__slick__arrow--top"><div class="catalog__slick__arrow-bg"><span class="pf-i pf-i-chevron-up"></span></div></div>',nextArrow:'<div role="button" class="catalog__slick__arrow catalog__slick__arrow--vertical catalog__slick__arrow--bottom"><div class="catalog__slick__arrow-bg"><span class="pf-i pf-i-chevron-down"></span></div></div>'}).on("keyup",".slick-slide",(function(t){"enter"===t.key.toLowerCase()&&$(e._nodeImages).slick("slickGoTo",$(t.target).data("slick-index"))})),setTimeout((function(){$(e._nodeThumbnails).find(".slick-slide").attr({role:"button",tabindex:"0"})}),0),$(this._nodeImages).off("beforeChange").on("beforeChange",function(e,t,i,n){this.canClick=!1,this.currentSlide=n}.bind(this)).on("afterChange",function(e,t,i,n){this._updateTooltipInfo(t.$slides[i]),this.canClick=!0,$(this._nodeThumbnails).find(".slick-slide").attr({role:"button",tabindex:"0"})}.bind(this)).off("lazyLoaded").on("lazyLoaded",(function(e,t){this.imagesToLazyLoad<1&&t.animateHeight(),this.imagesToLazyLoad++})).slick({slidesToShow:1,slidesToScroll:1,arrows:!0,fade:!1,asNavFor:this._nodeThumbnails,lazyLoad:"ondemand",swipeToSlide:!0,speed:300,prevArrow:'<div role="button" aria-label="'+lang("Navigate to previous image")+'" class="catalog__slick__arrow catalog__slick__arrow--horizontal catalog__slick__arrow--left"><div class="catalog__slick__arrow-bg"><span class="pf-i pf-i-chevron-left"></span></div></div>',nextArrow:'<div role="button" aria-label="'+lang("Navigate to next image")+'" class="catalog__slick__arrow catalog__slick__arrow--horizontal catalog__slick__arrow--right"><div class="catalog__slick__arrow-bg"><span class="pf-i pf-i-chevron-right"></span></div></div>',dots:!1,responsive:[{breakpoint:d.a.BREAKPOINT_DOTS,settings:{dots:!0}}]}).find(".catalog__slick__arrow").attr("tabindex","0").on("keyup",(function(e){"enter"===e.key.toLowerCase()&&e.target.click()})),$(this._nodeImages).slick("slickSetOption","speed",0).slick("slickGoTo",this.currentSlide).slick("slickSetOption","speed",300),1===this.images.length&&$(this._nodeImages).addClass("one-image"),this.images.length+this.videos.length<=5&&$(this._nodeThumbnails).find(".slick-list").addClass("not-sliding")},_getThumb:function(e,t){return e.originalLink?e.originalLink:e.actualThumbLink&&!t?e.actualThumbLink:e.thumbLink},_getProductAltText:function(e){return this.productTitle+" thumbnail "+(parseInt(e)+1)},_renderVideoNode:function(e,t,i){i instanceof Function||(i=function(){});var n=tag("video",{className:"img-responsive",onclick:i,attr:{poster:t,preload:"true",playsinline:"true","webkit-playsinline":"true"}},[tag("source",{attr:{src:e,type:"video/mp4"}})]);return n.muted=!0,n.loop=!0,n.autoplay=!0,n.playsinline=!0,n.controls=!1,n.preload=!0,n},_renderImage:function(e,t){var i=!1;!e.videoLink||e.videoId||e.videoThumbnail||(i=!0),this._imageModelInfo=tag("div",{id:"model-info-"+e.variantImageId,className:"catalog__product__model-info pf-d-none text-left"}),this._getModelInfo(e.modelInfo),tag("div","",[i?this._renderVideoNode(e.videoLink,this._getThumb(e,!0),this._onImageClick&&this._onImageClick.bind(this,t)):"",this._imageModelInfo,tag("img",{className:"img-responsive "+(i?"hidden":""),onclick:this._onImageClick&&this._onImageClick.bind(this,t),attr:{"data-lazy":this._getThumb(e,!0),src:this.emptyImage,alt:this._getProductAltText(t)}})]).append(this._nodeImages)},_updateTooltipInfo:function(e){if(e){var t=e.querySelector('[id^="model-info-"]'),i=t.querySelector(".model-info-content");if(this._tooltipNode.classList.add("pf-d-none"),t.childElementCount){var n=t.cloneNode(!0);n.classList.remove("pf-d-none"),i&&this._tooltipNode.classList.remove("pf-d-none"),this._tooltipNode.setAttribute("data-original-title",n.outerHTML),this._tooltipNode.setAttribute("aria-labeledby",t.id)}}},_renderTooltip:function(){var e=tag("span",{className:"catalog__product__model-badge pf-d-none",attr:{"data-toggle":"tooltip","data-placement":"bottom","data-container":"body","data-html":"true",tabindex:"0"},els:[tag("span",{className:"pf-badge pf-badge-location pf-bg-dark catalog__product__model-tooltip",attr:{"aria-hidden":"true"}},[tag("img",{src:"/static/images/products-catalog/ruler.svg",alt:"Ruler"})])]});return $(e).tooltip({html:!0,template:'\n                    <div class="tooltip catalog__product__tooltip" style="z-index: 99;">\n                         <div class="tooltip-arrow"></div>\n                         <div class="tooltip-inner catalog__product__tooltip-content"></div>\n                    </div>\n                '}),e},_getModelInfo:function(e){if(e)for(var t=JSON.parse(e),i=0;i<t.length;i++)this._getModelInfoText(t[i],t.length,i).append(this._imageModelInfo)},_getModelInfoText:function(e,t,i){for(var n=tag("div","model-info-content"+(i+1<t?" pf-mb-16":""),[]),r=0;r<e.length;r++)if(e[r].key!==H.c){var a=void 0;(a=e[r].key===H.b?this._getCommentText(e):e[r].key===H.g?this._getSizeText(e):tag("p","",[this._getModelKeyText(e,e[r].key),e[r].value]))&&a.append(n)}return n},_getModelKeyText:function(e,t){var i,n=(W(i={},H.h,dclang("products","tooltip","Waist circumference")),W(i,H.a,dclang("products","tooltip","Chest circumference")),W(i,H.f,dclang("products","tooltip","Height")),i);return tag("b","",[n[t]+": "])},_getCommentText:function(e){var t=e.find((function(e){return e.key===H.b}));return t?tag("p",{className:"pf-mt-16 pf-italic",style:{"white-space":"normal"}},t.value):null},_getSizeText:function(e){var t=e.find((function(e){return e.key===H.g})),i="";return i=e.find((function(e){return e.key===H.c})).value===H.e?dclang("products","tooltip","Female model is wearing <b>size {size}</b>").replace("{size}",t.value):dclang("products","tooltip","Male model is wearing <b>size {size}</b>").replace("{size}",t.value),tag("p",{innerHTML:i})},_renderThumbnail:function(e,t){if(e.videoLink&&(e.videoId||e.videoThumbnail)){this._nodeVideoButton&&(l.a.clearNode(this._nodeVideoButton),l.a.clearNode(this._nodeVideo)),this._nodeVideoButton=document.querySelector(".single-product-view__video-button");var i=tag("img",{className:"img-responsive center-block",src:this._getThumb(e)}),n=e.extension?"video/"+e.extension:e.type,r={loop:!0};q.c.isIOS()||(r.autoplay=!0),["video/mp4","video/webm"].indexOf(n)<0||(i=tag("video",{className:"img-responsive center-block",width:"80px",height:"100px",prop:r},[tag("source",{attr:{src:this._getThumb(e),type:n}})])),tag("div",{className:"pf-mt-8 img-holder video-gif pf-d-none pf-d-sm-block pf-keydown-click",onclick:this._onVideoClick.bind(this,e.videoLink),attr:{role:"button",tabindex:"0","aria-label":lang("Watch product showcase")}},[i,tag("div")]).append(this._nodeVideo)}else tag("div","pf-mt-8 img-holder "+(this.currentSlide===t?" slick-current":""),[tag("img",{className:"img-responsive",onclick:function(){$(this._nodeImages).slick("slickGoTo",t,!0)}.bind(this),attr:{"data-lazy":this._getThumb(e),src:Y.a,alt:this._getProductAltText(t)}})]).append(this._nodeThumbnails)},_setVideos:function(e,t){var i=e.filter((function(e){if(e.videoThumbnail)return!0}));return i.length>0?i:t},_setFilteredImages:function(e){return e.filter((function(e){if(!e.videoThumbnail)return!0}))},_onKeyUp:function(e){"keyup"===e.type&&(e.keyCode===$.ui.keyCode.RIGHT&&$(this._nodeImages).slick("slickNext"),e.keyCode===$.ui.keyCode.LEFT&&$(this._nodeImages).slick("slickPrev"))}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogProductMediaGallery=K);var Z=Class({product:null,images:[],_tempImages:[],activeSlideIndex:0,__construct:function(e,t){this.productData=e,this._colorPicker=t,this._colorPickerNode=t.node.parentNode,this.product=e.product;var i=new G;i.onVideoClick=this._openVideoModal,i.productTitle=this.product.getFullTitle(),i.onImageClick=this._openImageModal,this._tempImages=e.images,this.node=tag("div","",[this.gallery=new K(i)]),window.addEventListener("keyup",this._onCloseModal.bind(this))},_getMatchingImages:function(e,t){return this._tempImages.filter(function(i){if(!i.variantMaps.length)return i.active;if(!i.active)return!1;var n=(new z.PFProductsCatalogUtilsStore).categories.getPath();for(var r in!n.length&&t&&((n=(new z.PFProductsCatalogUtilsStore).categories).setActiveCategoryId(t),n=n.getPath()),i.variantMaps)if(this._doesMapMatchVariant(i.variantMaps[r],e,n))return!0;return!1}.bind(this)).sort((function(e,t){return e.order-t.order}))},_doesMapMatchVariant:function(e,t,i){var n=i.some((function(t){return e.categoryId==t.id}));if(e.categoryId&&!n)return!1;var r=!e.color||e.color==t.color,a=!e.size||e.size==t.size;return r&&a},setVariantImage:function(e){var t=[{thumbLink:e.urlImage}].concat(this.product.productThumbnailPictures),i=this._getMatchingImages(e,this.product.favoriteCatalogCategoryId);if(i.length){var n=i.map((function(t){var i;for(var n in t.backgroundOverride)n==e.color&&(i=t.backgroundOverride[n]);var r=null,a=null,o=null;return t.useGeneratorColor&&i?(r=i.colorCode,a=i.image,o=i.type):t.useVariantColor&&(r=t.useVariantColor?e.colorCode:null),{thumbLink:t.largeUrl,actualThumbLink:t.thumbUrl,originalLink:t.originalUrl,forceBackgroundImage:a,forceBackgroundColor:r,videoLink:t.videoUrl,videoThumbnail:t.videoThumbnail,type:o,extension:t.extension,modelInfo:t.modelInfo,variantImageId:t.variantImageId}})),r=!1,a=n.filter((function(e){return!!e.videoThumbnail||(r=!0,!1)}));t=!r&&a.length>0?t.concat(a):n}this._updateGallery(t)},_updateGallery:function(e){if(0===this.images.length)return this.images=e,void this.gallery.render(this.images,this.product.productVideoData);var t=this.images.map((function(e){return e.thumbLink})),i=e.map((function(e){return e.thumbLink}));if(t.length!==i.length)return this.images=e,void this.gallery.render(this.images,this.product.productVideoData);for(var n=0;n<e.length;n++)this.images[n].thumbLink!==e[n].thumbLink&&this.gallery._updateImgUrl(this.images[n].thumbLink,e[n].thumbLink),this.images[n].forceBackgroundColor!==e[n].forceBackgroundColor&&this.gallery._updateBackgroundColor(e[n].forceBackgroundColor),this.images[n].forceBackgroundImage!==e[n].forceBackgroundImage&&e[n].forceBackgroundImage&&this.gallery._updateBackgroundImage(e[n].forceBackgroundImage),!this.images[n].videoLink&&e[n].videoLink&&this.gallery._updateVideoFromImg(e[n].thumbLink,e[n].videoLink,n),this.images[n].videoLink&&!e[n].videoLink&&this.gallery._updateImgFromVideo(e[n].thumbLink),this.images[n].videoLink&&e[n].videoLink&&this.images[n].videoLink!==e[n].videoLink&&this.gallery._updateVideoFromVideo(e[n].videoLink,this.images[n].videoLink,e[n].thumbLink,n);this.images=e},_openVideoModal:function(e){var t,i=new F.a.Par;i.title=this.product.getFullTitle(),i.modalDialogClass="modal-lg",i.onClose=function(){t.remove()},(t=new F.a(i)).setContent(tag("iframe",{src:e,attr:{width:"100%",height:"480px",frameborder:"0"}})),t.show()},_openImageModal:function(e){if(window.innerWidth<d.a.BREAKPOINT_DOTS||!this.gallery.canClick)return!1;this.gallery.isModal?this._onCloseModal():($(this.gallery._thumbContainer).removeClass("col-md-3 col-lg-2").addClass("col-md-2 col-lg-1"),$(this.gallery._imgContainer).removeClass("col-md-9 col-lg-10").addClass("col-md-10 col-lg-11"),$(document.body).addClass("modal-open"),this._galleryModal=tag("div","catalog__slick__modal",[tag("div","container",[tag("div","modal-header",[tag("button",{className:"close",onclick:function(e,t){this._onCloseModal(t)}.bind(this),innerHTML:"&times;"})]),this.gallery,tag("div","modal-footer catalog__color-picker",[this._colorPicker])])]).append(this.node),$(this.gallery._nodeImages).slick("setPosition"),$(this.gallery._nodeThumbnails).slick("setPosition"),$(this.gallery.node).css("padding-bottom",$(".catalog__color-picker").outerHeight()),this.gallery.isModal=!0)},_onCloseModal:function(e){e&&"keyup"===e.type&&27!==e.keyCode||this._galleryModal&&($(this.gallery._thumbContainer).addClass("col-md-3 col-lg-2").removeClass("col-md-2 col-lg-1"),$(this.gallery._imgContainer).addClass("col-md-9 col-lg-10").removeClass("col-md-10 col-lg-11"),$(document.body).removeClass("modal-open"),this._galleryModal.remove(),this._colorPicker.append(this._colorPickerNode),this.gallery.append(this.node),$(this.gallery._nodeImages).slick("setPosition"),$(this.gallery._nodeThumbnails).slick("setPosition"),this.gallery.isModal=!1)}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogProductMedia=Z);var Q=i("5OoY"),X=i("SBaP"),J=i("x0He");function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ne=function(){function e(t){ee(this,e),ie(this,"columns",0),ie(this,"htmlId",""),ie(this,"reviews",[]),ie(this,"isStatic",!1),this.columns=t.columns,this.htmlId=t.htmlId,this.reviews=t.reviews,this.isStatic=t.isStatic}var t,i,n;return t=e,(i=[{key:"render",value:function(){var e=12!==this.columns?"col-lg-4":"",t="reviews-landing"===this.htmlId?"pf-mb-40":"";return this.reviews.forEach((function(i){i.columnsClass=e,i.className=t})),this.reviews}}])&&te(t.prototype,i),n&&te(t,n),e}(),re=function e(t){ee(this,e),this.columns=t.columns||0,this.htmlId=t.htmlId||"",this.reviews=t.reviews||[],this.isStatic=t.isStatic||!1};function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=ue(e);if(t){var r=ue(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ce(this,i)}}function ce(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?de(e):t}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function pe(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function ge(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var fe=new WeakMap,_e=new WeakMap,me=new WeakMap,ve=new WeakMap,ye=new WeakMap,be=new WeakMap,Pe=new WeakMap,Ce=new WeakMap,Te=new WeakMap,Ie=new WeakMap,we=new WeakMap,Se=new WeakSet,Ee=new WeakSet,ke=new WeakSet,Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(i,e);var t=le(i);function i(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=t.call(this),ke.add(de(r)),Ee.add(de(r)),Se.add(de(r)),fe.set(de(r),{writable:!0,value:void 0}),_e.set(de(r),{writable:!0,value:!1}),me.set(de(r),{writable:!0,value:""}),ve.set(de(r),{writable:!0,value:""}),ye.set(de(r),{writable:!0,value:!1}),be.set(de(r),{writable:!0,value:!1}),Pe.set(de(r),{writable:!0,value:!1}),Ce.set(de(r),{writable:!0,value:!1}),Te.set(de(r),{writable:!0,value:""}),Ie.set(de(r),{writable:!0,value:0}),we.set(de(r),{writable:!0,value:!1}),ge(de(r),Ie,e),ge(de(r),we,n),r.node=tag("div","row featured-items"),window.addEventListener("resize",pe(de(r),Ee,Le).bind(de(r))),pe(de(r),ke,Ne).call(de(r)),r}return i}(X.a),Ae=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,a,o,s,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.success){e.next=2;break}return e.abrupt("return");case 2:pe(this,Ee,Le).call(this),ge(this,_e,t.addBorderAroundImage),ge(this,me,t.blockTitle),ge(this,ve,t.htmlId),ge(this,ye,!!t.isSlider),ge(this,be,!!t.isCenter),ge(this,Pe,!!t.isStatic),ge(this,Ce,!!t.isWhiteSmoke),ge(this,Te,t.subtitle),n=new re({columns:t.columns,htmlId:t.htmlId,reviews:t.reviews,isStatic:t.isStatic}),r=new ne(n),a="reviews-landing"===he(this,ve)?"pf-pt-64 pf-pb-24":"pf-py-64",o=he(this,Ce)?"pf-bg-lighter":"",s=he(this,Te)?"pf-mb-24":"pf-mb-40",l={addBorderAroundImage:he(this,_e),blockTitle:he(this,me),htmlId:he(this,ve),isSlider:he(this,ye),isCenter:he(this,be),subtitle:he(this,Te)},(c=new J.b).components={"featured-reviews":function(){return i.e(233).then(i.bind(null,"s/Bh"))}},c.template='\n            <featured-reviews\n                :items="items"\n                :className="className"\n                :whiteSmokeClass="whiteSmokeClass"\n                :blockTitleClass="blockTitleClass"\n                :templateData="templateData"\n            />\n        ',c.initialData={className:a,whiteSmokeClass:o,blockTitleClass:s,templateData:l},c.initialData.items=r.render(),ge(this,fe,new J.a(c)),he(this,fe).append(this.node);case 24:case"end":return e.stop()}}),e,this)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){oe(a,n,r,o,s,"next",e)}function s(e){oe(a,n,r,o,s,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),Le=function(){var e=(window.innerWidth-document.body.getBoundingClientRect().width)/2;this.node.style.marginLeft="calc(50% - 50vw + ".concat(e,"px)"),this.node.style.marginRight="calc(50% - 50vw + ".concat(e,"px)")},Ne=function(){Object(c.a)("product-catalog/get-featured-reviews-data",{productOrCategoryId:he(this,Ie),isCatalog:he(this,we)},pe(this,Se,Ae).bind(this))};function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Be(e);if(t){var r=Be(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Fe(this,i)}}function Fe(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?Me(e):t}function Me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function je(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var Ue=new WeakMap,ze=new WeakMap,Ge=new WeakSet,He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(i,e);var t=xe(i);function i(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=t.call(this),Ge.add(Me(n)),Ue.set(Me(n),{writable:!0,value:{}}),ze.set(Me(n),{writable:!0,value:void 0}),je(Me(n),Ue,e),n.node=Object(l.b)("div"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(Me(n),Ge,Ye).call(Me(n)),n}return i}(X.a),Ye=function(){var e=new J.b;e.components={"product-specs":function(){return i.e(375).then(i.bind(null,"uP+a"))}},e.template='<product-specs :specs="specs" />',e.initialData={specs:Ve(this,Ue)},je(this,ze,new J.a(e)),Ve(this,ze).append(this.node)};function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=$e(e);if(t){var r=$e(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Qe(this,i)}}function Qe(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?Xe(e):t}function Xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Je(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(o,e);var t,n,r,a=Ze(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Je(Xe(t=a.call(this)),"reviewableList",void 0),Je(Xe(t),"wrapper",void 0),t.reviewableList=e,t}return t=o,(n=[{key:"setList",value:function(e){this.reviewableList=e}},{key:"render",value:function(e,t){var n=new J.b;n.components={"review-filters":function(){return Promise.all([i.e(0),i.e(402)]).then(i.bind(null,"hbaK"))}},n.template='<review-filters :reviewableList="reviewableList" :initialStars="stars"/>',n.initialData={reviewableList:this.reviewableList,stars:t||0},this.wrapper=new J.a(n),this.wrapper.prepend(e)}},{key:"reRender",value:function(e,t){this.wrapper.destroy(),this.wrapper.remove(),this.render(e,t||0)}}])&&We(t.prototype,n),r&&We(t,r),o}(X.a),tt=i("D5LZ");function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=dt(e);if(t){var r=dt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return lt(this,i)}}function lt(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?ct(e):t}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function ht(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var pt=new WeakMap,gt=new WeakMap,ft=new WeakSet,_t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(a,e);var t,i,n,r=st(a);function a(e){var t;return rt(this,a),t=r.call(this),ft.add(ct(t)),pt.set(ct(t),{writable:!0,value:void 0}),gt.set(ct(t),{writable:!0,value:void 0}),t.node=tag("div","single-product-view__product-actions-mke"),ht(ct(t),pt,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(ct(t),ft,mt).call(ct(t)),t}return t=a,(i=[{key:"destroy",value:function(){ut(this,gt).destroy(),ht(this,gt,null)}}])&&at(t.prototype,i),n&&at(t,n),a}(X.a),mt=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new J.b).components={"product-actions":function(){return i.e(349).then(i.bind(null,"qMjw"))}},t.template='\n            <product-actions\n                :is-product-video="isProductVideo"\n                :is-favorite-products-enabled="isFavoriteProductsEnabled"\n                :is-product-favorite="isProductFavorite"\n                @on-video-button-click="emitEvent(\'onVideoButtonClick\')"\n                @on-favorite-button-click="emitEvent(\'onFavoriteButtonClick\', $event)"\n            />\n        ',t.initialData={isProductVideo:ut(this,pt).isProductVideo,isFavoriteProductsEnabled:ut(this,pt).isFavoriteProductsEnabled,isProductFavorite:ut(this,pt).isProductFavorite},t.emitEvent=function(e,t){switch(e){case"onVideoButtonClick":ut(n,pt).onVideoButtonClick&&ut(n,pt).onVideoButtonClick();break;case"onFavoriteButtonClick":ut(n,pt).onFavoriteButtonClick&&ut(n,pt).onFavoriteButtonClick(),ut(n,gt).updateData({isProductFavorite:t})}},ht(this,gt,new J.a(t)),ut(this,gt).append(this.node);case 7:case"end":return e.stop()}}),e,this)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){nt(a,n,r,o,s,"next",e)}function s(e){nt(a,n,r,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),vt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};rt(this,e),this.isProductVideo=t.isProductVideo||!1,this.isFavoriteProductsEnabled=t.isFavoriteProductsEnabled||!1,this.isProductFavorite=t.isProductFavorite||!1,this.onVideoButtonClick=t.onVideoButtonClick||void 0,this.onFavoriteButtonClick=t.onFavoriteButtonClick||void 0},yt=i("GGNF");function bt(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}var Pt,Ct,Tt=Class({productData:null,_tabs:null,_isProductVideo:null,_isFavoriteProductsEnabled:null,__construct:function(e){V.l(PFShoppingCart.EVENT_PREPARE_CART),V.n(PFShoppingCart.EVENT_CART_CREATED,(function(){return V.l(PFShoppingCart.EVENT_PREPARE_CART)})),this.productData=e,this.node=tag("div"),(new n.a).saveRecentlyViewedProduct(this.productData.product.productId)},init:(Pt=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yt.a.isFavoriteProductsEnabled();case 2:this._isFavoriteProductsEnabled=e.sent,this.render();case 4:case"end":return e.stop()}}),e,this)})),Ct=function(){var e=this,t=arguments;return new Promise((function(i,n){var r=Pt.apply(e,t);function a(e){bt(r,i,n,a,o,"next",e)}function o(e){bt(r,i,n,a,o,"throw",e)}a(void 0)}))},function(){return Ct.apply(this,arguments)}),render:function(){var e=this;l.a.clearNode(this.node);var t=0,i=!1;/^#reviews_[1-5]$/.test(window.location.hash)&&(t=window.location.hash.slice(-1),i=!0),this.reviewsList=new w.a(new I.a(this.productData.product),t,i,(function(t){e.reviewFilters.reRender(e.reviewNode,t)})),this.reviewFilters=new et(this.reviewsList),this.productInfo=new Q.a(this.productData,this.onVariantChanged,this.onReviewsOpen,this.reviewsList.load.bind(this.reviewsList)),this.productMedia=new Z(this.productData,this.productInfo.getColorPicker()),this.productMedia.setVariantImage(this.productData.activeVariant),this._isProductVideo=!!this.productMedia.gallery.videos.length;var n=null;this.productData.sellingRegionSettings&&(n=tt.b.fromArray(this.productData.sellingRegionSettings));var r=new vt;r.isProductVideo=this._isProductVideo,r.isFavoriteProductsEnabled=this._isFavoriteProductsEnabled,r.isProductFavorite=this.productData.isFavorite,r.onFavoriteButtonClick=this.productInfo.openFavoritesLink,r.onVideoButtonClick=this._isProductVideo?this.productMedia.gallery._onVideoClick.bind(this,this.productMedia.gallery.videos[0].videoLink):null;var a=new _t(r);tag("div","",[tag("div","container",[tag("div","row",[tag("div","col-md-6 col-lg-7 offset-xl-1 col-xl-5",[this.productMedia]),this._isProductVideo||this._isFavoriteProductsEnabled?tag("div","pf-d-sm-none pf-mt-16",[a]):"",tag("div","col-md-6 col-lg-5 offset-xl-1 col-xl-4 pf-mt-32 pf-mt-md-0 pf-mb-24",[this.productInfo])])]),Object.keys(this.productData.productSpecs).length?new He(this.productData.productSpecs):new U(this.productData,this.onOpenTemplatesTab),tag("div","container",[this._tabs=new j(this.productData,this.onVariantChanged)]),this.productData.isFeaturedReviews?new Oe(this.productData.product.productId,!1):"",tag("div","container pf-ui-body pf-mb-48 pf-mt-64",[this.reviewNode=tag("div",{className:"row",id:"reviews"},[this.reviewsList])]),tag("div","container",[tag("div","row",[tag("div","col-sm-12",[new _(_.TYPE_SIMILAR,this.productData.similarProducts,n)])])])]).append(this.node),this.reviewFilters.render(this.reviewNode)},setActiveTab:function(e,t){this._tabs.isTabEventDispatching=t,this._tabs.setActive(e)},onOpenTemplatesTab:function(){this._tabs.setActive("guidelines"),$("html, body").animate({scrollTop:$(this._tabs.node).offset().top},1e3)},onVariantChanged:function(e){this.productData.activeVariant=e,this.productMedia&&this.productMedia.setVariantImage(e)},onReviewsOpen:function(){history.pushState(null,null,"#reviews"),this.reviewsList.scrollToNode(),this.reviewsList.node.querySelector("a, select, input, button").focus()}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogProduct=Tt);var It=Class({categoryId:null,actionBefore:null,forMockupGenerator:!1,forProductPush:!1,forOrderFlow:!1,forProductTemplate:!1,storeId:null,productTotalCount:null,matchSellingRegion:!1,doesNotMatchSellingRegion:!1});window&&((globalThis||{}).PFProductsCatalogItemsGetProductParams=It);var wt=Class({bannerId:"",buttonText:"",imgSrc:"",imgSrcMobile:"",url:"",title:"",columns:[]});window&&((globalThis||{}).PFProductsCatalogComponentsProductsBannerPar=wt);var St=Class({__construct:function(e){this._par=e,this.node=tag("a",{className:"pf-px-16 pf-mb-sm-24 bubble pf-pt-2",onclick:this._onBannerClicked.bind(this)},[tag("div","pf-product-banner-block pf-border pf-rounded--medium pf-hover-shadow",[tag("picture","pf-product-banner-block__item",[tag("source",{attr:{srcset:this._par.imgSrc,media:"(min-width: 767px)"}}),tag("source",{attr:{srcset:this._par.imgSrcMobile}}),tag("img",{src:this._par.imgSrc})]),tag("div",this._getColumns()+" pf-p-16 pf-p-lg-24 pf-product-banner-block__info",[tag("h2","pf-h3 pf-m-0",this._par.title),this._par.buttonText?tag("a","pf-mt-16 pf-btn pf-btn-primary",this._par.buttonText):""])])])},_getColumns:function(){return this._par.columns.join(" ")},_onBannerClicked:function(){location.href=this._par.url,ga("send","event","Banner Clicks","PnP Banner",this._par.bannerId+" clicked")}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogComponentsProductsBanner=St);var Et=i("XLZy"),kt=Class({id:"base",category:null,data:{},rpcUrl:"",isTabAlwaysVisible:!1,__construct:function(){this.node=Object(l.a)({tag:"div",style:{position:"relative"}})},render:function(){return Et.a.show(this.node,{minHeight:300}),this.getCachedData()?this.renderData():this.getData(),this},setCategory:function(e){this.category=e},getData:function(){if(!this.rpcUrl)return console.error("View not implemented"),!1;this.getCachedData()?this.render():Object(c.a)(this.rpcUrl,{categoryId:this.category?this.category.id:null},this.cacheData.bind(this,this.renderData))},cacheData:function(e,t){this.data[this.category.id]=t,e()},getCachedData:function(){return this.data[this.category.id]?this.data[this.category.id]:null},renderData:function(){l.a.clearNode(this.node),Object(l.a)({tag:"div",innerHTML:this.getCachedData()}).append(this.node)}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogViewsBase=kt);var Ot=Class({id:"faq",apend:function(e){return this.node.append(e),this},render:function(){return l.a.clearNode(this.node),this._renderFaq().append(this.node),this},_renderFaq:function(){var e=[{question:"What are the fabric textures of the baby bodysuits?",answer:"They are made from either smooth or ribbed fabric."},{question:"What color are the baby bodysuits?",answer:"Depending on the model, our baby bodysuits are available in white, black, pastels, and heather colors."},{question:"Do the garments come with long or short sleeves?",answer:"There are both short sleeve and long sleeve options available."},{question:"Are they easy to take on and off?",answer:"Yes, all baby onesies have a three snap leg closure and lap shoulders."},{question:"Are you planning on adding dance leotards for kids?",answer:'While there\'s no timeline yet, you can submit a <a href="/feature-request">Feature Request!</a>'}];return k.createSchema(e).append(document.body),tag("div",null,[tag("h2","pf-h3 pf-mt-0","Frequently Asked Questions"),tag("hr","pf-m-0"),e.map(function(e,t){return this._renderAccordion(e,t)}.bind(this))]).append(this.node)},_renderAccordion:function(e,t){return tag("div","pf-border-bottom",[tag("div",{className:"accordion__header",attr:{"data-toggle":"collapse","data-target":".accordion__header:hover + .accordion__content"},onclick:this._onAccordionClicked},[tag("p","pf-py-16 pf-m-0 pf-h5 pf-text-dark",[tag("i","pf-i pf-i-chevron-down pf-text-gray pf-i-24 accordion__icon"+(0===t?" opened":"")),e.question])]),tag("p",{className:"accordion__content pf-text-muted pf-ml-24 collapse"+(0===t?" in":""),innerHTML:e.answer})])},_onAccordionClicked:function(e){x()(e.target.children[0]).hasClass("opened")?x()(e.target.children[0]).removeClass("opened"):x()(e.target.children[0]).addClass("opened")}},kt);window&&((globalThis||{}).PFProductsCatalogViewsFaq=Ot);var At=i("0rxu"),Lt=i("OVdC"),Nt=i("fQ40"),Dt=i("L5Qw"),Rt=i("n5ho"),xt=i("IGMQ"),Ft=i.n(xt),Mt=(i("sd5M"),i("KWDz")),Bt=i.n(Mt),Vt=i("N6Gp"),jt=i("LvDl"),Ut=i.n(jt),zt=i("I/MA"),Gt=i("Rsrl"),Ht=Class({id:"models",filters:null,_searchKeywords:"",_products:null,_filters:null,_warningTexts:null,_category:null,page:1,productsPerPage:24,url:new B.a,showFulfillmentCountries:!0,isTabAlwaysVisible:!0,sortMethods:At.b,_totalProductCount:0,_maxCountPerPage:0,_minCountPerPage:0,isSampleOrder:!1,activeStoreId:null,__construct:function(){var e=this;this._searchKeywords=this.url.query.search||"",this.page=this.url.query.page?parseInt(this.url.query.page):1,this.node=tag("div","",[this._filtersNode=tag("div","",[tag("div","row pf-mt-16 hidden-xs",[tag("div","col-sm-8 col-xs-12 pf-d-flex pf-align-items-center",[this._resultsPerPageNode=tag("span"),this._nodeClearFilters=tag("a",{className:"pf-link pf-d-none pf-ml-24",onclick:this._clearFilters.bind(this)},dlang("products","Clear filters"))]),tag("div","col-md-4 col-sm-4 col-xs-12",[tag("span","styled-select",[this._sortBox=tag("select",{className:"form-element",prop:{onchange:this.render.bind(this)}})])])]),tag("div","row pf-mt-16 hidden-sm hidden-md hidden-lg products-pricing",[this._nodeMobileFilters=tag("div","products-pricing__mobile-filters "+(Object(q.b)()?"touch":""),[tag("div",{className:"products-pricing__mobile-filters__filter pf-px-16 pf-py-8 pull-left",prop:{onclick:this._onMobileFilter}},[tag("div","pf-text-muted small",[lang("Filter by")]),this._nodeMobileFilterTitle=tag("div","bold")]),tag("div","products-pricing__mobile-filters__filter pf-px-16 pf-py-8 pull-left",[tag("div","pf-text-muted small",[lang("Sort by")]),this._nodeMobileSortTitle=tag("div","bold",[dlang("products","Most popular")]),this._mobileSortBox=tag("select",{prop:{onchange:this._changeMobileSort}}),tag("div","dropdown",[tag("div",{className:"dropdown-toggle",attr:{"data-toggle":"dropdown"}}),this._mobileSortDropdown=tag("ul","dropdown-menu pf-p-0")])]),tag("div","col-6 pf-mt-16 pf-px-8 pull-right",[this._nodeMobileClearFilters=tag("a",{className:"catalog__sidebar-filter__clear pf-link pf-d-none pull-right",onclick:this._clearFilters.bind(this)},dlang("products","Clear filters"))]),tag("div","col-12 pf-mt-16 pf-px-8 pull-left",[this._mobileResultsPerPageNode=tag("div")]),tag("div","clearfix")])])]),this._nodeWarning=tag("div"),this._productsNode=tag("div","clearfix"),this._nodeFooter=tag("div")]),yt.a.isFavoriteProductsEnabled().then((function(t){t&&(e._favoritesNode=tag("div",{className:"products-pricing__mobile-filters touch "+(s.a.isWindowSmallerThan(s.a.XS)?"pf-border-top":"")},[tag("div",{onclick:e.openFavoritesLink.bind(e),className:"pf-pb-xs-16 pf-pt-xs-0 pf-px-16 pf-py-16 pf-bold",text:lang("My favorites"),href:"javascript:;"},[tag("i","pf-i pf-i-heart pf-i-18 pf-text-muted pull-right")])]),e._nodeMobileFilters.parentNode.insertBefore(e._favoritesNode,e._nodeMobileFilters),window.addEventListener("resize",Ut.a.debounce(e._changeFavoritesNodeBorder.bind(e),100)))}))},render:function(e){var t,i;null!=e&&e.activeStoreId&&(this.activeStoreId=e.activeStoreId),null!=e&&e.category&&(this._category=e.category),e&&e.products&&(this._products=e.products,this._filters=e.filters,this._renderSortOptions(this._products,this._category)),e&&null!==e.keywords&&(this._searchKeywords=e.keywords),e&&void 0!==e.showFulfillmentCountries&&(this.showFulfillmentCountries=e.showFulfillmentCountries),e&&e.page&&(this.page=e.page),e&&e.categoryTexts&&(this._warningTexts=e.categoryTexts);var n=null===(t=this._products)||void 0===t?void 0:t.filter(this._isProductMatchingKeywords).sort(this.sortProducts.bind(this,this._sortBox.value));if(e&&e.totalProductCount){var r=Object.values(e.filters).some((function(e){return e.length}));this._totalProductCount=r?n.length:e.totalProductCount,this._renderResultsPerPage()}var a=Math.ceil(Number(this._totalProductCount)/this.productsPerPage);if(a>0&&this.page>a)return this._onPaginate(a),this;if((null==e||!e.skipProductsRendering)&&(this.renderProducts(n),this._totalProductCount>this.productsPerPage)){var o=new Nt.a;o.page=this.page,o.pages=a,o.callback=this._onPaginate,o.scrollNode=this.node,o.scrollOffset=-100,o.className="pf-mt-16",tag("div","clearfix",[new Dt.a(o)]).append(this._productsNode)}return null!==(i=this._warningTexts)&&void 0!==i&&i.shouldRender&&this._renderWarning(),this._renderFilterTitles(),this._onFilter(),this},_renderFilterTitles:function(){var e="",t=$(this._sortBox).find("option:selected").text();this._filters&&(e=Object.values(this._filters).filter((function(e){return e&&e.length>0})).join(", ")),e||(e=lang("No filters")),l.a.setNodeText(this._nodeMobileFilterTitle,e),l.a.setNodeText(this._nodeMobileSortTitle,t)},sortProducts:function(e,t,i){return this._sortBox.value=e,this.sortMethods[e](t,i)},renderProducts:function(e){var t;l.a.clearNode(this._productsNode);var i=null==e?void 0:e.filter(this._limitProducts),n=tag("div","row row-flex pf-mt-16",[(null==i?void 0:i.length)<1?tag("div","col-12",[tag("div","alert alert-warning text-center",[dlang("products","Sorry, couldn't find any products")])]):""]);if(0===(null==i?void 0:i.length)&&(null===(t=this._category)||void 0===t?void 0:t.id)===Vt.a.ID_FAKE_FAVORITES)n=tag("div","pf-d-flex pf-align-items-center pf-flex-column pf-align-items-center pf-justify-content-center",[tag("img",{className:"favorites-image",src:Bt.a}),tag("div","pf-pt-40",dlang("products","Pick your favorite products and weâ€™ll list them here"))]);else for(var r in i){this._getProductListItem(i[r]).append(n)}n.append(this._productsNode)},_getProductListItem:function(e){var t=null,i=e;return e instanceof Rt.a&&(t=e,i=e.getCachedProduct()),new h.a({product:i,variant:t,className:"col-6 col-md-4 col-xl-3 pf-mb-0 pf-mb-md-8 pf-mb-lg-16",showSizes:!i.isEmbroidery()||i.isApparelEmbroidery(),showFulfillmentCountries:this.showFulfillmentCountries,isUnavailable:this._isUnavailable(i),url:d.a.isGenerator()?i.getMockupGeneratorUrl():i.catalogPageUrl,callback:this._onClickProduct.bind(this,i,t),technique:this._getCategoryTechnique(i),isSampleOrderContext:this._isSampleOrderFlow(),isModal:d.a.isOrderFlow()||d.a.isProductPush()})},_getCategoryTechnique:function(e){var t=this._getFirstTechnique(e);return this._category&&this._category.isEmbroideryShirts()&&e.hasTechnique(S.a.TYPE_EMBROIDERY)?S.a.TYPE_EMBROIDERY:t},_onClickProduct:function(e,t,i,n){n&&n.preventDefault(),this._isUnavailable(e)||v.a.createAndDispatch(d.a.EVENT_PRODUCT_CHOOSE,{skipHistory:d.b.catalogType===d.a.TYPE_MG,scrollToTop:d.a.isProductsPricing(),activeProductId:e.productId,activeVariantId:t?t.variantId:null})},_getFirstTechnique:function(e){var t=this._filters.availableTechniques;return t.length?t[0]:e.type},_isProductMatchingKeywords:function(e){if(!this._searchKeywords)return!0;var t=this._searchKeywords.toLowerCase().split(" "),i=0,n=e.colors?e.colors.map((function(e){return e.colorName})).join(" "):e.color,r=e.sizes?e.sizes.join(" "):e.size;for(var a in t){var o=e.model&&e.model.toLowerCase().indexOf(t[a])>-1,s=e.brand&&e.brand.toLowerCase().indexOf(t[a])>-1,l=e.title&&e.title.toLowerCase().indexOf(t[a])>-1,c=e.name&&e.name.toLowerCase().indexOf(t[a])>-1,d=r&&r.replace(/Ã—/g,"x").toLowerCase().indexOf(t[a])>-1,u=n&&n.toLowerCase().indexOf(t[a])>-1;(o||s||l||c||d||u)&&i++}return i===t.length},_renderSortOptions:function(e,t){var i="";this._sortBox.value&&(i=this._sortBox.value),l.a.clearNode(this._sortBox),l.a.clearNode(this._mobileSortBox),l.a.clearNode(this._mobileSortDropdown);var n=this._getSortingOptions(e,t,!0,!1,i);for(var r in n){var a=n[r],o=a.cloneNode(!0);this._sortBox.appendChild(a),this._mobileSortBox.appendChild(o)}var s=this._getSortingOptions(e,t,!1,!0,i);for(var r in s)this._mobileSortDropdown.appendChild(s[r])},_renderResultsPerPage:function(){var e=this;this._minCountPerPage=this.page*this.productsPerPage-(this.productsPerPage-1),this._maxCountPerPage=Math.min(this._minCountPerPage+this.productsPerPage-1,this._totalProductCount),l.a.clearNode(this._resultsPerPageNode),l.a.clearNode(this._mobileResultsPerPageNode);var t=tag("span"),i=Gt.a.sellingRegion;if(i){var n=PF.Customer.isLogged()&&!PF.Customer.isB2cStarter(),r=tag("span","pf-ui-body"),a=dlang("products","Showing {total} results that deliver to {icon} {region} and match your current delivery preferences");n&&(a=dlang("products","Showing {total} results that deliver to {icon} {region} and match your current selling preferences")),i.isWorldwide()&&(a=dlang("products","Showing full product catalog for {icon} {region} delivery"));var o="";o=n?dlang("products","You can change the Global default selling preferences {linkStart}here{linkEnd}"):dlang("products","You can change the Default catalog and delivery preferences {linkStart}here{linkEnd}"),r.innerHTML=a.replace("{total}",this._totalProductCount.toString()).replace("{region}",i.getName()).replace("{icon}",tag("img",{src:i.getIcon(),style:{width:"24px",marginTop:"-4px"}}).outerHTML);var s=tag("i",{className:"pf-i pf-pointer pf-i-information pf-i-18 pf-text-gray pf-ml-4",style:{marginTop:"-2px",outline:"none"},attr:{tabindex:0,title:o.replace("{linkStart}",'<a class="pf-link-white pf-pointer dsr-settings-tooltip-link">').replace("{linkEnd}","</a>"),"data-toggle":"tooltip","data-container":"body","data-trigger":"hover","data-delay":'{"hide": 700}',"data-html":!0}});t=tag("div","",[r,s]),$(s).tooltip(),$(s).on("shown.bs.tooltip",(function(){document.querySelector(".dsr-settings-tooltip-link").addEventListener("click",(function(){Object(g.b)(e.activeStoreId)}))}))}else t=tag("span","",dlang("products","{minPerPage} - {perPage} of {total} results").replace("{minPerPage}",this._minCountPerPage.toString()).replace("{perPage}",this._maxCountPerPage.toString()).replace("{total}",this._totalProductCount.toString()));this._addResultsPerPageNode(t),window.addEventListener("resize",Ut.a.debounce((function(){return e._addResultsPerPageNode(t)}),100))},_addResultsPerPageNode:function(e){var t=s.a.isWindowSmallerThan(s.a.SIZES.SM)?this._mobileResultsPerPageNode:this._resultsPerPageNode;t.hasChildNodes()||t.appendChild(e)},_clearFilters:function(){this.filters&&this.filters.clearAll()},_onFilter:function(){this.filters&&this.filters._filters&&(this.filters._filters.getAllSelectedValues().length?(l.a.removeClassName(this._nodeClearFilters,"pf-d-none"),l.a.removeClassName(this._nodeMobileClearFilters,"pf-d-none")):(l.a.addClassName(this._nodeClearFilters,"pf-d-none"),l.a.addClassName(this._nodeMobileClearFilters,"pf-d-none")))},_getSortingOptions:function(e,t,i,n,r){var a={popular:dlang("products","Most popular"),relevant:dlang("products","Relevance"),is_new:dlang("products","New"),review:dlang("products","Highest rated"),price:[dlang("products","Price"),{priceLow:dlang("products","Low - High"),priceHigh:dlang("products","High - Low")}],favorites:[dlang("products","Date saved as favorite"),{favoritesAsc:dlang("products","Newest - Oldest"),favoritesDesc:dlang("products","Oldest - Newest")}]};if(t&&t.relevantSortingRegions&&PF.Customer.location){var o=["WORLDWIDE",PF.Customer.location.country];"europe"===PF.Customer.location.region&&o.push("EU"),Ut.a.intersection(t.relevantSortingRegions,o).length||delete a.relevant}else delete a.relevant;if(e){var s=[];for(var l in e){var c=e[l];c instanceof Rt.a&&(c=c.getCachedProduct()),s.push(c)}(e=s||e).some((function(e){if(e.hasOwnProperty("isNew"))return e.isNew}))||delete a.is_new,e.every((function(e){return e.hasOwnProperty("isFavorite")?e.isFavorite:null}))||delete a.favorites,e.some((function(e){if(e.hasOwnProperty("reviewRating"))return e.reviewRating.reviewCount>0}))||delete a.review,e.some((function(e){if(e.hasOwnProperty("isPopular"))return e.isPopular}))||delete a.popular}return this._getSortingOptionsDOM(a,i,n,r)},_getSortingOptionsDOM:function(e,t,i,n){if(t){var r=[];for(var a in e){if("string"==typeof(h=e[a]))r.push(tag("option",{value:a,prop:{selected:a===n}},[h]));else{var o=[],s=h[0],l=h[1];for(var c in l){var d=l[c];o.push(tag("option",{value:c,prop:{selected:c===n}},[d]))}r.push(tag("optgroup",{attr:{label:s}},[o]))}}return r}if(i){var u=[];for(var a in e){var h;if("string"==typeof(h=e[a]))u.push(tag("li",{className:"pf-p-12",value:a,onclick:this._changeMobileSort.bind(this,{target:{value:a}})},[h]));else{var p=[];s=h[0],l=h[1];for(var c in p.push(tag("li","pf-px-12 pf-py-4 text-muted",[s])),l){d=l[c];p.push(tag("li",{className:"pf-p-12 pf-pl-24",value:c,onclick:this._changeMobileSort.bind(this,{target:{value:c}})},[d]))}u.push(tag("ul","pf-p-0",[p]))}}return u}return e},_isUnavailable:function(e){return e.isDisabledInPush&&(d.a.isProductPush()||d.a.isGenerator())&&!(e.hasBetaAccess&&d.a.isGenerator())},_isSampleOrderFlow:function(){return d.a.isOrderFlow()&&(this.order=zt.a.getActiveInstance(),this.isSampleOrder=this.order.isSampleOrder),this.isSampleOrder},_onSearch:function(){v.a.createAndDispatch(d.a.EVENT_PRODUCTS_FILTER,{productSearchKeywords:this._searchBox.getValue(),productsOrVariants:this._products})},_limitProducts:function(e,t){var i=(this.page-1)*this.productsPerPage,n=i+this.productsPerPage;return t>=i&&t<n},_onPaginate:function(e){this.page=e,v.a.createAndDispatch(d.a.EVENT_PRODUCTS_FILTER,{productsViewPage:this.page,productsOrVariants:this._products}),this._renderResultsPerPage()},_changeMobileSort:function(e){this._sortBox.value=e.target.value,$(this._sortBox).trigger("change")},_onMobileFilter:function(e){e.preventDefault(),$("html, body").css("overflow","pf-d-none"),$(document).find(".catalog__sidebar-floating").closest(".modal").scrollTop(0).css("overflow-y","pf-d-none"),$(document).find(".catalog__sidebar-floating").addClass("open")},_renderWarning:function(){d.b.catalogType!==d.a.TYPE_MG&&(l.a.clearNode(this._nodeWarning),tag("div","pf-pb-8 pf-pt-24",[new p.a({id:"product-selector-banner",type:"gray",heading:this._warningTexts.heading,content:this._warningTexts.content,linkText:this._warningTexts.linkText,icon:Ft.a,closable:!0,onLinkClick:function(){window.open(langUrl("/covid-19"),"_blank")}})]).append(this._nodeWarning))},openFavoritesLink:function(){v.a.createAndDispatch(d.a.EVENT_NAME,{category:Vt.a.getTemporaryFavoritesCategory()})},_changeFavoritesNodeBorder:function(){this._favoritesNode.className="products-pricing__mobile-filters touch "+(s.a.isWindowSmallerThan(s.a.XS)?"pf-border-top":"")}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogViewsProductsSelector=Ht);var Yt=Class({id:"retail-prices",_products:[],renderProducts:function(e){if(!e)return this;var t=e.filter(this._limitProducts);return this.retailPriceView?this.retailPriceView.setItems(t):this.retailPriceView=new Lt.a(t),l.a.clearNode(this._productsNode),Object(l.a)({tag:"div",className:"table-responsive",els:[this.retailPriceView]}).append(this._productsNode),l.a.clearNode(this._nodeFooter),Object(l.a)({tag:"div",className:"margin-bottom-40",els:[this._hasLargeSize()?{tag:"p",els:[{tag:"span",className:"pf-mr-4 pf-text-red",text:"*"},dlang("products","Sizes 2XL and larger can be up to $1.50 extra per item.")]}:"",{tag:"p",els:[{tag:"span",className:"pf-mr-4 pf-text-red",text:"**"},dlang("products","The price you sell at is up to you. Want more profit? Sell at a higher price!")]}]}).append(this._nodeFooter),this},_getSortingOptions:function(e,t){var i={popular:dlang("products","Popular"),price:[dlang("products","Price"),{priceLow:dlang("products","Low - High"),priceHigh:dlang("products","High - Low")}],retailPrice:[dlang("products","Retail price"),{retailPriceLow:dlang("products","Low - High"),retailPriceHigh:dlang("products","High - Low")}],profit:[dlang("products","Profit"),{profitLow:dlang("products","Low - High"),profitHigh:dlang("products","High - Low")}]};return this._getSortingOptionsDOM(i,e,t)},_hasLargeSize:function(){var e=!1;for(var t in this._products){var i=this._products[t];for(var n in i.sizes){"2XL"===i.sizes[n]&&(e=!0)}}return e},sortProducts:function(e,t,i){if(!At.a[e])return this.sortMethods[e](t,i);var n=this.retailPriceView.getProductOrVariantProfit(t),r=this.retailPriceView.getProductOrVariantProfit(i);return At.a[e](t,i,n,r)}},Ht);window&&((globalThis||{}).PFProductsCatalogViewsRetailPrices=Yt);var qt=Class({defaultCaption:"",caption:"",content:null,isActive:!1,isDisabled:!1,tooltipText:"",__construct:function(e,t,i){this.defaultCaption=e,this.content=t,this.isDisabled=!t,this.isActive=void 0!==i&&i},getTabItem:function(e){var t=new L.a;return t.caption=this.getCaption(),t.onclick=e.bind(this,this,!0),t.isActive=this.isActive,t.isDisabled=this.isDisabled,t.tooltipTitle=this.tooltipText,t},render:function(e){return"function"!=typeof this.content.render?this:this.content.render(e)},setCaption:function(e){this.caption=e},getCaption:function(){return this.caption?this.caption:this.defaultCaption},isTabAlwaysVisible:function(){return this.content&&this.content.isTabAlwaysVisible||this.isDisabled},append:function(e){this.content.append(e)}});window&&((globalThis||{}).PFProductsCatalogViewsWrap=qt);var Wt=i("6B/H"),Kt=i("XJFE"),Zt=i("cKxm"),Qt=i("s6Su"),Xt=i("sjGI"),$t=Class({filters:null,views:{},_tabs:null,_tabItems:{},_products:[],_category:null,isTabEventDispatching:!0,__construct:function(){this.views={models:new qt(dclang("products","Product models","Models"),new Ht,!0),retail_prices:new qt(dlang("products","Retail prices"),new Yt)},this.node=tag("div","catalog__products-selector",[this._nodeTabsRow=tag("div","row pf-mt-16 pf-mt-sm-8 pf-mt-md-0 pf-mb-16",[tag("div","col-md-12",[this._tabs=new N.a("primary center-fixed pf-mb-16",!0),Xt.a.isUs()?tag("span","large-volume pf-mr-lg-16 pf-mr-md-12 pf-mr-sm-8",[tag("img",{src:"/static/images/products-catalog/menu-mockup.svg"}),tag("a",{className:"pf-link pf-ml-8",onclick:this._openLargeClientForm},dlang("products","Doing large volume?"))]):""])]),this._contentNode=tag("div"),this.recentlyViewedBlock=tag("div"),this.doesNotMatchSellingRegionProductsBlock=tag("div")]),l.a.addClassName(this._nodeTabsRow,"hidden")},renderModelsView:function(e){this.views.models.render({showFulfillmentCountries:e.catalogType!==d.a.TYPE_MG}).append(this._contentNode)},renderProducts:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.views.models.content.filters=this.filters,this._products=e.getProducts(),this._category=e.category;var r=new B.a,a={products:this._products,category:this._category,keywords:e.productSearchKeywords,totalProductCount:e.totalProductCount,categoryTexts:e.categoryTexts,page:this._resolvePageNumber(e.productsViewPage,r.query.page,t),showFulfillmentCountries:e.catalogType!==d.a.TYPE_MG,filters:$.extend({},m.a.getFiltersFromUrl(),e.filter),skipProductsRendering:i,activeStoreId:n};this.views.models.render(a),this.views.retail_prices.render(a);var o=e.activeTab?e.activeTab:(new B.a).hash;o&&this.setActiveTab(o)},renderTabs:function(e){l.a.removeClassName(this._nodeTabsRow,"hidden"),this._setTabItems(e),this._tabs.render()},hideTabs:function(){l.a.addClassName(this._nodeTabsRow,"hidden")},setActiveTab:function(e){l.a.removeClassName(this._nodeTabsRow,"hidden");var t=this._findViewById(e),i=this._tabItems[e];t&&i&&this._tabs.setActiveTab(i)},_setTabItems:function(e){if(this._isTestingCategory()){this.views.faq=new qt(dlang("products","FAQ"),new Ot);var t=new Wt.a;t={id:187,active:1,name:"FAQ",position:7,type:"faq"},e.push(t)}for(var i in this.views){var n=this.views[i],r=n.content?this._findTab(e,i):null,a=n.content?n.content.id:i;(r&&r.active||n.isTabAlwaysVisible())&&(this._isTestingCategory()?this._tabItems[a]=this._renderTabTest(r,n):this._tabItems[a]=this._renderTab(r,n))}var o=[];for(var s in this._tabItems)o.push(this._tabItems[s]);this._tabs.items=f.a.convertToArray(this._tabItems)},_isTestingCategory:function(){var e;return 14===(null===(e=this._category)||void 0===e?void 0:e.id)},_findViewById:function(e){for(var t in this.views){var i=this.views[t];if(i.content&&i.content.id===e)return i}return null},_renderTab:function(e,t){var i={mainHeader:"",documentTitle:""};return t.setCaption(""),e&&(t.setCaption(e.name),i.mainHeader=e.mainHeader,i.documentTitle=e.pageTitle),t.isActive&&(l.a.clearNode(this._contentNode),this.renderContent(i,t)),t.getTabItem(this.renderContent.bind(this,i))},_renderTabTest:function(e,t){var i={mainHeader:"",documentTitle:""};return t.setCaption(""),e&&(t.setCaption(e.name),i.mainHeader=e.mainHeader,i.documentTitle=e.pageTitle),t.isActive?this.activeTabId=this._tabItems[t.content.id]?t.content.id:"models":l.a.addClassName(t.content.node,"hidden"),this.renderContentTest(t),t.getTabItem(this.showTabContent.bind(this,t,i))},renderContentTest:function(e){if(!e||!e instanceof qt||e.isDisabled)return!1;e.render().append(this._contentNode)},showTabContent:function(e,t,i){var n=this._findViewById(this.activeTabId);l.a.addClassName(n.content.node,"hidden"),l.a.removeClassName(e.content.node,"hidden"),this.activeTabId=e.content.id,this._shouldDispatchTabEvent(i)&&v.a.createAndDispatch(d.a.EVENT_TAB_CHOOSE,{activeTab:"models"!==this.activeTabId?this.activeTabId:"",productsOrVariants:this._products,filter:m.a.getFiltersFromUrl(),customMainHeader:t.mainHeader,documentTitle:t.documentTitle})},_findTab:function(e,t){for(var i in e){var n=e[i];if(n.type===t)return n}return null},_resolvePageNumber:function(e,t,i){if(e>1)return e;if(i)return 1;if(!t)return 1;var n=parseInt(t);return n>1?n:1},renderContent:function(e,t,i){if(!t||!t instanceof qt)return!1;if(t.isDisabled)return!1;var n=this._tabItems[t.content.id]&&"models"!==t.content.id?t.content.id:"";l.a.clearNode(this._contentNode),t.render().append(this._contentNode),this._shouldDispatchTabEvent(i)&&v.a.createAndDispatch(d.a.EVENT_TAB_CHOOSE,{activeTab:n,productsOrVariants:this._products,filter:m.a.getFiltersFromUrl(),customMainHeader:e.mainHeader,documentTitle:e.documentTitle})},_shouldDispatchTabEvent:function(e){return!!e&&(!!this.isTabEventDispatching||(this.isTabEventDispatching=!0,!1))},clear:function(){return l.a.clearNode(this._contentNode),this},hide:function(){return l.a.addClassName(this.node,"hidden"),this},show:function(){return l.a.removeClassName(this.node,"hidden"),this},_openLargeClientForm:function(){this._buildModal()},_buildModal:function(){var e=new F.a.Par;e.title=dlang("products","Contact our sales team"),e.modalDialogClass="modal-md",this.modal=new F.a(e),this.modal.setContent(this._getMainContent()),this.modal.setFooterContent(this._getFooterContent()),this.modal.show()},_getMainContent:function(){return tag("div","",[tag("p","pf-h4 pf-mb-4",dlang("products","Want to talk to our sales rep?")),tag("p","pf-ui-body pf-text-muted pf-mb-16",dlang("products","Leave your email and they'll be in touch.")),new Zt.a(new Zt.b({type:"text",inputSize:"lg",placeholder:"name@mail.com",name:"customer-email",id:"customer-email",className:"pf-mb-16"})),new Qt.a(new Qt.b({type:"checkbox",value:!1,label:dlang("products","I agree to my data being processed in accordance with {linkStart}Printful's Privacy Policy{linkEnd}").replace("{linkStart}",'<a class="pf-link" href="'+langUrl("/policies/privacy")+'" target="_blank">').replace("{linkEnd}","</a>"),labelClass:"pf-ui-caption pf-text-muted pf-mb-12",wrapperClass:"pf-ml-4",name:"privacy-checkbox",id:"privacy-checkbox"})),this.emailErrorMessage=tag("label","pf-text-red hidden",[dlang("reviews","Please enter your email")]),this.checkboxErrorMessage=tag("label","pf-text-red hidden",[dlang("reviews","You must agree to our Terms of Service and Privacy Policy")])])},_getFooterContent:function(){return tag("div","text-left",[tag("a",{className:"pf-btn pf-btn-primary pf-mr-8",onclick:this._send,attr:{role:"button"}},dlang("products","Submit")),tag("a",{className:"pf-btn pf-btn-secondary pf-mr-8",onclick:this._closeModal,attr:{role:"button"}},dlang("products","Cancel"))])},_send:function(){var e=this,t=document.getElementById("customer-email").value,i=document.getElementById("privacy-checkbox").checked,n=!1;Et.a.show(this.modal._nodeContent),t?this.emailErrorMessage.classList.add("hidden"):(this.emailErrorMessage.classList.remove("hidden"),n=!0),i?this.checkboxErrorMessage.classList.add("hidden"):(this.checkboxErrorMessage.classList.remove("hidden"),n=!0),n?Et.a.hide(this.modal._nodeContent):Object(c.a)("customer/potential-client",{email:t}).then((function(t){if(!t.success)return Et.a.hide(e.modal._nodeContent),void e.emailErrorMessage.classList.remove("hidden");new Kt.a({type:Kt.a.TYPE_SUCCESS,content:dlang("dashboard","Got it"),duration:3e3}),e.modal.hide()}))},_closeModal:function(){this.modal&&this.modal.hide()}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogProductsView=$t);var Jt=Class({_categoryItem:null,isActive:!1,hiddenInOrderFlow:0,hiddenInCatalog:0,__construct:function(e,t){this._categoryItem=e,this.isActive=e.isActive,this.hiddenInOrderFlow=e.hiddenInOrderFlow,this.hiddenInCatalog=e.hiddenInCatalog,this.node=tag("a",{className:this.getSize()+" catalog__category pf-mb-16 pf-mb-md-24 pf-mb-lg-32 pf-text-decoration-none",href:this._categoryItem.getUrl(),onclick:t.bind(this,this._categoryItem)},[tag("div","catalog__category__card pf-border pf-rounded--medium pf-hover-shadow pf-h-100 pf-position-relative",[this._categoryItem.isNew&&tag("span","pf-badge pf-badge-rect pf-badge--new pf-badge-position-card",dclang("products","Category badge title","New")),tag("img",{className:"catalog__category__thumbnail pf-w-100 pf-bg-lighter",src:Y.a,data:{src:this._categoryItem.urlImage},attr:{alt:this.getTitle(),"aria-hidden":"true"}}),tag("h3","pf-h5 pf-p-12 pf-m-0 pf-py-0",[this.getTitle()])])])},getSize:function(){return{3:"col-xl-3 col-md-3 col-6",4:"col-xl-3 col-md-4 col-6",6:"col-xl-4 col-md-6 col-12",8:"col-xl-6 col-md-8 col-12"}[this._categoryItem.thumbSize]},getTitle:function(){return this._categoryItem.settings.thumbnailTitle?this._categoryItem.settings.thumbnailTitle:this._categoryItem.title},getCategoryItem:function(){return this._categoryItem}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogCategory=Jt);var ei=i("F5uq"),ti=Class({_isTopLevel:!1,resizeTimeout:null,__construct:function(){this.node=tag("div","catalog clearfix"),window.addEventListener("resize",this._setTimeout.bind(this,this._onResize,300))},render:function(e,t){this._isTopLevel=!t,this.clear().renderCategories(e).show()},renderCategories:function(e){return tag("div","row row-flex pf-mt-16",this._getCategories(e)).append(this.node),this},clear:function(){return l.a.clearNode(this.node),this},hide:function(){return l.a.addClassName(this.node,"hidden"),this},show:function(){return l.a.removeClassName(this.node,"hidden"),setTimeout(this._afterAppend.bind(this),0),this},_afterAppend:function(){},_setTimeout:function(e,t){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(e.bind(this),t)},_onResize:function(){},_getCategories:function(e){return[].concat.apply([],e.map(this._renderCategory)).filter(Boolean).sort(this._sort)},_renderCategory:function(e){var t=[];return ti.filterCategories(e)&&t.push(new Jt(e,this._onClick)),e.children.length&&!this._isTopLevel?t.concat(e.children.map(this._renderCategory)):t.shift()},_sort:function(e,t){return e.getCategoryItem().catalogPosition-t.getCategoryItem().catalogPosition},_onClick:function(e,t){ei.a.track(e),2==t.which||4==t.button||t.metaKey||t.ctrlKey||(t.preventDefault(),v.a.createAndDispatch(d.a.EVENT_NAME,{scrollToTop:!0,category:e}))}},l.a.Base);ti.filterCategories=function(e){return!e.isClone&&!e.hiddenInCatalog},window&&((globalThis||{}).PFProductsCatalogCategoriesSelector=ti);var ii=i("DUxB"),ni=i("yDyG"),ri=i("1mG2"),ai=i("ji4W"),oi=i("9Nv7");function si(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}var li,ci=Class({_params:null,_state:null,_productView:null,__construct:function(e){this._params=e,this._params.pageNumber=(e.isEmbeddedView()?this._params.pageNumber:(new B.a).query.page)||1,this._isHeadingSet=this._params.headingNode&&this._params.breadcrumbsNode,this._breadcrumbs=this._renderBreadcrumbs(),this._isHeadingSet&&(this._titleNode=this._params.headingNode,this._breadcrumbsNode=this._params.breadcrumbsNode,this._breadcrumbs.append(this._breadcrumbsNode)),this._state=new v.a,this.node=tag("div","",[tag("div",this._params.containerClass,[this._nodeSticky=tag("div","catalog__header "+(this._params.enableSearch?"pf-mb-24":""),[this.container=tag("div",this._params.isStickyHeaderEnabled()?"container pf-px-0":"",[tag("div","row",[this._headerWrapper=this._isHeadingSet?this._breadcrumbsWrapper=tag("div"):tag("div","text-left pf-py-16 col-sm-12 "+(this._params.enableSearch?"col-md-8 pf-pt-16":""),[this._breadcrumbs]),this._params.enableSearch?tag("div","col-sm-12 col-md-4 hidden-xs",[tag("div","catalog__header__search pf-mt-16",[this._inputSearch=this._renderSearch()])]):""])])]),this._titleWrapNode=this._params.enableTitle?tag("div","row pf-mb-40",[tag("div","col-md-12",[this._isHeadingSet?this._titleWrapper=tag("div"):this._titleNode=tag("h1","pf-h2 text-center pf-my-8 pf-my-sm-0"),this._subtitleNode=tag("h2","pf-ui-subheading-lg text-muted text-center pf-mt-8 pf-mb-0 pf-d-none")])]):"",this._productBannerNode=tag("div","row slick-slider slick-dotted product-banner-slider"),this._recentMockupsNode=tag("div","recent-mockups pf-pt-40 pf-pb-24 pf-mb-40 pf-d-none pf-bg-lighter"),this._titleSearchNode=this._params.enableSearch?tag("div","hidden-sm hidden-md hidden-lg",[tag("div","catalog__header__search pf-mt-16",[this._inputSearch=this._renderSearch()])]):tag("span"),this._mainContentNode=tag("div")]),this._productNode=tag("div")]),this._isHeadingSet&&(this._titleWrapper.appendChild(this._titleNode),this._breadcrumbsWrapper.appendChild(this._breadcrumbsNode)),this._renderMainContent(),this._params.isStickyHeaderEnabled()&&this._attachStickyHeader(),window.addEventListener("resize",this._closeMobileSidebar.bind(this,null)),window.addEventListener("resize",this._resizeInitRecentMockupsSlider.bind(this))},updateFromState:function(e){this._state=e,d.b.catalogType=e.catalogType,this._params.store.setActiveCategoryId(e.getCategoryId()),this._state.scrollToTop&&setTimeout(function(){this._scrollViewToTop()}.bind(this),100),this[e.action]&&this[e.action]()},productCatalogProductsLoaded:function(){var e=this._state.categoryTexts||null;this._renderMainContent(),this._state.categoryTexts=this._state.categoryTexts||e,this._params.enableTabs?this._productsSelector.renderTabs(this._state.category.tabs):this._productsSelector.hideTabs(),this._productsSelector.renderProducts(this._state,this._params.isEmbeddedView(),!1,this._params.activeStoreId),!this._params.enableTabs&&this._productsSelector.renderModelsView(this._state),this.productCatalogLoadAllProductData(this.reRenderSideBar)},reRenderSideBar:function(e){if(this._sidebar){var t=this._params.store.products.getCachedProducts(this._state.getCategoryId());this._sidebar.filters.render(t.products,this._params.allowedFulfillmentRegions,t.products?t.products.length:0,e)}},productCatalogLock:function(){this._state.isLocked?Et.a.show(this._mainContentNode):Et.a.hide(this._mainContentNode)},productCatalogNavigate:function(){var e=this._state.getCategoryId();if(this._renderMainContent(),this._updateBreadcrumbs(),this._clearBannerNode(),this._renderProductBanner(),this._renderRecentMockups(),this._initSlider(),this._params.onCategoryChoose&&e&&this._params.onCategoryChoose(e),this._shouldShowCategories())this._categoriesSelector.render(this._params.store.categories.getAll(e),e);else{var t=new It;t.categoryId=e,t.favorites=this._isFavoriteCategory(e),t.actionBefore=this._productsSelector.show,t.forMockupGenerator=this._params.isMockupGenerator,t.forProductPush=d.a.isProductPush(),t.forOrderFlow=d.a.isOrderFlow(),t.forProductTemplate=this._params.isProductTemplate,t.storeId=this._params.activeStoreId,t.pageNumber=this._params.pageNumber,t.matchSellingRegion=!0,setTimeout(function(){this._params.store.products.getByParams(t)}.bind(this),1)}this._trackProductPageView()},productCatalogLoadAllProductData:function(e){this._params.store.products.getAllProductsList(e)},productCatalogProductsFiltered:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._hasSelectedFilters()?(l.a.removeClassName(this._nodeClearFilters,"hidden"),this._pushCategoryDataLayer()):this._nodeClearFilters&&l.a.addClassName(this._nodeClearFilters,"hidden"),this._buttonTitle&&l.a.setNodeText(this._buttonTitle,dlang("products","See {productCount} products").replace("{productCount}",this._state.getProducts().length)),l.a.hasClassName(this._mainContentNode,"hidden")||this._state.isOnPopstate?e||this.productCatalogNavigate():this._productsSelector.renderProducts(this._state,this._params.isEmbeddedView(),t,this._params.activeStoreId)},productCatalogAllLoaded:function(){var e=!((new B.a).query.page>1);this.productCatalogProductsFiltered(!0,e)},_hasSelectedFilters:function(){return Object.values($.extend({},m.a.getFiltersFromUrl(),this._state.filter)).filter((function(e){return e&&e.length>0})).length>0},productCatalogProductChosen:function(){var e=this._state.getActiveProduct();if(n.a.prototype.setLastActiveCatalogCategory(e.productId,e.mainCatalogCategoryId),this._params.onProductChoose)return this._params.onProductChoose(e),void this._trackProductPageView();this._updateTitle(!1),this._updateBreadcrumbs(e),this.hideMainContent(),Et.a.show(this._productNode,{minHeight:300}),this._params.store.products.getDataByProductId(this._state.activeProductId,this._renderProduct),this._trackProductPageView()},productCatalogVariantChanged:function(){this._productView.productInfo.updatePickers(this._params.store.categories.getActiveCategory())},hideMainContent:function(){l.a.addClassName(this._mainContentNode,"hidden")},isMainContentHidden:function(){return l.a.hasClassName(this._mainContentNode,"hidden")},productCatalogTabChosen:function(){this._state.activeProductId?this._state.isOnPopstate&&this._productView.setActiveTab(this._state.activeTab,!1):this.isMainContentHidden()||this._state.isOnPopstate?this.isMainContentHidden()?this.productCatalogNavigate():(this._productsSelector.isTabEventDispatching=!1,this._productsSelector.setActiveTab(this._state.activeTab),this._trackProductPageView()):this._updateTitle(this._state.getTitle())},_renderBreadcrumbs:function(){if(!this._params.enableBreadcrumbs)return"";var e=new ii.a;return e.addIndex(this._params.breadcrumbsIndexCategoryTitle),e},_updateBreadcrumbs:function(e){if(this._breadcrumbs){var t=this._params.store.categories.getActiveCategory();if(this._isFavoriteCategory(null==t?void 0:t.id)){var i="â† "+(e?dlang("products","Back to favorites"):dlang("products","Back to all products"));this._breadcrumbs.setShouldRenderIndex(!1),this._breadcrumbs.set([{title:i,onclick:this._returnToPrevious},{title:""}]),this._breadcrumbs.node.classList.add("hide-last"),this._breadcrumbs.node.classList.add("hide-after")}else this._breadcrumbs.setShouldRenderIndex(!0),this._breadcrumbs.node.classList.remove("hide-last"),this._breadcrumbs.node.classList.remove("hide-after"),this._breadcrumbs.set(this._params.store.categories.getPath()),e&&this._breadcrumbs.add(e);V.l(V.a)}},_returnToPrevious:function(){this._state.action===d.a.EVENT_PRODUCT_CHOOSE?v.a.createAndDispatch(d.a.EVENT_NAME,{category:this._state.category}):v.a.createAndDispatch(d.a.EVENT_NAME,{category:(new ai.a).getById(this._state.category.parentId)||new Vt.a})},_updateTitle:function(e){if(this._params.enableTitle)if(e){this._titleNode.innerHTML=e;var t=this._state.getSubtitle();t?(this._subtitleNode.innerHTML=t,l.a.removeClassName(this._subtitleNode,"pf-d-none")):l.a.addClassName(this._subtitleNode,"pf-d-none"),l.a.removeClassName(this._titleSearchNode,"pf-d-none"),l.a.insertBefore(this._titleWrapNode,this._productBannerNode)}else l.a.addClassName(this._titleSearchNode,"pf-d-none"),l.a.removeNode(this._titleWrapNode)},_clearBannerNode:function(){this._productBannerNode.classList.contains("slick-initialized")&&this._productBannerNode.slick.destroy(),l.a.clearNode(this._productBannerNode)},_renderMainContent:function(){var e,t,i=this;if(!1!==this._params.isRenderRequired){l.a.clearNode(this._mainContentNode),l.a.clearNode(this._productNode),l.a.removeClassName(this._mainContentNode,"hidden"),this._updateTitle(this._state.getTitle());var n=this._state.getProducts(),r=this._params.enableCategoriesSidebar||n.length&&this._params.enableProductsSidebar,a=this._params.store.categories.getActiveCategory();this._params.store.allowedFulfillmentRegions=this._params.allowedFulfillmentRegions,this._productsSelector=new $t;var o=this._getEmptyFavoriteProductNode(null==a?void 0:a.id,n);o?o.append(this._mainContentNode):(this._pushCategoryDataLayer(),tag("div","row",[r?tag("div","col-xs-12 col-sm-4 col-md-3 col-lg-3 col-xl-2 hidden-xs catalog__sidebar-floating",[tag("div","catalog__sidebar-header row hidden-sm hidden-md hidden-lg",[tag("div","pf-p-16",[tag("h5","pf-ui-subheading text-center pf-m-0",[dlang("products","Filters")]),tag("a",{className:"close",prop:{onclick:this._closeMobileSidebar}})]),tag("div","pf-px-16 pf-py-8 bordered",[tag("img",{className:"category-thumb pf-mr-16",prop:{src:a?a.urlImage:""}}),tag("h6","pf-h6 category-title",[a?a.getSidebarTitle():""]),this._nodeClearFilters=tag("a",{className:"pf-link pull-right pf-mt-8 hidden",onclick:this._clearFilters},[dlang("products","Clear filters")])])]),this._sidebar=new T(this._params.store,this._params.enableCategoriesSidebar,this._params.sellingRegion||Gt.a.sellingRegion),tag("div","catalog__sidebar-footer row pf-p-16 hidden-sm hidden-md hidden-lg",[tag("a",{className:"pf-btn pf-btn-primary btn-block",prop:{onclick:this._closeMobileSidebar}},[this._buttonTitle=tag("span","",[dlang("products","See {productCount} products").replace("{productCount}",n.length)])])])]):"",tag("div",r?"col-xs-12 col-sm-8 col-md-9 col-lg-9 col-xl-10":"col-xs-12",[this._sellingRegionCatalogOnboardingNode=tag("div"),this._categoriesSelector=new ti,this._productsSelector])]).append(this._mainContentNode)),this._sidebar&&this._productsSelector&&(this._productsSelector.filters=this._sidebar.filters);var s=this._params.sellingRegion||Gt.a.sellingRegion,c=null;d.a.isProductsPricing()&&(c=new _(_.TYPE_RECENTLY_VIEWED,[],s,{fullWidth:!this._shouldShowCategories()}),this._shouldShowCategories()?c.append(this._mainContentNode):(l.a.clearNode(this._productsSelector.recentlyViewedBlock),c.append(this._productsSelector.recentlyViewedBlock)),this._params.isFeaturedReviews&&(this._params.featuredReviews=new Oe(this._params.store.categories.getActiveCategoryId(),!0),this._params.featuredReviews.append(this._mainContentNode))),!s||s.isWorldwide()||this._shouldShowCategories()||null!==(e=this._state.category)&&void 0!==e&&null!==(t=e.settings)&&void 0!==t&&t.productsRegion||!this._params.store.products._params?l.a.clearNode(this._productsSelector.doesNotMatchSellingRegionProductsBlock):this._params.store.products.getSellingRegionNotMatchedProducts((function(e){if(e.products&&e.products.length){var t=new _(_.TYPE_DOES_NOT_MATCH_SELLING_REGION,e.products,s,{productCount:e.totalCount,activeStoreId:i._params.activeStoreId||null,fullWidth:!0});l.a.clearNode(i._productsSelector.doesNotMatchSellingRegionProductsBlock),t.append(i._productsSelector.doesNotMatchSellingRegionProductsBlock)}})),this._isTextBlockVisible()&&(void 0!==this._params.textBlockData.currentActiveBlock&&this._params.textBlockData.currentActiveBlock.removeResizeEvent(),this._params.textBlockData.currentActiveBlock=new u(this._params.textBlockData,this._params.store.categories.getActiveCategoryId()),this._params.textBlockData.currentActiveBlock.append(this._mainContentNode));var h=this._state.totalProductCount||null;r&&n.length&&h&&this._sidebar.filters.render(n,this._params.allowedFulfillmentRegions,h,parseInt(h)===n.length),this._params.store.categories.getActiveCategoryId()||this.node.classList.remove("catalog__sticky"),s&&this._getSellingRegionCatalogOnboarding()}},_getSellingRegionCatalogOnboarding:function(){var e=this,t=f.a.getDsrOnboardingBannerVisibility();null===t?Object(oi.a)("selling-region/get-catalog-onboarding-status").then((function(t){t&&(t.status&&e._renderDsrOnboardingBanner(),f.a.rememberDsrOnboardingBannerVisibility(t.status))})):!0===t&&this._renderDsrOnboardingBanner()},_renderDsrOnboardingBanner:function(){var e,t=this;if(l.a.clearNode(this._sellingRegionCatalogOnboardingNode),PF.Customer.isLogged()&&!PF.Customer.isB2cStarter()){var i=dlang("sellingRegion","Global default selling preferences applied!"),n=dlang("sellingRegion","We'll only display the products and product variants that correspond to your preferences. You can always update your global default selling preferences anytime from the Preferences menu at the top of the page.");this._state.catalogType!==d.a.TYPE_OF&&this._state.catalogType!==d.a.TYPE_PUSH||(i=dlang("sellingRegion","Store default selling preferences applied!"),n=dlang("sellingRegion","We'll only display the products and product variants that correspond to your individual store preferences. You can always update your store default selling preferences in Dashboard > Settings > Stores.")),new p.a({id:"selling-region-catalog-information-block",type:"success",icon:"/static/images/products-catalog/world.svg",heading:i,content:n,linkText:dlang("sellingRegion","Change settings"),closable:!0,onCloseClick:function(){Object(oi.a)("selling-region/dismiss-onboarding",{type:"selling_regions_catalog_information_block"}),l.a.clearNode(t._sellingRegionCatalogOnboardingNode),f.a.rememberDsrOnboardingBannerVisibility(!1)},onLinkClick:function(){Object(g.b)(t._params.activeStoreId)}}).append(this._sellingRegionCatalogOnboardingNode),null!==(e=this._state.category)&&void 0!==e&&e.parentId&&this._sellingRegionCatalogOnboardingNode.classList.add("pf-mb-16")}},_clearFilters:function(e){v.a.createAndDispatch(d.a.EVENT_PRODUCTS_FILTER,{filter:null,productsOrVariants:this._productItems,isOnPopstate:!0}),this._openMobileSidebar(e)},_closeMobileSidebar:function(e){e&&e.preventDefault(),$("html, body").css("overflow",""),$(document).find(".catalog__sidebar-floating").closest(".modal").scrollTop(0).css("overflow-y","auto"),$(document).find(".catalog__sidebar-floating").removeClass("open")},_openMobileSidebar:function(e){e.preventDefault(),$("html, body").css("overflow","hidden"),$(document).find(".catalog__sidebar-floating").closest(".modal").scrollTop(0).css("overflow-y","hidden"),$(document).find(".catalog__sidebar-floating").addClass("open")},_renderSearch:function(){return new ni.a({placeholder:dlang("products","Search products..."),type:this._params.searchType,onEnterPressed:function(){$(this.nodeInput).parent().find(".tt-selectable:first").addClass("tt-cursor").click()},onSelected:function(e){this._params.isProductTemplate?this._params.onProductChoose(S.a.fromArray(e)):location.href=e.autoCompleteUrl}.bind(this)})},_renderProduct:(li=function(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){si(a,n,r,o,s,"next",e)}function s(e){si(a,n,r,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._clearBannerNode(),l.a.clearNode(this._productNode),Et.a.hide(this._productNode),t.isFeaturedReviews=this._params.isFeaturedReviews,this._state.activeVariantId&&t.setActiveVariantById(this._state.activeVariantId),this._productView=new Tt(t),e.next=8,this._productView.init();case 8:this._productView.append(this._productNode),ci.pushProductDataLayer(t.activeVariant,this._params.store.categories.getActiveCategory());case 10:case"end":return e.stop()}}),e,this)}))),function(e){return li.apply(this,arguments)}),_attachStickyHeader:function(){var e=0,t=0;window.addEventListener("scroll",function(){e||(e=$(this._nodeSticky).offset().top),e+100<=window.pageYOffset&&this._params.store.categories.getActiveCategoryId()?(l.a.addClassName(this.node,"catalog__sticky"),l.a.removeClassName(this.container,"pf-px-0"),l.a.removeClassName(this._nodeSticky,"catalog__header--visible"),this._nodeSticky.style.top=""):e>=window.pageYOffset&&(l.a.removeClassName(this.node,"catalog__sticky"),l.a.addClassName(this.container,"pf-px-0"),l.a.removeClassName(this._nodeSticky,"catalog__header--visible"),this._nodeSticky.style.top=""),window.pageYOffset>t&&this._inputSearch&&!this._inputSearch.getValue()?l.a.removeClassName(this._nodeSticky,"catalog__header--visible"):l.a.addClassName(this._nodeSticky,"catalog__header--visible"),t=window.pageYOffset}.bind(this))},_scrollViewToTop:function(){var e=this.isMainContentHidden()?this._productNode:this._mainContentNode;$(e).offset().top>window.pageYOffset||$("html, body").animate({scrollTop:$(e).offset().top-100},300)},_shouldShowCategories:function(){return!this._state.category||0===this._state.category.parentId},_isTextBlockVisible:function(){return this._isTextBlockVisibleInLocale()&&d.a.isProductsPricing()&&(this._params.store.isRootCategory()||this._isProductListCategory()||this._isCategoryListCategory())},_isCategoryListCategory:function(){return null!==this._state.category&&0===this._state.category.parentId},_isProductListCategory:function(){return this._state.products.length},_isTextBlockVisibleInLocale:function(){return Xt.a.isUs()||Xt.a.isEs()||Xt.a.isJp()},_trackProductPageView:function(){ci.TRACKED_PAGE_VIEWS++,ci.TRACKED_PAGE_VIEWS<=1||(new a).trackPageView()},_renderProductBanner:function(){var e=this._params.banners,t=this._params.bannersPerPage,i=this._params.store.categories.getActiveCategoryId(),n=[];if(Array.isArray(e)&&e.length&&(n=e.sort((function(e,t){return e.position-t.position}))),this._params.enableProductBanners&&n.length)for(var r in n=n.filter((function(e){return e.categoryId===i})),t&&(e=n.slice(0,t)),n){var a=n[r],o=new wt;o.bannerId=a.gaEventId?a.gaEventId:a.bannerId,o.buttonText=a.buttonText,o.imgSrc=a.imageLink,o.imgSrcMobile=a.mobileImageLink,o.url=langUrl(a.url),o.title=a.title,o.columns=a.columns,new St(o).append(this._productBannerNode)}},_initSlider:function(){if(this._productBannerNode.children.length){var e=$(this._productBannerNode);e.slick({autoplay:!1,slidesToShow:2,lazyLoad:"ondemand",slidesToScroll:1,infinite:!0,arrows:!1,adaptiveHeight:!1,focusOnSelect:!1,dots:!1,rows:0,responsive:[{breakpoint:d.a.BREAKPOINT_DOTS,settings:{autoplay:!0,slidesToShow:1,dots:!0}}]}).on("click",(function(){e.slick("slickSetOption",{autoplay:!1},!1)})).on("touchend touchcancel touchmove",(function(){e.slick("slickPlay")}))}},_pushCategoryDataLayer:function(){var e=this._state.getProducts(),t=this._params.store.categories.getActiveCategory();if(e.length&&t){var i=e.map((function(e){return e.productId}));window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"dynamicRemarketing",ecomm_prodid:i,ecomm_pagetype:"category",ecomm_category:t.title})}},_renderRecentMockups:function(){if(l.a.clearNode(this._recentMockupsNode),this._state.catalogType!==d.a.TYPE_MG||this._state.getCategoryId()>0||this._isFavoriteCategory(this._state.getCategoryId()))l.a.addClassName(this._recentMockupsNode,"pf-d-none");else{var e=d.a.getRecentMockups();e.length<1?l.a.addClassName(this._recentMockupsNode,"pf-d-none"):l.a.removeClassName(this._recentMockupsNode,"pf-d-none"),tag("div","container",[tag("h4","pf-h4 pf-mt-0 pf-mb-16",dlang("products","Your recent products")),this._recentMockupsSlickNode=tag("div","row pf-my-0 slick-slider slick-dotted",e.map((function(e){return tag("div","col-12 col-sm-6 col-lg-3 pf-mb-24",[tag("div",{className:"pf-d-block pf-bg-white pf-hover-shadow pf-border pf-rounded--medium pf-pointer recent-mockups__item",onclick:function(t){return window.location.href=e.url}},[tag("div","row no-gutters",[tag("div","col-4 col-lg-5",[tag("img",{className:"img-responsive",src:e.image})]),tag("div","col",[tag("p","pf-ui-body pf-mx-8 pf-my-12",e.title)])])])])})))]).append(this._recentMockupsNode),this._initRecentMockupsSlider()}},_resizeInitRecentMockupsSlider:function(){o.a.delay("recent-mockups-slider",this._initRecentMockupsSlider.bind(this),200)},_initRecentMockupsSlider:function(){var e;(null===(e=this._recentMockupsSlickNode)||void 0===e?void 0:e.children.length)<2||$(this._recentMockupsSlickNode).slick({autoplay:!1,lazyLoad:"ondemand",infinite:!0,adaptiveHeight:!1,focusOnSelect:!1,slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,accessibility:!1,responsive:[{breakpoint:s.a.SIZES.SM,settings:"unslick"}]})},_getEmptyFavoriteProductNode:function(e,t){var i;return void 0===(null===(i=this._state)||void 0===i?void 0:i.totalCount)||!this._isFavoriteCategory(e)||t.length?null:tag("div","pf-d-flex pf-align-items-center pf-flex-column pf-align-items-center pf-justify-content-center pf-mb-32",[tag("img",{className:"favorites-image",src:Bt.a}),tag("div","pf-pt-40",dlang("products","Pick your favorite products and weâ€™ll list them here")),tag("a",{className:"pf-btn pf-btn-secondary pf-mt-24 pf-mr-8 pf-mb-12",onclick:this._returnToPrevious,text:dlang("products","Go to catalog")})])},_isFavoriteCategory:function(e){return e===Vt.a.ID_FAKE_FAVORITES}},l.a.Base);ci.TRACKED_PAGE_VIEWS=0,ci.toggleLock=function(e){ri.a.toggleLock(e)},ci.pushProductDataLayer=function(e,t){e&&t&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"dynamicRemarketing",ecomm_prodid:e.variantId,ecomm_pagetype:"product",ecomm_category:t.title,ecomm_totalvalue:e.price}))},ci.hasAccess=!0,d.b.isCatalogLoadedIn=!0,window&&((globalThis||{}).PFProductsCatalog=ci)},oixo:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("7pSD"),r=i("gYZI"),a=i("nF4n"),o=Class({_optionPicker:null,nodeError:null,__construct:function(e){this.setProductOptions(Object(r.a)(e)),this.nodeError=tag("div","alert alert-danger text-center hidden padding-10 margin-top-15",dlang("site","Please choose options!")),this.node=tag("div","margin-bottom-10"),this.render()},render:function(){a.a.clearNode(this.node),this._optionPicker.append(this.node),this.nodeError.append(this.node)},setPickerGeneratorPlacements:function(e){this._optionPicker&&this._optionPicker.hasOwnProperty("setGeneratorPlacements")&&this._optionPicker.setGeneratorPlacements(e)},getValues:function(){return this._optionPicker.getValues()},getData:function(){return this._optionPicker.getData?this._optionPicker.getData():{}},getPrices:function(){return this._optionPicker.getPrices?this._optionPicker.getPrices():{}},setValue:function(e,t){this._optionPicker.setValue&&this._optionPicker.setValue(e,t)},getValueCount:function(){return Object.keys(this.getValues()).length},setFileTypesWithFiles:function(e){return this._optionPicker.setPlacementIdsWithLayers(e).renderOptions(),this},setPlacementIdsWithFiles:function(e){return this._optionPicker.setPlacementIdsWithFiles(e).renderOptions(),this},hasValidOptions:function(){return this._optionPicker.hasValidOptions()},hasOption:function(e){return this._optionPicker.hasOption(e)},getExtraPrice:function(){return this._optionPicker.getExtraPrice()},hasSameValues:function(e,t){return this._optionPicker.hasSameValues(e,t)},isValuePicked:function(){return!!this.hasValidOptions()},hideError:function hideError(){a.a.addClassName(this.nodeError,"hidden")},updateErrorStatus:function(){return a.a.setNodeText(this.nodeError,this._optionPicker.errorMessage),!!a.a.hasClassName(this.node,"hidden")||(this.isValuePicked()?(a.a.addClassName(this.nodeError,"hidden"),!0):(a.a.removeClassName(this.nodeError,"hidden"),!1))},setProductOptions:function(e){return this._optionPicker=e,this},hasVisibleOptions:function(){return this._optionPicker.hasVisibleOptions()},setSelectedPlacementId:function(e){this._optionPicker.setSelectedPlacementId(e)}},n.a);(globalThis||{}).PFVariantPickerOptionPicker=o},osBa:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"b",(function(){return s})),i.d(t,"d",(function(){return c}));var n=i("nF4n"),r=i("jhOU"),a="layers-repositioned-warning";function o(e){return e&&e._templates&&e._templates.hasLayers()}function s(e,t){if(!e&&!t)return!1;if(!e||!t)return!0;var i=e._userTemplates||{},n=t._userTemplates||{};if(Object.keys(i).length!==Object.keys(n).length)return!0;var r=!1;return Object.keys(i).forEach((function(e){if(!r)if(n.hasOwnProperty(e)){var t,a,o=i[e]||{},s=n[e]||{};if(Object.keys(o).length===Object.keys(s).length)Object.keys(o).forEach((function(e){r||(s.hasOwnProperty(e)?(t=o[e],a=s[e],function(e,t){if(!e&&!t)return!1;if(!e||!t)return!0;var i,n,r,a=!1;if(["fillMode","height","placementId","technique","templateId","width"].forEach((function(i){a||e[i]!==t[i]&&(a=!0)})),a)return!0;var o=e.layers||[],s=t.layers||[];if(o.length!==s.length)return!0;for(i=0;i<o.length;i++)if(n=o[i],r=s[i],l(n,r))return!0}(t,a)&&(r=!0)):r=!0)}));else r=!0}else r=!0})),r}function l(e,t){if(!e&&!t)return!1;if(!e||!t)return!0;if(e.getType()!==t.getType())return!0;if(e.position?!t.position:!!t.position)return!0;if(e.position.isDifferent(t.position))return!0;var i=e.toArray(),n=t.toArray();if(Object.keys(i).length!==Object.keys(n).length)return!0;var r,a,o=!1,s=["position","uniqueId","overrideImagePulse","overrideImage"];return Object.keys(i).forEach((function(e){o||-1!==s.indexOf(e)||(r=i[e],a=n[e],r!==a&&(o=!0))})),o}function c(e,t){if(e&&t){var i=document.getElementsByClassName(a);if(!i.length){var o=tag("div","pf-position-relative"),s=t.substr(0,t.indexOf(" "));(i=new r.a({className:a,closable:!0,onAfterElementRemoved:function(){o.remove()},type:"warning",heading:dclang("generator","Image in designer may have changed after position recalculation","Please review your image"),content:dclang("generator","Warning about image size change from social media site (Instagram, Facebook, etc)","The latest {socialMediaSite} image size update has rearranged your design. Adjust your promo and download it in the new size.").replace("{socialMediaSite}",s)}).node).classList.add("pf-position-absolute"),i.classList.add("pf-w-100"),i.style.zIndex=5,i.append(o),n.a.insertBefore(o,e)}}}},pWIn:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("n6mh"),r=i("PSt6"),a=i("Jkv8"),o=Class({text:"",size:0,font:null,color:"",alignment:"",lineHeight:1,letterSpacing:0,engravingStyle:null,isCustomizable:!1,resizeToPercent:null,hasMultipleLines:!1,embroideryType:"",isGeneratorMockupTextLayerInstance:!0,_getNewLayer:function(){return new o},getOriginalClone:function(e){var t=this._getNewLayer();return e||(t.uniqueId=this.uniqueId),t.text=this.text,t.size=this.size,t.font=this.font,t.color=this.color,t.alignment=this.alignment,t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.engravingStyle=this.engravingStyle,t.customizeKey=this.customizeKey,t.generatorOptions=this.generatorOptions,t.isCustomizable=this.isCustomizable,t.resizeToPercent=this.resizeToPercent,t.hasMultipleLines=this.hasMultipleLines,t.overrideImage=this.overrideImage,t.overrideImagePulse=this.overrideImagePulse,t.position=this.position.getFromOriginalRatio(),t.originalPosition=this.originalPosition,t.parentLayerUniqueId=this.parentLayerUniqueId,t.embroideryType=this.embroideryType,t.patternType=this.patternType,t.patternSpacing=this.patternSpacing,t.flipX=this.flipX,t.flipY=this.flipY,t.isExisting=this.isExisting,t},getDPI:function(){return 600},isVector:function(){return!0},toArray:function(){return{type:o.TYPE,text:this.text,size:this.size,font:this.font.fontKey,fontName:this.font.name,fontPath:this.font["path-js"],color:this.color,alignment:this.alignment,lineHeight:this.lineHeight,letterSpacing:this.letterSpacing,engravingStyle:this.engravingStyle,resizeToPercent:this.resizeToPercent,hasMultipleLines:this.hasMultipleLines?1:0,position:this.position?this.position.toArray():{},embroideryType:this.embroideryType,isCustomizable:this.isCustomizable?1:0,customizeKey:this.customizeKey,uniqueId:this.uniqueId,parentLayerUniqueId:this.parentLayerUniqueId,overrideImage:this.overrideImage,overrideImagePulse:this.overrideImagePulse,patternType:this.patternType,patternSpacing:this.patternSpacing,flipX:this.flipX,flipY:this.flipY,isExisting:this.isExisting}},isTextLayer:function(){return!0},getType:function(){return o.TYPE},isAlignedLeft:function(){return this.alignment===o.ALIGN_LEFT},isAlignedRight:function(){return this.alignment===o.ALIGN_RIGHT},isAlignedCenter:function(){return this.alignment===o.ALIGN_CENTER},getFontName:function(){return this.font?this.font.name:""},isSimple:function(){return!1},copyValues:function(e){this.text=e.text,this.size=e.size,this.font=e.font,this.color=e.color,this.alignment=e.alignment,this.lineHeight=e.lineHeight,this.letterSpacing=e.letterSpacing,this.engravingStyle=e.engravingStyle,this.customizeKey=e.customizeKey,this.resizeToPercent=e.resizeToPercent,this.isCustomizable=e.isCustomizable,this.generatorOptions=e.generatorOptions,this.hasMultipleLines=e.hasMultipleLines,this.overrideImage=e.overrideImage,this.overrideImagePulse=e.overrideImagePulse,this.isExisting=e.isExisting},isConfigurationSame:function(e){return this.text===e.text&&Math.abs(this.size-e.size)<.001&&this.font.fontKey===e.font.fontKey&&Math.abs(this.lineHeight-e.lineHeight)<.001&&Math.abs(this.letterSpacing-e.letterSpacing)<.001&&this.color===e.color&&this.alignment===e.alignment},isWidthHeightRatioSame:function(e){return this.text===e.text&&this.getFontName()===e.getFontName()&&this.alignment===e.alignment&&Math.abs(this.lineHeight-e.lineHeight)<.001&&Math.abs(this.letterSpacing-e.letterSpacing)<.001},isValid:function(){return(new r.a).setActiveLayer(this).setText(this.text).isTextValid()},getUpdateDelay:function(){return this.isCustomizable?10:200},setWidthInPercent:function(e){this.resizeToPercent=e}},n.a);o.fromArray=function(e){var t=new o;return t.text=e.text,t.font=void 0!==Object(a.getPFCanvasFonts)().FONTS[e.font]?Object(a.getPFCanvasFonts)().FONTS[e.font]:e.font,t.color=e.color,t.alignment=e.alignment,t.letterSpacing=parseFloat(e.letterSpacing),t.lineHeight=parseFloat(e.lineHeight),t.size=parseFloat(e.size),t.engravingStyle=parseInt(e.engravingStyle),t},o.ALIGN_LEFT="left",o.ALIGN_RIGHT="right",o.ALIGN_CENTER="center",o.TYPE="text",window&&((globalThis||{}).PFComponentsGeneratorMockupTextLayer=o)},pnlN:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({onChildComponentProductOptionsChanged:null,designData:null,generatorParams:null,editDesignCallback:null});(globalThis||{}).PFMockupGeneratorBundleOrderPreviewPar=n},qqZP:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("n6mh"),r=i("+erO"),a=(i("mmgb"),Class({licensedAssetItem:null,isCropState:!1,getType:function(){return a.TYPE},_getNewLayer:function(){return new a},isLicensedAssetLayer:function(){return!0},getOriginalClone:function(e){var t,i=this._getNewLayer();return e||(i.uniqueId=this.uniqueId),i.licensedAssetItem=this.licensedAssetItem,i.patternType=this.patternType,i.patternSpacing=this.patternSpacing,i.flipX=this.flipX,i.flipY=this.flipY,i.quickDesignId=this.quickDesignId,i.groupType=this.groupType,i.groupId=this.groupId,i.overrideImage=this.overrideImage,i.position=this.position.getFromOriginalRatio(),i.isCropState=this.isCropState,i.cropPosition=null===(t=this.cropPosition)||void 0===t?void 0:t.getFromOriginalRatio(),i.originalPosition=this.originalPosition.getClone(),i},getSourceWidth:function(){return this.licensedAssetItem.width},getSourceHeight:function(){return this.licensedAssetItem.height},isVector:function(){return this.licensedAssetItem.isVector},toArray:function(){return{type:a.TYPE,licensedAssetId:this._getLicensedAssetId(),url:this._getUrl(),position:this.position?this.position.toArray():{},cropPosition:this.cropPosition?this.cropPosition.toArray():null,uniqueId:this.uniqueId,patternType:this.patternType,patternSpacing:this.patternSpacing,flipX:this.flipX,flipY:this.flipY,overrideImage:this.overrideImage,quickDesignId:this.quickDesignId,groupType:this.groupType,groupId:this.groupId}},_getUrl:function(){return this.licensedAssetItem.previewUrl},_getLicensedAssetId:function(){return this.licensedAssetItem.licensedAssetId},getDPI:function(){var e=this.cropPosition?this.cropPosition.width/this.position.width:1,t=this.getSourceWidth()*e,i=this.cropPosition||this.position;return this.isVector()?600:Math.round(t/i.getFromOriginalRatio().width)},isSimple:function(){return!1},isPartiallyOutOfBounds:function(){return this.cropPosition?this.cropPosition.isPartiallyOutOfBounds():this.position.isPartiallyOutOfBounds()},isCropPositionUpdateNeeded:function(){return!!this.cropPosition}},n.a));a.TYPE="licensedAsset",a.STATUS_REMOVED="removed",a.fromLicensedAssetItem=function(e){var t=new a;return t.licensedAssetItem=e,t.originalPosition=new r.a,t.position=t.originalPosition.getClone(),t},window&&((globalThis||{}).PFComponentsGeneratorMockupLicensedAssetLayer=a)},r4HB:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({_style:null,_callback:null,_inputOptions:[],__construct:function(e,t){this._style=e||r.ENGRAVING_FILLED,this._callback=t,this.node=tag("div"),this._addStyles()},_addStyles:function(){for(var e in n.a.clearNode(this.node),r.ENGRAVING_STYLES){var t=tag("input",{type:"radio",name:"engraving_style",value:e,checked:e===this._style.toString(),prop:{onchange:this.setStyle.bind(this,parseInt(e),!1)}});this._inputOptions.push(t),tag("label","pf-p-0",[t,tag("span","pf-pl-8",dlang("generator",r.ENGRAVING_STYLES[e]))]).append(this.node)}tag("div","",[this._styleWarning=tag("p","pf-mt-16 alert alert-warning",dlang("generator","Please select the mockup view to see how the outline engraving will look on the product"))]).append(this.node),this._setEngravingWarning()},setStyle:function(e,t){e||(e=r.ENGRAVING_FILLED),this._style=e,this._setEngravingWarning(),this._inputOptions.forEach((function(t){t.checked=e==t.value})),!t&&this._callback&&this._callback(this._style)},getStyle:function(){return this._style},_setEngravingWarning:function(){parseInt(this._style)===r.ENGRAVING_OUTLINE?n.a.removeClassName(this._styleWarning,"pf-d-none"):n.a.addClassName(this._styleWarning,"pf-d-none")}},n.a.Base);r.ENGRAVING_FILLED=0,r.ENGRAVING_OUTLINE=1,r.ENGRAVING_STYLES={},r.ENGRAVING_STYLES[r.ENGRAVING_FILLED]=dlang("products","Filled"),r.ENGRAVING_STYLES[r.ENGRAVING_OUTLINE]=dlang("products","Outline"),window&&((globalThis||{}).PFComponentsEngravingStylePicker=r)},rDi1:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("xeH2"),r=i.n(n),a=i("nF4n"),o=i("97Au"),s=Class({_storageKey:"mockupPopupSeen3",_isInModal:!1,_videoUrl:"https://www.youtube.com/embed/1iH5LSlaPsM",_videoTitle:"Mockup & Print File Generator Tutorial",_imageMaxHeight:"80px",_imageWidthInModal:"70px",_imageWidth:"170px",_isHtmlTitle:!1,_thumbnailFile:"",__construct:function(e,t){this._isInModal=e,this._isHtmlTitle=!!t,this.node=tag("div"),this._hasSeen()||this._render()},_render:function(){a.a.clearNode(this.node),tag("div","timed-popup pf-bg-lighter pf-border pf-p-16 pf-pr-24 pf-mb-24",[tag("div","pf-d-flex pf-flex-row pf-justify-content-left pf-align-items-center",[tag("div",{className:"pf-mr-16",style:{width:this._isInModal?this._imageWidthInModal:this._imageWidth}},[tag("img",{className:"timed-popup__thumbnail",src:this.getThumbnailUrl(),onclick:this._isInModal?null:this._createVideoPopup.bind(this),style:{maxHeight:this._imageMaxHeight,width:this._isInModal?this._imageWidthInModal:this._imageWidth}})]),tag("div",this._isInModal?null:{className:"timed-popup__label",onclick:this._createVideoPopup.bind(this)},[tag("div","timed-popup__title",this.getTitle()),tag("div","timed-popup__text",this.getText())])]),tag("div",{className:"timed-popup__close pf-p-8 pf-text-gray",onclick:this._closeIt},[tag("i","pf-i pf-i-close pf-i-24")])]).append(this.node)},getTitle:function(){return this._isHtmlTitle?this.getHtmlTitle():this._isInModal?"New text tool in the push generator!":"Same generator, new possibilities!"},getHtmlTitle:function(){return[]},getText:function(){return this._isInModal?"Upload your design files OR create new text-based design":"Check out the new text tool and create a text-based design."},getThumbnailUrl:function(){var e=this._isInModal?"push-info-icon.svg":"play-thumbnail.jpg";return this._thumbnailFile&&(e=this._thumbnailFile),"/static/images/popups/"+e},_hasSeen:function(){try{return"1"===localStorage.getItem(this._storageKey)}catch(e){}return!1},_closeIt:function(){a.a.removeNode(this.node);try{localStorage.setItem(this._storageKey,1)}catch(e){}},_createVideoPopup:function(){var e=new o.a.Par;e.title=this._videoTitle,e.modalDialogClass="modal-lg",e.deleteOnHide=!0,e.onShown=function(){r()(".video-embed").fitVids()};var t=new o.a(e);t.setContent(tag("div","video-embed",[tag("iframe",{src:this._videoUrl,attr:{width:"853",height:"480",frameborder:"0"}})])),t.show()}},a.a.Base);(globalThis||{}).PFTimedPopup=s;var l=i("Gv5l"),c=i("QLN8"),d=i("0Dcb"),u=i("DUxB"),h=i("cCrT"),p=function e(t){this.categories=new c.a,this.categories.storeId=t.storeId,this.categoryItems=[],this.par=new e.Par,a.a.O2O(this.par,t),this.breadcrumbs=new u.a,this.node=tag("div","",[!this.par.withoutBreadcrumbs&&this.breadcrumbs,this.nodeBody=tag("div","category-picker")]),this.load()};p.prototype=new a.a.Base,p.prototype.categories=null,p.prototype.par=null,p.prototype.load=function(){this.par.pickForGenerator?this.categories.getForGenerator(this.par.storeId,$.proxy(this.loadRe,this)):this.categories.get($.proxy(this.loadRe,this))},p.prototype.loadRe=function(e){var t=!1;if(this.par.storeId&&(t=(new l.a).getCachedStore(this.par.storeId).hasNewProductBetaAccess),e=e.filter((function(e){return!e.isHidden&&(!e.inBetaTest||e.inBetaTest&&t)}),t),this.categoryItems=e,this.par.categoryId)for(var i in this.categoryItems){var n=this.categoryItems[i];if(n.categoryId==this.par.categoryId)return void this._navigateToCategory(n)}else this.renderTopLevel()},p.prototype._renderBreadCrumbs=function(e){this.breadcrumbs.clear();var t=[],i={title:"All categories",onclick:this._navigateToCategory.bind(this,0)};t.push(i);var n=this.categories.getPath(e);for(var r in n)t.push({title:n[r].name,onclick:this._navigateToCategory.bind(this,n[r],!0)});this.breadcrumbs.add(t)},p.prototype._navigateToCategory=function(e,t){var i=e?e.categoryId:0;i&&t&&this.par.shouldSaveState&&p.setState(i),!i||e.hasChildren?e?this._renderLevel(e):this.renderTopLevel():"function"==typeof this.par.callback&&this.par.callback(e.categoryId)},p.prototype.renderTopLevel=function(){a.a.clearNode(this.nodeBody);var e=Object(a.a)({tag:"div",className:"row top-category"});this._renderBreadCrumbs(0),void 0!==s&&new s(!0).append(this.nodeBody);for(var t in this.categoryItems){var i=this.categoryItems[t];if(0===i.parentId){1;var n=null;i.badge&&(n={tag:"span",className:"product-item__badge product-item__badge--popular",text:i.badge}),Object(a.a)({tag:"div",className:"top-category__category-item-wrapper",els:[{tag:"a",className:"category-item",prop:{onclick:$.proxy(this._navigateToCategory,this,i,!0)},els:[new d.a({nodeContent:n,urlImage:i.urlImage}),{tag:"div",className:"title",text:i.name}]}]}).append(e)}}e.append(this.nodeBody)},p.prototype._renderLevel=function(e){var t,i,n=e.categoryId;this._renderBreadCrumbs(n),a.a.clearNode(this.nodeBody);var r=[];for(t in r=this.shouldShowInOneLevel(e)?[e]:this.categories.getByParentId(n)){var o=r[t],s=this.categories.getByParentId(o.categoryId);0==s.length&&s.push(o);var l=[];for(i in s)l.push(this.getSubCategoryThumbNode(s[i]));this.getSubCategoryRowNode(o,l).append(this.nodeBody)}},p.prototype.getSubCategoryRowNode=function(e,t){return Object(a.a)({tag:"div",className:"row sub-category",els:[{tag:"div",className:"col-sm-3 main-name",text:e.name},{tag:"div",className:"col-sm-9 sub-items",els:t}]})},p.prototype.getSubCategoryThumbNode=function(e){return Object(a.a)({tag:"a",className:"sub-category-item",prop:{onclick:$.proxy(this._navigateToCategory,this,e,!0)},els:[{tag:"div",className:"img-wrap",els:[{tag:"img",className:"img-responsive",src:e.urlImage}]},{tag:"div",className:"title",text:e.name}]})},p.prototype.shouldShowInOneLevel=function(e){if(e.parentId)return!0;var t=this.categories.getByParentId(e.categoryId);for(var i in t){if(this.categories.getByParentId(t[i].categoryId).length>0)return!1}return!0},p.setState=function(e){var t=new h.a,i={categoryId:e,productId:0};t.query.categoryId=e,t.query.productId=0,history.pushState(i,document.title,t.toString())},p.Par=function(){},p.Par.prototype.callback=null,p.Par.prototype.onSubCategoryPicked=null,p.Par.prototype.categoryId=0,p.Par.prototype.pickForGenerator=!1,p.Par.prototype.shouldSaveState=!1,p.Par.prototype.storeId=0,p.Par.prototype.withoutBreadcrumbs=!1,(globalThis||{}).PFCategoryPicker=p},"rF+z":function(e,t,i){"use strict";i.d(t,"a",(function(){return _}));var n=i("PSt6"),r=i("X5Ic"),a=i("msYT"),o=i.n(a),s=i("ZjJM"),l=i("Jkv8");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=f(e);if(t){var r=f(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return g(this,i)}}function g(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,e);var t,i,n,a=p(c);function c(){return d(this,c),a.apply(this,arguments)}return t=c,(i=[{key:"isTextSizeValid",value:function(){var e=this._getTechnique();if(!e||[r.a.TYPE_EMBROIDERY,r.a.TECHNIQUE_ENGRAVING,r.a.TYPE_JEWELRY].indexOf(e)<0)return!0;if(!this._activeLayer.font||this._activeLayer.isGeneratorMockupTextLayerInstance&&!Object(s.b)(Object(l.getPFCanvasFonts)().LOADED_JS_FONTS,this._activeLayer.font.fontKey))return!0;var t=this._activeLayer.getOriginalClone();t.isGeneratorMockupTextLayerInstance?o.a.DEPENDENCIES.TEXT2SVG.TextCalculator(t):t.isGeneratorMockupTextBoxLayerInstance&&o.a.calculateTextboxPositions(t);var i=t.text.trim().split("\n").length,n=this._getFontOptions();return e===r.a.TECHNIQUE_ENGRAVING||e===r.a.TECHNIQUE_EMBROIDERY?(Object(l.getPFCanvasFonts)().CUSTOMIZED_TEXT_SIZES[t.uniqueId]||t.size)>n.minSize:t.position.height/i*t.lineHeight>n.minSize}},{key:"isTextHeightOverUpperLimit",value:function(){if(!this._activeLayer.font||this._activeLayer.isGeneratorMockupTextLayerInstance&&!Object(s.b)(Object(l.getPFCanvasFonts)().LOADED_JS_FONTS,this._activeLayer.font.fontKey))return!1;var e=this._getFontMaxHeight();if(!e)return!1;var t=this._activeLayer.getOriginalClone();return t.text=t.text.replace(/\n/g,""),t.isGeneratorMockupTextBoxLayerInstance&&o.a.calculateTextboxPositions(t),t.position.height>e}}])&&u(t.prototype,i),n&&u(t,n),c}(n.a)},rFrQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("vUhP"),r=i("nF4n"),a=Class({_par:null,__construct:function(e,t){this._par=e,this.node=tag("div","row no-gutters pf-px-12 pf-px-md-0 pf-py-8 pf-py-md-0",[tag("div","col-12 col-md-auto order-2 order-md-1 pf-d-flex pf-align-items-center",[this._par.onBack?tag("a",{className:"pf-btn pf-btn-secondary pf-mr-12 pf-w-25 pf-w-md-auto",onclick:this._par.onBack},clang("Go back","Back")):"",this._buttonContinue=tag("div",{className:"pf-btn pf-btn-primary "+(this._par.onBack?"pf-w-75":"pf-w-100")+" pf-w-md-auto",id:"js--variant-picker-continue-button",onclick:t,style:{pointerEvents:"auto"},attr:{dusk:"variant-picker-continue-button"}},this._par.isShoppingCart?dlang("site","Add to cart"):lang("Continue"))]),tag("div","col-12 col-md-auto order-3 order-md-2",[this._nodeError=tag("div","pf-text-red pf-bold pf-px-8")]),tag("div","col-12 col-md order-1 order-md-3 pf-pb-8 pb-md-0 text-left text-md-right",[this._nodePrice=tag("div","pf-h4"),tag("span","pf-text-muted",lang("Excl. taxes and other charges"))])])},setPrice:function(e){(r.a.clearNode(this._nodePrice),e.price>0)&&n.a.createDiscountElementFromPriceData({priceData:e}).append(this._nodePrice)},setError:function setError(e){var t=this;r.a.clearNode(this._nodeError),"string"==typeof e&&(e=[e]),e instanceof Array&&e.forEach((function(e){tag("div","",e).append(t._nodeError)}))},isContinueJsEventDisabled:function(){return r.a.hasClassName(this._buttonContinue,"disabled-js")},disableContinueJsEvent:function(){r.a.addClassName(this._buttonContinue,"disabled-js")},enableContinueJsEvent:function(){r.a.removeClassName(this._buttonContinue,"disabled-js")},disableContinue:function(){r.a.addClassName(this._buttonContinue,"disabled"),this._par.onCanContinueChange&&this._par.onCanContinueChange(!1)},enableContinue:function(){r.a.removeClassName(this._buttonContinue,"disabled"),this._par.onCanContinueChange&&this._par.onCanContinueChange(!0),this.enableContinueJsEvent()},isContinueButtonDisable:function(){return r.a.hasClassName(this._buttonContinue,"disabled")}},r.a.Base);a.PRINTFILE_TOO_SMALL=dlang("generator","Your image doesn't meet our print requirements"),a.CUSTOMIZABLE_PRINTFILE_TOO_SMALL=lang("Image is too small, please select a file with a larger resolution!"),a.EMBROIDERY_OUT_OF_BOUNDS=dlang("generator","Please make sure your text is in the embroidery area."),a.EMBROIDERY_TEXT_TOO_SMALL=dlang("generator","Text is too small to embroider"),a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT=dlang("generator","Youâ€™ve exceeded the stitch length limit for this font"),a.EMBROIDERY_LAYERS_OVERLAPPING=dlang("dashboard","Text layers canâ€™t overlap"),a.LAYER_TEXT_TOO_SMALL=dlang("dashboard","Text size is too small"),a.LAYER_CLIPART_TOO_SMALL=dlang("dashboard","Clip art is too small"),a.TEXT_TOO_LONG=dlang("dashboard","Your text is too long. The limit is {limit} characters."),a.ENGRAVING_LAYERS_OVERLAPPING=dlang("dashboard","Different engraving style layers canâ€™t overlap"),a.LAYER_OUT_OF_BOUNDS=dlang("dashboard","Please make sure your layer falls within the print area"),a.EMBROIDERY_THREAD_COLOR_LIMIT=dlang("dashboard","To continue, please pick less than {limit} thread colors!"),a.EMBROIDERY_NOTES_MISSING=dlang("dashboard","To continue, please specify which parts of your design are Flat and which 3D in the Embroidery notes"),a.PRODUCT_OUT_OF_STOCK=dlang("dashboard","Product is currently out of stock"),(globalThis||{}).PFVariantPickerFooter=a},rKkW:function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return r}));var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"id",null),n(this,"name",""),n(this,"groupId",null),n(this,"index",0),n(this,"width",1e3),n(this,"height",1e3),n(this,"customizable",!1),n(this,"extra",{}),n(this,"svg",""),n(this,"unavailableTechniques",[]),n(this,"isActive",!0),n(this,"image",{}),n(this,"type","clipart")};n(r,"fromArray",(function(e){return Object.assign(new r,e)}))},s6Su:function(e,t,i){"use strict";i.d(t,"a",(function(){return P})),i.d(t,"b",(function(){return T}));var n=i("x0He"),r=i("SBaP"),a=i("oCYn"),o=i("e7F3");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=f(e);if(t){var r=f(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p(this,i)}}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function m(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var v=new WeakMap,y=new WeakMap,b=new WeakSet,P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,e);var t,i,n,r=h(a);function a(e){var t;return c(this,a),t=r.call(this),b.add(g(t)),v.set(g(t),{writable:!0,value:void 0}),y.set(g(t),{writable:!0,value:void 0}),t.node=tag("div","form-input-checkbox-mke"),m(g(t),v,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(g(t),b,C).call(g(t)),t}return t=a,(i=[{key:"destroy",value:function(){_(this,y).destroy(),m(this,y,null)}}])&&d(t.prototype,i),n&&d(t,n),a}(r.a),C=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.default.use(o.c),(t=new n.b).components={"input-checkbox":function(){return i.e(255).then(i.bind(null,"fb3t"))}},t.template='\n            <input-checkbox\n                :name="name"\n                :id="id"\n                :value="value"\n                :label="label"\n                :infoIcon="infoIcon"\n                :infoIconDelay="infoIconDelay"\n                :infoIconName="infoIconName"\n                :isReadOnly="isReadOnly"\n                :tooltip="tooltip"\n                :inputSize="inputSize"\n                :validation="validation"\n                :wrapperClass="wrapperClass"\n                :labelClass="labelClass"\n                @onChange="emitEvent(\'onChange\', $event)"\n                @onValidated="emitEvent(\'onValidated\', $event)"\n            />\n        ',t.initialData={name:_(this,v).name,id:_(this,v).id,value:_(this,v).value,label:_(this,v).label,infoIcon:_(this,v).infoIcon,infoIconDelay:_(this,v).infoIconDelay,infoIconName:_(this,v).infoIconName,isReadOnly:_(this,v).isReadOnly,tooltip:_(this,v).tooltip,inputSize:_(this,v).inputSize,validation:_(this,v).validation,wrapperClass:_(this,v).wrapperClass,labelClass:_(this,v).labelClass},t.emitEvent=function(e,t){switch(e){case"onChange":_(r,v).onChange&&_(r,v).onChange(t);break;case"onValidated":_(r,v).onValidated&&_(r,v).onValidated(t)}},m(this,y,new n.a(t)),_(this,y).append(this.node);case 8:case"end":return e.stop()}}),e,this)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),T=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,e),this.name=t.name||"default Name",this.id=t.id||void 0,this.value=t.value||!1,this.label=t.label||void 0,this.infoIcon=t.infoIcon||void 0,this.infoIconDelay=t.infoIconDelay||void 0,this.infoIconName=t.infoIconName||void 0,this.isReadOnly=t.isReadOnly||void 0,this.tooltip=t.tooltip||void 0,this.inputSize=t.inputSize||void 0,this.validation=t.validation||void 0,this.wrapperClass=t.wrapperClass||void 0,this.labelClass=t.labelClass||void 0,this.onChange=t.onChange||void 0,this.onValidated=t.onValidated||void 0}},sXh8:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"f",(function(){return c})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return u})),i.d(t,"e",(function(){return p})),i.d(t,"d",(function(){return g}));var n=i("nF4n"),r=i("KLvT"),a=i("Bxww");function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"groupTagInfo",""),s(this,"groupsWithTags",{optionGroupName:null,tagLabel:null})}var t,i,n;return t=e,n=[{key:"fromArray",value:function(e){return Object.assign(new this,e||{})}}],(i=null)&&o(t.prototype,i),n&&o(t,n),e}();function c(e){Object(r.a)().commit(a.a(a.e),e)}function d(){return Object(r.a)().getters[a.a(a.b)]}function u(e){if(h(e))return d().groupsWithTags.find((function(t){return t.optionGroupName===e})).tagLabel}function h(e){var t,i=null===(t=d())||void 0===t?void 0:t.groupsWithTags;return Array.isArray(i)?i.some((function(t){return t.optionGroupName===e})):i.optionGroupName===e}function p(e,t){return h(e)?tag("span",{className:"pf-py-0 pf-badge pf-badge-small pf-badge--default",style:{position:"absolute",right:"5px",bottom:"7.9px",zIndex:10,height:"auto"},innerHTML:dlang("generator","by ")+u(e)}).append(t):null}function g(e){var t;return n.a.clearNode(e),null!==(t=d())&&void 0!==t&&t.groupTagInfo?tag("div","container text-center clearfix",[tag("div","row",[tag("div",{className:"col-8 center-block pf-ui-body text-center pf-text-muted hide-empty",style:{marginTop:"36px",marginBottom:"-4px"},innerHTML:d().groupTagInfo})])]).append(e):null}},sd5M:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("Op/+"),r={getItemParent:function(e){return(new n.PFProductsCatalogUtilsStore).categories.getById(e.parentId)}};(globalThis||{}).PFProductsCatalogItemsCategoryItemHelpers=r},skaT:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("5B9T"),r=i("nF4n"),a=function e(t){var i;this.par=new e.Par,r.a.O2O(this.par,t||{}),this.par.showBig&&(this.par.nodeClass+=" swatches--big"),this.par.showInline&&(this.par.nodeClass+=" swatches--inline"),this.par.onColorChange&&null===this.par.maxCount&&(this.par.maxCount=this.par.colors.length),this.allColors=this.normalizeColorArray(this.par.colors),this.selectedColorHashes=[];var n=this.normalizeColorArray(this.par.activeColors);for(i in n)this.selectedColorHashes.push(this.getHashFromColors(n[i]));if(this.par.activeColorNames)for(i in this.par.activeColorNames){var a=this.par.activeColorNames[i],o=this.getHashFromColors(this.par.colorNames[a]);o?this.selectedColorHashes.push(o):console.error("Cannot find color for "+a+". Probably a duplicate")}this.node=Object(r.a)({tag:"div",className:"swatches",attr:{"aria-hidden":"true"}}),this.par.maxCount&&r.a.addClassName(this.node,"swatches--click"),this.par.nodeClass&&r.a.addClassName(this.node,this.par.nodeClass),this.render()};a.prototype=new r.a.Base,a.prototype.allColors=null,a.prototype.selectedColorHashes=null,a.prototype.render=function(){for(var e in r.a.clearNode(this.node),this.allColors){var t=this.allColors[e],i=[],a=this.getHashFromColors(t);for(var o in t)if(o!==n.a.luminosity){var s=tag("span",{style:{backgroundColor:t[o]}});i.push(s)}var l=tag("span",{className:"swatches__item",title:this.getColorName(t)+" "+t.join("/")},i);this.par.maxCount&&(l.onclick=$.proxy(this.onColorClick,this,a)),-1!==this.selectedColorHashes.indexOf(a)&&r.a.addClassName(l,"swatches__item--active"),l.append(this.node)}},a.prototype.onColorClick=function(e){var t=this.selectedColorHashes.indexOf(e);-1===t?1==this.par.maxCount?this.selectedColorHashes=[e]:this.selectedColorHashes.length<this.par.maxCount&&this.selectedColorHashes.push(e):this.selectedColorHashes.splice(t,1),this.render(),null!==this.par.onColorChange&&this.par.onColorChange(this.getSelectedColors())},a.prototype.getSelectedColors=function(){var e=[];for(var t in this.allColors){var i=this.allColors[t],n=this.getHashFromColors(i);this.selectedColorHashes.indexOf(n)>-1&&e.push(i)}return e},a.prototype.getHashFromColors=function(e){return!!e&&e.join(":").toUpperCase()},a.prototype.normalizeColorArray=function(e){var t=[],i={};for(var n in e){var r=e[n];if(r){r instanceof Array||(r=[r]);var a=this.getHashFromColors(r);i[a]||(t.push(r),i[a]=!0)}}return t},a.prototype.getColorName=function(e){if(e instanceof Array==0&&(e=[e]),!this.par.colorNames)return e.join(" ");var t=this.getHashFromColors(e);for(var i in this.par.colorNames)if(t===this.getHashFromColors(this.par.colorNames[i]))return i;return e.join(" ")},a.fromProduct=function(e,t){var i=[];for(var n in(t=t||new a.Par).colorNames={},e.colors){var r=e.colors[n];if(r.colorCode){var o=[r.colorCode.toUpperCase()];r.colorCode2&&o.push(r.colorCode2.toUpperCase()),i.push(o),t.colorNames[r.colorName]=r.getColorCodes()}}return t.colors=i,new a(t)},a._colorOrder=n.a.colorOrder,a._sortColors=function(e,t){var i=e.length>1,r=t.length>1;if(i||r)return i&&!r?1:!i&&r?-1:0;var a=e[0].toUpperCase(),o=t[0].toUpperCase();return n.a.compareColorsCallback(a,o)},a.Par=function(){},a.Par.prototype.onColorChange=null,a.Par.prototype.colors=null,a.Par.prototype.nodeClass="",a.Par.prototype.activeColors=null,a.Par.prototype.activeColorNames=null,a.Par.prototype.maxCount=null,a.Par.prototype.colorNames=null,a.Par.prototype.showBig=!1,a.Par.prototype.showInline=!1,a.Par.prototype.shouldSortByLuminosity=!0,window&&((globalThis||{}).PFComponentsSwatches=a)},t8U3:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("YBfo"),r={},a={preload:function(e){var t=e.filterTypes,i=e.type,a=e.typeTitle,o=e.typeSubtitle,s=e.typeBaseTitle,l=e.storeInitCallbacks;t&&(n.a.FILTER_TYPES=t),i&&(n.a.setCatalogType(i),a&&n.a.setPageTitle(i,a),o&&n.a.setPageSubtitle(i,o),s&&n.a.setBaseTitle(i,s)),l&&(l.main&&(r.main=l.main),l.products&&(r.products=l.products),l.categories&&(r.categories=l.categories))},getMainStoreInitCallback:function(){return r.main},getCategoriesStoreInitCallback:function(){return r.categories},getProductsStoreInitCallback:function(){return r.products}};(globalThis||{}).PFProductsCatalogPreloader=a},t8qe:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"h",(function(){return r})),i.d(t,"g",(function(){return a})),i.d(t,"i",(function(){return o})),i.d(t,"j",(function(){return s})),i.d(t,"f",(function(){return l})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return d})),i.d(t,"e",(function(){return u})),i.d(t,"d",(function(){return h}));var n="designer/layerPickerModule/",r="m_setChooserElements",a="m_setActiveView",o="m_setChooserOptionFlag",s="m_setValidationFlag",l="m_resetValidationFlags",c="g_activeChooserElements",d="g_getChooserOptionFlag",u="g_getValidationFlag";function h(e){return n+e}},"tw/D":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("7QI8"),r=i("6JZw"),a=i("nF4n"),o=Class({_data:[],getOptionsForPlacement:function(e){for(var t in this._data)if(this._data[t].placement===e)return this._data[t].options;return null},getPlacementFillColor:function(e){var t=this.getOptionsForPlacement(e);return(null==t?void 0:t.designFillColor)||null},setPlacementFillColor:function(e,t){var i=this.getOptionsForPlacement(e);i&&(t?i.designFillColor=t:delete i.designFillColor)},getPlacementPrintPreview:function(e){var t=this.getOptionsForPlacement(e);return(null==t?void 0:t.printPreview)||null},setPlacementPrintPreview:function(e,t){var i=this.getOptionsForPlacement(e);i&&(t?i.printPreview=t:delete i.printPreview)},setAllPlacementFillColor:function(e){for(var t in this._data){var i=this._data[t];n.a.DESIGN_FILL_COLOR_EXCEPTION_PLACEMENTS.indexOf(i.placement)>-1||(e?i.options.designFillColor=e:delete i.options.designFillColor)}},isSameFillForAllPlacements:function(){var e;for(var t in this._data){var i=this._data[t];if(!(n.a.DESIGN_FILL_COLOR_EXCEPTION_PLACEMENTS.indexOf(i.placement)>-1)){if(t>0&&e!==i.options.designFillColor)return!1;e=i.options.designFillColor}}return!0},hasPlacementWithFillColor:function(){for(var e in this._data)if(this._data[e].options.designFillColor)return!0;return!1},getData:function(){var e=[];return a.a.O2O(e,this._data),e}},r.a);o.fromArray=function(e){e=e||[];var t=new o;return a.a.O2O(t._data,e),t},o.duplicateFrom=function(e){var t=new o;return a.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsPlacementOptions=o)},tx4t:function(e,t,i){"use strict";i.d(t,"a",(function(){return Rc}));var n=i("WLCh"),r=i("mJTt"),a=i("HmCv"),o=i("4Ru2"),s=i("oixo"),l=i("Y6pR"),c=i("rFrQ"),d=i("Gv5l"),u=i("6t3j"),h=i("5sNq"),p=i("Q1Td"),g=i("pnlN"),f=i("aRUU"),m=i("bvdp"),v=i("xeH2"),y=i.n(v),b=i("TC9n"),P=i("oclZ"),C=i("SaSb"),T=i("9eNC"),I=i("nF4n");function w(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var E=Class({_drawerNode:null,_designerNode:null,_firstFooterNode:null,_tabsNode:null,_par:null,_isOpen:!1,_isAttached:!1,_isSticked:!1,_modal:!1,_secondFooterNode:null,_nodeStickPoint:null,_overrideBackCallback:null,_shouldScroll:null,__construct:function(e){var t,i,n=this;this._par=e,null!==(t=this._par)&&void 0!==t&&null!==(i=t.tabs)&&void 0!==i&&i.node&&(this._par.tabs.node.parentNodeOld=this._par.tabs.node.parentNode,Object.keys(this._par.content).forEach((function(e){return n._par.content[e].parentNodeOld=n._par.content[e].parentNode}))),this.node=tag("div","dynamic-sticky-footer "+(this._showBackdrop()?"dynamic-sticky-footer--backdrop":"")+" row pf-p-0 pf-py-md-16",[this._drawerNode=tag("div","dynamic-sticky-footer__drawer "+(this._isOpen?"dynamic-sticky-footer__drawer--open":"")+" pf-pt-24"),tag("button",{className:"dynamic-sticky-footer__close pf-p-8 pf-bg-light pf-rounded-circle",onclick:function(e){n._showContent(!1),n.updateFooter()}},[tag("i","pf-i pf-i-chevron-down pf-i-24")]),tag("div","dynamic-sticky-footer__whiteshadow"),this._firstFooterNode=tag("div","dynamic-sticky-footer__first "+(this._showBackdrop()?"pf-d-none":""),[tag("div","row no-gutters",[this._tabsNode=tag("div","col-8"),tag("div","col-4",[tag("button",{className:"pf-btn pf-btn-primary pf-btn-lg pf-btn-block pf-px-0 pf-rounded-0 dynamic-sticky-footer__cta",onclick:this._onCtaClick.bind(this)},this._par.ctaContent)])])]),this._secondFooterWrapNode=tag("div","dynamic-sticky-footer__second-wrap",[this._secondFooterNode=tag("div","dynamic-sticky-footer__second",[this._nodeBack=tag("button",{className:"pf-px-8 pf-py-12 dynamic-sticky-footer__back pf-text-gray",onclick:this._onBackClick.bind(this)},[tag("i","pf-i pf-i-close pf-i-24")]),this._secondFooterNodeHolder=tag("div","container")])])]),this.setSecondFooter(this._par.secondFooter)},setSecondFooter:function(e,t){I.a.clearNode(this._secondFooterNodeHolder),e&&(e.append(this._secondFooterNodeHolder),y()(this.node).parents(".modal-body").siblings(".modal-footer").addClass("pf-d-none"),y()(this.node).parents(".order-flow").addClass("mg-designer-modal"),this._findModal()),this._setSecondFooterHeight(e),this._overrideBackCallback="function"==typeof t?t:null,this._par.tabs?I.a.removeClassName(this._nodeBack,"pf-d-none"):I.a.addClassName(this._nodeBack,"pf-d-none"),this._unsubscribeFromEvents(),this._subscribeToEvents(),this.updateFooter()},_setSecondFooterHeight:function(e){var t=this._secondFooterNodeHolder.clientHeight>0?this._secondFooterNodeHolder.clientHeight:e&&e.clientHeight>0?e.clientHeight:0;t>0&&(this._secondFooterWrapNode.style.height=t+5+"px",this._secondFooterWrapNode.style.overflow="")},_onCtaClick:function(e){e.preventDefault(),this._showSecondFooter(),"function"==typeof this._par.onCtaClick&&this._par.onCtaClick()},_onBackClick:function(e){e.preventDefault(),"function"==typeof this._overrideBackCallback&&(this._overrideBackCallback(e),this._overrideBackCallback=null),this._showFirstFooter(),"function"==typeof this._par.onBackClick&&this._par.onBackClick(),T.l(T.c)},_disableFooterExpandMenu:function(){y()(this._secondFooterWrapNode).find(".mg-sticky-footer-secondary-more-menu, .mg-sticky-footer-more-menu").removeClass("pf-d-block")},_showFirstFooter:function(){"function"!=typeof this._overrideBackCallback&&(this._secondFooterWrapNode.style.height="",this._secondFooterWrapNode.style.overflow="",I.a.removeClassName(this.node,"dynamic-sticky-footer--slided"),this._disableFooterExpandMenu())},_showSecondFooter:function(){this._setSecondFooterHeight(),I.a.addClassName(this.node,"dynamic-sticky-footer--slided"),this._disableFooterExpandMenu()},_onOutsideClick:function(e){var t=this,i=this._eventPath(e),n=!this.node.contains(e.target)&&this.node!==e.target&&i.indexOf(this.node)<0,r=i.filter((function(e){var i,n;return null===(i=t._par.tabs)||void 0===i||null===(n=i.tabNodes)||void 0===n?void 0:n.includes(e)})).length>0;n?this._showContent(!1):r&&!this._isOpen&&this._onTabClick(e)},_eventPath:function(e){if(e.composedPath)return e.composedPath();if(e.path)return e.path;for(var t=[],i=e.target;i;)t.push(i),i=i.parentElement;return t.indexOf(window)<0&&t.indexOf(document)<0&&t.push(document),t.indexOf(window)<0&&t.push(window),t},_onTabClick:function(e){if(this._showContent(!0),this._stick(),this._shouldScroll){this._shouldScroll=!1;var t=this._getDesignerNode()?this._getDesignerNode(!0).offset().top-100:0;document.body.scrollTop=document.documentElement.scrollTop=t}},showTab:function(){var e,t,i=null===(e=this._par.tabs)||void 0===e||null===(t=e.getActiveTab())||void 0===t?void 0:t.customId;i&&this._onTabClick(i)},setScrollTop:function(e){y()(".dynamic-sticky-footer__drawer").animate({scrollTop:e},200)},_showContent:function(e){this._isOpen=!!e,this._isOpen?I.a.addClassName(this._drawerNode,"dynamic-sticky-footer__drawer--open"):I.a.removeClassName(this._drawerNode,"dynamic-sticky-footer__drawer--open"),this._isOpen||y()(this._tabsNode).find(".tab.active").removeClass("active"),this._showBackdrop()?(I.a.addClassName(this.node,"dynamic-sticky-footer--backdrop"),I.a.addClassName(this._firstFooterNode,"pf-d-none")):(I.a.removeClassName(this.node,"dynamic-sticky-footer--backdrop"),I.a.removeClassName(this._firstFooterNode,"pf-d-none"))},_showBackdrop:function(){return this._isOpen&&this._par.tabs&&this._par.tabs.getActiveTab()},updateFooter:function(){this._updateFooterShow(),this._updateFooterStick(),this._updateFooterAttach()},_updateFooterShow:function(){this._par.tabs?this._showFirstFooter():this._secondFooterNode&&this._showSecondFooter()},_getDesignerNode:function(e){return this._designerNode&&document.body.contains(this._designerNode)||(this._designerNode=document.getElementById("js--product-push-designer")),e?y()(this._designerNode):this._designerNode},_isMobileIOS:function(){return CSS.supports("(-webkit-touch-callout: none)")},_updateFooterStick:function(){if(this._nodeStickPoint){var e=this._getDesignerNode()?this._getDesignerNode().getBoundingClientRect():{},t=e.top||0,i=e.bottom||0,n=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),r=this._modal?this._modal.innerHeight:n,a=this._par.designerPar.isModalDesigner||this._modal,o=t>r,s=r-i>0,l=o||s&&!a;!a&&I.a.hasClassName(this.node,"dynamic-sticky-footer--sticky")&&(s=r-(i+this.node.getBoundingClientRect().height)>0,l=o||s&&!a),t&&i||(l=!0);var c=!1===this._shouldScroll;if(this._shouldScroll=l&&s&&!a,a||C.a.isWindowBiggerThan(C.a.MD)?I.a.removeClassName(this._nodeStickPoint,"dynamic-sticky-footer-stick-point--spaced"):I.a.addClassName(this._nodeStickPoint,"dynamic-sticky-footer-stick-point--spaced"),l&&!this._isOpen){if(c)return void(this._shouldScroll=null);this._unstick()}else this._stick()}},_updateFooterAttach:function(){C.a.isWindowSmallerThan(C.a.MD)?this._attach():this._detach()},_subscribeToEvents:function(){var e;if(window.addEventListener("resize",this._onResizeThrottle,!1),this._findModal(),this._modal||window.addEventListener("scroll",this._onScrollThrottle,!1),document.body.addEventListener("click",this._onOutsideClick,!1),null!==(e=this._par.tabs)&&void 0!==e&&e.tabNodes){var t,i=w(this._par.tabs.tabNodes);try{for(i.s();!(t=i.n()).done;){t.value.addEventListener("click",this._onTabClick,!1)}}catch(e){i.e(e)}finally{i.f()}}T.n(E.EVENT_UPDATE_MOBILE_FOOTER,this.updateFooter,this)},_onResizeThrottle:function(){P.a.delay("dynamic-sticky-footer-resize",this.updateFooter.bind(this),100)},_onScrollThrottle:function(){P.a.delay("dynamic-sticky-footer-scroll",this._updateFooterStick.bind(this),15)},_unsubscribeFromEvents:function(){window.removeEventListener("resize",this._onResizeThrottle,!1),this._modal||window.removeEventListener("scroll",this._onScrollThrottle,!1),document.body.removeEventListener("click",this._onOutsideClick,!1),T.m(E.EVENT_UPDATE_MOBILE_FOOTER,this.updateFooter)},_attach:function(){var e,t=this;if(!this._isAttached&&this._par.tabs){if(this._isAttached=!0,y()(".pf-zendesk-chat").addClass("pf-d-none"),this._par.tabs.append(this._tabsNode),Object.keys(this._par.content).forEach((function(e){return t._par.content[e].append(t._drawerNode)})),I.a.addClassName(this.node,"dynamic-sticky-footer--attached"),this._showFirstFooter(),null!==(e=this._par.tabs)&&void 0!==e&&e.tabNodes){var i,n=w(this._par.tabs.tabNodes);try{for(n.s();!(i=n.n()).done;){var r=i.value;r.removeEventListener("click",this._onTabClick,!1),r.addEventListener("click",this._onTabClick,!1)}}catch(e){n.e(e)}finally{n.f()}}this._par.tabs.render()}},_detach:function(){var e,t,i=this;this._isAttached&&(this._isAttached=!1,y()(".pf-zendesk-chat").removeClass("pf-d-none"),null!==(e=this._par.tabs)&&void 0!==e&&null!==(t=e.node)&&void 0!==t&&t.parentNodeOld&&this._par.tabs.append(this._par.tabs.node.parentNodeOld),Object.keys(this._par.content).length&&Object.keys(this._par.content).forEach((function(e){var t;return null!==(t=i._par.content[e])&&void 0!==t&&t.parentNodeOld?i._par.content[e].append(i._par.content[e].parentNodeOld):null})),I.a.removeClassName(this.node,"dynamic-sticky-footer--attached"),this._showSecondFooter())},_stick:function(){this._isSticked||(this._isSticked=!0,I.a.addClassName(this.node,"dynamic-sticky-footer--sticky"),!this._isMobileIOS()&&this._getDesignerNode()&&(this._par.designerPar.isModalDesigner||this._modal)&&(this._getDesignerNode().style.paddingBottom=this.node.getBoundingClientRect().height+"px"))},_unstick:function(){this._isSticked&&(this._isSticked=!1,I.a.removeClassName(this.node,"dynamic-sticky-footer--sticky"),this._showContent(!1),this._getDesignerNode()&&(this._getDesignerNode().style.paddingBottom="0px"))},_findModal:function(){this._modal=y()(this.node).closest(".modal-content").get(0)||null},append:function(e){return this.node.append(e),this._nodeStickPoint&&(I.a.removeNode(this._nodeStickPoint),this._nodeStickPoint=null),this._nodeStickPoint=tag("div","dynamic-sticky-footer-stick-point"),I.a.insertBefore(this._nodeStickPoint,this.node),this._findModal(),setTimeout(T.l,1,b.a.EVENT_SHOULD_RECALCULATE),this}},I.a.Base);E.EVENT_UPDATE_MOBILE_FOOTER="MobileFooter:EVENT_UPDATE_MOBILE_FOOTER",(globalThis||{}).PFMockupGeneratorDesignerDynamicStickyFooter=E;var k=i("o0qH"),O=i("ohgv"),A=i("md/F"),L=i("E17x"),N=i("vUhP"),D=i("Z5vq"),R=i("7h5t"),x=i("gqyd"),F=i("pWIn"),M=i("+I3z"),B=Class({templates:null,onLayerCreated:function(e,t,i){console.error("No callback present for - onLayerCreated",e,t,i)},onLayerRemoved:function(e){console.error("No callback present for - onLayerRemoved",e)},onLayerConfigurationChanged:function(e){console.error("No callback present for - onLayerConfigurationChanged",e)},placementSelector:null,allowCustomizableLayers:null,technique:null,onBackCallback:null,isAdvancedTemplate:null,isAllOver:null,threadColorSelectionLimit:null,embroideryTypePrices:null,getSelectedEmbroideryColors:null,selectedGeneratorVariants:null,hasProductlessScale:null});window&&((globalThis||{}).PFProductPushTextboxPickerPar=B);var V=i("A8Hf"),j=i("FU2h"),U=i("cVO5"),z=i("7XA3"),G=i("ka4h"),H=i("wllI"),Y=i("v88+"),q=i("PSt6"),W=i("JQxb"),K=i("3Dht"),Z=i("dqhU"),Q=i("dzpP"),X=i("bWRx"),J=i("UYP3"),ee=i("X4PR"),te=i("aLTI"),ie=i("r4HB"),ne=i("Mg/F"),re=i("9hBW"),ae=i("iBt0"),oe=i("7QI8"),se=i("+erO"),le=i("GyOi"),ce=i("X5Ic"),de=i("msYT"),ue=i.n(de),he=i("sjGI"),pe=i("o5cA"),ge=i("0Dko"),fe=i("wo5H"),_e=i("boP+"),me=i("Jkv8"),ve=i("gQ2J"),ye=Class({_par:null,_state:{defaultFont:function(){return he.a.isJp()?Object(me.getPFCanvasFonts)().FONTS["noto-sans-jp"]:Object(me.getPFCanvasFonts)().FONTS["open-sans-b"]},isExistingLayer:!1,textboxLayer:null,isFocused:!1,nodeTextStyle:null,changeTimeout:null,_forceDisableCustomizer:!1,canAddNewLayers:!0,isCharLimitEnabled:!1,position:null,originalPosition:null},_canCustomizeCheckbox:null,_validator:null,_techniqueMemory:null,_inactiveBtnClass:"pf-text-light",nodeError:null,fallbackFont:"open-sans-b",__construct:function(e){var t;this._par=e,this._subscribeToTemplateEvents(),this._state.textboxLayer=this._getNewLayer(),this._validator=new q.a,this._validator.isCharLimitEnabled=this._state.isCharLimitEnabled,this._validator.setActiveLayer(this._state.textboxLayer),this._techniqueMemory=new k.a(null===(t=Object(_e.a)())||void 0===t?void 0:t.productId),this.node=tag("div","textbox-picker pf-mb-md-160 pf-mb-lg-128"),this._fontDropdownPar=new ee.a,this._fontDropdownPar.font=this._state.textboxLayer?this._state.textboxLayer.font:this._state.defaultFont(),this._fontDropdownPar.fonts=te.a.defaultFonts(this._par.technique),this._fontDropdownPar.onChange=this._onFontChanged,this._loadRequiredFont(this._state.textboxLayer.font,this.render)},_render:function(){this._renderTextboxPicker(),this._state.textboxLayer.isCustomizable&&this._setCustomizableSliderValue(this._state.textboxLayer,!1),this.nodeError=tag("div","alert alert-danger text-center pf-d-none pf-p-12 pf-mt-16",lang("Please add text!")).append(this.node)},_renderTextboxPicker:function(){this._state._forceDisableCustomizer=this._getSelectedPlacementId()===oe.a.TYPE_LABEL_INSIDE;var e=this._state.textboxLayer;if(this._fontDropdownPar.font=e.font,this._fontDropdown=new te.a(this._fontDropdownPar),this._engravingStylePicker=new ie.a(e.engravingStyle,this._onEngravingStyleChanged),this._isTechniqueEmbroidery()){var t=new H.a;t.embroideryTypesAvailable=[oe.a.DIGITIZATION_FLAT,oe.a.DIGITIZATION_3D],t.embroideryType=e.embroideryType,t.labelTooltipText=lang("We digitize each file to a format that supports embroidery and charge a one-time fee of $6.50 for each embroidery type. You can reuse a digitized file for the same embroidery type with other orders at no additional cost."),t.embroideryTypePrices=this._par.embroideryTypePrices,this._embroideryTypePicker=new Y.a(t)}else this._embroideryTypePicker=null;var i=!this._state.canAddNewLayers&&!this._state.isExistingLayer;this._textarea=tag("textarea",{attr:{placeholder:dlang("dashboard","Start typing here")},value:e.text,prop:{oninput:this._onTextChanged,onkeydown:this._onTextKeyDown,disabled:i},className:i?"disabled":"",style:{width:"100%",height:"90px",maxWidth:"100%",minWidth:"100%",minHeight:"90px"}}),this._nodeTemplateInfo=new W.a;var n=Object(_e.a)();n&&e.text.length&&!this._par.isAdvancedTemplate()&&this._nodeTemplateInfo.renderGuidelineInfo(),tag("div","",[this._par.onBackCallback?tag("a",{className:"pf-link-block pf-mb-8",onclick:this._par.onBackCallback},[tag("i","pf-i pf-i-chevron-left pf-i-24 pf-text-muted"),tag("span","pf-pl-4",lang("See all design layers"))]):"",this._nodeTemplateInfo.node,this._embroideryTypePicker?tag("hr"):"",this._embroideryTypePicker?this._embroideryTypePicker:"",this._embroideryTypePicker?tag("hr"):"",tag("div","pf-my-8",[tag("div","pf-d-inline",[this._nodeCustomizableLabel=new z.a]),this._nodeTextareaTitle=tag("h6","pf-d-inline")]),this._textarea]).append(this.node),this._state.textboxLayer.isCustomizable&&this._allowCustomizableLayers()?this._nodeCustomizableLabel.show():this._nodeCustomizableLabel.hide(),this._updateTextareaTitle(),Object(V.a)(this._textarea),this._state.isFocused&&(this._textarea.focus(),this._textarea.setSelectionRange(this._textarea.value.length,this._textarea.value.length)),this._state.nodeTextStyle=tag("div",this._state.isExistingLayer?"":"pf-d-none").append(this.node),this._nodeTextAlign=tag("div","pf-mb-24 "+(this._canDisplayTextAlignInput(this._state.textboxLayer.text)?"":"pf-d-none"),[tag("h6",null,[dlang("generator","Align text")]),this._nodeTextAlignButtons=tag("div",null,[tag("button",{className:"text-picker__align-btn btn btn-empty pf-mr-16 pf-px-8",onclick:this._onTextAligned.bind(this,F.a.ALIGN_LEFT),data:{alignment:F.a.ALIGN_LEFT}},[tag("i","pf-i pf-i-format-align-left pf-i-24")]),tag("button",{className:"text-picker__align-btn btn btn-empty pf-mr-16 pf-px-8",onclick:this._onTextAligned.bind(this,F.a.ALIGN_CENTER),data:{alignment:F.a.ALIGN_CENTER}},[tag("i","pf-i pf-i-format-align-center pf-i-24")]),tag("button",{className:"text-picker__align-btn btn btn-empty pf-mr-16 pf-px-8",onclick:this._onTextAligned.bind(this,F.a.ALIGN_RIGHT),data:{alignment:F.a.ALIGN_RIGHT}},[tag("i","pf-i pf-i-format-align-right pf-i-24")])])]).append(this._state.nodeTextStyle),this._updateTextAlignButtonStates(),tag("div","pf-mb-24",[tag("h6","",dlang("generator","Choose typeface")),this._fontDropdown]).append(this._state.nodeTextStyle),null!=n&&n.isJewelry()?tag("div","pf-mb-16",[tag("h6","",dlang("generator","Choose engraving style")),this._engravingStylePicker]).append(this._state.nodeTextStyle):tag("div","pf-mb-16",[this._colorDropdownNode=this._getColorDropdownHtml()]).append(this._state.nodeTextStyle),tag("div","row pf-mb-8",[this._nodeTextSize=this._getTextSizeInput(),this._nodeLetterSpacing=this._getLetterSpacingInput()]).append(this._state.nodeTextStyle),tag("div","row pf-mb-16",[this._nodeLineHeight=this._getLineHeightInput(),this._rotationInput=this._getRotationInput(),this._arcAngleInput=this._isTechniqueEmbroidery()?"":this._getArcAngleInput()]).append(this._state.nodeTextStyle),this.renderCustomizableCheckbox()},_setColorDropdownPars:function(){var e=this;if(this._colorDropdownPar=new ne.a,this._colorDropdownPar.color=this._state.textboxLayer.getDefaultColor(),this._colorDropdownPar.colors=this._getColors(),this._colorDropdownPar.hideRGB=this._isTechniqueEmbroidery(),this._colorDropdownPar.onChange=this._onColorChanged.bind(this),this._colorDropdownPar.showColorInHeader=!this._isTechniqueEmbroidery(),this._colorDropdownPar.boundsCheckQuery=".modal-content",this._colorDropdownPar.hasProductlessScale=this._par.hasProductlessScale,this._hasGraphics()&&(this._colorDropdownPar.hasGraphics=!0,this._colorDropdownPar.areaWidthForGraphics=function(){var t;return null===(t=e._par.templates.getSelectedTemplate())||void 0===t?void 0:t.width},this._colorDropdownPar.getMinDpiForGraphics=function(){return e._getMinDpiForTextGraphic()}),this._colorDropdownPar.nodeDropdownFooter&&I.a.clearNode(this._colorDropdownPar.nodeDropdownFooter),this._par.getSelectedEmbroideryColors&&(this._par.getSelectedEmbroideryColors().length>ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS?(this._colorDropdownPar.nodeDropdownFooter=tag("div","color-mapper__footer--warning",[dlang("generator","You can choose up to {number} colors").replace("{number}",this._par.threadColorSelectionLimit)]),this._colorDropdownPar.highlightColorsAsError=!0):this._colorDropdownPar.highlightColorsAsError=!1,this._colorDropdownPar.highlightedColors=this._par.getSelectedEmbroideryColors()),!this._isTechniqueEmbroidery()){var t=re.a.getNoneColor();Object.assign(t,this._getColors()),this._strokeWeightInput=this._getStrokeWeightInput(),this._strokeOffsetInput=this._getStrokeOffsetInput(),this._strokeDropdownPar=new ne.a,this._strokeDropdownPar.showColorInHeader=!0,this._strokeDropdownPar.colors=t,this._strokeDropdownPar.onChange=this._onStrokeColorChanged.bind(this),this._strokeDropdownPar.boundsCheckQuery=".modal-content",this._strokeDropdownPar.nodeDropdownFooter=tag("div","",[this._strokeWeightInput,this._strokeOffsetInput]),this._shadowDistanceInput=this._getShadowDistanceInput(),this._shadowAngleInput=this._getShadowAngleInput(),this._shadowDropdownPar=new ne.a,this._shadowDropdownPar.showColorInHeader=!0,this._shadowDropdownPar.colors=t,this._shadowDropdownPar.onChange=this._onShadowColorChanged.bind(this),this._shadowDropdownPar.boundsCheckQuery=".modal-content",this._shadowDropdownPar.nodeDropdownFooter=tag("div","",[this._shadowDistanceInput,this._shadowAngleInput])}},_getColorDropdownHtml:function(){if(this._setColorDropdownPars(),this._colorDropdown=new re.a(this._colorDropdownPar),this._isTechniqueEmbroidery())return tag("div","",[tag("h6","",dlang("generator","Text color")),this._colorDropdown]);var e=this._state.textboxLayer;return this._strokeDropdownPar.color=e.strokeColor,this._strokeDropdownPar.color?(this._strokeWeightInput.setValue(e.strokeWeight),this._strokeWeightInput.show(),this._strokeOffsetInput.setValue(e.strokeOffset),this._strokeOffsetInput.show()):(this._strokeWeightInput.hide(),this._strokeOffsetInput.hide()),this._strokeDropdown=new re.a(this._strokeDropdownPar),this._shadowDropdownPar.color=e.shadowColor,this._shadowDropdownPar.color?(this._shadowDistanceInput.setValue(e.shadowDistance),this._shadowDistanceInput.show(),this._shadowAngleInput.setValue(e.shadowAngle),this._shadowAngleInput.show()):(this._shadowDistanceInput.hide(),this._shadowAngleInput.hide()),this._shadowDropdown=new re.a(this._shadowDropdownPar),tag("div","textbox-colors row",[tag("div","col-4 textbox-colors__text",[tag("h6","",[dlang("generator","Text color")]),this._colorDropdown]),tag("div","col-4 textbox-colors__stroke",[tag("h6","",dlang("generator","Outline")),this._strokeDropdown]),tag("div","col-4 textbox-colors__shadow",[tag("h6","",dlang("generator","Shadow")),this._shadowDropdown])])},_updateTextStylingOptions:function(){var e;this._state.isExistingLayer?I.a.removeClassName(this._state.nodeTextStyle,"pf-d-none"):I.a.addClassName(this._state.nodeTextStyle,"pf-d-none"),this._state._forceDisableCustomizer=this._getSelectedPlacementId()===oe.a.TYPE_LABEL_INSIDE,Object(V.a)(this._textarea),this._state.isFocused&&(this._textarea.focus(),this._textarea.setSelectionRange(this._textarea.value.length,this._textarea.value.length));var t=this._state.textboxLayer;if(t){var i=Object(_e.a)();null!=i&&i.isJewelry()||(this._isTechniqueEmbroidery()&&(I.a.clearNode(this._colorDropdownNode),this._getColorDropdownHtml().append(this._colorDropdownNode)),t.hasFillImage()?this._colorDropdown.setColorGraphic(t.colorGraphic,!0,!0):this._colorDropdown.setColor(t.color,!0),this._isTechniqueEmbroidery()||(this._strokeDropdown.setColor(t.strokeColor,!0),t.strokeColor?(this._strokeWeightInput.setValue(t.strokeWeight),this._strokeWeightInput.show(),this._strokeOffsetInput.setValue(t.strokeOffset),this._strokeOffsetInput.show()):(this._strokeWeightInput.hide(),this._strokeOffsetInput.hide()),this._shadowDropdown.setColor(t.shadowColor,!0),t.shadowColor?(this._shadowDistanceInput.setValue(t.shadowDistance),this._shadowDistanceInput.show(),this._shadowAngleInput.setValue(t.shadowAngle),this._shadowAngleInput.show()):(this._shadowDistanceInput.hide(),this._shadowAngleInput.hide()))),this._fontDropdown.setFont(t.font,!0),this._engravingStylePicker.setStyle(t.engravingStyle,!0),this._state.textboxLayer.isCustomizable&&this._allowCustomizableLayers()?this._nodeCustomizableLabel.show():this._nodeCustomizableLabel.hide();var n=!this._state.canAddNewLayers&&!this._state.isExistingLayer;this._textarea.value=t.text,n?(I.a.addClassName(this._textarea,"disabled"),this._textarea.disabled=!0):(I.a.removeClassName(this._textarea,"disabled"),this._textarea.disabled=!1),this._showHideTextAlignInput(),this._includesNewLines(t.text)?this._nodeLineHeight.show():this._nodeLineHeight.hide(),this._nodeTextSize.setValue(t.size),this._nodeLetterSpacing.setValue(t.letterSpacing),this._nodeLineHeight.setValue(t.lineHeight),null!==(e=this._arcAngleInput)&&void 0!==e&&e.setValue&&this._arcAngleInput.setValue(t.arcAngle),this._setRotationValue(t.position.rotation),this._nodeTemplateInfo=new W.a,i&&t.text.length&&!this._par.isAdvancedTemplate()&&this._nodeTemplateInfo.renderGuidelineInfo(),this._updateTextareaTitle(),this._updateTextAlignButtonStates(),this.renderCustomizableCheckbox()}},_setRotationValue:function(e){e=e>180?e-360:e,this._rotationInput.setValue(e)},_onValueChanged:function(e,t){if(this._state&&this._state.textboxLayer){var i=(e===ye.STROKE_OFFSET||e===ye.STROKE_WEIGHT)&&!this._state.textboxLayer.strokeColor,n=(e===ye.SHADOW_DISTANCE||e===ye.SHADOW_ANGLE)&&!this._state.textboxLayer.shadowColor;i||n||(e===ye.STROKE_WEIGHT&&(0==t?this._hideStrokeOffset():0==this._state.textboxLayer.strokeWeight&&t>0&&this._showStrokeOffset()),this._state.textboxLayer[e]=t,this._onConfigurationChanged(!0))}},_hideStrokeOffset:function(){this._state.textboxLayer.strokeOffset=0,this._strokeOffsetInput.setValue(this._state.textboxLayer.strokeOffset),this._strokeOffsetInput.hide()},_showStrokeOffset:function(){this._state.textboxLayer.strokeOffset=ye.STROKE_OFFSET_DEFAULT,this._strokeOffsetInput.setValue(this._state.textboxLayer.strokeOffset),this._strokeOffsetInput.show()},_getTextSizeInput:function(){var e,t=new Q.a;return t.title=dlang("dashboard","Text size"),t.value=this._state.textboxLayer.size,t.defaultValue=.2,t.minValue=.2,t.maxValue=100,t.incrementStep=.1,null!==(e=Object(_e.a)())&&void 0!==e&&e.isJewelry()?(t.defaultValue=.12,t.minValue=.12,t.incrementStep=.01):[ce.a.TECHNIQUE_PROMO,fe.j].includes(this._par.technique)&&(t.defaultValue=fe.i,t.minValue=1,t.maxValue=null,t.incrementStep=1),t.onValueChanged=this._onFontSizeChanged,new X.a(t)},_getLetterSpacingInput:function(){var e=new Q.a;e.title=dlang("dashboard","Letter spacing"),e.value=this._state.textboxLayer.letterSpacing,e.defaultValue=-.5,e.minValue=-.5,e.maxValue=10;var t=Object(_e.a)();return t&&(this._techniqueMemory.isEmbroidery(t.type)||t.isJewelry())&&(e.defaultValue=0,e.minValue=0,e.maxValue=1),e.incrementStep=.1,e.onValueChanged=this._onLetterSpacingChanged,new X.a(e)},_getLineHeightInput:function(){var e=new Q.a;e.title=dlang("dashboard","Line height"),e.value=this._state.textboxLayer.lineHeight,e.isVisible=this._includesNewLines(this._state.textboxLayer.text),e.defaultValue=.2,e.minValue=.2,e.maxValue=100;var t=Object(_e.a)();return t&&(this._techniqueMemory.isEmbroidery(t.type)||t.isJewelry())&&(e.defaultValue=1,e.minValue=1),e.incrementStep=.1,e.onValueChanged=this._onLineHeightChanged,new X.a(e)},_getRotationInput:function(){var e,t=new K.a;return t.title=dlang("dashboard","Rotate"),t.className="col-sm-12",t.value=this._state.textboxLayer.position.rotation,t.minValue=-180,t.maxValue=180,t.incrementStep=1,t.fractionDigits=0,t.hasNumberInput=!0,null!==(e=Object(_e.a)())&&void 0!==e&&e.isJewelry()&&(t.isVisible=!1),t.onValueChanged=this._onRotationChanged,t.onSlide=this._onRotationChanged,new Z.a(t)},_getArcAngleInput:function(){if(!!window.navigator&&/MSIE|Trident|Edge/.test(window.navigator.userAgent)){var e=dlang("generator","Text Arc isn't supported by Internet Explorer and Microsoft Edge. Please use a different browser."),t=new ae.a(e,"warning");return tag("div","col-sm-12",[tag("div","pf-bold pf-mb-8",dlang("generator","Arc")),t])}var i=new K.a;return i.title=dlang("generator","Arc"),i.className="col-sm-12",i.value=this._state.textboxLayer.arcAngle,i.minValue=-360,i.maxValue=360,i.incrementStep=1,i.fractionDigits=0,i.hasNumberInput=!0,i.onValueChanged=this._onArcAngleChanged,i.onSlide=this._onArcAngleChanged,new Z.a(i)},_getStrokeWeightInput:function(){var e=new K.a;return e.title=dlang("generator","Weight"),e.className="pf-mb-8",e.value=this._state.textboxLayer.strokeWeight,e.minValue=0,e.maxValue=.6,e.hasNumberInput=!0,e.onValueChanged=this._onValueChanged.bind(this,ye.STROKE_WEIGHT),e.onSlide=this._onValueChanged.bind(this,ye.STROKE_WEIGHT),new Z.a(e)},_getStrokeOffsetInput:function(){var e=new K.a;return e.title=dlang("generator","Offset"),e.className="pf-mb-8",e.value=this._state.textboxLayer.strokeOffset,e.minValue=0,e.maxValue=.2,e.hasNumberInput=!0,e.onValueChanged=this._onValueChanged.bind(this,ye.STROKE_OFFSET),e.onSlide=this._onValueChanged.bind(this,ye.STROKE_OFFSET),new Z.a(e)},_getShadowDistanceInput:function(){var e=new K.a;return e.title=dlang("generator","Distance"),e.className="pf-mb-8",e.value=this._state.textboxLayer.shadowDistance,e.minValue=0,e.maxValue=1,e.hasNumberInput=!0,e.onValueChanged=this._onValueChanged.bind(this,ye.SHADOW_DISTANCE),e.onSlide=this._onValueChanged.bind(this,ye.SHADOW_DISTANCE),new Z.a(e)},_getShadowAngleInput:function(){var e=new K.a;return e.title=dlang("generator","Angle"),e.className="pf-mb-8",e.value=this._state.textboxLayer.shadowAngle,e.minValue=0,e.maxValue=359.9,e.incrementStep=.1,e.fractionDigits=1,e.hasNumberInput=!0,e.onValueChanged=this._onValueChanged.bind(this,ye.SHADOW_ANGLE),e.onSlide=this._onValueChanged.bind(this,ye.SHADOW_ANGLE),new Z.a(e)},_updateTextareaTitle:function(){this._state.textboxLayer!==this._validator._activeLayer&&this._validator.setActiveLayer(this._state.textboxLayer);var e=this._validator.getCharLimit()-this._textarea.value.length,t="text-picker__title-limit float-right";e||(t+=" "+t+"--reached"),I.a.clearNode(this._nodeTextareaTitle);var i="";this._isTechniqueEmbroidery()&&(i=tag("span",{className:"glyphicon glyphicon-info-sign",style:{verticalAlign:0,marginLeft:"4px"},attr:{title:dlang("dashboard",dlang("generator","Only for flat embroidery"))}})),tag("span",null,[dlang("generator","Write your text"),i,this._state.isCharLimitEnabled?tag("span",t,nlang("(%d character left)","(%d characters left)",e)):""]).append(this._nodeTextareaTitle),i&&$(i).tooltip({container:"body"})},_updateRotationInput:function(e,t){this._unsubscribeTemplateEventsIfNeeded()||t instanceof Z.a||this._setRotationValue(e.position.rotation)},_onLayerRemovedExternally:function(e,t){!this._unsubscribeTemplateEventsIfNeeded()&&this._state.textboxLayer&&t.uniqueId===this._state.textboxLayer.uniqueId&&this.resetText()},resetText:function(e){this._state.textboxLayer=null,this._state.isExistingLayer=!1,this._state.isFocused=!0,this._textarea.value="",e&&(this._rememberLayerState=!1),this._updateTextStylingOptions()},editTextboxLayer:function(e){if(!this._unsubscribeTemplateEventsIfNeeded()){var t=e instanceof R.a;e&&t&&(this._state.textboxLayer=e.getOriginalClone(),this._state.isExistingLayer=!0,this._state.isFocused=!0,this._updateTextStylingOptions(),this._setCustomizableSliderValue(e,!1))}},_onLayerPositionsChangedExternally:function(e,t,i){if(!this._unsubscribeTemplateEventsIfNeeded()&&(this._setCustomizableSliderValue(t,!0),!i instanceof Z.a&&this._setRotationValue(t.position.rotation),i!==this&&this._state.textboxLayer))for(var n in e){var r=e[n],a=r.getLayerIndex(this._state.textboxLayer);if(a>-1){var o=r.layers[a].getOriginalClone(),s=!o.isConfigurationSame(this._state.textboxLayer);return this._state.textboxLayer=o,i instanceof J.a&&(this._state.isFocused=!1),void(s&&this._updateTextStylingOptions())}}},_onLayerTextChangedExternally:function(e,t){!this._unsubscribeTemplateEventsIfNeeded()&&t!==this&&e instanceof R.a&&(e.parentLayerUniqueId||(this._state.textboxLayer=e),this._state.isFocused=!1,this._updateTextStylingOptions())},_getNewLayer:function(){var e=new R.a;e.font=this._state.defaultFont();var t=this._getSelectedPlacementId();if(e.size=pe.a.getDefaultFontSize(t,this._par.technique),e.color=e.getDefaultColor(),e.alignment=F.a.ALIGN_CENTER,e.originalPosition=new se.a,e.position=e.originalPosition.getClone(),Object(_e.c)()&&Object(ve.b)(e),this._isTechniqueEmbroidery()&&(e.embroideryType=Y.a.getDefaultEmbroideryType()),this._rememberLayerState){var i=Object(_e.a)();if(this._isTechniqueEmbroidery()||null!=i&&i.isJewelry()||(e.strokeColor=this._strokeDropdown.getColor(),e.strokeWeight=this._strokeWeightInput.value,e.strokeOffset=this._strokeOffsetInput.value,e.shadowColor=this._shadowDropdown.getColor(),e.shadowDistance=this._shadowDistanceInput.value,e.shadowAngle=this._shadowAngleInput.value),null!=i&&i.isJewelry())e.engravingStyle=this._engravingStylePicker.getStyle()||e.engravingStyle;else{var n=this._colorDropdown.getColor();n instanceof le.a?(e.colorGraphic=n,e.color=""):(e.color=n,e.colorGraphic=null)}!this._isTechniqueEmbroidery()&&this._arcAngleInput&&(e.arcAngle=Number(this._arcAngleInput.value)),e.font=this._fontDropdown.getFont(),e.alignment=this._getTextAlignButtonState(),e.size=this._nodeTextSize.value,e.letterSpacing=this._nodeLetterSpacing.value,e.lineHeight=this._nodeLineHeight.value,e.position=this._state.position.getClone(),e.originalPosition=this._state.originalPosition.getClone()}return this._isTechniqueEmbroidery()&&void 0!==this._fontDropdown&&(e.font=this.setEmbDefaultFont(this._fontDropdown)),e},_onColorChanged:function(e){e instanceof le.a?(this._state.textboxLayer.colorGraphic=e,this._state.textboxLayer.color=""):(this._state.textboxLayer.color=e,this._state.textboxLayer.colorGraphic=null),this._onConfigurationChanged(!0),this._par.templates.getChangeListener().notifyLayerColorsChanged(this._getSelectedPlacementId(),this._state.textboxLayer,!1)},_onStrokeColorChanged:function(e){!this._state.textboxLayer.strokeColor&&e&&(this._state.textboxLayer.strokeWeight=ye.STROKE_WEIGHT_DEFAULT,this._strokeWeightInput.setValue(this._state.textboxLayer.strokeWeight),this._strokeWeightInput.show(),this._showStrokeOffset()),this._state.textboxLayer.strokeColor=e,e||(this._state.textboxLayer.strokeWeight=0,this._strokeWeightInput.setValue(this._state.textboxLayer.strokeWeight),this._strokeWeightInput.hide(),this._hideStrokeOffset()),this._onConfigurationChanged(!0),this._par.templates.getChangeListener().notifyLayerColorsChanged(this._getSelectedPlacementId(),this._state.textboxLayer,!1)},_onShadowColorChanged:function(e){!this._state.textboxLayer.shadowColor&&e&&(this._state.textboxLayer.shadowDistance=ye.SHADOW_DISTANCE_DEFAULT,this._shadowDistanceInput.setValue(this._state.textboxLayer.shadowDistance),this._shadowDistanceInput.show(),this._state.textboxLayer.shadowAngle=ye.SHADOW_ANGLE_DEFAULT,this._shadowAngleInput.setValue(this._state.textboxLayer.shadowAngle),this._shadowAngleInput.show()),this._state.textboxLayer.shadowColor=e,e||(this._state.textboxLayer.shadowDistance=0,this._shadowDistanceInput.setValue(this._state.textboxLayer.shadowDistance),this._shadowDistanceInput.hide(),this._state.textboxLayer.shadowAngle=0,this._shadowAngleInput.setValue(this._state.textboxLayer.shadowAngle),this._shadowAngleInput.hide()),this._onConfigurationChanged(!0),this._par.templates.getChangeListener().notifyLayerColorsChanged(this._getSelectedPlacementId(),this._state.textboxLayer,!1)},_onEngravingStyleChanged:function(e){this._state.textboxLayer.engravingStyle=e,this._onConfigurationChanged(!0)},_deleteLayer:function(){this._rememberLayerState=!0,this._state.position=this._state.textboxLayer.position.getClone(),this._state.originalPosition=this._state.textboxLayer.originalPosition.getClone(),this._par.onLayerRemoved&&this._par.onLayerRemoved(this._state.textboxLayer),this.resetText()},_onTextAligned:function(e){this._state.textboxLayer.alignment=e,this._onConfigurationChanged(!0),this._updateTextAlignButtonStates()},_onTextKeyDown:function(e){e.stopPropagation()},_onTextChanged:function(e){e.stopPropagation();var t=e.target.value.trim();if(this._state.isFocused=!0,this._state.textboxLayer||(this._state.textboxLayer=this._getNewLayer()),t!==this._state.textboxLayer.text){if(""===t)return this._nodeTemplateInfo.clearGuidelineInfo(),this._deleteLayer(),Object(L.b)()&&clearTimeout(this._state.changeTimeout),void(this._par.onBackCallback&&this._par.onBackCallback());if(this._validator.setText(t),!this._validator.isTextValid())return this._onTextChangedAfter(this._validator.getValidText()),void this._updateTextStylingOptions();this._updateTextareaTitle(),Object(_e.c)()&&!this._par.isAdvancedTemplate()&&this._nodeTemplateInfo.renderGuidelineInfo(),Object(L.b)()?(clearTimeout(this._state.changeTimeout),this._state.changeTimeout=setTimeout(function(){this._loadRequiredFont(this._state.textboxLayer.font,this._onTextChangedAfter.bind(this,t))}.bind(this),200)):this._loadRequiredFont(this._state.textboxLayer.font,this._onTextChangedAfter.bind(this,t)),this.hideError()}},_onTextChangedAfter:function(e){this._canDisplayTextAlignInput(e)?I.a.removeClassName(this._nodeTextAlign,"pf-d-none"):I.a.addClassName(this._nodeTextAlign,"pf-d-none"),this._includesNewLines(e)?this._nodeLineHeight.show():this._nodeLineHeight.hide(),this._state.textboxLayer.text=e,this._state.textboxLayer.hasMultipleLines=this._includesNewLines(e),this._state.textboxLayer.resizeToPercent=null,this._onConfigurationChanged(!0)},_onConfigurationChanged:function(e){var t=this;if(e||this._updateTextStylingOptions(),I.a.removeClassName(this._state.nodeTextStyle,"hidden"),this._validator.setActiveLayer(this._state.textboxLayer),this._state.isExistingLayer){var i=this._createdDateTime+ye.DELAY_CONFIG_CHANGED_EXEC;Date.now()>=i?this._par.onLayerConfigurationChanged(this._state.textboxLayer):setTimeout((function(){t._par.onLayerConfigurationChanged(t._state.textboxLayer)}),i-Date.now())}else if(this._state.textboxLayer&&(this._state.isExistingLayer=!0,this._par.onLayerCreated)){var n=this._rememberLayerState&&this._state.textboxLayer.position.width;this._par.onLayerCreated(this._state.textboxLayer,this._rememberLayerState,n),this._createdDateTime=Date.now(),this._rememberLayerState=!1}},_onFontSizeChanged:function(e){this._state.textboxLayer.size=e,this._onConfigurationChanged(!0)},_onFontChanged:function(e){this._loadRequiredFont(e,function(){this._state.textboxLayer.font=e,this._updateTextareaTitle(),this._onConfigurationChanged(!0)}.bind(this,e))},setEnabled:function(e){return this._state.canAddNewLayers=e,this},render:function(){return this._textarea?this._updateTextStylingOptions():this._render(),this},renderCustomizableCheckbox:function(){if(!this._allowCustomizableLayers())return!1;this._canCustomizeCheckbox&&I.a.removeNode(this._canCustomizeCheckbox.node);var e=new U.a;e.isChecked=this._state.textboxLayer.isCustomizable,e.onChange=this._changeIsCustomizable,e.showSlider=!0,e.onSliderChange=this._onTextLayerWidthChange,e.layerType=R.a.TYPE,this._canCustomizeCheckbox=new G.a(e),this._state.nodeTextStyle&&this._canCustomizeCheckbox.append(this._state.nodeTextStyle),this._canCustomizeCheckbox.setSliderValue(this._state.textboxLayer.resizeToPercent)},_includesNewLines:function(e){return e.trim().split("\n").length>1},_hasArcAngleSet:function(){return!!this._state.textboxLayer.arcAngle},_canDisplayTextAlignInput:function(e){return!this._hasArcAngleSet()&&this._includesNewLines(e)},_loadRequiredFont:function(e,t){return ue.a.loadTTFFont(e.fontKey,e["path-ttf"],"",t)},_onLineHeightChanged:function(e){this._state.textboxLayer.lineHeight=e,this._onConfigurationChanged(!0)},_onRotationChanged:function(e){this._state.textboxLayer.position.rotation=parseFloat(e),this._onConfigurationChanged(!0)},_onArcAngleChanged:function(e){this._state.textboxLayer.arcAngle=parseFloat(e),this._state.textboxLayer.alignment!==F.a.ALIGN_CENTER&&this._onTextAligned(F.a.ALIGN_CENTER),this._onConfigurationChanged(!0),this._showHideTextAlignInput()},_showHideTextAlignInput:function(){this._canDisplayTextAlignInput(this._state.textboxLayer.text)?I.a.removeClassName(this._nodeTextAlign,"pf-d-none"):I.a.addClassName(this._nodeTextAlign,"pf-d-none")},_onLetterSpacingChanged:function(e){this._state.textboxLayer.letterSpacing=e,this._onConfigurationChanged(!0)},_changeIsCustomizable:function(){this._state.textboxLayer.isCustomizable=!this._state.textboxLayer.isCustomizable,this._onConfigurationChanged()},_onTextLayerWidthChange:function(e){this._state.textboxLayer.setWidthInPercent(e),this._onConfigurationChanged(!0)},_setCustomizableSliderValue:function(e,t){if(this._allowCustomizableLayers()&&this._canCustomizeCheckbox){var i=e.position.width;if(e.resizeToPercent){var n=e.position.areaWidth*e.resizeToPercent/100;(i=e.position.width>n?e.position.width:n)>e.originalPosition.areaWidth&&(i=e.originalPosition.areaWidth)}var r=100*i/e.originalPosition.areaWidth,a=Math.round(r);this._canCustomizeCheckbox.setSliderValue(a),t&&this._state.textboxLayer&&(this._state.textboxLayer.resizeToPercent=a)}},_allowCustomizableLayers:function(){return!this._state._forceDisableCustomizer&&this._par.allowCustomizableLayers()},_getColors:function(){var e=!!this._par.isAllOver&&this._par.isAllOver(),t=j.a.getAllAvailableColors(this._isTechniqueEmbroidery(),this._getSelectedPlacementId(),e,!0);if(!this._isTechniqueEmbroidery()){var i=Object(_e.a)();null!=i&&i.isWhiteDtgTote()&&delete t.White,null!=i&&i.isBlackMug()&&delete t.Black}return t},_subscribeToTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().addOnTemplatePositionsChangedListener(this._onLayerPositionsChangedExternally).addOnLayerRotatedListener(this._updateRotationInput).addOnLayerRemovedListener(this._onLayerRemovedExternally).addOnLayerConfigurationChanged(this._onLayerTextChangedExternally)},unsubscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().unsubscribe(this._onLayerPositionsChangedExternally).unsubscribe(this._updateRotationInput).unsubscribe(this._onLayerRemovedExternally).unsubscribe(this._onLayerTextChangedExternally)},_unsubscribeTemplateEventsIfNeeded:function(){return!Object(L.a)(this.node)&&(this.unsubscribeTemplateEvents(),!0)},_updateTextAlignButtonStates:function(){for(var e=this._nodeTextAlignButtons.children,t=0;t<e.length;t++)I.a.addClassName(e[t],this._inactiveBtnClass),e[t].dataset.alignment===this._state.textboxLayer.alignment&&I.a.removeClassName(e[t],this._inactiveBtnClass)},_getTextAlignButtonState:function(){for(var e=this._nodeTextAlignButtons.children,t=0;t<e.length;t++)if(e[t].className.indexOf(this._inactiveBtnClass)<0)return e[t].dataset.alignment;return F.a.ALIGN_CENTER},hideError:function hideError(){I.a.addClassName(this.nodeError,"pf-d-none")},showError:function showError(){I.a.removeClassName(this.nodeError,"pf-d-none")},_isTechniqueEmbroidery:function(){return this._par.technique===ce.a.TECHNIQUE_EMBROIDERY},_hasGraphics:function(){return this._par.technique!==ce.a.TECHNIQUE_EMBROIDERY&&this._par.technique!==ce.a.TECHNIQUE_ENGRAVING},_getSelectedPlacementId:function(){return this._par.placementSelector?this._par.placementSelector.getSelectedPlacementId():null},_getMinDpiForTextGraphic:function(){var e,t=this,i=this._par.templates.getSelectedTemplate(),n=this._getSelectedPlacementId(),r=null===(e=this._par.selectedGeneratorVariants())||void 0===e?void 0:e.generatorVariants,a=[ce.a.TYPE_POSTER,ce.a.TYPE_FRAMED_POSTER,ce.a.TYPE_CANVAS,ce.a.TYPE_STICKER,ce.a.TYPE_PHONE_CASE],o=1;return i&&a.includes(i.technique)&&n&&r&&r.forEach((function(e){var r=t._par.templates.getUserTemplate(n,e.templateId).width/i.width;o=Math.max(o,r)})),Math.ceil(this._par.templates.getRequiredDpi()*o*2)},setWindowCanvasFont:function(e){return Object(me.getPFCanvasFonts)().FONTS[e]},isFontAvailableInList:function(e,t){return!!t&&!!e.filter((function(e){return e.fontKey===t})).length},setEmbDefaultFont:function(e){var t=e.getFonts(),i=e.getFont().fontKey,n=this.isFontAvailableInList(t,i),r=this.isFontAvailableInList(t,this.fallbackFont),a=this.setWindowCanvasFont(t[0].fontKey),o=this.setWindowCanvasFont(this.fallbackFont),s=this.setWindowCanvasFont(i);return n||r?n?s:o:a}},I.a.Base);ye.STROKE_OFFSET="strokeOffset",ye.STROKE_WEIGHT="strokeWeight",ye.SHADOW_ANGLE="shadowAngle",ye.SHADOW_DISTANCE="shadowDistance",ye.STROKE_OFFSET_DEFAULT=0,ye.STROKE_WEIGHT_DEFAULT=.2,ye.SHADOW_ANGLE_DEFAULT=45,ye.SHADOW_DISTANCE_DEFAULT=.25,ye.DELAY_CONFIG_CHANGED_EXEC=500,window&&((globalThis||{}).PFProductPushTextboxPicker=ye);var be=Class({templates:null,onLayerRemoved:null});window&&((globalThis||{}).PFProductPushPatternPickerPar=be);var Pe=i("YE7c"),Ce=i.n(Pe),Te=i("qqZP"),Ie=Class({_par:null,_nodeSpacing:null,_nodeTypeButtons:null,__construct:function(e){this._par=e,this._nodeTypeButtons={},this.node=tag("div","",[tag("div","pf-ui-body pf-bold pf-text-dark pf-my-12",dlang("generator","Pattern type")),this._getTypeButton(null,"generator/pattern-none.svg",""),this._getTypeButton(Ce.a.PATTERN_TYPE.BLOCK,"generator/pattern-block.svg",dclang("generator","pattern type","Block")),this._getTypeButton(Ce.a.PATTERN_TYPE.HALFDROP,"generator/pattern-halfdrop.svg",dclang("generator","pattern type","Half drop")),this._getTypeButton(Ce.a.PATTERN_TYPE.BRICK,"generator/pattern-brick.svg",dclang("generator","pattern type","Brick")),this._getTypeButton(Ce.a.PATTERN_TYPE.REFLECT,"generator/pattern-reflect.svg",dclang("generator","pattern type","Reflect")),this._getTypeButton(Ce.a.PATTERN_TYPE.HORIZONTAL,"generator/pattern-horizontal.svg",dclang("generator","pattern type","Horizontal line")),this._getTypeButton(Ce.a.PATTERN_TYPE.VERTICAL,"generator/pattern-vertical.svg",dclang("generator","pattern type","Vertical line")),this._nodeSpacing=this._getSpacingNode()]),this._subscribeTemplateEvents()},_unsubscribeTemplateEventsIfNeeded:function(){return!Object(L.a)(this.node)&&(this._unsubscribeTemplateEvents(),!0)},_unsubscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().unsubscribe(this._onActiveLayerChangedPattern).unsubscribe(this._onLayerConfigurationChangedPattern).unsubscribe(this._onLayerRemovedPattern)},_subscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().addOnActiveLayerChanged(this._onActiveLayerChangedPattern).addOnLayerConfigurationChanged(this._onLayerConfigurationChangedPattern).addOnLayerRemovedListener(this._onLayerRemovedPattern)},resubscribeToEvents:function(){Object(L.a)(this.node)&&this._par.templates&&(this._unsubscribeTemplateEvents(),this._subscribeTemplateEvents(),this._render())},_getTypeButton:function(e,t,i){return this._nodeTypeButtons[e]=tag("button",{className:"pf-bg-white pf-border pf-border-dark pf-p-8 pf-mr-8 pf-mb-8",onclick:this._onTypeClick.bind(this,e),attr:{"data-toggle":"tooltip","data-placement":"top",title:i},style:{opacity:.4}},[tag("img",{className:"pf-d-inline-block",src:PF.ASSETS_URL+t,style:{width:"24px",height:"24px"}})])},_getSpacingNode:function(){var e=new K.a;return e.title=dlang("generator","Spacing"),e.className="pf-my-12",e.value=Ce.a.PATTERN_SPACING.DEFAULT,e.minValue=Ce.a.PATTERN_SPACING.MIN,e.maxValue=Ce.a.PATTERN_SPACING.MAX,e.fractionDigits=2,e.incrementStep=Ce.a.PATTERN_SPACING.STEP,e.hasNumberInput=!0,e.onValueChanged=this._onSpacingChange,e.onSlide=this._onSpacingChange,new Z.a(e)},_render:function(){var e=this._par.templates.getActiveLayer();if(e){var t=e&&e.patternType||null,i=e&&e.patternSpacing||Ce.a.PATTERN_SPACING.DEFAULT;this._setType(t),this._nodeSpacing.setValue(i),t?this._nodeSpacing.show():this._nodeSpacing.hide()}},_onTypeClick:function(e,t){t.preventDefault(),this._setType(e);var i=this._par.templates.getActiveLayer();i&&i.patternType!==e&&(i.patternType=e,e?this._nodeSpacing.show():(this._nodeSpacing.setValue(0),i.patternSpacing=0,this._nodeSpacing.hide()),this._notifyLayerPatternChanged(i))},_setType:function(e){for(var t in this._nodeTypeButtons)this._nodeTypeButtons.hasOwnProperty(t)&&(this._nodeTypeButtons[t].style.opacity=.4);this._nodeTypeButtons[e]&&(this._nodeTypeButtons[e].style.opacity=1)},_onSpacingChange:function(e){this._nodeSpacing.value!==String(e)&&this._nodeSpacing.swetValue(e);var t=this._par.templates.getActiveLayer();t&&t.patternSpacing!==e&&(t.patternSpacing=e,this._notifyLayerPatternChanged(t))},_onActiveLayerChangedPattern:function(e,t){this._unsubscribeTemplateEventsIfNeeded()||t===this||this._render()},_onLayerConfigurationChangedPattern:function(e,t){this._unsubscribeTemplateEventsIfNeeded()||t===this||this._render()},_notifyLayerPatternChanged:function(e){e instanceof M.a?this._par.templates.updateImageLayer(e,this):e instanceof x.a?this._par.templates.updateClipartLayer(e,this):e instanceof Te.a?this._par.templates.updateLicensedAssetLayer(e,this):console.log("Cannot update layer pattern settings!",e)},_onLayerRemovedPattern:function(e,t){if(!this._unsubscribeTemplateEventsIfNeeded()){var i=this._par.templates.getActiveLayer();(!i||t&&t.uniqueId===i.uniqueId)&&this._par.onLayerRemoved&&this._par.onLayerRemoved(t)}},append:function(e){return this.node.append(e),$(this.node).find('[data-toggle="tooltip"]').tooltip({container:document.body}),this}},I.a.Base);window&&((globalThis||{}).PFProductPushPatternPicker=Ie);var we=Class({placements:[],templates:null,activePlacementId:"",onPicked:null,conflictCalculator:null,fileCountLimit:null,productOptionsPlacements:null,productOptions:null,includeSamples:!1,searchTag:"",productOptionsValues:null,onProductOptionsChanged:null,onColorChanged:null,onCustomizableChanged:null,onDuplicate:null,enableRemoveBg:null,onRequestRemoveBg:null,allowCustomizableLayers:!1,layerPickerChooser:null,nodeTemplateTypePicker:null,nodeVideoTutorial:null,onItemEdit:null,isAdvancedTemplateLoaded:null,isAllOver:null,hasAtLeastOneDesignFillColor:null,validateAddingLayer:null,getSelectedMockupVariant:null,showPatternPicker:null,placementSelector:null,isMockupGeneratorMode:!1,openQTagPopoverLayerId:null,onSelectQualityTag:null,hideQualityNode:!1,showSizesInPx:!1,designFillColorPicker:null});window&&((globalThis||{}).PFProductPushLayerPickerPar=we);var Se=i("86cz"),Ee=Class({product:null,isProductPickable:!0,isSync:!1,onProductPickedCallback:function(){console.error("No 'onProductPickedCallback' provided")}});window&&((globalThis||{}).PFProductPushInlineProductPickerPar=Ee);var ke=i("S7uB"),Oe=i("uV1j"),Ae=i("rDi1"),Le=i("c4GQ"),Ne=i("QLN8"),De=i("xXdn"),Re=i("kT3P"),xe=i("oi7h"),Fe=i("DUxB"),Me=i("yDyG"),Be=i("97Au"),Ve=Class({_par:null,__construct:function(e){if(this._par=e,this.node=Object(I.a)({tag:"div",className:"inline-product-picker clearfix pf-mb-16"}),this._par.isProductPickable){var t=new Be.a.Par;t.nodeClass="inline-product-picker",t.modalDialogClass="modal-lg inline-product-picker__modal",this._modal=new Be.a(t),this._initSearchBox()}this._render()},_render:function(){I.a.clearNode(this.node);var e=Object(_e.a)();Object(I.a)({tag:"div",els:[{tag:"h6",className:"inline-product-picker__title pf-p-0 pf-mt-0 margin-bottom-5",text:e.getFullTitle()},N.a.createPeriodicPriceDiscountAnnouncement(e.priceRange,!0,"pf-mb-16 pf-mt-8"),this._getReviewNode(),{tag:"div",className:"pf-mt-32",els:[{tag:"a",els:[{tag:"span",className:"pf-ui-caption",text:lang("Product info, pricing & guidelines"),onclick:this._popupForMockupGen.bind(this,"info")},{tag:"i",className:"pf-link pf-link-block pf-d-inline-block pf-ml-8 pf-i pf-i-open-in-new",onclick:this._popupForMockupGen.bind(this,"info")}]}]},this._par.isProductPickable&&{tag:"div",els:[{tag:"a",text:lang("Change product"),className:"pf-btn pf-btn-secondary pf-mt-16",onclick:this._onChangeProduct}]}]}).append(this.node)},_popupForMockupGen:function(e,t){var i=Object(_e.a)();$(t.target).closest("a").css("pointer-events","none");var n=new Le.a({product:i,activeTab:e,showReviews:!0}).getModal();$(n._node).on("hidden.bs.modal",(function(){$(t.target).closest("a").css("pointer-events","all")}))},_initSearchBox:function(){var e={};e.type=Me.a.SEARCH_TYPE_PRODUCTS_GENERATOR,e.onSelected=this._onItemPicked,e.onEnterPressed=this._onItemPicked,e.placeholder=lang("Search productsâ€¦"),e.showAllResults=this._onShowAllResultsClicked,this._searchBox=new Me.a(e)},_onShowAllResultsClicked:function(e){var t=this._getShowAllResultsBreadcrumbs(e),i=Object(I.a)({tag:"div",els:[t]}),n=new ke.a;n.isForGenerator=!0,n.categoryId=0,n.search=e,n.isSync=this._par.isSync,n.callback=this._onProductPicked.bind(this),new Oe.a(n).append(i),this._modal.setContent(i),this._modal.setHeaderContent(this.getModalHeader(lang("Choose a product")))},_getShowAllResultsBreadcrumbs:function(e){var t=new Fe.a;return t.add({title:lang("All categories"),onclick:this._setCategoryPickerContent.bind(this,0)}),t.add({title:lang('Search results for "{searchValue}"').replace("{searchValue}",tag("span",{text:e}).innerHTML)}),t},_onChangeProduct:function(){this._setCategoryPickerContent(),this._modal.show()},_onCategoryPicked:function(e){var t=this._getCategoryBreadcrumbs(e),i=Object(I.a)({tag:"div",els:[t]}),n=new ke.a;n.isForGenerator=!0,n.categoryId=e,n.callback=this._onProductPicked.bind(this),n.isSync=this._par.isSync,new Oe.a(n).append(i),this._modal.setContent(i),this._modal.setHeaderContent(this.getModalHeader(lang("Choose a product")))},_onItemPicked:function(e){this._onProductPicked(ce.a.fromArray(e))},_onProductPicked:function(e){this._modal&&this._modal.remove(),this._par.onProductPickedCallback&&this._par.onProductPickedCallback(e)},_getCategoryBreadcrumbs:function(e){var t=new Fe.a,i=(new Ne.a).getPath(e);for(var n in t.add({title:lang("All categories"),onclick:this._setCategoryPickerContent.bind(this,0)}),i)t.add({title:i[n].name,onclick:this._setCategoryPickerContent.bind(this,i[n].categoryId)});return t},_setCategoryPickerContent:function(e){if(window.PFProductsCatalog&&xe.a.hasAccess){var t=new De.a;t.onProductChoose=this._onProductPicked.bind(this),t.isMockupGenerator=!0,t.enableCategoriesSidebar=!0,t.isClean=!0,this._modal.setContent(Re.a.getInstance(t))}else{var i=new Ae.a.Par;i.callback=this._onCategoryPicked.bind(this),i.pickForGenerator=!0,void 0!==e&&(i.categoryId=e);var n=new Ae.a(i);this._modal.setContent(n)}this._modal.setHeaderContent(this.getModalHeader(lang("Choose a category")))},_getReviewNode:function(){var e,t=Object(_e.a)();if(null===(e=t.reviewRating)||void 0===e||!e.reviewCount)return!1;for(var i=[],n=1;n<=5;n++){var r=t.reviewRating.rating,a="";parseInt(r)!==r&&Math.round(r)===n?a="-half":n>r&&(a="-empty"),i.push({tag:"span",className:"icon-star"+a+" star-rating__star"})}var o=t.reviewRating.reviewCount;return Object(I.a)({tag:"a",className:"pf-link pf-ui-caption pf-mt-4",onclick:this._popupForMockupGen.bind(this,"reviews"),data:{toggle:"tooltip",placement:"bottom"},els:[{tag:"div",className:"star-rating__stars star-rating__stars--inline",els:i},nlang("%d Review","%d Reviews",o)]})},getModalHeader:function(e){return Object(I.a)({tag:"div",els:[{tag:"button",type:"button",className:"close",prop:{onclick:this._removeModal},els:[{tag:"span",text:"Ã—",attr:{"aria-hidden":"true"}},{tag:"span",className:"sr-only",text:lang("Close")}]},Object(I.a)({tag:"h4",els:[e||{tag:"span",prop:{innerHTML:"&nbsp;"}}],className:"pf-m-0 pull-left"}),{tag:"div",className:"search-box",els:[this._searchBox]},{tag:"div",className:"clearfix"}]})},_removeModal:function(){this._modal&&this._modal.remove()}},I.a.Base);window&&((globalThis||{}).PFProductPushInlineProductPicker=Ve);var je=Class({templateChangeListener:null,fileColorMapperPalette:null,currentPlacementId:null,threadColorSelectionLimit:6,embroideryTypePrices:null,onEmbroideryTypeChangedCallback:null,shouldShowExtraPriceForEmbroideryType:null,getSelectedEmbroideryColors:null,onLayerRemoved:function(e){console.error("No callback present for - onLayerRemoved",e)}});window&&((globalThis||{}).PFProductPushEmbroideryImagePickerPar=je);var Ue=Class({colors:null,palette:null,onColorsChanged:null,threadColorSelectionLimit:null,disableDropdown:null,getSelectedEmbroideryColors:null});window&&((globalThis||{}).PFProductPushColorMapperPar=Ue);var ze=Class({colors:{},palette:null,onColorsChanged:null,__construct:function(e){this._par=e,this.onColorsChanged=e.onColorsChanged,this.colors=e.colors,this.palette=re.a.getNoneColor(),I.a.O2O(this.palette,e.palette);var t=[];for(var i in this.colors)t.push(this._createColorDropdown(i,this.colors[i]));this.node=tag("div","color-mapper",t)},_createColorDropdown:function(e,t){var i=new ne.a;i.colors=this.palette,i.color=t,i.disableDropdown=this._par.disableDropdown,i.onChange=function(t){this.colors[e]=t,this.onColorsChanged&&this.onColorsChanged(this.colors)}.bind(this),this._par.getSelectedEmbroideryColors&&(this._par.getSelectedEmbroideryColors().length>ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS&&(i.nodeDropdownFooter=tag("div","color-mapper__footer--warning",[dlang("generator","You can choose up to {number} colors").replace("{number}",this._par.threadColorSelectionLimit)]),i.highlightColorsAsError=!0),i.highlightedColors=this._par.getSelectedEmbroideryColors()),!this._hasAtLeastTwoThreadsSelected()&&t&&(i.disableNoneValue=!0);var n=new re.a(i),r=tag("div","swatches swatches--huge",[tag("span",{className:"swatches__item",style:{backgroundColor:e}})]);return tag("div","row pf-mt-8",[tag("div","col-1 col-md-2 col-xl-1 pf-pt-4",[r]),tag("div","col-1 col-md-2 col-xl-1 pf-m-auto",[tag("i","color-mapper__map-icon pf-i pf-i-arrow-right pf-i-18 pf-text-gray")]),tag("div","col-10 col-md-8 col-xl-10 pf-pl-0",[n])])},_hasAtLeastTwoThreadsSelected:function(){var e=0,t=Object.values(this.colors);for(var i in t)if(t[i]&&e++,e>1)return!0;return!1}},I.a.Base);window&&((globalThis||{}).PFProductPushColorMapper=ze);var Ge=Class({_par:null,_imageLayer:null,__construct:function(e){this._par=e,this.node=tag("div","image-picker"),this._imageLayer=this._getNewLayer(),this._subscribeToTemplateEvents()},_render:function(e,t){I.a.clearNode(this.node),this._par.currentPlacementId=e;var i=this._imageLayer;if(this._par.fileColorMapperPalette){var n=new H.a;n.embroideryTypesAvailable=[oe.a.DIGITIZATION_FLAT,oe.a.DIGITIZATION_3D],n.embroideryType=i.embroideryType,n.labelTooltipText=lang("We digitize each file to a format that supports embroidery and charge a one-time fee of $6.50 for each embroidery type. You can reuse a digitized file for the same embroidery type with other orders at no additional cost."),n.renderRadioInput=this._par.currentPlacementId===oe.a.TYPE_EMBROIDERY_FRONT,n.embroideryTypePrices=this._par.embroideryTypePrices,n.onEmbroideryTypeChangedCallback=this._par.onEmbroideryTypeChangedCallback,n.showExtraPrice=this._par.shouldShowExtraPriceForEmbroideryType(i),n.nodeFooter=t?tag("div","alert alert-warning",dlang("generator","We have updated our embroidery system. To continue editing, please re-upload your design.")):null,this._embroideryTypePicker=new Y.a(n),this._embroideryTypePicker.append(this.node),tag("hr").append(this.node);var r=new Ue;r.colors=Object.assign({},i.overrideColors),r.palette=this._par.fileColorMapperPalette,r.onColorsChanged=this._onColorMappingChanged.bind(this,i),r.disableDropdown=t,r.getSelectedEmbroideryColors=this._par.getSelectedEmbroideryColors,r.threadColorSelectionLimit=this._par.threadColorSelectionLimit,this._colorMapper=new ze(r),this._renderColorMapper()}},_renderColorMapper:function(){this._nodeColorMapper&&I.a.removeNode(this._nodeColorMapper),this._nodeColorMapper=tag("div","pf-mb-24",[tag("h6","",[dlang("generator","Choose thread colors (max {maxThreadColors})").replace("{maxThreadColors}",this._par.threadColorSelectionLimit)]),this._colorMapper]).append(this.node)},_subscribeToTemplateEvents:function(){this._par.templateChangeListener&&this._par.templateChangeListener.addOnLayerRemovedListener(this._onLayerRemovedExternally)},editImageLayer:function(e,t){if(!this._unsubscribeTemplateEventsIfNeeded()){var i=e instanceof M.a,n=e instanceof Te.a;if(e&&i&&!n){this._imageLayer=e.getOriginalClone();var r=!(!this._imageLayer.isEmbroideryAfterMigration||this._imageLayer.embroideryType!==oe.a.DIGITIZATION_BOTH);this._render(t,r)}}},_onColorMappingChanged:function(e,t){e.overrideColors=t,this._par.templateChangeListener.notifyLayerColorsChanged(this._par.currentPlacementId,e,t,!1)},_onLayerRemovedExternally:function(e,t){this._unsubscribeTemplateEventsIfNeeded()||t.uniqueId===this._imageLayer.uniqueId&&this._par.onLayerRemoved(t)},_unsubscribeTemplateEventsIfNeeded:function(){return!Object(L.a)(this.node)&&(this.unsubscribeTemplateEvents(),!0)},unsubscribeTemplateEvents:function(){this._par.templateChangeListener&&this._par.templateChangeListener.unsubscribe(this._onLayerRemovedExternally)},_getNewLayer:function(){return new M.a}},I.a.Base);window&&((globalThis||{}).PFProductPushEmbroideryImagePicker=Ge);var He=i("SBaP"),Ye=i("TOJy");function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ke(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){We(a,n,r,o,s,"next",e)}function s(e){We(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Ze(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=et(e);if(t){var r=et(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return $e(this,i)}}function $e(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?Je(e):t}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function it(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var nt=new WeakMap,rt=new WeakMap,at=new WeakMap,ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(s,e);var t,i,n,r,a,o=Xe(s);function s(e){var t,i,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r=o.call(this),nt.set(Je(r),{writable:!0,value:null}),rt.set(Je(r),{writable:!0,value:null}),at.set(Je(r),{writable:!0,value:null}),it(Je(r),at,e),it(Je(r),nt,tt(Je(r),at).item),r.node=Object(I.b)("div","col-2 pf-px-4 clipart-picker__col",[it(Je(r),rt,Object(I.b)("div",{className:"clipart-picker__item pf-p-4 pf-mb-12 pf-position-relative",onclick:r._onClick.bind(Je(r)),prop:{ondragstart:r._clipartDragStart.bind(Je(r)),ondragend:r._clipartDragEnd.bind(Je(r))}},[Object(I.b)("div","clipart-picker__labels",[null!==(t=tt(Je(r),nt).extra)&&void 0!==t&&t.premium&&tt(Je(r),at).isIndividual?Object(I.b)("span","pf-d-inline-block pf-bg-white pf-rounded-circle",[Object(I.b)("span","pf-i pf-i-18 pf-i-crown pf-text-yellow-pro")]):"",null!==(i=tt(Je(r),nt).extra)&&void 0!==i&&i.new?Object(I.b)("span","clipart-picker__new"):"",null!==(n=tt(Je(r),nt).extra)&&void 0!==n&&n.hidden?Object(I.b)("span","pf-badge pf-badge-small pf-badge--primary",dlang("generator","hidden")):""]),Object(I.b)("div","clipart-picker__ratio",[Object(I.b)("div","clipart-picker__ratio__inner",[r._getSpinnerAndLoadDimensions(tt(Je(r),nt),tt(Je(r),at).showEmpty)])])]))]),r._checkPremium(),r}return t=s,(i=[{key:"_getSpinnerAndLoadDimensions",value:function(e,t){return this._getSpinner(e,t,(function(t,i){e.width=t,e.height=i}))}},{key:"_getSpinner",value:function(e,t,i){var n=e.image.urlThumb,r=Object(I.b)("img",{className:"img-responsive",src:t?"":PF.ASSETS_URL+"images/layout/spinner-white.gif",style:{opacity:.3}}),a=new Image;return a.onload=function(){r.src=n,r.style.opacity=1,i&&i(a.width,a.height)},a.src=n,r}},{key:"_clipartDragStart",value:function(e){tt(this,at).fileDropZone.enableDomElementDropZone(),e.dataTransfer.setData("domelement",JSON.stringify(tt(this,nt)))}},{key:"_clipartDragEnd",value:function(e){tt(this,at).fileDropZone.disableDomElementDropZone()}},{key:"_onClick",value:(a=Ke(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!(null!==(i=tt(this,nt).extra)&&void 0!==i&&i.premium),e.t0){e.next=5;break}return e.next=4,Object(Ye.d)(Ye.a);case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",tt(this,at).onClickCallback(tt(this,nt),t));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"_checkPremium",value:(r=Ke(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=tt(this,nt).extra)||void 0===t||!t.premium){e.next=5;break}return e.next=3,Object(Ye.d)(Ye.a);case 3:e.sent||(I.a.addClassName(tt(this,rt),"clipart-picker__item--disabled"),tt(this,rt).setAttribute("aria-disabled",!0),tt(this,rt).ondragstart=function(){return{}},tt(this,rt).ondragend=function(){return{}},tt(this,rt).onclick=function(){return{}},Object(I.b)("div",{className:"pf-position-absolute pf-bg-white clipart-picker__item--overlay",attr:tt(this,at).isIndividual?{"data-toggle":"tooltip","data-container":"body",title:dlang("generator","Unlock with Printful Pro")}:{}}).append(tt(this,rt)),tt(this,at).isIndividual&&$(tt(this,rt)).find('[data-toggle="tooltip"]').tooltip());case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}])&&Ze(t.prototype,i),n&&Ze(t,n),s}(He.a);function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=pt(e);if(t){var r=pt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ut(this,i)}}function ut(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?ht(e):t}function ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function ft(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function _t(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var mt=new WeakMap,vt=new WeakMap,yt=new WeakMap,bt=new WeakMap,Pt=new WeakMap,Ct=new WeakMap,Tt=new WeakMap,It=new WeakMap,wt=new WeakMap,St=new WeakSet,Et=new WeakSet,kt=new WeakSet,Ot=new WeakSet,At=new WeakSet,Lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(i,e);var t=dt(i);function i(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=t.call(this),At.add(ht(r)),Ot.add(ht(r)),kt.add(ht(r)),Et.add(ht(r)),St.add(ht(r)),mt.set(ht(r),{writable:!0,value:null}),vt.set(ht(r),{writable:!0,value:null}),yt.set(ht(r),{writable:!0,value:null}),bt.set(ht(r),{writable:!0,value:null}),Pt.set(ht(r),{writable:!0,value:!1}),Ct.set(ht(r),{writable:!0,value:12}),Tt.set(ht(r),{writable:!0,value:null}),It.set(ht(r),{writable:!0,value:!1}),wt.set(ht(r),{writable:!0,value:{}}),_t(ht(r),wt,e),_t(ht(r),Tt,ft(ht(r),wt).group),r.node=Object(I.b)("div","pf-mb-32",[Object(I.b)("div","pf-mb-8 pf-d-flex pf-align-items-center",[_t(ht(r),yt,Object(I.b)("h5","pf-h5 pf-m-0",ft(ht(r),Tt).name)),null!==(n=ft(ht(r),Tt).extra)&&void 0!==n&&n.new?Object(I.b)("span","pf-badge pf-badge-small pf-badge--primary pf-ml-4",clang("Badge","New")):"",_t(ht(r),vt,ft(ht(r),Tt).items.length>ft(ht(r),Ct)?Object(I.b)("a",{className:"pf-ml-auto pf-mr-12 pf-link pf-ui-body",onclick:gt(ht(r),Ot,xt).bind(ht(r))},dlang("generator","See more")):"")]),_t(ht(r),mt,Object(I.b)("div","row-flex")),_t(ht(r),bt,Object(I.b)("div","row-flex"))]),gt(ht(r),St,Nt).call(ht(r)),gt(ht(r),At,Ft).call(ht(r)),r}return i}(He.a),Nt=function(){I.a.clearNode(ft(this,mt));var e=ft(this,Tt).items.length;e>ft(this,Ct)&&(e=ft(this,Ct));for(var t=0;t<e;t++)gt(this,kt,Rt).call(this,ft(this,Tt).items[t],ft(this,mt))},Dt=function(){if(ft(this,It))ft(this,Pt)?(I.a.removeClassName(ft(this,bt),"pf-d-none"),I.a.clearNode(ft(this,vt)),Object(I.b)("span","",dlang("generator","See less")).append(ft(this,vt))):(I.a.addClassName(ft(this,bt),"pf-d-none"),I.a.clearNode(ft(this,vt)),Object(I.b)("span","",dlang("generator","See more")).append(ft(this,vt)));else if(I.a.clearNode(ft(this,bt)),ft(this,Pt)&&!(ft(this,Tt).items.length<=ft(this,Ct))){for(var e=ft(this,Tt).items.length,t=ft(this,Ct);t<e;t++)gt(this,kt,Rt).call(this,ft(this,Tt).items[t],ft(this,bt));I.a.clearNode(ft(this,vt)),Object(I.b)("span","",dlang("generator","See less")).append(ft(this,vt)),_t(this,It,!0)}},Rt=function(e,t){new ot({item:e,onClickCallback:ft(this,wt).onClickCallback,showEmpty:!0,fileDropZone:ft(this,wt).fileDropZone}).append(t)},xt=function(){_t(this,Pt,!ft(this,Pt)),gt(this,Et,Dt).call(this)},Ft=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=ft(this,Tt).extra)&&void 0!==t&&t.premium){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(Ye.d)(Ye.a);case 4:i=e.sent,Object(I.b)("span",{className:"pf-i pf-i-18 pf-i-crown pf-text-yellow-pro pf-ml-4",attr:{"data-toggle":"tooltip","data-container":"body",title:i?dlang("generator","Printful Pro feature"):dlang("generator","Unlock with Printful Pro")}}).append(ft(this,yt)),$(ft(this,yt)).find('[data-toggle="tooltip"]').tooltip();case 7:case"end":return e.stop()}}),e,this)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){lt(a,n,r,o,s,"next",e)}function s(e){lt(a,n,r,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),Mt=i("nwx2"),Bt=i("jhOU"),Vt=i("kLof"),jt=i("cKxm"),Ut=i("IA60"),zt=i.n(Ut),Gt=i("A+LN"),Ht=i("nfGG"),Yt=i("1tjy"),qt=i("XLZy");function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kt(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Zt(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Kt(a,n,r,o,s,"next",e)}function s(e){Kt(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Qt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xt(e,t){return(Xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=ti(e);if(t){var r=ti(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Jt(this,i)}}function Jt(e,t){return!t||"object"!==Wt(t)&&"function"!=typeof t?ei(e):t}function ei(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ti(e){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ii(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function ni(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function ri(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var ai=new WeakMap,oi=new WeakMap,si=new WeakMap,li=new WeakMap,ci=new WeakMap,di=new WeakMap,ui=new WeakMap,hi=new WeakMap,pi=new WeakMap,gi=new WeakMap,fi=new WeakMap,_i=new WeakMap,mi=new WeakMap,vi=new WeakMap,yi=new WeakSet,bi=new WeakSet,Pi=new WeakSet,Ci=new WeakSet,Ti=new WeakSet,Ii=new WeakSet,wi=new WeakSet,Si=new WeakSet,Ei=new WeakSet,ki=new WeakSet,Oi=new WeakSet,Ai=new WeakSet,Li=new WeakSet,Ni=new WeakSet,Di=new WeakSet,Ri=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xt(e,t)}(o,e);var t,i,n,r,a=$t(o);function o(e){var t,i,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=a.call(this),Di.add(ei(t)),Ni.add(ei(t)),Li.add(ei(t)),Ai.add(ei(t)),Oi.add(ei(t)),ki.add(ei(t)),Ei.add(ei(t)),Si.add(ei(t)),wi.add(ei(t)),Ii.add(ei(t)),Ti.add(ei(t)),Ci.add(ei(t)),Pi.add(ei(t)),bi.add(ei(t)),yi.add(ei(t)),ai.set(ei(t),{writable:!0,value:[]}),i=ei(t),r=null,(n="fileDropZone")in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,oi.set(ei(t),{writable:!0,value:null}),si.set(ei(t),{writable:!0,value:null}),li.set(ei(t),{writable:!0,value:null}),ci.set(ei(t),{writable:!0,value:null}),di.set(ei(t),{writable:!0,value:null}),ui.set(ei(t),{writable:!0,value:null}),hi.set(ei(t),{writable:!0,value:null}),pi.set(ei(t),{writable:!0,value:null}),gi.set(ei(t),{writable:!0,value:null}),fi.set(ei(t),{writable:!0,value:null}),_i.set(ei(t),{writable:!0,value:""}),mi.set(ei(t),{writable:!0,value:0}),vi.set(ei(t),{writable:!0,value:null}),ri(ei(t),gi,e),t.fileDropZone=ni(ei(t),gi).fileDropZone,ri(ei(t),vi,new Ht.a([ri(ei(t),di,tag("h5","pf-h5 pf-mb-16 pf-d-none",dlang("generator","Recently used"))),ri(ei(t),ci,tag("div","row-flex pf-mb-12 pf-d-none")),ri(ei(t),pi,new Mt.a("secondary")),ri(ei(t),oi,tag("div","pf-mt-24")),ri(ei(t),li,tag("div","pf-d-none pf-mt-16")),ri(ei(t),si,tag("div","pf-d-none pf-mt-24")),ri(ei(t),hi,tag("div","row-flex pf-d-none"))])),t.node=tag("div","clipart-picker",[tag("a",{className:"pf-link-block pf-mb-24",onclick:ni(ei(t),gi).onBackCallback},[tag("i","pf-i pf-i-chevron-left pf-i-24 pf-text-muted"),tag("span","pf-pl-4",lang("See all design layers"))]),ri(ei(t),ui,tag("div","pf-mb-12")),ni(ei(t),vi)]),ii(ei(t),yi,xi).call(ei(t)),ii(ei(t),Si,zi).call(ei(t)),t}return t=o,(i=[{key:"renderGroups",value:(r=Zt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ni(this,fi)){e.next=3;break}return ii(this,Pi,Mi).call(this),e.abrupt("return");case 3:return e.next=5,ii(this,Di,Zi).call(this);case 5:ii(this,Pi,Mi).call(this);case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}])&&Qt(t.prototype,i),n&&Qt(t,n),o}(He.a),xi=function(){var e=Zt(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Gt.q)(Gt.i);case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return ni(this,pi).add({caption:dlang("generator","Basic clipart"),isActive:!0,isDisabled:!1,customId:"clipart-tab-basic",onclick:function(){I.a.removeClassName(ni(t,oi),"pf-d-none"),I.a.addClassName(ni(t,li),"pf-d-none"),I.a.addClassName(ni(t,si),"pf-d-none"),ii(t,Ei,Gi).call(t,""),ni(t,vi).updateScrollShadowing()}}),ni(this,pi).add({caption:tag("span","",[dlang("generator","Pro clipart"),tag("span","pf-i pf-i-18 pf-i-crown pf-text-yellow-pro pf-ml-4")]),isActive:!1,isDisabled:!1,customId:"clipart-tab-pro",onclick:function(){I.a.addClassName(ni(t,oi),"pf-d-none"),I.a.removeClassName(ni(t,si),"pf-d-none"),I.a.removeClassName(ni(t,li),"pf-d-none"),ii(t,Ei,Gi).call(t,""),ni(t,vi).updateScrollShadowing()}}),e.next=9,ii(this,bi,Fi).call(this);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),Fi=function(){var e=Zt(regeneratorRuntime.mark((function e(){var t,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ye.d)(Ye.a);case 2:t=e.sent,I.a.clearNode(ni(this,li)),i=$(document.body).hasClass("embedded"),t||((n=new Vt.a).type="warning",n.className="premium-clipart-upsell-banner",n.closable=!1,n.heading=dlang("generator","Subscribe to Printful Pro to unlock"),n.content=dlang("generator","Add exclusive clipart content to your designs"),n.buttonText=i?null:dlang("generator","Unlock now"),n.onButtonClick=i?null:function(){var e=window.location.protocol+"//"+window.location.hostname+"/";window.open(e+he.a.langUrl("dashboard/settings/account-subscription-plan"))},new Bt.a(n).append(ni(this,li)));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),Mi=function(){return ii(this,Si,zi).call(this),ii(this,wi,Ui).call(this),ni(this,vi).addScrollEventListener(),this},Bi=function(e){I.a.clearNode(ni(this,oi)),I.a.clearNode(ni(this,si)),ri(this,ai,e);for(var t=0,i=ni(this,ai).length;t<i;t++)ii(this,Ti,Vi).call(this,ni(this,ai)[t]);ri(this,fi,!0),ii(this,wi,Ui).call(this)},Vi=function(e){var t;new Lt({group:e,fileDropZone:this.fileDropZone,onClickCallback:ii(this,Li,Wi).bind(this)}).append(null!==(t=e.extra)&&void 0!==t&&t.premium?ni(this,si):ni(this,oi))},ji=function(){return ni(this,fi)&&ni(this,mi)>0},Ui=function(){var e=Zt(regeneratorRuntime.mark((function e(){var t,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Yt.f)(ni(this,gi).selectedPlacementTechnique);case 2:for(t=e.sent,ri(this,mi,t.length),I.a.clearNode(ni(this,ci)),ii(this,Ii,ji).call(this)?(I.a.removeClassName(ni(this,ci),"pf-d-none"),I.a.removeClassName(ni(this,di),"pf-d-none")):(I.a.addClassName(ni(this,ci),"pf-d-none"),I.a.addClassName(ni(this,di),"pf-d-none")),i=0,n=t.length;i<n;i++)new ot({item:t[i],onClickCallback:ii(this,Li,Wi).bind(this),showEmpty:!0,fileDropZone:this.fileDropZone,isIndividual:!0}).append(ni(this,ci));return e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),zi=function(){"en"===he.a.language&&(ri(this,_i,""),ii(this,ki,Hi).call(this),I.a.clearNode(ni(this,ui)),new jt.a({onChange:ii(this,Ei,Gi).bind(this),onKeyUp:ii(this,Ei,Gi).bind(this),type:"text",showClearButton:!0,placeholder:dlang("generator","Search clipart"),className:"tt-input",name:"SearchCliparts",id:"search-cliparts"}).append(ni(this,ui)))},Gi=function(e){ni(this,_i)!==e&&(ri(this,_i,e),ii(this,ki,Hi).call(this))},Hi=function(){if(I.a.addClassName(ni(this,ci),"pf-d-none"),I.a.addClassName(ni(this,di),"pf-d-none"),I.a.addClassName(ni(this,pi).node,"pf-d-none"),I.a.addClassName(ni(this,oi),"pf-d-none"),I.a.addClassName(ni(this,li),"pf-d-none"),I.a.addClassName(ni(this,si),"pf-d-none"),!ni(this,_i))return ii(this,Ii,ji).call(this)&&(I.a.removeClassName(ni(this,ci),"pf-d-none"),I.a.removeClassName(ni(this,di),"pf-d-none")),I.a.removeClassName(ni(this,pi).node,"pf-d-none"),I.a.removeClassName(ni(this,oi),"pf-d-none"),I.a.addClassName(ni(this,hi),"pf-d-none"),ni(this,pi).markTabAsSelectedById("clipart-tab-basic"),void ni(this,vi).updateScrollShadowing();ii(this,Oi,Yi).call(this),I.a.removeClassName(ni(this,hi),"pf-d-none"),ni(this,vi).updateScrollShadowing()},Yi=function(){if(I.a.clearNode(ni(this,hi)),ni(this,_i)){ri(this,_i,ni(this,_i).toLowerCase());for(var e=!0,t=0;t<ni(this,ai).length;t++)for(var i=ni(this,ai)[t],n=0;n<i.items.length;n++){var r=i.items[n];if(r.name.toLowerCase().includes(ni(this,_i)))new ot({item:r,onClickCallback:ii(this,Li,Wi).bind(this),showEmpty:!1,isIndividual:!0,fileDropZone:ni(this,gi).fileDropZone}).append(ni(this,hi)),e=!1}e&&ii(this,Ai,qi).call(this)}},qi=function(){tag("div","pf-w-100",[tag("img",{className:"pf-w-100",src:zt.a}),tag("div","pf-ui-body pf-text-center",dlang("generator","No results found! Try another keyword or check out our Clipart collections."))]).append(ni(this,hi))},Wi=function(e,t){e.unavailableTechniques&&e.unavailableTechniques.indexOf(ni(this,gi).selectedPlacementTechnique)>-1||(Object(Yt.a)(e.id,ni(this,gi).selectedPlacementTechnique),ni(this,gi).onAddFileCallback(e),ii(this,Ni,Ki).call(this))},Ki=function(){ii(this,Si,zi).call(this),this.renderGroups()},Zi=function(){var e=Zt(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qt.a.show(ni(this,vi).node),e.next=3,Object(Yt.c)(ni(this,gi).selectedPlacementTechnique);case 3:t=e.sent,ii(this,Ci,Bi).call(this,t),qt.a.hide(ni(this,vi).node);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),Qi=i("gY30"),Xi=i("7pSD"),$i=Class({_current:"",_available:[],__construct:function(e,t,i,n){this._onOrientationChangedCallback=i,this._available=t.slice(),this._current=n,this.node=Object(I.a)({tag:"div",els:[{tag:"hr"},{tag:"h6",text:dlang("generator","Select orientation:")},this._buttons=Object(I.a)({tag:"div"})]}),this._render()},_render:function(){for(var e in I.a.clearNode(this._buttons),this._available){var t=this._available[e],i=$i.getOrientationMap()[t];Object(I.a)({tag:"label",text:i,className:"regular",style:"display: block",els:[{tag:"input",type:"radio",className:"margin-right-10",value:e,checked:t==this._current,onclick:this._onOrientationPicked.bind(this,t)}]}).append(this._buttons)}},_onOrientationPicked:function(e){this._current=e,this._render(),this._onOrientationChangedCallback(e)},isValuePicked:function(){return!!this._current},getValueCount:function(){return this._available.length},getValue:function(){return this._current},setValue:function(e){this._current=e||"",this._render()}},Xi.a);$i.ORIENTATION_ANY="any",$i.ORIENTATION_VERTICAL="vertical",$i.ORIENTATION_HORIZONTAL="horizontal",$i.getOrientationMap=function(){var e={};return e[$i.ORIENTATION_ANY]=dclang("generator","product orientation","Any"),e[$i.ORIENTATION_VERTICAL]=dclang("generator","product orientation","Vertical"),e[$i.ORIENTATION_HORIZONTAL]=dclang("generator","product orientation","Horizontal"),e},window&&((globalThis||{}).PFProductPushOrientationPicker=$i);var Ji=i("iQ/s"),en=i("JA1v"),tn=i("2+PC"),nn=Class({_params:null,callback:null,colors:[],unavailableColors:[],selectedColors:[],node:null,nodeCheckboxes:null,nodeCheckboxCheckAll:null,nodeError:null,__construct:function(e){this._params=e,this.callback=e.onChangedCallback,this.colors=e.values,this.selectedColors=e.selectedValues,this.node=tag("div","generator-color-picker");var t="";if(this.colors.length>1&&this._params.selectedLimit>1){var i=tag("input",{type:"checkbox",prop:{checked:this.colors.length===this.selectedColors.length}});i.onchange=this._onToggleAll.bind(this,i),t=tag("label",{className:"margin-bottom-5",style:{fontWeight:"normal"}},[i,tag("span","margin-left-10",dlang("generator","Select all colors"))]),this.nodeCheckboxCheckAll=i}this.nodeCheckboxes=tag("div"),tag("div","margin-bottom-30",[tag("h6","",(e.pickerTitle?e.pickerTitle:dlang("generator","Choose color"))+":"),t,this.nodeCheckboxes,this.nodeError=tag("div","alert alert-danger text-center hidden padding-10",[dlang("generator","Please select at least one color!")])]).append(this.node),this._render()},_render:function(){I.a.clearNode(this.nodeCheckboxes);var e,t={};for(e in this.colors)t[this.colors[e].color]=this.colors[e].colorCode2?[this.colors[e].colorCode,this.colors[e].colorCode2]:[this.colors[e].colorCode];var i=[];for(e in this.selectedColors){var n=this.selectedColors[e];i.push(n.color)}var r=new Ji.a;r.colors=t,r.disabledRegionColors=this._regionDisabledColors,r.unavailableColors=this._unavailableColors,r.discontinuedColors=this._discontinuedColors,r.selectedColors=i,r.showHuge=!0,r.shouldSortColors=!1,r.maxCount=this._params.selectedLimit,r.canDeselectLast=this._params.canDeselectLast,r.onChange=this._onColorsChanged.bind(this,!0),this._picker=new en.a(r).append(this.nodeCheckboxes)},_onColorsChanged:function(e,t){for(var i in this.selectedColors=[],t)for(var n in this.colors)this.colors[n].color===t[i]&&this.selectedColors.push(this.colors[n]);this.nodeCheckboxCheckAll&&(this.nodeCheckboxCheckAll.checked=this.selectedColors.length===this.colors.length),this.updateErrorStatus(),this.callback(this.selectedColors,e)},_onToggleAll:function(e){this.selectedColors=[],e.checked&&(this.selectedColors=this.colors.slice(),ga("send",{hitType:"event",eventCategory:"ProductPush",eventAction:"Check all colors"})),this._render(),this.callback(this.selectedColors)},validateSelectedColors:function(e,t,i,n,r,a){if(t||(t=this.getSelectedColorNames()),t&&this.setSelectedRegionDisabledValues(i,n,"color",e),!this._params.isPopoverEnabled)return!0;var o,s;if(this._params&&this._params.getSelectedSizes){var l=this._params.getSelectedSizes();1===l.length&&(o=l[0],s="size")}var c="",d="",u=t.length?[].concat(t).shift():"",h=!0,p=this.getAvailableAttributeRegion(u,"color",o,s);return this._isColorDiscontinued(u)?(c=tn.a.POPOVER.DISCONTINUED.TITLE,d=tn.a.POPOVER.DISCONTINUED.DESC,r.length||(d=tn.a.POPOVER.DISCONTINUED.DESC_COLOR_ONLY),h=!1):this._isColorRegionDisabled(u)?(c=tn.a.POPOVER.REGION.TITLE.replace("{region}",p),d=tn.a.POPOVER.REGION.DESC,e.allowedSellingRegions&&(c=tn.a.POPOVER.DSR_LIMITED.DESC_COLOR.replace("{linkStart}","").replace("{linkEnd}",""),d=""),h=!1):(this._isColorOutOfStock(u)||this._isColorRegionDisabled(u)&&!p)&&(c=tn.a.POPOVER.UNAVAILABLE.TITLE,d=tn.a.POPOVER.UNAVAILABLE.DESC,r.length||(d=tn.a.POPOVER.UNAVAILABLE.DESC_COLOR_ONLY),h=!1),u&&(c||d)&&this._picker.showPopover(u,c,d,a),h},getValueCount:function(){return this.colors.length},isValuePicked:function(){return this.selectedColors.length>0},hasAtLeastOneValue:function(){return!!this.getValueCount()},setDisabledRegionColors:function(e){return this._regionDisabledColors=e,this},setUnavailableColors:function(e){return this._unavailableColors=e,this},setDiscontinuedColors:function(e){return this._discontinuedColors=e,this},_isColorDiscontinued:function(e){return this._discontinuedColors.indexOf(e)>-1},_isColorOutOfStock:function(e){return this._unavailableColors.indexOf(e)>-1},_isColorRegionDisabled:function(e){return this._regionDisabledColors.indexOf(e)>-1},setColors:function(e){return this.selectedColors=e,this},getSelectedColorNames:function(){var e=[];for(var t in this.selectedColors)-1===e.indexOf(this.selectedColors[t].color)&&e.push(this.selectedColors[t].color);return e},getColorCodes:function(e){for(var t in this.colors)if(this.colors[t].color===e){var i=[this.colors[t].colorCode];return this.colors[t].colorCode2&&i.push(this.colors[t].colorCode2),i}},selectAtLeastOneColorAndRender:function(){return this.selectedColors.length||(this.selectedColors=this._params.selectedValues.length?this._params.selectedValues.slice():[this.colors.slice().shift()]),this._render(),this},render:function(){return this._render(),this}},Xi.a);window&&((globalThis||{}).PFProductPushColorPicker=nn);var rn=Class({_okCallback:null,_cancelCallback:null,__construct:function(e,t){this._okCallback=e,this._cancelCallback=t,this._render()},_render:function(){var e=new Be.a.Par;e.modalDialogClass="modal-md",this._modal=new Be.a(e),this._modal.setHeaderContent("");var t=tag("div","",[tag("div","warning-text",[tag("h4","",lang("Are you sure?")),tag("p","",lang("None of your layer changes will be saved. Are you sure you want to continue switching template type?"))])]);this._modal.setContent(t);var i=tag("div","text-left",[tag("a",{className:"pf-btn pf-btn-primary pf-mr-16",onclick:this._onOkClicked.bind(this)},lang("Yes, continue")),tag("a",{className:"pf-btn pf-btn-secondary",onclick:this._onCancelClicked.bind(this)},lang("No, go back"))]);this._modal.setFooterContent(i),this._modal.show()},_onOkClicked:function(){this._modal.remove(),this._okCallback&&this._okCallback()},_onCancelClicked:function(){this._modal.remove(),this._cancelCallback&&this._cancelCallback()}});window&&((globalThis||{}).PFProductPushAdvancedTemplatePickerPopup=rn);var an=Class({_current:"",_availableTypes:[],_showWarningPopup:!1,_isPopupBusy:!1,__construct:function(e,t,i,n){this._onTemplateTypeChangedCallback=t,this._getCurrentTemplateLoaded=i,this._availableTypes=e.slice(),this._current=n,this.node=tag("div","",[tag("h6","",dlang("generator","Select print file template type")),this._buttons=tag("div")]),this._render()},_render:function(){for(var e in I.a.clearNode(this._buttons),this._availableTypes){var t=this._availableTypes[e],i=this._getTemplateTypeText(t);tag("label","regular pf-d-block",[tag("input",{type:"radio",className:"margin-right-10",value:e,checked:t==this._current,onclick:this._onTemplateTypePicked.bind(this,t)}),i]).append(this._buttons)}},_onTemplateTypePicked:function(e){if(this._current!==e)return this._getCurrentTemplateLoaded&&this._getCurrentTemplateLoaded()===e?(this._current=e,void this._render()):void(this._showWarningPopup?this._isPopupBusy||(this._isPopupBusy=!0,setTimeout(function(){this._isPopupBusy=!1}.bind(this),1e3),new rn(this._onTemplateTypePickedRe.bind(this,e),this._render())):this._onTemplateTypePickedRe(e))},_getTemplateTypeText:function(e){var t={};return t[h.a.TEMPLATE_TYPE_SIMPLE]=dclang("generator","template type","Simple"),t[h.a.TEMPLATE_TYPE_ADVANCED]=dclang("generator","template type","Advanced"),t[e]?t[e]:""},_onTemplateTypePickedRe:function(e){this._current=e,this._render(),this._onTemplateTypeChangedCallback(e)},isValuePicked:function(){return!!this._current},getValue:function(){return this._current},setValue:function(e){this._current=e||"",this._render()},toggleTemplatePickerPopup:function(e){this._showWarningPopup=e}},Xi.a);window&&((globalThis||{}).PFProductPushAdvancedTemplatePicker=an);var on,sn,ln,cn,dn,un,hn,pn,gn,fn,_n,mn,vn,yn,bn,Pn,Cn,Tn,In,wn,Sn,En,kn,On,An,Ln,Nn,Dn,Rn,xn=i("IbzY"),Fn=i("MW8O"),Mn=i("jorx");function Bn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Vn=Class({});Vn.DEFAULT_PLACEMENT_ID="default",Vn.DEFAULT_FILL_COLOR="#ffffff",Vn.DEFAULT_DIMENSIONS={width:300,height:300},Vn.POSITION_X=0,Vn.POSITION_Y=0,Vn.POSITION_Z=2,Vn.AMBIENT_LIGHT_COLOR=13421772,Vn.AMBIENT_LIGHT_INTENSITY=1,Vn.DIRECTIONAL_LIGHT_COLOR=15658734,Vn.DIRECTIONAL_LIGHT_INTENSITY=.2,Vn.DEFAULT_PLACEMENT_MAP={0:"default"},Vn.PATH_THREE_JS="js/three.min.js",Vn.PATH_OBJ_LOADER_JS="js/OBJLoader.min.js",Vn.PATH_ORBIT_CONTROLS_JS="js/OrbitControls.min.js",Vn.staticImageCache={},Vn.placementImageStorage={},Vn.STATUS_NO_CHANGES=2,Vn.STATUS_RELOAD_PRINTFILE=1,Vn.STATUS_RELOAD_MODEL=0,Vn.STATUS_RELOAD_MODEL_PROCESSING=-1,Vn.PRODUCT_OBJ_FILE_MAP=[{uniqueId:1,productId:ce.a.ID_LEGGINGS_ALL_OVER,templateIds:[58,64],objFile:"generator/3d-objects/189-all-over-print-leggings.obj",rowColCount:2,staticColorMap:{1:"#ffffff"},minPolarAngle:Math.PI/180*45,maxPolarAngle:Math.PI/180*135,breakpointSettings:(on={},Bn(on,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Bn(on,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:1.9}),Bn(on,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:1.9}),on),showWarning:!0,warningBannerData:{header:dlang("generator","3D view represents size M"),content:dlang("generator","The design's position and scale may look a little different for other sizes")}},{uniqueId:2,productId:ce.a.ID_GLOSSY_MUG,templateIds:[43],objFile:"generator/3d-objects/19-11oz-mug.obj",rowColCount:2,objPosAdjustY:-1,breakpointSettings:(sn={},Bn(sn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.6,posX:-3.5,posY:.7}),Bn(sn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:700,zoom:1.6,posX:-7.5,posY:1.3}),Bn(sn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:700,zoom:1.5,posX:-6,posY:.5}),sn)},{uniqueId:3,productId:ce.a.ID_GLOSSY_MUG,templateIds:[44],objFile:"generator/3d-objects/19-15oz-mug.obj",rowColCount:2,breakpointSettings:(ln={},Bn(ln,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:3.3}),Bn(ln,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:550,zoom:5.6}),Bn(ln,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:550,zoom:4.4}),ln),objPosAdjustY:-1.5},{uniqueId:4,productId:ce.a.ID_COLOR_MUG,templateIds:[43],objFile:"generator/3d-objects/403-11oz-color-mug.obj",variantColorSector:2,rowColCount:2,breakpointSettings:(cn={},Bn(cn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2.8}),Bn(cn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:5.7}),Bn(cn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:4.3}),cn)},{uniqueId:5,productId:ce.a.ID_CANVAS,templateIds:[51],objFile:"generator/3d-objects/3-12x12-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},breakpointSettings:(dn={},Bn(dn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Bn(dn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:3.5}),Bn(dn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:2.5}),dn)},{uniqueId:6,productId:ce.a.ID_CANVAS,templateIds:[45],objFile:"generator/3d-objects/3-12x16-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},breakpointSettings:(un={},Bn(un,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.7}),Bn(un,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:3.5}),Bn(un,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:2.5}),un)},{uniqueId:7,productId:ce.a.ID_CANVAS,templateIds:[46],objFile:"generator/3d-objects/3-12x16-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},rotateBy90Deg:!0,breakpointSettings:(hn={},Bn(hn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.7}),Bn(hn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:3.8}),Bn(hn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:2.8}),hn)},{uniqueId:8,productId:ce.a.ID_CANVAS,templateIds:[52],objFile:"generator/3d-objects/3-16x16-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},breakpointSettings:(pn={},Bn(pn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2}),Bn(pn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:4}),Bn(pn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:3}),pn)},{uniqueId:9,productId:ce.a.ID_CANVAS,templateIds:[47],objFile:"generator/3d-objects/3-16x20-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},breakpointSettings:(gn={},Bn(gn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2.2}),Bn(gn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:4.5}),Bn(gn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:3.5}),gn)},{uniqueId:10,productId:ce.a.ID_CANVAS,templateIds:[48],objFile:"generator/3d-objects/3-16x20-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},rotateBy90Deg:!0,breakpointSettings:(fn={},Bn(fn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2.2}),Bn(fn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:5}),Bn(fn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:4}),fn)},{uniqueId:11,productId:ce.a.ID_CANVAS,templateIds:[49],objFile:"generator/3d-objects/3-18x24-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},breakpointSettings:(_n={},Bn(_n,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2.5}),Bn(_n,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:5}),Bn(_n,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:4}),_n)},{uniqueId:12,productId:ce.a.ID_CANVAS,templateIds:[50],objFile:"generator/3d-objects/3-18x24-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},rotateBy90Deg:!0,breakpointSettings:(mn={},Bn(mn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2.5}),Bn(mn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:5.5}),Bn(mn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:4.5}),mn)},{uniqueId:13,productId:ce.a.ID_CANVAS,templateIds:[53],objFile:"generator/3d-objects/3-24x36-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},breakpointSettings:(vn={},Bn(vn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:3.5}),Bn(vn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:6}),Bn(vn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:5.2}),vn)},{uniqueId:14,productId:ce.a.ID_CANVAS,templateIds:[54],objFile:"generator/3d-objects/3-24x36-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},rotateBy90Deg:!0,breakpointSettings:(yn={},Bn(yn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:3.7}),Bn(yn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:8}),Bn(yn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:6.5}),yn)},{uniqueId:15,productId:ce.a.ID_LEGGINGS_ALL_OVER_CAPRI,templateIds:[73,64],objFile:"generator/3d-objects/221-all-over-print--capri-leggings.obj",rowColCount:2,staticColorMap:{1:"#ffffff"},minPolarAngle:Math.PI/180*45,maxPolarAngle:Math.PI/180*135,breakpointSettings:(bn={},Bn(bn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Bn(bn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:1.9}),Bn(bn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:1.9}),bn),showWarning:!0,warningBannerData:{header:dlang("generator","3D view represents size M"),content:dlang("generator","The design's position and scale may look a little different for other sizes")}},{uniqueId:16,productId:ce.a.ID_LEGGINGS_YOGA_CAPRI,templateIds:[132,82,64],objFile:"generator/3d-objects/280-all-over-print-yoga-capri-leggings.obj",placementMap:{0:"default",1:"belt_front",2:"belt_back"},rowColCount:2,minPolarAngle:Math.PI/180*45,maxPolarAngle:Math.PI/180*135,breakpointSettings:(Pn={},Bn(Pn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:.1,posX:2.5}),Bn(Pn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:.2,posX:3.2}),Bn(Pn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:.2,posX:2.8}),Pn),showWarning:!0,warningBannerData:{header:dlang("generator","3D view represents size M"),content:dlang("generator","The design's position and scale may look a little different for other sizes")}},{uniqueId:17,productId:ce.a.ID_LEGGINGS_YOGA,templateIds:[81,82,83,64],objFile:"generator/3d-objects/242-all-over-print-yoga-leggings.obj",placementMap:{0:"default",1:"belt_front",2:"belt_back"},rowColCount:2,minPolarAngle:Math.PI/180*45,maxPolarAngle:Math.PI/180*135,breakpointSettings:(Cn={},Bn(Cn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Bn(Cn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:1.9}),Bn(Cn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:1.9}),Cn),showWarning:!0,warningBannerData:{header:dlang("generator","3D view represents size M"),content:dlang("generator","The design's position and scale may look a little different for other sizes")}},{uniqueId:18,productId:ce.a.ID_PILLOW_W_STUFFING,templateIds:[32],objFile:"generator/3d-objects/square-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(Tn={},Bn(Tn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Bn(Tn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Bn(Tn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),Tn)},{uniqueId:19,productId:ce.a.ID_PILLOW_W_STUFFING,templateIds:[214],objFile:"generator/3d-objects/square-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(In={},Bn(In,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Bn(In,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Bn(In,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),In)},{uniqueId:20,productId:ce.a.ID_PILLOW_W_STUFFING,templateIds:[72],objFile:"generator/3d-objects/rectangular-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(wn={},Bn(wn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2}),Bn(wn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:4}),Bn(wn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:3}),wn)},{uniqueId:21,productId:ce.a.ID_PILLOWCASE,templateIds:[32],objFile:"generator/3d-objects/square-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(Sn={},Bn(Sn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Bn(Sn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Bn(Sn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),Sn)},{uniqueId:22,productId:ce.a.ID_PILLOWCASE,templateIds:[214],objFile:"generator/3d-objects/square-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(En={},Bn(En,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Bn(En,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Bn(En,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),En)},{uniqueId:23,productId:ce.a.ID_PILLOWCASE,templateIds:[72],objFile:"generator/3d-objects/rectangular-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(kn={},Bn(kn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2}),Bn(kn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:4}),Bn(kn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:3}),kn)},{uniqueId:24,productId:ce.a.ID_PILLOW_W_STUFFING_RECTANGULAR,templateIds:[32],objFile:"generator/3d-objects/square-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(On={},Bn(On,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Bn(On,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Bn(On,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),On)},{uniqueId:25,productId:ce.a.ID_PILLOW_W_STUFFING_RECTANGULAR,templateIds:[214],objFile:"generator/3d-objects/square-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(An={},Bn(An,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Bn(An,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Bn(An,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),An)},{uniqueId:26,productId:ce.a.ID_PILLOW_W_STUFFING_RECTANGULAR,templateIds:[72],objFile:"generator/3d-objects/rectangular-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(Ln={},Bn(Ln,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2}),Bn(Ln,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:4}),Bn(Ln,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:3}),Ln)},{uniqueId:27,productId:ce.a.ID_PILLOWCASE_RECTANGULAR,templateIds:[32],objFile:"generator/3d-objects/square-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(Nn={},Bn(Nn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Bn(Nn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Bn(Nn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),Nn)},{uniqueId:28,productId:ce.a.ID_PILLOWCASE_RECTANGULAR,templateIds:[214],objFile:"generator/3d-objects/square-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(Dn={},Bn(Dn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Bn(Dn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Bn(Dn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),Dn)},{uniqueId:29,productId:ce.a.ID_PILLOWCASE_RECTANGULAR,templateIds:[72],objFile:"generator/3d-objects/rectangular-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(Rn={},Bn(Rn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2}),Bn(Rn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:4}),Bn(Rn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:3}),Rn)}],Vn.getMapObject=function(e){var t,i=null===(t=Object(_e.a)())||void 0===t?void 0:t.productId;return Vn.PRODUCT_OBJ_FILE_MAP.find((function(t){return t.productId===i&&t.templateIds.indexOf(e)>-1}))},Vn.getPositionValues=function(e){var t=this._getBreakPointObject(e,["zoom","posX","posY"]);return t.posX=(null==t?void 0:t.posX)||(null==e?void 0:e.positionX)||Vn.POSITION_X,t.posY=(null==t?void 0:t.posY)||(null==e?void 0:e.positionY)||Vn.POSITION_Y,t.zoom=(null==t?void 0:t.zoom)||(null==e?void 0:e.positionZ)||Vn.POSITION_Z,t},Vn.getDimensions=function(e){return this._getBreakPointObject(e,["width","height"])||Vn.DEFAULT_DIMENSIONS},Vn.getFillColor=function(e){return(null==e?void 0:e.fillColor)||Vn.DEFAULT_FILL_COLOR},Vn.getNeededPlacementId=function(e){return(null==e?void 0:e.placementId)||Vn.DEFAULT_PLACEMENT_ID},Vn._getBreakPointObject=function(e,t){var i=null;if(null!=e&&e.breakpointSettings){var n,r=null===(n=PFUtilsBreakpoints.getWindowBreakpoint())||void 0===n?void 0:n.value,a=-1/0;Object.keys(e.breakpointSettings).forEach((function(n){e.breakpointSettings[n][t[0]]&&r>=n&&a<n&&(a=n,i={},t.forEach((function(t){return i[t]=e.breakpointSettings[a][t]})))}))}return i},Vn.savePlacementImage=function(e,t){Vn.placementImageStorage[e]=t},Vn.getPlacementImage=function(e){return Vn.placementImageStorage[e]||null},Vn.getPlacementMap=function(e){return(null==e?void 0:e.placementMap)||Vn.DEFAULT_PLACEMENT_MAP},window&&((globalThis||{}).PFProductPushLive3dViewConfig=Vn);var jn=Class({shouldAllowFileColorChanger:null,templates:null,designerNode:null,getNodeMainMockupArea:null,pickerConfig:null,product:null,getSelectedPlacementId:null,getSelectedPlacementTechnique:null,onAllImagesProcessed:null,scheduleEmbroideryPreviewUpdate:null,editImageLayer:null,onLayerColorsChanged:null,getAvailablePlacements:null,isAllOverProduct:null,getProductOptionsPicker:null,isCustomizingMode:null});window&&((globalThis||{}).PFProductPushEmbroideryHelperPar=jn);var Un=i("5B9T"),zn=i("2+Fj"),Gn=Class({_par:null,_embroiderySelectedPaletteColors:[],_embroiderySelectedPaletteColorsByLayer:null,_colorizeImageCallStack:[],_showImageQualityWarning:null,lastZoomedInEmbroideryTemplate:null,__construct:function(e){this._par=e},getSelectedPaletteColors:function(){return this._embroiderySelectedPaletteColors},quantizeLayer:function(e,t){var i=this.getFileColorChangerColors(e.id,e.technique),n=Object.keys(i).map((function(e){return i[e].value}));t.embroideryType&&e.id===oe.a.TYPE_EMBROIDERY_FRONT||(t.embroideryType=Y.a.getDefaultEmbroideryType()),(new D.a).quantizeWithPaletteColors(t.fileItem.urlPreview,ge.a.EMBROIDERY_MAX_IMAGE_COLORS,n,this._embroiderySelectedPaletteColors,this._par.designerNode,this.onImageQuantized.bind(this,t,e,!1),this._onImageQuantizeError.bind(this))},_onImageQuantizeError:function _onImageQuantizeError(){this._imageQualityWarningNode&&I.a.removeNode(this._imageQualityWarningNode);var e=dlang("generator","Your embroidery design can't be created because the file you added contains too many colors or is empty.");new ae.a(e,"danger",1e4,!0).prepend(this._par.getNodeMainMockupArea())},onImageQuantized:function(e,t,i,n,r){i||this.customizingDesignWithNewEmbroideryColorPicker()||!(r>ge.a.EMBROIDERY_IMAGE_COLOR_COUNT_LIMIT||0===r)||(this._showImageQualityWarning=!0);var a=i;e.overrideColors=n,i||this._par.templates.addLayerToPlacementTemplates(t.id,e,!1,!0),this._par.onLayerColorsChanged&&this._par.onLayerColorsChanged(t.id,e,!1,a,i)},colorizeEmbroideryLayers:function(){if((this._isNewPickerEnabled()||this.customizingDesignWithNewEmbroideryColorPicker())&&this._par.getAvailablePlacements){var e=!1;this._colorizeImageCallStack=[],this._par.getAvailablePlacements().forEach(function(t){this._par.templates.getLayersByType(M.a,t.id).forEach(function(i){i.overrideColors&&(e=!0,this.recolorizeImageLayer(i,t.id,!0,!0,!1))}.bind(this)),this._par.templates.getLayersByType(F.a,t.id).forEach(function(e){this._par.scheduleEmbroideryPreviewUpdate&&this._par.scheduleEmbroideryPreviewUpdate(t.id,e,!0)}.bind(this)),this._par.templates.getLayersByType(R.a,t.id).forEach(function(e){this._par.scheduleEmbroideryPreviewUpdate&&this._par.scheduleEmbroideryPreviewUpdate(t.id,e,!0)}.bind(this))}.bind(this)),!e&&this._par.onAllImagesProcessed&&this._par.onAllImagesProcessed()}},recolorizeImageLayer:function(e,t,i,n,r){n&&this._colorizeImageCallStack.push(e.uniqueId),qt.a.show(this._par.designerNode),(new D.a).colorizeImage(e.fileItem.urlPreview,Object.keys(e.overrideColors),Object.values(e.overrideColors),this._onImageRecolorized.bind(this,e,t,i,n,r))},_onImageRecolorized:function(e,t,i,n,r,a){var o;if(this._par.getSelectedPlacementId)if(e.overrideImage=a,e.overrideImagePulse=null,this.updateSelectedEmbroideryPaletteColors(e),n)this._colorizeImageCallStack.pop(),0===this._colorizeImageCallStack.length&&(r&&this.recalcGlobalSelectedEmbroiderySelectedColors(),this._par.onAllImagesProcessed&&(o=this._par.onAllImagesProcessed,this._par.onAllImagesProcessed()),qt.a.hide(this._par.designerNode)),this._par.scheduleEmbroideryPreviewUpdate&&this._par.scheduleEmbroideryPreviewUpdate(t,e,i,o);else if(t===this._par.getSelectedPlacementId()){if(this._showImageQualityWarning){this._showImageQualityWarning=!1;var s=this._par.getNodeMainMockupArea();s&&(this._imageQualityWarningNode||(this._imageQualityWarningNode=this._getImageQualityWarningNode().node),I.a.insertBefore(this._imageQualityWarningNode,s))}this._par.onAllImagesProcessed&&(o=this._par.onAllImagesProcessed,this._par.onAllImagesProcessed()),setTimeout(function(){this._par.templates.setActiveLayer(e,null,!0),this._par.editImageLayer&&this._par.editImageLayer(e),this._par.scheduleEmbroideryPreviewUpdate&&this._par.scheduleEmbroideryPreviewUpdate(t,e,i,o),qt.a.hide(this._par.designerNode)}.bind(this),1e3)}},updateSelectedEmbroideryPaletteColors:function(e){this._embroiderySelectedPaletteColorsByLayer||(this._embroiderySelectedPaletteColorsByLayer={});var t=[];if(e){if(e instanceof M.a){var i=Object.values(e.overrideColors);t=i.filter((function(e,t){return e&&i.indexOf(e)==t})).map((function(e){if(e)return new Un.a.Color.fromHex(e)}))}else e.isTextLayer()&&t.push(new Un.a.Color.fromHex(e.color));this._embroiderySelectedPaletteColorsByLayer[e.uniqueId]=t}this.recalcGlobalSelectedEmbroiderySelectedColors()},recalcGlobalSelectedEmbroiderySelectedColors:function(){if(this._isNewPickerEnabled()&&this._par.getSelectedPlacementId){var e=[];if(this._par.templates.getTemplatesByPlacement(this._par.getSelectedPlacementId()).forEach(function(t){for(var i in t.layers){var n=t.layers[i];-1===e.indexOf(n.uniqueId)&&e.push(n.uniqueId)}}.bind(this)),this._embroiderySelectedPaletteColorsByLayer||(this._embroiderySelectedPaletteColorsByLayer={}),this._embroiderySelectedPaletteColorsByLayer)for(var t in this._embroiderySelectedPaletteColors.length=0,e){var i=this._embroiderySelectedPaletteColorsByLayer[e[t]];for(var n in i)if(i[n]){var r=i[n];r.isContainedBy(this._embroiderySelectedPaletteColors)||this._embroiderySelectedPaletteColors.push(r)}}}},hasEmbroideryThreadColorsError:function hasEmbroideryThreadColorsError(){return!!this._isNewPickerEnabled()&&this._embroiderySelectedPaletteColors.length>ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS},getFileColorChangerColors:function(e,t){if(!this._isNewPickerEnabled()||!this._par.isAllOverProduct)return null;var i=j.a.getAllAvailableColors(t===ce.a.TECHNIQUE_EMBROIDERY,e,this._par.isAllOverProduct(),!0);for(var n in i)i[n].value=i[n].value.toLowerCase();return i},manageEmbroiderySelectedColorsOnLayerRemove:function(e){this._embroiderySelectedPaletteColorsByLayer&&this._embroiderySelectedPaletteColorsByLayer[e.uniqueId]&&delete this._embroiderySelectedPaletteColorsByLayer[e.uniqueId],this.recalcGlobalSelectedEmbroiderySelectedColors()},switchToNewEmbrColorPicker:function(){var e=Object(_e.a)();if(this.canSwitchToNewEmbrColorPicker()&&this._par.pickerConfig&&this._par.pickerConfig.productOptionsValues&&e&&this._par.getAvailablePlacements){console.log("Switching to new embroidery color picker...");var t=e.getOptionItems(),i=[];if(this._colorizeImageCallStack=[],this._par.getAvailablePlacements().forEach(function(e){if(t.forEach((function(t){-1!==t.getConditionFilesTypes().indexOf(e.id)&&t.type===zn.a.TYPE_COLOR&&i.push(t.name)})),this._par.templates.hasLayersForPlacement(e.id,M.a)){var n,r=[],a={};t.forEach(function(t){-1!==t.getConditionFilesTypes().indexOf(e.id)&&(t.type===zn.a.TYPE_COLOR&&-1!==t.getConditionLayerTypes().indexOf(M.a.TYPE)&&r.push(t.name),t.type===zn.a.TYPE_RADIO&&t.name===zn.a.NAME_EMBROIDERY_TYPE&&(n=this._par.pickerConfig.productOptionsValues[t.name]))}.bind(this));var o=Object.keys(this._par.pickerConfig.productOptionsValues).filter((function(e){return-1!==r.indexOf(e)}));for(var s in o){var l=this._par.pickerConfig.productOptionsValues[o[s]];if(l)for(var c in l){var d=l[c].toLowerCase();a[d]||(a[d]=d)}}this._par.templates.getLayersByType(M.a,e.id).forEach(function(t){n||(n=Y.a.getDefaultEmbroideryType()),t.embroideryType=n,t.migratedToNewPicker=!0,n===oe.a.DIGITIZATION_BOTH&&(t.isEmbroideryAfterMigration=!0),this.onImageQuantized(t,e,!0,a)}.bind(this))}var u=function(e){e.embroideryType=oe.a.DIGITIZATION_FLAT,e.migratedToNewPicker=!0,this.updateSelectedEmbroideryPaletteColors(e)}.bind(this);this._par.templates.hasLayersForPlacement(e.id,F.a)&&(this._par.templates.getLayersByType(F.a,e.id).forEach(u),this._par.templates.getLayersByType(R.a,e.id).forEach(u),this._par.onAllImagesProcessed&&this._par.onAllImagesProcessed())}.bind(this)),this._par.getProductOptionsPicker&&i.length>0){var n=this._par.getProductOptionsPicker();for(var r in i)n.setValue(i[r],null)}}},canSwitchToNewEmbrColorPicker:function(){return this._isNewPickerEnabled()&&!this._par.isCustomizingMode&&this._hasLayersWithoutOverrideColorsOrEmbroideryType()},getEmbrTypeFromDigitizedItem:function(e){if(!e.digitizedItems||!e.digitizedItems.itemList)return null;var t=null;for(var i in e.digitizedItems.itemList){var n=e.digitizedItems.itemList[i];if(n.puffType){if(n.puffType!==oe.a.DIGITIZATION_BOTH)return n.puffType;t=n.puffType}}return t},_hasLayersWithoutOverrideColorsOrEmbroideryType:function(){if(!this._par.getAvailablePlacements)return!1;var e=this._par.getAvailablePlacements();for(var t in e){var i=e[t],n=this._par.templates.getLayersByType(M.a,i.id);for(var r in n)if(!n[r].overrideColors&&!n[r].embroideryType)return!0;var a=this._par.templates.getLayersByType(F.a,i.id);for(var o in a)if(!a[o].embroideryType)return!0}return!1},_getImageQualityWarningNode:function(){return new Bt.a({type:"warning",className:"embroidery-image-quality-banner",content:dlang("generator","Your embroidery design may not turn out as expected â€” the uploaded file has too many colors or is low quality due to compression."),closable:!0})},_isNewPickerEnabled:function(){return this._par.shouldAllowFileColorChanger&&this._par.shouldAllowFileColorChanger()},hasLayerWithPartial3dType:function(e){if(!e)return!1;for(var t in e){var i=Object.values(e[t]);for(var n in i){return i[n].layers.some((function(e){return e.embroideryType===oe.a.DIGITIZATION_BOTH}))}}return!1},customizingDesignWithNewEmbroideryColorPicker:function(){if(!this._par.isCustomizingMode)return!1;var e=this._par.templates.getFirstLayer();return e&&e.embroideryType},reScheduleEmbroideryPreviewForTemplate:function(){this._par.scheduleEmbroideryPreviewUpdate&&this.lastZoomedInEmbroideryTemplate&&this.lastZoomedInEmbroideryTemplate.layers.forEach(function(e){this._par.scheduleEmbroideryPreviewUpdate(this._par.getSelectedPlacementId(),e,!1)}.bind(this))}});window&&((globalThis||{}).PFProductPushEmbroideryHelper=Gn);var Hn=i("MMbA"),Yn=i("zsu5"),qn=i("EqHI"),Wn=i("vfQf"),Kn=Class({_templateType:"",_availablePopover:"label_info_popover",_popoverAttributes:{label_info_popover:{description:lang("Each product variant's specific country of origin, size, fabric info, and care instructions will be printed automatically.")}},__construct:function(){this.node=tag("div","label-switcher-node")},_render:function(){var e=this._templateType;I.a.clearNode(this.node);var t=tag("div",null,[tag("div",{style:{position:"relative",overflow:"hidden",top:"0",textAlign:"center",margin:"0 50px 0 50px"}},[this._switchNative=tag("a",{className:"type-native blue-link",style:{padding:"0 10px"},text:lang("Inside label template"),onclick:this._onSelectInsideLabelCallback.bind(this,qn.a.LABEL_NATIVE)}),this._switchCustom=tag("a",{className:"type-custom blue-link",style:{padding:"0 10px"},text:lang("Change to Blank"),onclick:this._onSelectInsideLabelCallback.bind(this,qn.a.LABEL_CUSTOM)})])]);this.setActiveSwitch(e),t.append(this.node)},show:function(e,t){this._onSelectInsideLabelCallback=t,this._templateType=e,this._render()},hide:function(){I.a.clearNode(this.node)},setActiveSwitch:function(e){e===qn.a.LABEL_NATIVE?(I.a.removeClassName(this._switchCustom,"active"),I.a.addClassName(this._switchNative,"active")):(I.a.removeClassName(this._switchNative,"active"),I.a.addClassName(this._switchCustom,"active"))},getLabelMockupInfoNode:function(e){var t=this._popoverAttributes[e],i=tag("div",{className:"hidden-xs",id:e});return tag("a",{className:"pulsating-dot",style:{opacity:"0.8"},onclick:function(n){new Wn.a(i,"",t.description,{placement:"top"},this.dismissPopover.bind(null,n.target,e)).show()}.bind(this)}).append(i),i},dismissPopover:function(e,t){try{localStorage.setItem(t,"1")}catch(e){console.warn("Could not save popover info in local storage")}e&&I.a.removeNode(e)},getLabelPopover:function(e){var t=null;(localStorage.getItem(this._availablePopover)||(t=this._availablePopover),t)?e(this.getLabelMockupInfoNode(t)):e(!1)}},I.a.Base);window&&((globalThis||{}).PFProductPushLabelSwitcher=Kn);var Zn=Class({_placements:[],_selectedPlacement:null,_priceData:null,__construct:function(e,t){this._onSelectPlacement=e,t&&(this._priceData=t),this.node=tag("div","text-center")},setPlacements:function(e){if(this._placements=e,!this._selectedPlacement)for(var t in e){this._selectedPlacement=e[t];break}this._render()},setPriceDataAndRender:function(e){this._priceData=e,this._render()},_render:function(){if(I.a.clearNode(this.node),!(this._placements.length<=1)){var e=this._shouldShowPrices(),t=new Mt.a("secondary "+(e?"subtitle":""));for(var i in this._placements){var n=this._placements[i],r=this._selectedPlacement&&this._selectedPlacement.id==n.id;!0!==n.hide&&t.add({caption:n.title.replace(/ print$/,""),badge:n.isNew?tag("span","pf-badge pf-badge-small pf-badge--primary pf-ml-4",clang("Badge","New")):"",subtitle:e?this._getPrice(n.id):"",isActive:r,onclick:this._selectPlacement.bind(this,n),customId:n.id})}t.append(this.node)}},_shouldShowPrices:function(){return!!this._priceData&&Object.values(this._priceData).filter((function(e){return e.basePrice||e.finalPrice})).length>0},_selectPlacement:function(e,t){t=void 0===t||t,this._selectedPlacement=e,t&&this._onSelectPlacement(e),this._render()},_getPrice:function(e){if(!this._priceData)return"";if(!this._priceData.hasOwnProperty(e))return"-";var t=this._priceData[e],i="-";return t.canDisplayPrice||(i=dclang("products","price","Incl")),t.basePrice>0&&t.canDisplayPrice?i="+ "+prettyMoney(t.basePrice,t.currency):t.finalPrice&&(i="+ "+prettyMoney(t.finalPrice,t.currency)),i},getSelectedPlacement:function(){return this._selectedPlacement},getSelectedPlacementId:function(){return this._selectedPlacement?this._selectedPlacement.id:null},setSelectedPlacement:function(e,t){t=void 0!==t&&t,this._selectPlacement(e,t)},deselectPlacement:function(){this._selectedPlacement=null},setSelectedPlacementById:function(e,t){for(var i in this._placements){var n=this._placements[i];if(n.id==e)return void this.setSelectedPlacement(n,t)}}},I.a.Base);window&&((globalThis||{}).PFProductPushPlacementSelector=Zn);var Qn=Class({generatorVariants:[],activeGeneratorVariant:null,templates:null,onGeneratorVariantSelect:null,onGeneratorVariantRemove:null});window&&((globalThis||{}).PFProductPushVariantAreaPar=Qn);var Xn=Class({generatorVariant:null,templates:null,template:null,onRemove:null,onSelect:null});window&&((globalThis||{}).PFProductPushVariantAreaItemPar=Xn);var $n=i("nvph"),Jn=Class({_par:null,__construct:function(e){this._par=e;var t=new $n.a;t.maxHeight=85,t.maxWidth=78,t.generatorVariant=this._par.generatorVariant,this._mockupPreview=new xn.a(t),this._overlayNode=tag("div"),this.node=tag("div",{className:"variant-item",onclick:function(e){e.stopImmediatePropagation(),this._par.onSelect&&this._par.onSelect()}.bind(this)},[this._nodeQuality=tag("div","quality-icon"),this._par.onRemove?tag("a",{className:"variant-item__remove",onclick:function(e){e.stopImmediatePropagation(),this._par.onRemove()}.bind(this)}):"",this._mockupPreview,tag("span","",this._par.generatorVariant.title),this._overlayNode]),this._updateDPIWarnings()},setActive:function(e){e?I.a.addClassName(this.node,"active"):I.a.removeClassName(this.node,"active")},_updateDPIWarnings:function(){var e,t=this._par.templates.getQuality(),i=null===(e=Object(_e.a)())||void 0===e?void 0:e.isEmbroidery(),n=t.getTemplateQualityPercent(this._par.template.placementId,this._par.template.templateId);t.isQualityBad(n)&&!i?this._showDpiLabel("quality-bad",dlang("generator","Your file is not large enough to<br>meet the minimum requirements!")):!t.isQualityMedium(n)&&!t.isQualityBadUpscale(n)||i?this._hideDpiLabel():this._showDpiLabel("quality-medium",dlang("generator","We strongly suggest a larger file<br>for better results"))},_hideDpiLabel:function(){this._nodeQuality.className="quality-icon",I.a.removeClassName(this.node,"quality-bad"),I.a.removeClassName(this.node,"quality-medium"),$(this.node).tooltip("destroy"),this.node.title=""},_showDpiLabel:function(e,t){this._hideDpiLabel(),this._nodeQuality.className="quality-icon icon-exclamation",I.a.addClassName(this.node,e),this.node.title=t,this.node.title&&$(this.node).tooltip({container:this.node,html:"true"})},getTemplateKey:function(){return this._par.template.getKey()},getTemplate:function(){return this._par.template},updateDpiWarning:function(e,t,i){this._mockupPreview&&"delay"!==i&&"mirror"!==i&&P.a.delay("PFProductPushVariantAreaItem._updateDPIWarnings-"+this.getGeneratorVariantId(),this._updateDPIWarnings,100)},renderMockupPreviewString:function(){this._mockupPreview.renderPreviewString(!0)},getGeneratorVariantId:function(){return this._par.generatorVariant.generatorVariantId},hideOverlay:function(){I.a.removeClassName(this._overlayNode,"variant-item__overlay")},showOverlay:function(){I.a.addClassName(this._overlayNode,"variant-item__overlay")}},I.a.Base);window&&((globalThis||{}).PFProductPushVariantAreaItem=Jn);var er=Class({_variantItems:[],_par:null,_generatorVariants:[],_activeGeneratorVariant:null,_isVariantOverlayVisible:!1,_variantOverlayHandle:null,__construct:function(e){this._par=e,this._subscribeTemplateEvents(),this.node=tag("div","generator-variant-area"),this.setGeneratorVariants(this._par.generatorVariants.slice(),this._par.activeGeneratorVariant)},_render:function(){for(var e in I.a.clearNode(this.node),this._variantItems=[],this._generatorVariants){var t,i=this._generatorVariants[e],n=this._par.templates.getUserTemplate(i.placementId,i.templateId),r=new Xn;r.generatorVariant=i,r.templates=this._par.templates,r.template=n,r.onRemove=null===(t=this._par.onGeneratorVariantRemove)||void 0===t?void 0:t.bind(null,i.generatorVariantId),r.onSelect=this._onGeneratorVariantSelected.bind(this,i.generatorVariantId);var a=new Jn(r);this._activeGeneratorVariant&&this._activeGeneratorVariant.generatorVariantId===i.generatorVariantId&&a.setActive(!0),this._variantItems.push(a),a.append(this.node),a.renderMockupPreviewString()}this._variantItems.length>1&&this.hasUnrelatedTemplates()&&tag("div","overlay-notice pf-py-12",[tag("div","overlay-notice__pattern"),tag("div","overlay-notice__text pf-px-16",dlang("generator","Items with the overlay need to be adjusted individually."))]).append(this.node)},_unsubscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().unsubscribe(this._onTemplatesChangedExternallyVariant)},_subscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().addOnLayerAddedOrRemovedListener(this._onTemplatesChangedExternallyVariant).addOnTemplatePositionsChangedListener(this._onTemplatesChangedExternallyVariant)},_unsubscribeTemplateEventsIfNeeded:function(){return!Object(L.a)(this.node)&&(this._unsubscribeTemplateEvents(),!0)},_onGeneratorVariantSelected:function(e){if(!this._activeGeneratorVariant||this._activeGeneratorVariant.generatorVariantId!==e){for(var t=0,i=this._variantItems.length;t<i;t++){var n=this._variantItems[t];n.setActive(n.getGeneratorVariantId()===e)}this._par.onGeneratorVariantSelect(e)}},setGeneratorVariants:function(e,t){var i=this._activeGeneratorVariant===t,n=this._generatorVariants.map((function(e){return e.getComparisonKey()})).join("|")===e.map((function(e){return e.getComparisonKey()})).join("|");i&&n||(this._activeGeneratorVariant=t,this._generatorVariants=e,n||this._render())},_onTemplatesChangedExternallyVariant:function(e,t,i){if(!this._unsubscribeTemplateEventsIfNeeded()){for(var n=0,r=this._variantItems.length;n<r;n++)for(var a=this._variantItems[n],o=0,s=e.length;o<s;o++){var l=e[o];l.getKey()===a.getTemplateKey()&&a.updateDpiWarning(l,t,i)}this._showTimedVariantOverlay()}},renderMockupPreviewStrings:function(){for(var e=0,t=this._variantItems.length;e<t;e++){this._variantItems[e].renderMockupPreviewString()}},_showTimedVariantOverlay:function(){var e=this;this._isVariantOverlayVisible&&!this._variantOverlayHandle||(this._showVariantItemsOverlay(),this._variantOverlayHandle&&clearTimeout(this._variantOverlayHandle),this._variantOverlayHandle=setTimeout((function(){e._hideVariantItemsOverlay(),e._variantOverlayHandle=null}),2e3))},_showVariantItemsOverlay:function(){if(this._activeGeneratorVariant&&this._variantItems){this._isVariantOverlayVisible=!0;var e=this._par.templates.getUserTemplate(this._activeGeneratorVariant.placementId,this._activeGeneratorVariant.templateId);for(var t in this._variantItems){var i=this._variantItems[t],n=i.getTemplate();e.isRelated(n)||i.showOverlay()}}},_hideVariantItemsOverlay:function(){for(var e in this._variantItems)this._variantItems[e].hideOverlay();this._isVariantOverlayVisible=!1},hasUnrelatedTemplates:function(){var e=this._par.templates.getUserTemplate(this._activeGeneratorVariant.placementId,this._activeGeneratorVariant.templateId);for(var t in this._variantItems){var i=this._variantItems[t].getTemplate();if(!e.isRelated(i))return!0}return!1}},I.a.Base);window&&((globalThis||{}).PFProductPushVariantArea=er);var tr=Class({validateAddingLayer:null,getSelectedMockupVariant:null,getOrientation:null,getDesignMeta:null,getTechnique:null});(globalThis||{}).PFProductPushTemplatesPar=tr;var ir=Class({_onAdded:[],_onRemoved:[],_onTemplatePositionsChanged:[],_onTemplateResized:[],_onLayerRotated:[],_onOrderChanged:[],_onAddedOrRemoved:[],_onActiveLayerChanged:[],_onLayerConfigurationChanged:[],_onLayerCustomizableStateChanged:[],_onDesignFillColorChanged:[],_onLayerColorsChanged:[],_onZoomChanged:[],_onPreviewChanged:[],_onCropStateChanged:[],_allListeners:["_onAdded","_onRemoved","_onTemplatePositionsChanged","_onTemplateResized","_onLayerRotated","_onOrderChanged","_onAddedOrRemoved","_onActiveLayerChanged","_onLayerConfigurationChanged","_onDesignFillColorChanged","_onLayerColorsChanged","_onZoomChanged","_onPreviewChanged","_onCropStateChanged"],__construct:function(){window.dumpListeners=this._dumpListeners},_dumpListeners:function(){for(var e in this._allListeners)if(this._allListeners.hasOwnProperty(e)){var t=this._allListeners[e],i=this[t].length;if(i){console.log("â”œâ”€â”¬"+t,i);for(var n=0;n<i;n++){var r=this[t][n];console.log("â”‚ â”œâ”€â”€%c"+r.name.substring(6)+"("+r.__args+")","color:dimgray")}}else console.log("â”œâ”€â”¬"+t,i),console.log("â”‚ â”œâ”€â”€%c(empty)","color:dimgray")}},addOnLayerAddedListener:function(e){return this._onAdded.push(e),this},addOnLayerAddedOrRemovedListener:function(e){return this._onAddedOrRemoved.push(e),this},addOnLayerRemovedListener:function(e){return this._onRemoved.push(e),this},addOnTemplatePositionsChangedListener:function(e){return this._onTemplatePositionsChanged.push(e),this},addOnTemplateResizedListener:function(e){return this._onTemplateResized.push(e),this},addOnLayerRotatedListener:function(e){return this._onLayerRotated.push(e),this},addOnLayerOrderChangedListener:function(e){return this._onOrderChanged.push(e),this},addOnActiveLayerChanged:function(e){return this._onActiveLayerChanged.push(e),this},addOnLayerConfigurationChanged:function(e){return this._onLayerConfigurationChanged.push(e),this},addOnDesignFillColorChanged:function(e){return this._onDesignFillColorChanged.push(e),this},addOnLayerCustomizableStateChanged:function(e){return this._onLayerCustomizableStateChanged.push(e),this},addOnLayerColorsChanged:function(e){return this._onLayerColorsChanged.push(e),this},addOnZoomChanged:function(e){return this._onZoomChanged.push(e),this},addonPreviewChanged:function(e){return this._onPreviewChanged.push(e),this},addOnCropStateChanged:function(e){return this._onCropStateChanged.push(e),this},notifyPreviewChanged:function(e,t,i){this._notify(this._onPreviewChanged,arguments)},notifyLayerRemoved:function(e,t){this._notify(this._onRemoved,arguments),this._notify(this._onAddedOrRemoved,arguments)},notifyLayerCropStateChanged:function(e,t){this._notify(this._onLayerConfigurationChanged,arguments),this._notify(this._onCropStateChanged,arguments)},notifyLayersAdded:function(e){this._notify(this._onAdded,arguments),this._notify(this._onAddedOrRemoved,arguments)},notifyLayerOrderChanged:function(){this._notify(this._onOrderChanged,arguments)},notifyTemplatePositionsChanged:function(e,t,i){this._notify(this._onTemplatePositionsChanged,arguments)},notifyTemplateResized:function(e,t,i){this._notify(this._onTemplateResized,arguments)},notifyLayerRotated:function(e,t){this._notify(this._onLayerRotated,arguments)},notifyActiveLayerChanged:function(e,t){this._notify(this._onActiveLayerChanged,arguments)},notifyLayerConfigurationChanged:function(e,t){this._notify(this._onLayerConfigurationChanged,arguments)},notifyDesignFillColorChanged:function(){this._notify(this._onDesignFillColorChanged,arguments)},notifyLayerCustomizableStateChanged:function(e){this._notify(this._onLayerCustomizableStateChanged,[e])},notifyLayerColorsChanged:function(e,t,i){this._notify(this._onLayerColorsChanged,[e,t,i])},notifyZoomChanged:function(e){this._notify(this._onZoomChanged,[e])},_notify:function(e,t){for(var i=0,n=(e=e.slice()).length;i<n;i++)e[i].apply(null,t)},unsubscribe:function(e){for(var t=0,i=this._allListeners.length;t<i;t++){var n=this._allListeners[t];this[n]=this[n].filter((function(t){return t!==e}))}return this}});window&&((globalThis||{}).PFProductPushTemplateChangeListeners=ir);var nr=i("zfrb"),rr=i("uGFp"),ar=i("Pxqf"),or=i("y70k"),sr=Class({_requiredDpi:null,_userTemplates:{},_changeListeners:null,_quality:null,_activeLayer:null,_par:null,closedTransparencyWarnigns:{},_shouldShowUnrelatedTemplatesPopover:!0,__construct:function(e){this._par=e,this._changeListeners=new ir,this._quality=new nr.a(this)},clone:function(){var e=this,t={};Object.keys(this._par).forEach((function(i){t[i]=e._par[i]}));var i=new sr(t);this.getRequiredDpi()&&i.setRequiredDpi(this.getRequiredDpi());var n=this.getTemplates()||{},r=this._par.getTechnique();if(n){var a={};Object.keys(n).forEach((function(e){var t=n[e]||{},i={};Object.keys(t).forEach((function(e){var n=t[e];i[e]=n.getCloneWithLayers(r)})),a[e]=i})),i._userTemplates=a}return this.getActiveLayer()&&i.silentlySetActiveLayer(this.getActiveLayer()),i},setRequiredDpi:function(e){this._requiredDpi=e},getRequiredDpi:function(){return this._requiredDpi},getChangeListener:function(){return this._changeListeners},getQuality:function(){return this._quality},hasTemplates:function(e){return!_.isEmpty(this._userTemplates[e])},isPlacementSimple:function(e){if(!this._userTemplates[e])return!0;for(var t in this._userTemplates[e]){var i=this._userTemplates[e][t].layers;if(i.length>1)return!1;for(var n in i)if(!i[n].isSimple())return!1}return!0},isCoverMode:function(){var e=!1;return this._loopTemplates((function(t){e=e||t.isCover()})),e},areTextLayersOverlapping:function(){var e=!1;return this._loopTemplates((function(t){t.areLayersOverlapping({layerTypeInstances:[F.a,R.a]})&&(e=!0)})),e},getRelatedTemplates:function(e){var t=[];return this._loopTemplates((function(i){e.isRelated(i)&&t.push(i)})),t},setUserTemplateIfMissing:function(e){return this._userTemplates[e.placementId]||(this._userTemplates[e.placementId]={}),!this._userTemplates[e.placementId][e.templateId]&&(this._userTemplates[e.placementId][e.templateId]=e,!0)},overrideLayerImages:function(e,t,i){this._loopTemplates(function(n){if(n.placementId===e)for(var r=0,a=n.layers.length;r<a;r++){var o=n.layers[r];o instanceof M.a&&(o.fileItem.fileId===t&&(o.overrideImage=i,this.getChangeListener().notifyLayerConfigurationChanged(o,this)))}}.bind(this))},getUserTemplate:function(e,t){var i=this._userTemplates[e];if(i&&i[t])return i[t];console.error(dlang("generator","Template is missing."))},reorderLayerGroup:function(e,t,i){var n=this.getTemplateByLayer(e);this._setLayerIndex(n,e,t,i);for(var r=n.getMirroredLayers(),a=0,o=r.length;a<o;a++){var s=r[a],l=n.getMirroredLayer(s),c=n.getLayerIndex(l);this._setLayerIndex(n,s,c,i)}},reorderLayer:function(e,t){var i=this.getTemplateByLayer(e);this._setLayerIndex(i,e,t,1);for(var n=i.getMirroredLayers(),r=0,a=n.length;r<a;r++){var o=n[r],s=i.getMirroredLayer(o),l=i.getLayerIndex(s);this._setLayerIndex(i,o,l,1)}},_setLayerIndex:function(e,t,i,n){var r=e.getLayerIndex(t);if(!(r<0||i<0||i>=e.layers.length)){var a=e.getMirroredLayer(t),o=-1;a&&(o=e.getLayerIndex(a)),this._loopTemplates((function(t){if(t.layers.length&&t.placementId===e.placementId){for(var a=t.layers.splice(r,n),s=a.length;s--;){var l=a[s];t.layers.splice(i,0,l)}if(o>-1)for(var c=t.layers.splice(o,n),d=c.length;d--;){var u=c[d];t.layers.splice(i,0,u)}}})),this.getChangeListener().notifyLayerOrderChanged()}},getActiveTemplate:function(e){var t,i;if(!(this._activeLayer||null!==(t=this._activeGroupLayers)&&void 0!==t&&t.length))return null;var n=null!==(i=this._activeGroupLayers)&&void 0!==i&&i.length?this._activeGroupLayers[0]:this._activeLayer,r=this.getTemplateByLayer(n);return r&&r.placementId===e?r:null},getActiveLayer:function(){return this._activeLayer},getActiveGroupLayers:function(){return this._activeGroupLayers},removeGroup:function(e,t,i,n){var r=this;t.forEach((function(t){return r.removeLayer(e,t,i,n)}))},removeLayer:function(e,t,i,n){if(e){var r=e.getLayerIndex(t);if(r<0)alert(dlang("generator","Layer index WAS NOT FOUND when removing it"));else{var a=e.placementId;this._loopTemplates(function(e){if(e.placementId===a&&e.layers.length){var t=e.layers.splice(r,1)[0];if(t.hasTransparencyIssues&&t.hasTransparencyIssues()&&m.a.trackEvent("transparency-warning-remove-layer",{event:"transparency-warning",eventCategory:"Generator transparency warning message",eventAction:"Graphic file removed",eventLabel:t.fileItem?t.fileItem.fileId:null},!0),this._shouldShowUnrelatedTemplatesPopover=0===e.layers.length,t&&(this._activeLayer&&this._activeLayer.uniqueId===t.uniqueId&&(this._activeLayer=null),!i)){var n=e.getMirroredLayer(t);n&&delete n.parentLayerUniqueId}}}.bind(this)),m.a.unblockEvent("transparency-warning-remove-layer"),n||this._changeListeners.notifyLayerRemoved([e],t)}}else console.warn("Removing layer without template!")},changeCustomizableState:function(e,t,i){var n=e.getLayerIndex(t);n<0?console.error("Layer not found"):this._loopTemplates((function(t){if(e.placementId===t.placementId){var r=t.layers[n];r&&(r.isCustomizable=i)}}))},silentlyRemoveAllLayers:function(){this._activeLayer=null,this._loopTemplates(function(e){e.layers=[]}.bind(this))},getByKey:function(e){for(var t in this._userTemplates)for(var i in this._userTemplates[t]){var n=this._userTemplates[t][i];if(n.getKey()===e)return n}alert(dlang("generator","Template by key not found: {key}").replace("{key}",e))},getPlacementIdsHavingFiles:function(e){var t=[];return this._loopTemplates((function(i){i.hasLayers(e)&&-1===t.indexOf(i.placementId)&&t.push(i.placementId)})),t},getPlacementCountHavingFiles:function(){return this.getPlacementIdsHavingFiles().length},hasLayersForPlacement:function(e,t){return this.getPlacementIdsHavingFiles(t).indexOf(e)>-1},copyLayersFromTemplates:function(e){var t=e.map((function(e){return e.getKey()})),i=[];if(this._loopTemplates((function(e){i.push(e.getKey())})),i.sort().join()!==t.sort().join())for(var n in this._userTemplates)Object.keys(this._userTemplates[n]).length>0&&(console.log("OVERRIDING OLD LAYERS for "+n),this._userTemplates[n]={});var r=this.silentlyCopyLayers(e);this.getChangeListener().notifyLayersAdded(r)},silentlyCopyLayers:function(e){var t=[],i=this._par.getTechnique();for(var n in e){var r=e[n].getCloneWithLayers(i);if(!this.setUserTemplateIfMissing(r)){var a=!1,o=this.getUserTemplate(r.placementId,r.templateId);for(var s in r.layers){var l=r.layers[s];l instanceof F.a?ue.a.DEPENDENCIES.TEXT2SVG.TextCalculator(l):l instanceof R.a&&ue.a.calculateTextboxPositions(l),l instanceof M.a&&l.overrideColors&&this.getChangeListener().notifyLayerColorsChanged(r.placementId,l),o.layers.push(l),a=!0}a&&t.push(o)}}return t},copyLayersBetweenTemplates:function(e,t,i){var n=this._par.getTechnique(),r=this.getUserTemplate(e,i).getCloneWithLayers(n),a=this.getUserTemplate(t,i);a.layers=r.layers,this.setFeatureDesignCopied(e,t,i),this.getChangeListener().notifyLayersAdded([a])},copyLayerToPlacementTemplates:function(e,t){for(var i=0,n=t.length;i<n;i++){var r=t[i];e=e.getOriginalClone(!0),this.addLayerToPlacementTemplates(r.id,e,!0)}},addMirroredLayersForTemplates:function(e){Object.keys(this._userTemplates).length||console.error(dlang("generator","Empty user templates, cannot add mirrored layer"));var t=[];this._loopTemplates(function(i){if(i.hasLayers()){for(var n=i.layers.filter((function(t){var n=!(i.getMirroredLayer(t)||t.wasMirrored()&&!e),r=t.patternType;return n&&!r})),r=[],a=0,o=n.length;a<o;a++){var s=n[a];if(this._par.validateAddingLayer(s)){s instanceof F.a?ue.a.DEPENDENCIES.TEXT2SVG.TextCalculator(s):s instanceof R.a&&ue.a.calculateTextboxPositions(s);var l=s.getOriginalClone(!0);l.parentLayerUniqueId=s.uniqueId,this._recalculateMirroredPosition(s.position,l.position),s.cropPosition&&this._recalculateMirroredCropPosition(s.cropPosition,l.cropPosition,s.position,l.position);var c=i.getLayerIndex(s);i.layers.splice(c,0,l),r.push(l)}}r.length>0&&t.push(i)}}.bind(this)),t.length>0&&this.getChangeListener().notifyLayersAdded(t)},removeMirroredLayersFromTemplates:function(){Object.keys(this._userTemplates).length||alert(dlang("generator","Empty user templates, cant remove mirrored layer")),this._loopTemplates(function(e){var t=e.getMirroredLayers();for(var i in t)this.removeLayer(e,t[i],!0)}.bind(this))},getUniqueFilesForPlacement:function(e){if(!this._userTemplates[e])return[];for(var t in this._userTemplates[e]){var i=[],n=[],r=this.getUserTemplate(e,t).layers;for(var a in r){var o=r[a];o instanceof M.a&&(i.indexOf(o.fileItem.fileId)>-1||(n.push(o.fileItem),i.push(o.fileItem.fileId)))}return n}return[]},getUsedFonts:function(){var e=[];return this._loopTemplates((function(t){e=e.concat(t.layers.filter((function(e){return e.isTextLayer()})).map((function(e){return e.font})).filter((function(e,t,i){return i.indexOf(e)===t})))})),e},getUsedColors:function(e){var t=[];return this._loopTemplates((function(i){e===i.placementId&&(t=t.concat(i.layers.filter((function(e){return e.isTextLayer()})).map((function(e){return e.color})).filter((function(e,t,i){return i.indexOf(e)===t}))))})),t},_loopTemplates:function(e){for(var t in this._userTemplates)for(var i in this._userTemplates[t])e(this._userTemplates[t][i])},resetLayer:function(e){var t=e.position.width,i=e.position.height,n=e.isCropPositionUpdateNeeded(),r=e.position.getClone().copyPositions(e.originalPosition);e.isTextLayer()&&(r.width=t,r.height=i,r.left=e.position.areaWidth/2-t/2,r.top=e.position.areaHeight/2-i/2),n&&(this.updateCropLayerPosition(e,null,this),e=this.getFreshLayer(e)),this.updateLayerPosition(e,r),n&&(e=this.getFreshLayer(e),this.getChangeListener().notifyLayerConfigurationChanged(e,this))},fitLayerSize:function(e){var t=e.getOriginalClone(),i=this.getTemplateByLayer(t);this._calculateDefaultLayerPositions(i,t,"fit"),e.isCropPositionUpdateNeeded()?(this.updateCropLayerPosition(e,t.cropPosition,this,fe.c),t.cropPosition.left=t.cropPosition.areaWidth/2-e.cropPosition.width/2,i.centerDefaultYPosition&&(t.cropPosition.top=t.cropPosition.areaHeight/2-e.cropPosition.height/2),this.updateCropLayerPosition(e,t.cropPosition,this,fe.a),t.cropPosition.rotation&&(t.cropPosition.rotation=0,this.updateCropLayerPosition(e,t.cropPosition,this,fe.b))):this.updateLayerPosition(e,t.position)},updateImageLayer:function(e,t,i,n){var r=this;if(!(e instanceof M.a))return console.error("Non-image layer given for updating!"),null;var a=e.getOriginalClone(),o=this.getTemplateByLayer(a),s=o.getLayerIndex(a),l={skipMockupRegeneration:i};this._loopTemplates((function(t){if(t.placementId===o.placementId){var i=t.layers[s];if(i){r._copyLayerParams(i,a);var c=t.getMirroredLayer(i);c&&(r._copyLayerParams(c,i),r.getChangeListener().notifyLayerConfigurationChanged(c,"mirror",l)),r._recalcUnrelatedCroppedLayerPositionsOnFlip(e,i,o,t,n)}}})),this.getChangeListener().notifyLayerConfigurationChanged(a,t,l)},_recalcUnrelatedCroppedLayerPositionsOnFlip:function(e,t,i,n,r){if(r&&t.isCropPositionUpdateNeeded()&&t.uniqueId!==e.uniqueId){var a=r.flippedX,o=r.flippedY;if(a||o){var s=this.recalculateBasePositionsOnFlip(t,a,o);this.updateLayerPosition(t,s,this,!0,r)}}},_copyLayerParams:function(e,t){e.overrideImage=t.overrideImage,e.overrideImagePulse=t.overrideImagePulse,e.cropPosition||(e.patternType=t.patternType,e.patternSpacing=t.patternSpacing,e.isRemovedBg=t.isRemovedBg,e.removeBgPreview=t.removeBgPreview),e.flipX=t.flipX,e.flipY=t.flipY,e.isUpscaled=t.isUpscaled},updateTextLayer:function(e,t,i,n){if(!e.isTextLayer())return console.error("Non-text layer given for updating!"),null;e=e.getOriginalClone();var r=this.getFreshLayer(e);if(!r)return[];var a=e.isWidthHeightRatioSame(r),o=this.getTemplateByLayer(e);(!a||t instanceof j.a||t instanceof ye||t instanceof sr)&&!i&&(r.position.rotation=e.position.rotation,e.position=r.position.getFromOriginalRatio(),e instanceof F.a?ue.a.DEPENDENCIES.TEXT2SVG.TextCalculator(e):e instanceof R.a&&ue.a.calculateTextboxPositions(e)),!e.overrideImage&&!e.overrideImagePulse||a&&e.color===r.color&&e.strokeColor===r.strokeColor&&e.shadowColor===r.shadowColor||(e.overrideImage=null,e.overrideImagePulse=null),"productCustomizer"===t&&(e instanceof F.a?ue.a.DEPENDENCIES.TEXT2SVG.TextCalculator(e):e instanceof R.a&&ue.a.calculateTextboxPositions(e)),o.layers.splice(o.getLayerIndex(e),1,e);var s=this._updateRelatedTextLayers(o,e);s.push(o);var l=this._repositionLinkedLayers(o,e),c=this._repositionRelatedTemplates(o);s=s.concat(c,o),s=this._filterUniqueTemplates(s);var d={skipMockupRegeneration:n};return l&&(this.getChangeListener().notifyLayerConfigurationChanged(l,"mirror",d),this.getChangeListener().notifyTemplatePositionsChanged(s,l,"mirror",d)),this.getChangeListener().notifyLayerConfigurationChanged(e,t,d),this.getChangeListener().notifyTemplatePositionsChanged(s,e,t,d),s},updateClipartLayer:function(e,t,i){if(!(e instanceof x.a))return console.error("Non-clipart layer given for updating!"),null;var n=e.getOriginalClone(),r=this.getTemplateByLayer(n),a=r.getLayerIndex(n);this._loopTemplates(function(t){if(t.placementId===r.placementId){var o=t.layers[a];if(o){o.overrideImage=n.overrideImage,o.fillColor=n.fillColor,o.patternType=n.patternType,o.patternSpacing=n.patternSpacing,o.flipX=n.flipX,o.flipY=n.flipY;var s=t.getMirroredLayer(o);s&&(s.overrideImage=o.overrideImage,s.fillColor=o.fillColor,s.patternType=o.patternType,s.patternSpacing=o.patternSpacing,s.flipX=o.flipX,s.flipY=o.flipY,this.getChangeListener().notifyLayerConfigurationChanged(s,"mirror")),this._recalcUnrelatedCroppedLayerPositionsOnFlip(e,o,r,t,i)}}}.bind(this)),this.getChangeListener().notifyLayerConfigurationChanged(n,t)},updateLicensedAssetLayer:function(e,t,i){var n=this;if(!(e instanceof Te.a))return console.error("Non-licensed-asset layer given for updating!"),null;var r=e.getOriginalClone(),a=this.getTemplateByLayer(r),o=a.getLayerIndex(r);this._loopTemplates((function(t){if(t.placementId===a.placementId){var s=t.layers[o];if(s){n._copyLayerParams(s,r);var l=t.getMirroredLayer(s);l&&(n._copyLayerParams(l,s),n.getChangeListener().notifyLayerConfigurationChanged(l,"mirror")),n._recalcUnrelatedCroppedLayerPositionsOnFlip(e,s,a,t,i)}}})),this.getChangeListener().notifyLayerConfigurationChanged(r,t)},updateLayerText:function(e,t){this.getChangeListener().notifyLayerConfigurationChanged(e,t)},_repositionRelatedTemplatesAndNotify:function(e,t,i,n,r,a,o,s,l){var c=this._repositionRelatedTemplates(t,l);if(c.push(t),r||n||a||s){var d={skipSwitchToDesignerTab:!0};i&&this.getChangeListener().notifyTemplatePositionsChanged(c,i,"mirror",d),this.getChangeListener().notifyTemplatePositionsChanged(c,e,o,d)}a&&(i&&this.getChangeListener().notifyLayerRotated(i,"mirror"),this.getChangeListener().notifyLayerRotated(e,o)),n&&(i&&this.getChangeListener().notifyTemplateResized(c,i,"mirror"),this.getChangeListener().notifyTemplateResized(c,e,o))},updateLayerPosition:function(e,t,i,n,r){var a=(e=this.getFreshLayer(e)||e).position.getFromOriginalRatio(),o=t.canMoveOutOfBounds;e.position=t.getFromOriginalRatio(),!o&&e.position.isOutOfBounds()&&e.position.center();var s=this.getTemplateByLayer(e);if(s){s.layers.splice(s.getLayerIndex(e),1,e);var l=a.isSizeDifferent(e.position),c=a.isPositionDifferent(e.position),d=a.isRotationDifferent(e.position);if(l&&e.isTextLayer()){0!==a.height&&(e.size*=e.position.height/a.height);var u=this.updateTextLayer(e,i);this.getChangeListener().notifyTemplateResized(u,e,i),d&&this.getChangeListener().notifyLayerRotated(e,i)}else{var h=this._repositionLinkedLayers(s,e,!1,r);this._repositionRelatedTemplatesAndNotify(e,s,h,l,c,d,i,n,r)}return e}},updateCropLayerPosition:function(e,t,i,n,r){var a,o,s,l,c=this.getTemplateByLayer(e),d=null===(a=(e=this.getFreshLayer(e)).cropPosition)||void 0===a?void 0:a.getFromOriginalRatio();if(e.cropPosition=t?t.getFromOriginalRatio():null,e.cropPosition){var u=Math.abs(1-e.cropPosition.width/e.position.width),h=Math.abs(1-e.cropPosition.height/e.position.height);u<.01&&h<.01&&(e.cropPosition=null)}!(null===(o=e.cropPosition)||void 0===o?void 0:o.canMoveOutOfBounds)&&null!==(s=e.cropPosition)&&void 0!==s&&s.isOutOfBounds()&&(null===(l=e.cropPosition)||void 0===l||l.center());c.layers.splice(c.getLayerIndex(e),1,e);var p=!e.cropPosition||(null==d?void 0:d.isSizeDifferent(e.cropPosition)),g=!e.cropPosition||(null==d?void 0:d.isPositionDifferent(e.cropPosition)),f=!e.cropPosition||(null==d?void 0:d.isRotationDifferent(e.cropPosition)),_=this._repositionLinkedLayers(c,e,!0);_&&!r&&(r=!0),this._repositionRelatedTemplatesAndNotify(e,c,_,p,g,f,i,r),this.onCropLayerPositionsChanged(e,d,n)},onCropLayerPositionsChanged:function(e,t,i){if(e&&i&&!e.isCropState&&e.cropPosition&&t){var n=e.position.getClone();switch(i){case fe.a:var r=e.cropPosition.left-t.left,a=e.cropPosition.top-t.top;n.left+=r,n.top+=a;break;case fe.c:var o=e.cropPosition.left+e.cropPosition.width/2,s=e.cropPosition.top+e.cropPosition.height/2,l=o-e.position.left,c=s-e.position.top,d=e.cropPosition.width/t.width;n.width*=d,n.height*=d,n.left=o-l*d,n.top=s-c*d;break;case fe.b:var u=e.cropPosition.getClone(),h=t.rotation,p=fabric.util.degreesToRadians(h),g=e.cropPosition.rotation,f=fabric.util.degreesToRadians(g),_=new fabric.Point(n.left+n.width/2,n.top+n.height/2),m=new fabric.Point(u.left+u.width/2,u.top+u.height/2),v=fabric.util.rotatePoint(_,m,-p),y=fabric.util.rotatePoint(v,m,f);n.left=y.x-n.width/2,n.top=y.y-n.height/2,n.rotation=u.rotation}this.updateLayerPosition(e,n)}},_filterUniqueTemplates:function(e){var t=[];return e.filter((function(e){return!(t.indexOf(e.getKey())>-1)&&(t.push(e.getKey()),!0)}))},_updateRelatedTextLayers:function(e,t){var i=e.getLayerIndex(t),n=[];return this._loopTemplates(function(r){if(r.placementId===e.placementId&&(n.push(r),r!==e)){var a=r.width/e.width,o=r.layers[i];if(o){o.copyValues(t),o.size=t.size*a;var s=o.position.width,l=o.position.height;o.position.width=t.position.width*a,o.position.height=t.position.height*a,o.position.left+=s/2-o.position.width/2,o.position.top+=l/2-o.position.height/2;this._repositionLinkedLayers(r,o)}}}.bind(this)),n},_repositionRelatedTemplates:function(e,t){var i=this.getRelatedTemplates(e),n=null==t?void 0:t.flippedX,r=null==t?void 0:t.flippedY;if(!i.length)return[];var a=e.layers;for(var o in i){var s=i[o];for(var l in a)if(!n&&!r){var c=s.layers[l];if(c&&(c.position=c.position.getRelativelyPositioned(a[l].position),a[l].cropPosition)){var d=c.cropPosition||c.position.getClone();c.cropPosition=d.getRelativelyPositioned(a[l].cropPosition)}}}return i},_repositionLinkedLayers:function(e,t,i,n){var r=null==n?void 0:n.flippedX,a=null==n?void 0:n.flippedY;for(var o in e.layers){var s,l,c=e.layers[o];if(c.parentLayerUniqueId===t.uniqueId||c.uniqueId===t.parentLayerUniqueId){var d,u=i?"cropPosition":"position",h=null===(s=t[u])||void 0===s?void 0:s.getFromOriginalRatio(),p=null===(l=c[u])||void 0===l?void 0:l.getFromOriginalRatio();if(c.isTextLayer())c.copyValues(t),p=null===(d=t[u])||void 0===d?void 0:d.getClone();if(r||a)p=this.recalculateBasePositionsOnFlip(c,r,a);else if(i){var g=t.position.getFromOriginalRatio(),f=c.position.getFromOriginalRatio();p=h?p||f.getClone():null,this._recalculateMirroredCropPosition(h,p,g,f)}else this._recalculateMirroredPosition(h,p);return c[u]=p,c}}return null},recalculateBasePositionsOnFlip:function(e,t,i){var n=e.position.getFromOriginalRatio(),r=e.position.rotation,a=fabric.util.degreesToRadians(r),o=new fabric.Point(e.position.left,e.position.top),s=new fabric.Point(e.cropPosition.left+e.cropPosition.width/2,e.cropPosition.top+e.cropPosition.height/2),l=new fabric.Point(e.position.left+e.position.width/2,e.position.top+e.position.height/2),c=fabric.util.rotatePoint(o,l,a),d=fabric.util.rotatePoint(c,s,-a),u=0,h=0;if(i){var p=e.cropPosition.top+e.cropPosition.height,g=e.cropPosition.top,f=d.y+e.position.height;u=g-d.y-(f-p)}if(t){var _=e.cropPosition.left+e.cropPosition.width,m=e.cropPosition.left,v=d.x+e.position.width;h=m-d.x-(v-_)}var y=new fabric.Point(d.x+h,d.y+u),b=new fabric.Point(y.x+e.position.width/2,y.y+e.position.height/2),P=fabric.util.rotatePoint(y,s,a),C=fabric.util.rotatePoint(b,s,a),T=fabric.util.rotatePoint(P,C,-a);return n.top=T.y,n.left=T.x,n},_recalculateMirroredPosition:function(e,t){var i=e.areaWidth/2,n=i-e.width-e.left;t.left=i+n,t.top=e.top,t.width=e.width,t.height=e.height,t.rotation=e.rotation},_recalculateMirroredCropPosition:function(e,t,i,n){e?(t.left=n.left+(e.left-i.left),t.top=e.top,t.width=e.width,t.height=e.height,t.rotation=e.rotation):t=null},getTemplateByLayer:function(e){if(!e)return null;var t=null;return this._loopTemplates((function(i){!t&&i.hasLayer(e.uniqueId)&&(t=i)})),t},getTemplatesByPlacement:function(e){var t=[];return this._loopTemplates((function(i){i.placementId===e&&t.push(i)})),t},getFreshLayer:function(e){var t=this.getTemplateByLayer(e);return t?t.layers[t.getLayerIndex(e)]:null},setActiveLayer:function(e,t,i){var n=!e&&!this._activeLayer||e&&this._activeLayer&&this._activeLayer.uniqueId===e.uniqueId;n&&!i||(e&&(e=this.getFreshLayer(e)),this.silentlySetActiveLayer(e),n&&!i||this.getChangeListener().notifyActiveLayerChanged(e,t))},setActiveGroup:function(e,t,i){var n,r,a=!(null!=e&&e.length)&&!(null!==(n=this._activeGroupLayers)&&void 0!==n&&n.length)||(null==e?void 0:e.length)&&(null===(r=this._activeGroupLayers)||void 0===r?void 0:r.length)&&this._activeGroupLayers[0].groupId===e[0].groupId;a&&!i||(this.silentlySetActiveLayer(null,e),a&&!i||this.getChangeListener().notifyActiveLayerChanged(e,t))},silentlySetActiveLayer:function(e,t){this._activeLayer=e,this._activeGroupLayers=t||null},setActiveLayerFromTemplate:function(e,t,i){var n,r=this,a=this.getUserTemplate(e,t),o=a.layers.length-1;if(null!==(n=this._activeGroupLayers)&&void 0!==n&&n.length){var s=this.getTemplateByLayer(this._activeGroupLayers[0]);if((null==s?void 0:s.layers.length)===a.layers.length){var l=a.layers.filter((function(e){return e.groupId===r._activeGroupLayers[0].groupId}));return void this.setActiveGroup(l,i)}}if(this._activeLayer){var c=this.getTemplateByLayer(this._activeLayer);c&&c.layers.length===a.layers.length&&(o=c.getLayerIndex(this._activeLayer))}this.setActiveLayer(a.layers[o],i)},silentlyRemoveAllTemplates:function(){this._activeLayer=null,this._userTemplates={}},hasLayers:function(e,t){for(var i in this._userTemplates)if(!t||i===t)for(var n in this._userTemplates[i]){var r=this._userTemplates[i][n];if(r.layers.length){if(!e)return!0;if(r.layers.filter((function(t){return t instanceof e})).length)return!0}}return!1},hasTextLayers:function(e){return this.hasLayers(F.a,e)||this.hasLayers(R.a,e)},getOrientation:function(){var e="";return this._loopTemplates((function(t){e=e||t.width<t.height})),e?h.a.ORIENTATION_VERTICAL:h.a.ORIENTATION_HORIZONTAL},duplicateLayer:function(e,t){var i=t.getOriginalClone(!0);i.parentLayerUniqueId=null,i.position.areaWidth&&i.position.areaHeight||this._calculateDefaultLayerPositions(e,i);var n=i.cropPosition?i.cropPosition.height/2:i.position.height/2,r=i.cropPosition?i.cropPosition.width/2:i.position.width/2;return i.isCropPositionUpdateNeeded()?(i.cropPosition.top+=n,i.cropPosition.left+=r,i.position.top+=n,i.position.left+=r):(i.position.top+=n,i.position.left+=r),e.layers.push(i),i},_getRelatedLayers:function(e,t){var i=e.getLayerIndex(t),n=[];return this._loopTemplates(function(t){t.placementId===e.placementId&&t!==e&&t.layers.length&&t.layers.length>i&&n.push(t.layers[i])}.bind(this)),n},duplicateLayerToPlacementTemplates:function(e){if(this._par.validateAddingLayer(e)){var t=this.getTemplateByLayer(e),i=this.duplicateLayer(t,e),n=[];n.push(t);for(var r=this._getRelatedLayers(t,e),a=0,o=r.length;a<o;a++){var s=r[a],l=this.getTemplateByLayer(s);this.duplicateLayer(l,s),n.push(l)}this.getChangeListener().notifyLayersAdded(n,i),this.setActiveLayer(i)}},addLayerToPlacementTemplates:function(e,t,i,n,r,a){if(!this._par.validateAddingLayer(t))return this;var o=this._userTemplates[e],s=[],l=this.getSelectedTemplate(o),c=t.getOriginalClone(!1),d=l;if(!d)return console.warn("No base/selected template to add layer!",o),this;for(var u in i&&!a?this._performLayerPlacingWithoutRecalc(c,d,r):a||this._calculateDefaultLayerPositions(d,c),d.layers.push(c),s.push(d),o){var h=o[u];if(h.templateId!==l.templateId){var p=t.getOriginalClone(!0);i&&!a?this._performLayerPlacingWithoutRecalc(p,h,r):a||(this._calculateDefaultLayerPositions(h,p),this._calculateScaledLayerPositions(h,p,c,d)),h.layers.push(p),s.push(h)}}return n||this.getChangeListener().notifyLayersAdded(s,t),this},_performLayerPlacingWithoutRecalc:function(e,t,i){if(e.position.areaWidth!==t.width||e.position.areaHeight!==t.height){e.position.areaWidth=t.width,e.position.areaHeight=t.height;var n=e.isCropPositionUpdateNeeded();if(n&&(e.cropPosition.areaWidth=t.width,e.cropPosition.areaHeight=t.height),!i)if(n){var r,a=null===(r=e.cropPosition)||void 0===r?void 0:r.getFromOriginalRatio();e.cropPosition.center(),this.onCropLayerPositionsChanged(e,a,fe.a)}else e.position.center();e.groupId&&this.recalcPositionForResizedTemplate(e,e.position.areaWidth,e.position.areaHeight)}},recalcPositionForResizedTemplate:function(e,t,i){var n=e.position.areaWidth,r=e.position.areaHeight,a=n/t,o=r/i,s=Math.min(a,o),l=t/2,c=i/2,d=n/2,u=r/2,h=(e.position.left+e.position.width/2-l)*s,p=(e.position.top+e.position.height/2-c)*s;e.isTextLayer()?(e.size*=s,ue.a.calculateTextboxPositions(e)):(e.position.width*=s,e.position.height*=s),e.position.left=d+h-e.position.width/2,e.position.top=u+p-e.position.height/2,e.originalPosition=e.position.getClone()},getSelectedTemplate:function(e){var t=this._par.getSelectedMockupVariant();return(e=e||t&&this.getTemplates()[t.placementId])&&(Object.values(e).filter((function(e){return e.templateId===t.templateId}))[0]||Object.values(e)[0])},recalculateTemplateLayersBySource:function(e,t){var i=this;if(e!==t){var n=this.getChangeListener();e.layers.forEach((function(r){i.recalcPositionForResizedTemplate(r,t.width,t.height),n.notifyTemplatePositionsChanged([e],r),n.notifyTemplateResized([e],r)}))}},_calculateScaledLayerPositions:function(e,t,i,n){if(t.isTextLayer()){var r=e.width/n.width;t.copyValues(i),t.size=i.size*r;var a=t.position.width,o=t.position.height;t.position.width=i.position.width*r,t.position.height=i.position.height*r,t.position.left+=a/2-t.position.width/2,t.position.top+=o/2-t.position.height/2}},_calculateDefaultLayerPositions:function(e,t,i){var n=t.originalPosition,r=t.position.width,a=t.position.height;switch(n.originalRatio=1,n.areaWidth=e.width,n.areaHeight=e.height,n.left=0,n.top=0,n.width=0,n.height=0,t.position=n.getClone(),!0){case t instanceof F.a:ue.a.DEPENDENCIES.TEXT2SVG.TextCalculator(t);break;case t instanceof R.a:ue.a.calculateTextboxPositions(t);break;case t instanceof M.a||t instanceof x.a||t instanceof Te.a:t=this._getInitialLayerSize(e,t,i);break;default:console.error(dlang("generator","Unknown layer type for default position calculation!"))}if(n.width=t.position.width,n.height=t.position.height,n.left=n.areaWidth/2-t.position.width/2,e.centerDefaultYPosition&&(n.top=n.areaHeight/2-t.position.height/2),t.isCropPositionUpdateNeeded()){var o=t.cropPosition.width,s=t.cropPosition.height;t.cropPosition.width*=t.position.width/r,t.cropPosition.height*=t.position.height/a,t.cropPosition.left+=o/2-t.cropPosition.width/2,e.centerDefaultYPosition&&(t.cropPosition.top+=s/2-t.cropPosition.height/2)}else t.position=n.getClone()},silentlySetDesignerState:function(e){e.hasLayersByPlacement()?this._overrideTemplatePositionsFromDesignerState(e):e.hasTemplates()&&this._setTemplatePositionsFromDesignerState(e)},_overrideTemplatePositionsFromDesignerState:function(e){var t=e.getLayersByPlacement(),i=function(e,i){var n=t[e];if(!n)return null;for(var r in n){var a=n[r];if(a.originalPosition&&a.originalPosition.isAreaSame(i.originalPosition)&&(i.fileItem&&a.fileItem.fileId==i.fileItem.fileId))return a}return null};this._loopTemplates((function(e){for(var t in e.layers){var n=e.layers[t],r=i(e.placementId,n);r&&(n.position=r.position.getClone(),n.originalPosition=r.originalPosition.getClone())}}))},_setTemplatePositionsFromDesignerState:function(e){this._loopTemplates(function(t){var i=e.getTemplateByKey(t.getKey());if(i)t.layers=i.layers.slice(0);else{var n=e.getTemplatesBestMatchingLayers(t);t.layers=n.map((function(e){return this._scaleLayerForTemplate(t,e)}),this)}}.bind(this))},_getInitialLayerSize:function(e,t,i){var n=t.getInitialScale(e),r=t.getDefaultSize(this.getRequiredDpi()),a=this._getScale(e.width/n,e.height/n,r.width,r.height,null!=i?i:e.fillMode);return t.position.width=r.width*a.scale,t.position.height=r.height*a.scale,t},_scaleLayerForTemplate:function(e,t){var i=(t=t.getOriginalClone(!0)).position.getFromOriginalRatio(),n=this._getScale(e.width,e.height,i.areaWidth,i.areaHeight,e.fillMode);return i.areaWidth=e.width,i.areaHeight=e.height,i.left=i.left*n.scale+n.x,i.top=i.top*n.scale+n.y,i.width=i.width*n.scale,i.height=i.height*n.scale,t instanceof F.a&&(t.size*=n.scale),t.position=i,t.originalPosition=i.getClone(),t},_getScale:function(e,t,i,n,r){var a=e/i,o=t/n,s=this._par.getOrientation?this._par.getOrientation():null,l="cover"===r?s?o:Math.max(a,o):Math.min(1,a,o);return{scale:l,x:(e-i*l)/2,y:(t-n*l)/2}},getLayerCountByType:function(e,t,i){return this.getLayersByType(e,t,!i,i).length},getLayersByType:function(e,t,i,n){var r=this.getTemplatesByPlacement(t),a=[],o=this.getActiveTemplate(t);if(n)a=this._getLayersByTypeFromTemplate(e,n);else for(var s=0;s<r.length;s++){var l=r[s];(!i||o&&l.templateId===o.templateId)&&(a=a.concat(this._getLayersByTypeFromTemplate(e,l)))}return a},_getLayersByTypeFromTemplate:function(e,t){if(!t)return[];for(var i=[],n=0;n<t.layers.length;n++){var r=t.layers[n];r instanceof e&&i.push(r)}return i},getFirstLayer:function(e,t){var i=null,n=e&&t?this.getUserTemplate(e,t):null;return n?i=n.layers[n.layers.length-1]:this._loopTemplates((function(e){!i&&e.hasLayers()&&(i=e.layers[e.layers.length-1])})),i},getTechnique:function(){var e=null;return this._loopTemplates((function(t){t.technique&&!e&&(e=t.technique)})),e},getTemplates:function(){return this._userTemplates},getLayerByCustomizeKey:function(e){var t=!1;return this._loopTemplates((function(i){i.getLayerByCustomizeKey(e)&&(t=i.getLayerByCustomizeKey(e))})),t},getLayerById:function(e){var t=null;return this._loopTemplates((function(i){for(var n=0,r=i.layers.length;n<r;n++){var a=i.layers[n];if(a.uniqueId===e){t=a;break}}})),t},getGroupLayersById:function(e){var t=[];return this._loopTemplates((function(i){for(var n=0,r=i.layers.length;n<r;n++){var a=i.layers[n];a.groupId===e&&t.push(a)}})),t},updateFileLayerByCustomizeKey:function(e,t,i){var n=this.getLayerByCustomizeKey(e),r=this.getTemplateByLayer(n),a=r.getLayerIndex(n);t||(t=n.fileItem||n.temporaryFileItem);var o=n.getOriginalClone();t instanceof ar.a?(o.temporaryFileItem=t,o.shouldUseTempFile=!0):t instanceof or.a&&(o.fileItem=t,o.temporaryFileItem=null,o.shouldUseTempFile=!1);var s=t.width/t.height;if(n.generatorOptions.originalPosition.width/n.generatorOptions.originalPosition.height<s){var l=t.height*n.generatorOptions.originalPosition.width/t.width,c=(n.generatorOptions.originalPosition.height-l)/2+n.generatorOptions.originalPosition.top;o.position.width=n.generatorOptions.originalPosition.width,o.position.height=l,o.position.left=n.generatorOptions.originalPosition.left,o.position.top=c}else{var d=t.width*n.generatorOptions.originalPosition.height/t.height,u=(n.generatorOptions.originalPosition.width-d)/2+n.generatorOptions.originalPosition.left;o.position.width=d,o.position.height=n.generatorOptions.originalPosition.height,o.position.left=u,o.position.top=n.generatorOptions.originalPosition.top}this.removeLayer(r,n),this.addLayerToPlacementTemplates(r.placementId,o,!0),this._setLayerIndex(r,o,a,1);var h=this.getQuality(),p=h.getQualityPercent(o),g=h.getQualityKey(p,o,r.technique===ce.a.TECHNIQUE_EMBROIDERY,!1);i&&i(g,e,o.getDPI())},removeCustomizerDataFromAllLayers:function(){this._loopTemplates(function(e){e.layers.forEach(function(e){if(!e.isCustomizable)return!1;var t=e.position;e.isCustomizable=!1,e.isTextLayer()&&this.updateTextLayer(e,this);var i=this.getFreshLayer(e);this._resizeTextLayerFromCustomizedPosition(t,e,i)}.bind(this))}.bind(this)),this.updateDesignerLeaveWarningLayers()},updateDesignerLeaveWarningLayers:function(){var e=[];this._loopTemplates(function(t){t.layers.forEach(function(t){var i=Object.assign({},t.toArray());e.push(i)}.bind(this))}.bind(this)),r.a.updateInitialStateLayers=e},_resizeTextLayerFromCustomizedPosition:function(e,t,i){if(i.position.width<=e.width)return!1;var n=t.position;n.left=e.left,n.width=t.position.width,n.height=t.position.width/(i.position.width/i.position.height),n.top=e.top+(i.position.height-n.height)/2,this.updateLayerPosition(t,n)},resizeImageLayerToDPI:function(e,t){var i=e.getFileItem().width/t/e.position.width;this.scaleLayer(e,i)},resizeTextLayerToHeight:function(e,t){var i=t/e.position.height;this.scaleLayer(e,i)},scaleLayer:function(e,t){var i=e.isCropPositionUpdateNeeded(),n=i?e.cropPosition:e.position,r=n.getFromOriginalRatio();r.width*=t,r.height*=t,r.left+=(n.width-r.width)/2,r.top+=(n.height-r.height)/2,i?this.updateCropLayerPosition(e,r,this,fe.c):this.updateLayerPosition(e,r,this,!0)},refreshClipartColors:function(e){this._loopTemplates((function(t){return t.layers.forEach((function(t){return e(t)}))}))},getDesignMeta:function(){return this._par.getDesignMeta&&this._par.getDesignMeta()},setFeatureDesignCopied:function(e,t,i){var n=this.getDesignMeta(),r=this.getUserTemplate(e,i);if(n&&r){var a={};a[M.a.TYPE]=[],a[x.a.TYPE]=[],a[F.a.TYPE]=[],a[Te.a.TYPE]=[],r.layers.forEach((function(e){e.isImageLayer()?a[M.a.TYPE].push(e.fileItem.fileId):e.isClipartLayer()?a[x.a.TYPE].push(e.clipartItem.id):e.isTextLayer()?a[F.a.TYPE].push(e.text):e.isLicensedAssetLayer()&&a[Te.a.TYPE].push(e.licensedAssetItem.licensedAssetId)})),n[rr.a.META_COPY_DESIGN]={fromPlacementId:e,toPlacementId:t,templateId:i,layers:a}}},removeFeatureDesignCopied:function(e){var t=this.getDesignMeta();if(e&&t&&t[rr.a.META_COPY_DESIGN]&&(t[rr.a.META_COPY_DESIGN].fromPlacementId==e||t[rr.a.META_COPY_DESIGN].toPlacementId==e)){var i=t[rr.a.META_COPY_DESIGN].layers,n=this.getUserTemplate(e,t[rr.a.META_COPY_DESIGN].templateId).layers,r=!!i.hasOwnProperty(M.a.TYPE)&&i[M.a.TYPE].map(Number),a=!!i.hasOwnProperty(x.a.TYPE)&&i[x.a.TYPE].map(Number),o=i[F.a.TYPE],s=!!i.hasOwnProperty(Te.a.TYPE)&&i[Te.a.TYPE].map(Number);n.filter((function(e){return r&&e.isImageLayer()?r.indexOf(e.fileItem.fileId)>-1:a&&e.isClipartLayer()?a.indexOf(e.clipartItem.id)>-1:o&&e.isTextLayer()?o.indexOf(e.text)>-1:s&&e.isLicensedAssetLayer()?s.indexOf(e.licensedAssetItem.licensedAssetId)>-1:void 0})).length||(t[rr.a.META_COPY_DESIGN]=!1)}}});sr.MISSING_PRINTFILES_WARNING=["default","belt_front","belt_back","belt","back","front","sleeve_right","sleeve_left","top","bottom","pocket","top_front","top_back"],window&&((globalThis||{}).PFProductPushTemplates=sr);var lr=Class({storeId:0,callback:null,targetNode:null,activePlacement:null,generatorVariant:null,isModalDesigner:!1,onClick:null,validateAddingLayer:null,getMaxFileLayerCount:null,nodeDomElementDropArea:null,onDropDomElement:null,is3dViewActive:null});window&&((globalThis||{}).PFProductPushDropZoneAreaPar=lr);var cr=i("xB0w"),dr=i("8POG"),ur=i("l99J"),hr=Class({filesToAdd:[],_enabled:!0,_activePlacement:null,_generatorVariant:null,_dropZone:null,_domElementDropZoneEnabled:!1,_lastInsideLabelType:null,__construct:function(e){var t=this;this._par=e,this._activePlacement=e.activePlacement,this._generatorVariant=e.generatorVariant,this.node=tag("div","product-push__droparea "+this._getProductDependentClassName()+this._get3dViewClassName(),[this._dropYourDesignImgNode=tag("img",{className:"img-responsive product-push__droparea__image",prop:{onclick:function(){t._par.isModalDesigner?ga("send",{hitType:"event",eventCategory:PF.Customer.isLogged()?"Generator interactions in Order flow":"Generator interactions in Product catalog",eventAction:PF.Customer.isLogged()?"Drop your design here clicked - signed-in users":"Drop your design here clicked - anonymous users"}):t._par.isModalDesigner||ga("send",{hitType:"event",eventCategory:"Generator interactions in Mockup generator",eventAction:PF.Customer.isLogged()?"Drop your design here clicked - signed-in users":"Drop your design here clicked - anonymous users"}),t._par.onClick()},src:langImage("generator/drop-your-design-here.svg")}})]),this._initDropZone()},setActivePlacement:function(e,t){this._activePlacement=e,t&&this._render()},setGeneratorVariant:function(e,t){this._generatorVariant=e,t&&this._render()},_render:function(){this.node.className="product-push__droparea "+this._getProductDependentClassName()+this._get3dViewClassName(),this.repositionDropAreafor3dCombo()},repositionDropAreafor3dCombo:function(){var e="0px";if(this._par.is3dViewActive()&&C.a.isWindowSmallerThan(C.a.SIZES.LG)){var t=Vn.getMapObject(this._par.generatorVariant.templateId);e="calc(10.5% + "+Vn.getDimensions(t).height+"px)"}$(".product-push__droparea").css("margin-top",e)},_get3dViewClassName:function(){return this._par.is3dViewActive()?" col-lg-9 order-2 order-lg-1":""},_getProductDependentClassName:function(){var e=Object(_e.a)();if(!e)return"";var t=[ce.a.ID_AA_2007,ce.a.ID_GILDAN_18500,ce.a.ID_GILDAN_18000,ce.a.ID_NEX_LEVEL_9700,ce.a.ID_BELLA_CANVAS_JACKET_3710,ce.a.ID_BELLA_CANVAS_3501,ce.a.ID_GILDAN_2400,ce.a.ID_CHAMPION_CC8C,ce.a.ID_COTTON_HERITAGE_M2580];switch(!0){case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_EMBROIDERY_RIGHT:return"product-push__droparea--hats-right-side";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_EMBROIDERY_LEFT:return"product-push__droparea--hats-left-side";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_EMBROIDERY_BACK:return"product-push__droparea--hats-back-side";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_LABEL_OUTSIDE&&!(e.productId===ce.a.ID_BEAN_BAG||e.productId===ce.a.ID_BEAN_BAG_CASE):return"product-push__droparea--label-outside";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_LABEL_INSIDE&&this._lastInsideLabelType===qn.a.LABEL_NATIVE:return"product-push__droparea--label-inside-native";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_LABEL_INSIDE&&this._lastInsideLabelType===qn.a.LABEL_CUSTOM:return"product-push__droparea--label-inside-custom";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_LABEL_INSIDE&&e.productId===ce.a.ID_FLIP_FLOPS:return"product-push__droparea--label-inside-flip-flops";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_LABEL_INSIDE:return"product-push__droparea--label-inside";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_SLEEVE_LEFT&&this._activePlacement.technique!==ce.a.TECHNIQUE_CUT_SEW&&t.indexOf(e.productId)<0:return"product-push__droparea--sleeve-left";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_SLEEVE_RIGHT&&this._activePlacement.technique!==ce.a.TECHNIQUE_CUT_SEW&&t.indexOf(e.productId)<0:return"product-push__droparea--sleeve-right";case!this._isPrimaryMockup()&&e.productId===ce.a.ID_CUT_SEW_MEN_TANK_TOP:return"product-push__droparea--tank-template";case this._isPrimaryMockup()&&(e.productId===ce.a.ID_YOGA_SHORTS||e.productId===ce.a.ID_MINI_SKIRT_SUBLIMATION||e.productId===ce.a.ID_305_SHORT_SHORTS):return"product-push__droparea--padding-top-3";case this._isPrimaryMockup()&&(e.productId===ce.a.ID_LEGGINGS_ALL_OVER_SHORTS||e.productId===ce.a.ID_304_LONG_SHORTS||e.productId===ce.a.ID_SKATER_SKIRT||e.productId===ce.a.ID_PENCIL_SKIRT_SUBLIMATION):return"product-push__droparea--padding-top-7";case e.productId===ce.a.ID_KIDS_LEGGINGS:case e.isEmbroideryApron():case e.productId===ce.a.ID_RABBIT_SKINS_1004:case e.isTote()||e.isDtgTote():case!this._isPrimaryMockup()&&e.productId===ce.a.ID_ALL_OVER_SPORTS_BRA_W_PADDING:return"product-push__droparea--padding-top-45";case e.productId===ce.a.ID_SP15_CAP:case e.productId===ce.a.ID_BEECHFIELD_B426:case e.productId===ce.a.ID_82_BEANIE:case e.productId===ce.a.ID_YUPOONG_1501KC:return"product-push__droparea--beanies";case e.productId===ce.a.ID_BACKPACK:return"product-push__droparea--backpack";case e.productId===ce.a.ID_975MPR&&this._activePlacement&&this._activePlacement.id===oe.a.TYPE_EMBROIDERY_APPAREL_FRONT:return"product-push__droparea--975mpr";case e.productId===ce.a.ID_GLOSSY_MUG:case e.productId===ce.a.ID_GLOSSY_MUG_USA:return"product-push__droparea--mugs";case e.productId===ce.a.ID_MUG_MAGIC_MATTE_BLACK:case e.productId===ce.a.ID_MUG_MAGIC_GLOSSY_BLACK:return"product-push__droparea--mugs-black";case e.productId===ce.a.ID_FANNYPACK:switch(!0){case this._isPrimaryMockup():return"product-push__droparea--fannypack";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_FRONT:return"product-push__droparea--fannypack-front";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_TOP:return"product-push__droparea--fannypack-top";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_BACK:return"product-push__droparea--fannypack-back";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_LABEL_INSIDE:return"product-push__droparea--fannypack-label";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_POCKET:return"product-push__droparea--fannypack-pocket";default:return""}case e.isApparelEmbroidery():case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_EMBROIDERY_CHEST_LEFT:return"product-push__droparea--embroidery-chest-left";case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_EMBROIDERY_CHEST_CENTER:case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_EMBROIDERY_LARGE_CENTER:case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_EMBROIDERY_CORNER_LEFT:case this._activePlacement&&this._activePlacement.id===oe.a.TYPE_EMBROIDERY_CORNER_RIGHT:return"product-push__droparea--embroidery-chest-center";case e.isBlackMug():return"product-push__droparea--black-mugs";default:return""}},_isPrimaryMockup:function(){return this._generatorVariant&&"primary"===this._generatorVariant.role},setInsideLabelType:function(e){this._lastInsideLabelType=e,this._render()},_clearFiles:function(){this.filesToAdd=[]},_addFilesToPlacements:function(e){for(var t in e){var i=e[t];this._par.callback(i)}this._clearFiles()},_initDropZone:function(){var e=new cr.a;e.targetNode=this._par.targetNode,e.onDone=this._onDone.bind(this),e.getUploadExtra=this._getUploadExtra.bind(this),e.onDragEnter=this._onDragEnter.bind(this),e.onDragLeave=this._onDragLeave.bind(this),e.isPushGenerator=!0,e.getMaxFileLayerCount=this._par.getMaxFileLayerCount,e.validateAddingLayer=this._par.validateAddingLayer,e.elementDropNode=this._par.nodeDomElementDropArea,e.onDropElement=this._onDropDomElement.bind(this),e.enableTransparencyValidation=!0,this._dropZone=new dr.a(e)},_addFile:function(e){this.filesToAdd.push(e)},_onDone:function(e,t,i){this._addFile(e),0===t&&(this._addFilesToPlacements(this.filesToAdd),this._clearFiles(),ur.a.unbind(e,i))},_getUploadExtra:function(){return{storeId:this._par.storeId}},_onDragEnter:function(){if(this._enabled){var e=this._par.isModalDesigner?$(".modal-content"):$("body");$(".product-push__droparea").show(),I.a.addClassName(this.node,"product-push__droparea--active"),$(".modal-backdrop.in").css({opacity:".7"}),e.prepend('<div class="mockup-generator-loading-overlay"></div>')}},_onDragLeave:function(){this._enabled&&($(".mockup-generator-loading-overlay").remove(),I.a.removeClassName(this.node,"product-push__droparea--active"),$(".modal-backdrop.in").css({opacity:".5"}))},isEnabled:function(){return this._enabled},enable:function(){this._enabled=!0,this._dropZone.enable(),I.a.removeClassName(this._dropYourDesignImgNode,"hidden")},disable:function(){this._enabled=!1,this._dropZone.disable(),I.a.addClassName(this._dropYourDesignImgNode,"hidden")},_onDropDomElement:function(e){this._domElementDropZoneEnabled&&this._par.onDropDomElement&&this._par.onDropDomElement(e,this._activePlacement)},enableDomElementDropZone:function(){this._dropZone.disableBeforeElementDrag(),this._domElementDropZoneEnabled=!0},disableDomElementDropZone:function(){this._domElementDropZoneEnabled=!1,this._dropZone.enableAfterElementDrag()}},I.a.Base);window&&((globalThis||{}).PFProductPushDropZoneArea=hr);var pr=Class({mockupMaxWidth:400,mockupMaxHeight:400,generatorVariant:null,templateKey:"",templates:null,activeLayer:null,onReady:null,allowSpecificProductMirroring:!0,isOrderFlow:!1,isProductlessMode:!1,disableLayerManipulations:!1,hideZoomButton:!1,disableOutOfBoundsErrorMessages:!1,isCustomizingMode:!1,placementOptions:null,node3dView:null,variantArea:null,shouldShowUnrelatedTemplatesPopover:null});window&&((globalThis||{}).PFProductPushProductMockupPar=pr);var gr=Class({maxWidth:null,maxHeight:null,placementOptions:null,isResizable:!1,templates:null,onReady:null,showImageQualityWarning:!1,template:null,onLayerOrderChanged:null,onLayerRemoved:null,onZoomIn:null,onZoomOut:null,isOrderFlow:!1,isProductlessMode:!1,disableLayerManipulations:!1,disablePulseImageOverride:!1,disableScaling:!1,hideZoomButton:!1,disableOutOfBoundsErrorMessages:!1,isCustomizingMode:!1,generatorVariant:null,variantArea:null,shouldShowUnrelatedTemplatesPopover:null});window&&((globalThis||{}).PFComponentsGeneratorMockupPar=gr);var fr=i("Vx67"),_r=Class({_isReady:!1,_par:null,_nodeMockup:null,_nodeMirror:null,_nodeMirrorCheckbox:null,_mockup:null,__construct:function(e){this._par=e,this._par.node3dView?this.node=tag("div","text-center row",[this._nodeMockup=tag("div","mockup-view-container col-lg-9 order-2 order-lg-1"),this._par.node3dView,this._nodeCheckbox=tag("div","mockup-checkbox-view-container col-lg-9 order-3")]):this.node=tag("div","text-center",[this._nodeMockup=tag("div"),this._nodeCheckbox=tag("div")]),this._subscribeTemplateEvents(),this._render()},_subscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().addOnActiveLayerChanged(this._onActiveLayerSelectedExternally).addOnLayerConfigurationChanged(this.renderMirrorCheckbox).addOnCropStateChanged(this._onCropStateChanged).addOnTemplatePositionsChangedListener(this._onPositionsChangedExternally)},_unsubscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().unsubscribe(this._onActiveLayerSelectedExternally).unsubscribe(this.renderMirrorCheckbox).unsubscribe(this._onPositionsChangedExternally)},_unsubscribeTemplateEventsIfNeeded:function(){return!(!this._isReady||Object(L.a)(this.node))&&(this._unsubscribeTemplateEvents(),!0)},_onRequestLayerRemoval:function(e){var t=this._par.templates.getByKey(this._par.templateKey);this._par.templates.removeLayer(t,e)},_render:function(){this._renderMockupArea(),this.renderMirrorCheckbox()},_renderMockupArea:function(){I.a.clearNode(this._nodeMockup);var e=new gr;e.isResizable=!0,e.maxHeight=this._par.mockupMaxHeight,e.maxWidth=this._par.mockupMaxWidth,e.onReady=this._onReady,e.onLayerRemoved=this._onRequestLayerRemoval,e.showImageQualityWarning=!0,e.templates=this._par.templates,e.template=this._getCurrentTemplate(),e.isOrderFlow=this._shouldShowMockupControls(this._par.activeLayer),e.disableLayerManipulations=this._par.disableLayerManipulations,e.hideZoomButton=this._par.hideZoomButton,e.disableOutOfBoundsErrorMessages=this._par.disableOutOfBoundsErrorMessages,e.isCustomizingMode=this._par.isCustomizingMode,e.placementOptions=this._par.placementOptions,e.generatorVariant=this._par.generatorVariant,e.isProductlessMode=this._par.isProductlessMode,e.variantArea=this._par.variantArea,e.shouldShowUnrelatedTemplatesPopover=this._par.shouldShowUnrelatedTemplatesPopover,this._mockup=new Fn.a(e),this._mockup.append(this._nodeMockup),this._mockup.render()},_onReady:function(){if(!this._isReady){if(this._isReady=!0,this._par.templates){var e=this._par.templates.getActiveGroupLayers();e&&e.length||this.getMockup().showActiveLayer(this._par.templates.getActiveLayer())}this._par.onReady()}},applyCropIfNeeded:function(){var e,t=null===(e=this.getMockup())||void 0===e?void 0:e._canvas;null!=t&&t._canvas.isCropState()&&t.applyCrop()},_getCurrentTemplate:function(){return this._par.templates.getByKey(this._par.templateKey)},_hasMirroredLayer:function(){return this._par.templates.getByKey(this._par.templateKey).getMirroredLayers().length>0},_hasUnmirroredLayers:function(){return this._par.templates.getByKey(this._par.templateKey).hasUnmirroredLayers()},renderMirrorCheckbox:function(e,t){if(I.a.clearNode(this._nodeCheckbox),this._canMirrorImage()){var i=this._hasMirroredLayer(),n=this._hasUnmirroredLayers();tag("label",!0===t?"pf-d-none":"pf-d-block",[this._nodeMirrorCheckbox=tag("input",{type:"checkbox",className:"pf-mr-4",prop:{onchange:this._onMirrorLayerChange,checked:i,indeterminate:i&&n}}),tag("span","",dclang("generator","action (to duplicate something)","Duplicate image on both sides"))]).append(this._nodeCheckbox)}},_onCropStateChanged:function(e,t){e&&(e.isCropState?this._mockup.hideNodeControlsHolder():this._mockup.showNodeControlsHolder(),this.getMockup().displayCustomizableTextLayerError())},_canMirrorImage:function(){var e,t=this._par.templates&&this._par.templates.getActiveLayer();return(!t||!t.patternType&&!t.isCropState)&&(!!this._par.allowSpecificProductMirroring&&([ce.a.TYPE_MUG].indexOf(null===(e=Object(_e.a)())||void 0===e?void 0:e.type)>-1&&this._par.generatorVariant.role===fr.a.ROLE_TEMPLATE))},_onMirrorLayerChange:function(){ga("send",{hitType:"event",eventCategory:"ProductPush",eventAction:"Toggle mirror image",eventLabel:this.isMirroredChecked()?"Checked":"Un-checked"}),this.isMirroredChecked()?this._par.templates.addMirroredLayersForTemplates(!0):this._par.templates.removeMirroredLayersFromTemplates()},isMirroredChecked:function(){var e;return this._canMirrorImage()&&(null===(e=this._nodeMirrorCheckbox)||void 0===e?void 0:e.checked)},getMockup:function(){return this._mockup},updateControlsVisibility:function(e){this._mockup.setControlsVisibility(this._shouldShowMockupControls(e))},_onPositionsChangedExternally:function(e,t,i){if(!this._unsubscribeTemplateEventsIfNeeded()&&this._par.templates&&this._mockup&&!this._mockup.isEventOrigin(i)&&"mirror"!==i)for(var n in e)if(e[n].getKey()===this._par.templateKey){this._mockup.updateLayersPositions(e[n],t,i),i!==Se.a.GROUP_UPDATE&&(this._mockup.showActiveLayer(t),this.renderMirrorCheckbox(t));break}},_onActiveLayerSelectedExternally:function(e,t){var i;if(!this._unsubscribeTemplateEventsIfNeeded()&&this._par.templates&&e){var n=e.length?e[0]:e,r=this._par.templates.getTemplateByLayer(n);(null==r?void 0:r.getKey())===this._par.templateKey&&(t instanceof Se.a&&(e.length?this._mockup.showActiveGroup(n.groupId):this._mockup.showActiveLayer(n)),null===(i=this._mockup)||void 0===i||i.setControlsVisibility(this._shouldShowMockupControls(n)),this.renderMirrorCheckbox(n))}},_shouldShowMockupControls:function(e){var t;return!!e&&(-1!==[ce.a.TYPE_CUT_SEW,ce.a.TYPE_POSTER,ce.a.TYPE_FRAMED_POSTER,ce.a.TYPE_CANVAS,ce.a.TYPE_PHONE_CASE,ce.a.TYPE_JEWELRY,ce.a.TYPE_SUBLIMATION].indexOf(null===(t=Object(_e.a)())||void 0===t?void 0:t.type)&&(e&&e instanceof M.a||e instanceof x.a||e instanceof Te.a))}},I.a.Base);window&&((globalThis||{}).PFProductPushProductMockup=_r);var mr=Class({_subscribers:{},onSizesChanged:function(e){return this._subscribe(mr.CHANNEL_SIZES,e)},onAfterSizesChanged:function(e){return this._subscribe(mr.CHANNEL_AFTER_SIZES,e)},onBeforeColorsChanged:function(e){return this._subscribe(mr.CHANNEL_BEFORE_COLORS,e)},onAfterColorsChanged:function(e){return this._subscribe(mr.CHANNEL_AFTER_COLORS,e)},onRegionChanged:function(e){return this._subscribe(mr.CHANNEL_REGION,e)},onProductOptionsChanged:function(e){return this._subscribe(mr.CHANNEL_OPTIONS,e)},onPlacementLayersChanged:function(e){return this._subscribe(mr.CHANNEL_LAYERS,e)},onPlacementPositionsChanged:function(e){return this._subscribe(mr.CHANNEL_POSITIONS,e)},onDesignerReady:function(e){return this._subscribe(mr.CHANNEL_READY,e)},onDesignerDisabled:function(e){return this._subscribe(mr.CHANNEL_DISABLED,e)},onTechniqueChanged:function(e){return this._subscribe(mr.CHANNEL_TECHNIQUE_CHANGED,e)},onMockupReady:function(e){return this._subscribe(mr.CHANNEL_MOCKUP_READY,e)},onEmbroideryNotesChanged:function(e){return this._subscribe(mr.CHANNEL_EMBROIDERY_NOTES_CHANGED,e)},onDesignFillColorChanged:function(e){return this._subscribe(mr.CHANNEL_DESIGN_FILL_COLOR_CHANGED,e)},emitBeforeColorsChanged:function(e){return this._emit(mr.CHANNEL_BEFORE_COLORS,e)},emitAfterColorsChanged:function(e){return this._emit(mr.CHANNEL_AFTER_COLORS,e)},emitSizesChanged:function(e){return this._emit(mr.CHANNEL_SIZES,e)},emitAfterSizesChanged:function(e){return this._emit(mr.CHANNEL_AFTER_SIZES,e)},emitRegionChanged:function(e){return this._emit(mr.CHANNEL_REGION,e)},emitProductOptionsChanged:function(e){return this._emit(mr.CHANNEL_OPTIONS,e)},emitPlacementLayersChanged:function(){return this._emit(mr.CHANNEL_LAYERS,null)},emitPlacementPositionsChanged:function(){return this._emit(mr.CHANNEL_POSITIONS)},emitDesignerReady:function(){return this._emit(mr.CHANNEL_READY)},emitDesignerDisabled:function(){return this._emit(mr.CHANNEL_DISABLED)},emitMainMockupReady:function(){return this._emit(mr.CHANNEL_MOCKUP_READY)},emitDesignFillColorChanged:function(e){return this._emit(mr.CHANNEL_DESIGN_FILL_COLOR_CHANGED,e)},emitMainTechniqueChanged:function(e){return this._emit(mr.CHANNEL_TECHNIQUE_CHANGED,e)},emitEmbroideryNotesValueChanged:function(){return this._emit(mr.CHANNEL_EMBROIDERY_NOTES_CHANGED)},_subscribe:function(e,t){return this._hasChannelSubscribers(e)||(this._subscribers[e]=[]),this._subscribers[e].push(t),this},_emit:function(e,t){return 0===this._getSubscribersByChannel(e).map((function(e){return!e||e(t)})).filter((function(e){return!1===e})).length},_hasChannelSubscribers:function(e){return this._getSubscribersByChannel(e).length>0},_getSubscribersByChannel:function(e){return this._subscribers[e]||[]}});mr.CHANNEL_BEFORE_COLORS="beforeColors",mr.CHANNEL_AFTER_COLORS="afterColors",mr.CHANNEL_SIZES="sizes",mr.CHANNEL_AFTER_SIZES="afterSizes",mr.CHANNEL_REGION="region",mr.CHANNEL_OPTIONS="options",mr.CHANNEL_LAYERS="layers",mr.CHANNEL_POSITIONS="layerPositions",mr.CHANNEL_READY="designerReady",mr.CHANNEL_DISABLED="designerDisabled",mr.CHANNEL_MOCKUP_READY="mockupReady",mr.CHANNEL_TECHNIQUE_CHANGED="techniqueChanged",mr.CHANNEL_DESIGN_FILL_COLOR_CHANGED="designFillColorChanged",mr.CHANNEL_EMBROIDERY_NOTES_CHANGED="embroideryNotesChanged",window&&((globalThis||{}).PFProductPushDesignerObserver=mr);var vr=Class({_conflictingTypes:{},_templates:null,_placementSelector:null,__construct:function(e,t){this._placementSelector=e,this._templates=t},setConflictingTypes:function(e){this._conflictingTypes=e},getConflictingPlacementTitles:function(e){var t=this._conflictingTypes[e];if(!t||!t.conflictsWith.length)return[];var i=[],n=this._templates.getPlacementIdsHavingFiles();for(var r in t.conflictsWith){var a=t.conflictsWith[r];n.indexOf(a.id)>-1&&i.push(a.title)}return i},getCurrentPlacementConflicts:function(){return this.getConflictingPlacementTitles(this._placementSelector.getSelectedPlacementId())}});window&&((globalThis||{}).PFProductPushConflictCalculator=vr);var yr=i("CvqS"),br=i("gYZI"),Pr=i("Cj9M"),Cr=i("M3Ia"),Tr=i("UzRV"),Ir=i("iKM3"),wr=i("Ii6r"),Sr=i("bRD6"),Er=i("rKkW"),kr=i("Xapb"),Or=i("qs6/"),Ar=i("tw/D"),Lr=i("4Vs6"),Nr=i("Kblr"),Dr=i("3oUi"),Rr=i("83UL"),xr=i("Yh49"),Fr=i("PPGU"),Mr=i("cCrT"),Br=i("LvDl"),Vr=i.n(Br);function jr(e){return(jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Wr(e);if(t){var r=Wr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Yr(this,i)}}function Yr(e,t){return!t||"object"!==jr(t)&&"function"!=typeof t?qr(e):t}function qr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wr(e){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kr(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function Zr(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function Qr(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var Xr=new WeakMap,$r=new WeakMap,Jr=new WeakMap,ea=new WeakMap,ta=new WeakMap,ia=new WeakMap,na=new WeakSet,ra=new WeakSet,aa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gr(e,t)}(a,e);var t,i,n,r=Hr(a);function a(e){var t;return Ur(this,a),t=r.call(this),ra.add(qr(t)),na.add(qr(t)),Xr.set(qr(t),{writable:!0,value:null}),$r.set(qr(t),{writable:!0,value:null}),Jr.set(qr(t),{writable:!0,value:null}),ea.set(qr(t),{writable:!0,value:null}),ta.set(qr(t),{writable:!0,value:null}),ia.set(qr(t),{writable:!0,value:!0}),t.node=tag("div"),Qr(qr(t),Xr,e),Qr(qr(t),$r,Rr.a.getFilteredAvailableRegions(Zr(qr(t),Xr).regionData)),Qr(qr(t),Jr,Zr(qr(t),Xr).activeRegion),Qr(qr(t),ea,Zr(qr(t),Xr).onChange),Qr(qr(t),ia,Zr(qr(t),Xr).shouldShowAvailabilityInfo),Kr(qr(t),na,oa).call(qr(t)),t}return t=a,(i=[{key:"getSelectedRegions",value:function(){return Zr(this,ta).getActiveValue()}},{key:"getMatchingVariants",value:function(){if(!this.getSelectedRegions())return[];var e=new u.a;return this.getRegionVariants(this.getSelectedRegions()).map((function(t){return e.getCachedVariantById(t,!0)})).filter((function(e){return!!e}))}},{key:"isRegionSelected",value:function(e){return Zr(this,ta).isRegionSelected(e)}},{key:"getLastSelectedRegion",value:function(){return Zr(this,ta).getLastSelectedRegion()}},{key:"getRegionVariants",value:function(e){var t,i=[];for(var n in e){var r=e[n];Zr(this,$r).variantsByRegion[r]&&i.push(Zr(this,$r).variantsByRegion[r])}return i.length?Zr(this,$r).allowedSellingRegions?Object(Br.uniq)((t=[]).concat.apply(t,i)):i.shift().filter((function(e){return i.every((function(t){return-1!==t.indexOf(e)}))})):[]}},{key:"findVariant",value:function(e,t){var i=null,n=this.getMatchingVariants();for(var r in n){var a=n[r],o=!t||a.size===t,s=!e||a.color===e;if(o&&s&&!a.isTemporaryOutOfStock){i=a;break}}return i}}])&&zr(t.prototype,i),n&&zr(t,n),a}(He.a),oa=function(){var e=null;Zr(this,$r).allowedSellingRegions&&(e=Zr(this,$r).allowedSellingRegions.slice()),Qr(this,ta,new xr.a(new xr.b({regionData:Zr(this,$r),activeValue:e,onChanged:Kr(this,ra,sa).bind(this),shouldShowAvailabilityInfo:Zr(this,ia),shouldLimitPickableRegionCount:Zr(this,Xr).shouldLimitPickableRegionCount}))),Zr(this,ta).node.append(this.node),Zr(this,$r).allowedSellingRegions||Object(Fr.a)(new Mr.a,Zr(this,ta),Zr(this,Xr).productId)},sa=function(){var e=this,t=this.getSelectedRegions().filter((function(t){return!Zr(e,ta).isRegionSelected(t)}));Zr(this,ea).call(this,this.getSelectedRegions(),t)},la=function e(t){var i=t.regionData,n=void 0===i?null:i,r=t.activeRegion,a=void 0===r?null:r,o=t.onChange,s=void 0===o?null:o,l=t.productId,c=void 0===l?null:l,d=t.shouldShowAvailabilityInfo,u=void 0===d||d,h=t.shouldLimitPickableRegionCount,p=void 0===h||h;Ur(this,e),this.regionData=n,this.activeRegion=a,this.onChange=s,this.productId=c,this.shouldShowAvailabilityInfo=u,this.shouldLimitPickableRegionCount=p},ca=i("XPj6");function da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ua=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};da(this,e),this.id=t.id,this.externalId=t.externalId,this.type=t.type,this.previewUrl=t.previewUrl,this.width=t.width,this.height=t.height,this.price=t.price,this.currency=t.currency,this.pricingStrategy=t.pricingStrategy,this.status=t.status,this.pricingModifier=t.pricingModifier};function ha(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var pa=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ha(this,"onAddFileCallback",null),ha(this,"onBackCallback",null),ha(this,"selectedPlacementTechnique",null),ha(this,"fileDropZone",null),ha(this,"storeId",null),ha(this,"currency","")};window&&((globalThis||{}).PFProductPushLicensedAssetPickerPar=pa);var fa=i("9Nv7");function _a(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function ma(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){_a(a,n,r,o,s,"next",e)}function s(e){_a(a,n,r,o,s,"throw",e)}o(void 0)}))}}function va(e,t,i,n,r){return ya.apply(this,arguments)}function ya(){return(ya=ma(regeneratorRuntime.mark((function e(t,i,n,r,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){Vr.a.includes(["getty"],t)?Object(fa.a)("licensed-asset/search-asset",{provider:t,key:i,currency:n,storeId:r,page:a}).then((function(t){var i=(t||[]).map((function(e){return new ua(e)}));e(i)})).catch((function(e){return o(e)})):o(new Error("Invalid provider"))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ba(e,t){return Pa.apply(this,arguments)}function Pa(){return(Pa=ma(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t&&t instanceof ua||n(new Error("Invalid licensed asset provided")),Object(fa.a)("licensed-asset/save-asset",{assetItem:t,searchKey:i}).then((function(t){return e(t)})).catch((function(e){return n(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ca(e){try{return"".concat(ka,"-recent-").concat(PF.Customer.customerId?PF.Customer.customerId:"","-store-").concat(e||"")}catch(e){console.warn("Could not get recent licensed asset items from local storage!")}}function Ta(e,t){try{var i=JSON.parse(localStorage.getItem(Ca(t)))||[];i.some((function(t){return t.externalId===e.externalId}))||i.unshift(e),window.localStorage.setItem(Ca(t),JSON.stringify(i))}catch(e){console.warn("Could not save recent licensed asset items in local storage!")}}function Ia(e,t,i){return wa.apply(this,arguments)}function wa(){return(wa=ma(regeneratorRuntime.mark((function e(t,i,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){Vr.a.includes(["getty"],t)?Object(fa.a)("licensed-asset/get-licensed-asset-item",{itemId:i,currency:n}).then((function(t){var i=t?new ua(t):null;e(i)})).catch((function(e){return r(e)})):r(new Error("Invalid provider"))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sa(e,t,i){return Ea.apply(this,arguments)}function Ea(){return(Ea=ma(regeneratorRuntime.mark((function e(t,i,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(fa.a)("licensed-asset/get-licensed-asset-converted-price",{price:t,currencyTo:i,currencyFrom:n});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.warn("Could not fetch converted price.");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var ka="licensedAssetItems";function Oa(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Aa=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Oa(this,"item",null),Oa(this,"onClickCallback",null),Oa(this,"showEmpty",!0),Oa(this,"fileDropZone",null),Oa(this,"isRecent",!1)};window&&((globalThis||{}).PFProductPushLicensedAssetPickerItemPar=Aa);var La=i("FHCs"),Na=i("cvaF"),Da=Class({_item:null,_par:null,__construct:function(e){this._par=new Aa,I.a.O2O(this._par,e||{}),this._item=this._par.item,this.node=tag("div",{className:"masonry__item"},[tag("div",{className:"pf-pointer",onclick:this._par.onClickCallback.bind(this,this._item),prop:{ondragstart:this._assetDragStart.bind(this,this._item),ondragend:this._assetDragEnd.bind(this)}},[tag("div",{className:"pf-position-relative",style:{paddingTop:this._par.isRecent?"":this._item.height/this._item.width*100+"%"}},[tag("img",{className:"img-responsive "+(this._par.isRecent?"":"pf-position-absolute"),src:La.a,loading:"lazy",data:{src:this._item.previewUrl}}),tag("span","pf-position-absolute masonry__item-price pf-text-white pf-ui-legal pf-border pf-border-white pf-px-4",[tag("span","masonry__item-price__hidden",this.getLabelSign(this._item.price)),this.getLabelText(this._item.price,this._item.currency),tag("span","masonry__item-price__hidden",this.getLabelPrice(this._item.pricingModifier,this._item.price))])])])])},getLabelSign:function(e){return 0===e?"":"+"},getLabelText:function(e,t){return 0===e?dlang("generator","Free"):Na.a.getCurrencySymbol(t)},getLabelPrice:function(e,t){return"pro"===e?" (".concat(dlang("generator","Pro"),")"):t},_assetDragStart:function(e,t){this._par.fileDropZone.enableDomElementDropZone(),t.dataTransfer.setData("domelement",JSON.stringify(e))},_assetDragEnd:function(e){this._par.fileDropZone.disableDomElementDropZone()}},I.a.Base);window&&((globalThis||{}).PFProductPushLicensedAssetPickerItem=Da);var Ra=i("FKE6"),xa=i("hNNL"),Fa=i.n(xa);function Ma(e){return function(e){if(Array.isArray(e))return Ba(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ba(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ba(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Va(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function ja(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Va(a,n,r,o,s,"next",e)}function s(e){Va(a,n,r,o,s,"throw",e)}o(void 0)}))}}var Ua,za,Ga,Ha,Ya,qa,Wa,Ka,Za=Class({_state:{items:[]},_nodeItems:null,_nodeItemsTitle:null,_nodeRecent:null,_nodeRecentTitle:null,_nodeSearch:null,_nodeLoadingIndicator:null,_nodeNoMoreItems:null,_par:null,_searchText:"",_recentLength:0,_modal:null,_latestSearchKey:"",_curPage:1,_pageSize:30,_infiniteScrollObserver:null,_masonry:null,_masonrySettings:{itemSelector:".masonry__item",columnWidth:".masonry__item",percentPosition:!0,transitionDuration:"360ms"},_scrollShadow:null,_nodeProDisclaimer:null,__construct:function(e){this._par=e,this._scrollShadow=new Ht.a([this._nodeRecentTitle=tag("h5","pf-h5 pf-mb-12 pf-d-none",dlang("generator","Recently used")),this._nodeRecent=tag("div","pf-d-none masonry__static"),this._nodeItemsTitle=tag("h5","pf-h5 pf-my-12",dlang("generator","Inspiration")),this._nodeItems=tag("div","masonry"),this._nodeLoadingIndicator=tag("div","load-indicator pf-d-flex"),this._nodeNoMoreItems=tag("div",{className:"pf-w-50 pf-mx-auto pf-mt-32 pf-mb-4 pf-bg-light pf-d-none",style:{height:"1px"}})]),this.node=tag("div","browse-artwork-picker",[tag("a",{className:"pf-link-block pf-mb-24",onclick:this._par.onBackCallback},[tag("i","pf-i pf-i-chevron-left pf-i-24 pf-text-muted"),tag("span","pf-pl-4",lang("See all design layers"))]),tag("div","pf-mt-16 pf-d-flex pf-justify-content-between pf-align-items-center",[tag("h5","pf-h5 pf-m-0",dlang("generator","Browse artwork")),tag("a",{className:"pf-link",onclick:this._openModal},dlang("generator","How does it work?"))]),this._nodeSearch=tag("div","pf-my-12"),this._nodeProDisclaimer=tag("div"),this._scrollShadow]),this._renderSearch(),this._renderProDisclaimer(),this._buildModal()},renderItems:(Ka=ja(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qt.a.show(this._nodeItems),qt.a.show(this._scrollShadow.content),this._renderSearch(),e.next=5,this._getAllLicensedAssets({searchKey:""});case 5:qt.a.hide(this._nodeItems),qt.a.hide(this._scrollShadow.content),this._renderRecent(),this._scrollShadow.addScrollEventListener();case 9:case"end":return e.stop()}}),e,this)}))),function(){return Ka.apply(this,arguments)}),_getColumnCount:function(){var e=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),t=2;return e>=992?t=3:e>=768?t=4:e>=540&&(t=3),t},_isLastPage:function(){return this._state.items.length%this._pageSize>0},_clearAllItems:function(){this._masonry&&this._masonry.destroy(),I.a.clearNode(this._nodeItems)},_setItems:function(e){this._state.items=e,this._clearAllItems();for(var t=0,i=this._state.items.length;t<i;t++)this._addItem(this._state.items[t]);this._state.items.length>0&&(this._masonry=new Fa.a(this._nodeItems,this._masonrySettings),this._addInfiniteScrollTriggers(),this._updateLoadIndicator(),this._masonry.on("layoutComplete",this._updateLoadIndicator.bind(this)))},_addAdditionalItems:function(e){var t=[];this._state.items=this._state.items.concat(e);for(var i=0,n=e.length;i<n;i++)t.push(this._addItem(e[i]).node);this._masonry.appended(t),this._addInfiniteScrollTriggers(),this._scrollShadow.updateScrollShadowing()},_addItem:function(e){var t=new Aa;t.item=e,t.fileDropZone=this._par.fileDropZone,t.onClickCallback=this.onItemClick.bind(this);var i=new Da(t);return i.append(this._nodeItems),i},_canDisplayRecent:function(){return this._recentLength>0},_renderRecent:function(){I.a.clearNode(this._nodeRecent);var e=function(e){try{return JSON.parse(localStorage.getItem(Ca(e)))||[]}catch(e){console.warn("Could not get getRecentKey from local storage!")}}(this._par.storeId);e.length>5&&(e=e.slice(0,6)),this._recentLength=e.length,this._canDisplayRecent()?(I.a.removeClassName(this._nodeRecent,"pf-d-none"),I.a.removeClassName(this._nodeRecentTitle,"pf-d-none")):(I.a.addClassName(this._nodeRecent,"pf-d-none"),I.a.addClassName(this._nodeRecentTitle,"pf-d-none"));for(var t=0,i=e.length;t<i;t++){var n=new Aa;n.item=e[t],n.isRecent=!0,n.onClickCallback=this.onItemClick.bind(this),n.fileDropZone=this._par.fileDropZone,new Da(n).append(this._nodeRecent)}return this},_renderSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._searchText="",this._renderSearchResult(),I.a.clearNode(this._nodeSearch),new jt.a({onChange:this._searchChange.bind(this),type:"text",showClearButton:!0,placeholder:dlang("generator","Search Premium Images"),className:"tt-input",name:"SearchArtworks",id:"search-artworks",autoComplete:!1,value:e}).append(this._nodeSearch)},_renderProDisclaimer:(Wa=ja(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ye.d)(Ye.c);case 2:t=e.sent,I.a.clearNode(this._nodeProDisclaimer),t&&tag("p",{className:"pf-ui-caption pf-text-muted"},[tag("i",{className:"pf-i pf-i-12 pf-i-crown pf-text-yellow-pro pf-mr-4",style:{verticalAlign:"baseline"}}),tag("span",{innerHTML:dlang("generator","Premium images are {b}free{/b} for Pro").replace("{b}","<b>").replace("{/b}","</b>")})]).append(this._nodeProDisclaimer);case 5:case"end":return e.stop()}}),e,this)}))),function(){return Wa.apply(this,arguments)}),_searchChange:function(){var e=ja(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._curPage=1,e.next=3,this._getAllLicensedAssets({searchKey:t});case 3:this._searchText=t,this._renderSearchResult();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),_renderSearchResult:function(){if(I.a.addClassName(this._nodeRecent,"pf-d-none"),I.a.addClassName(this._nodeRecentTitle,"pf-d-none"),I.a.addClassName(this._nodeItemsTitle,"pf-d-none"),I.a.addClassName(this._nodeItems,"masonry"),!this._searchText)return this._canDisplayRecent()&&(I.a.removeClassName(this._nodeRecent,"pf-d-none"),I.a.removeClassName(this._nodeRecentTitle,"pf-d-none")),I.a.removeClassName(this._nodeItemsTitle,"pf-d-none"),void this._scrollShadow.updateScrollShadowing();this._searchText=this._searchText.toLowerCase(),0===this._state.items.length&&(this._renderNoResultsFound(),I.a.removeClassName(this._nodeItems,"masonry"),this._updateLoadIndicator()),this._scrollShadow.updateScrollShadowing()},_renderNoResultsFound:function(){tag("div","pf-w-100",[tag("img",{className:"pf-w-100",src:zt.a}),tag("div","pf-ui-body pf-text-center",dlang("site","No results found!"))]).append(this._nodeItems)},onItemClick:(qa=ja(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t instanceof ua||(t=new ua(t)),qt.a.show(this._nodeItems),e.next=4,ba(t,this._latestSearchKey);case 4:(i=e.sent).id&&(t.id=i.id,t.previewUrl=i.preview?i.preview:t.previewUrl,Ta(t,this._par.storeId),this._par.onAddFileCallback(t,t.id),qt.a.hide(this._nodeItems));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return qa.apply(this,arguments)}),getLicensedAssetById:(Ya=ja(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ia("getty",t,this._par.currency);case 3:if(!(i=e.sent)){e.next=7;break}return e.next=7,this.onItemClick(i);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("RPC error while getting getty image: "+e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e){return Ya.apply(this,arguments)}),getLicensedAssetsByKeyword:(Ha=ja(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._renderSearch(t),qt.a.show(this._scrollShadow.content),e.prev=2,e.next=5,this._searchChange(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("Couldn't get getty images: "+e.t0);case 10:qt.a.hide(this._scrollShadow.content);case 11:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return Ha.apply(this,arguments)}),_getAllLicensedAssets:(Ga=ja(regeneratorRuntime.mark((function e(t){var i,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.searchKey,n=void 0===i?"":i,qt.a.show(this._nodeItems),this._latestSearchKey=n,this._curPage=1,e.next=6,va("getty",n,this._par.currency,this._par.storeId,this._curPage);case 6:r=e.sent,qt.a.hide(this._nodeItems),r&&this._setItems(r);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return Ga.apply(this,arguments)}),_getPaginatedAssets:(za=ja(regeneratorRuntime.mark((function e(){var t,i,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1,e.next=3,va("getty",this._latestSearchKey,this._par.currency,this._par.storeId,t);case 3:(i=e.sent)&&i.length>0?this._addAdditionalItems(i):(I.a.clearNode(this._nodeLoadingIndicator),I.a.removeClassName(this._nodeNoMoreItems,"pf-d-none"));case 5:case"end":return e.stop()}}),e,this)}))),function(){return za.apply(this,arguments)}),_buildModal:(Ua=ja(regeneratorRuntime.mark((function e(){var t,i,n,r,a,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=new Be.a.Par).nodeClass="pf-modal",t.headerFlexWrap="pf-flex-nowrap",t.title=dlang("generator","Hereâ€™s what you should know about Premium Images"),t.onClose=function(){s._modal.remove()},i="$1",this._par.currency===Ra.a.CURRENCY_USD){e.next=11;break}return e.next=9,Sa(1,this._par.currency,Ra.a.CURRENCY_USD);case 9:(n=e.sent)&&(i=prettyMoney(n,this._par.currency));case 11:r=dlang("generator","Each individual placement of a Premium Image costs an additional {priceWithCurrency}.").replace("{priceWithCurrency}",i),a=tag("div","pf-m-0",[tag("img",{src:PF.ASSETS_URL+"images/dashboard/printful-getty.png",style:{maxWidth:"100%"}}),tag("p",null,[r]),tag("p",null,[dlang("generator","Designs containing Premium Images can be used with Printful products, but can't be downloaded as print files.")])]),o=tag("div","text-left",[this._primaryButton=tag("a",{className:"pf-btn pf-btn-primary pf-mr-12",onclick:this._closeModal},dlang("generator","Got it!"))]),this._modal=new Be.a(t),this._modal.setContent(a),this._modal.setFooterContent(o);case 17:case"end":return e.stop()}}),e,this)}))),function(){return Ua.apply(this,arguments)}),_openModal:function(){this._modal.show()},_closeModal:function(){this._modal.hide()},_getInfiniteScrollObserver:function(){var e=this;if(!this._infiniteScrollObserver){var t={root:this.node,rootMargin:"0px 0px 200px 0px",threshold:0};this._infiniteScrollObserver=new IntersectionObserver((function(t){var i=!1;t.forEach((function(e){e.isIntersecting&&(i=!0)})),i&&(e._getInfiniteScrollObserver().disconnect(),e._getPaginatedAssets(++e._curPage))}),t)}return this._infiniteScrollObserver},_addInfiniteScrollTriggers:function(){if(!this._isLastPage())for(var e=this._getColumnCount(),t=this._nodeItems.children.length-2*e,i=0;i<e;i++){var n=this._nodeItems.children[--t];this._getInfiniteScrollObserver().observe(n)}},_splitItemsIntoColumns:function(e){var t={};return e.forEach((function(e){var i=e.getBoundingClientRect();t[i.left]||(t[i.left]=[]),t[i.left].push(i)})),Object.keys(t).forEach((function(e){t[e].sort((function(e,t){return e.bottom>t.bottom?-1:t.bottom>e.bottom?1:0}))})),Object.values(t)},_updateLoadIndicator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(I.a.clearNode(this._nodeLoadingIndicator),I.a.addClassName(this._nodeNoMoreItems,"pf-d-none"),this._state.items.length)if(this._isLastPage())I.a.removeClassName(this._nodeNoMoreItems,"pf-d-none");else{var t=this._getColumnCount(),i=this._nodeLoadingIndicator.getBoundingClientRect(),n=e.length>0?e[0]:null,r=100;if(!(this._state.items.length<t))for(var a=0;a<t;a++){var o=0;if(n)o=Math.max.apply(Math,Ma(n.layout.colYs))-n.layout.colYs[a];else{var s=this._splitItemsIntoColumns(this._nodeItems.children);if(s&&s[a]&&s[a].length){var l=s[a][0];o=i.bottom-l.bottom}else o=0}var c=r+o,d=tag("div",{className:"masonry__item masonry__item--placeholder",style:{marginTop:"-".concat(o,"px"),height:"".concat(c,"px")}},[tag("div",{className:"pf-position-relative pf-h-100",attr:{style:"--loading-animation-delay:"+(120+120*a)+"ms"}},[tag("img",{className:"img-responsive pf-position-absolute",src:La.a})])]);d.append(this._nodeLoadingIndicator)}}}},I.a.Base);window&&((globalThis||{}).PFProductPushLicensedAssetPicker=Za);var Qa=i("x0He"),Xa=i("oCYn"),$a=i("e7F3");function Ja(e){return(Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eo(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function to(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function io(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function no(e,t){return(no=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ro(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=so(e);if(t){var r=so(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ao(this,i)}}function ao(e,t){return!t||"object"!==Ja(t)&&"function"!=typeof t?oo(e):t}function oo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function so(e){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lo(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function co(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var uo=new WeakMap,ho=new WeakMap,po=new WeakSet,go=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&no(e,t)}(a,e);var t,i,n,r=ro(a);function a(e){var t;return to(this,a),t=r.call(this),po.add(oo(t)),uo.set(oo(t),{writable:!0,value:void 0}),ho.set(oo(t),{writable:!0,value:void 0}),t.node=tag("div","youtube-video-mke"),co(oo(t),uo,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(oo(t),po,fo).call(oo(t)),t}return t=a,(i=[{key:"destroy",value:function(){lo(this,ho).destroy(),co(this,ho,null)}}])&&io(t.prototype,i),n&&io(t,n),a}(He.a),fo=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Xa.default.use($a.c),(t=new Qa.b).components={"youtube-video":function(){return i.e(144).then(i.bind(null,"AlMj"))}},t.template='\n            <youtube-video\n                :videoId="videoId"\n                :autoPlay="autoPlay"\n                :width="width"\n                :height="height"\n                :thumbnail="thumbnail"\n                :useIframeHook="useIframeHook"\n                :isSliding="isSliding"\n                :currentTimestampData="currentTimestampData"\n            />\n        ',t.initialData={videoId:lo(this,uo).videoId,autoPlay:lo(this,uo).autoPlay||!1,width:lo(this,uo).width,height:lo(this,uo).height,thumbnail:lo(this,uo).thumbnail,useIframeHook:lo(this,uo).useIframeHook,isSliding:lo(this,uo).isSliding,currentTimestampData:lo(this,uo).currentTimestampData},co(this,ho,new Qa.a(t)),lo(this,ho).append(this.node);case 7:case"end":return e.stop()}}),e,this)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){eo(a,n,r,o,s,"next",e)}function s(e){eo(a,n,r,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),_o=i("2ovl"),mo=i("DD1l"),vo=i("n6mh"),yo=i("IAu2"),bo=i("HSPo"),Po=i("XJFE");function Co(e){return(Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function To(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Io(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wo(e,t){return(wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function So(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Oo(e);if(t){var r=Oo(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Eo(this,i)}}function Eo(e,t){return!t||"object"!==Co(t)&&"function"!=typeof t?ko(e):t}function ko(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oo(e){return(Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ao(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function Lo(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var No=new WeakMap,Do=new WeakMap,Ro=new WeakSet,xo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wo(e,t)}(i,e);var t=So(i);function i(e){var n;return Io(this,i),n=t.call(this),Ro.add(ko(n)),No.set(ko(n),{writable:!0,value:void 0}),Do.set(ko(n),{writable:!0,value:void 0}),n.node=tag("div","mockup-picker-mke"),Lo(ko(n),No,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(ko(n),Ro,Fo).call(ko(n)),n}return i}(He.a),Fo=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new Qa.b).components={"mockup-picker":function(){return Promise.all([i.e(0),i.e(306)]).then(i.bind(null,"7KO8"))}},t.template="\n            <mockup-picker\n                @onBack=\"emitEvent('onBack', $event)\"\n                @onPicked=\"emitEvent('onPicked', $event)\"\n            />\n        ",t.emitEvent=function(e,t){switch(e){case"onBack":Ao(n,No).onBack(t);break;case"onPicked":Ao(n,No).onPicked(t)}},Lo(this,Do,new Qa.a(t)),Ao(this,Do).append(this.node);case 6:case"end":return e.stop()}}),e,this)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){To(a,n,r,o,s,"next",e)}function s(e){To(a,n,r,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),Mo=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Io(this,e),this.onBack=t.onBack||void 0,this.onPicked=t.onPicked||void 0},Bo=i("dVbR");function Vo(e,t,n){if(n&&!window.PF.Customer.isLogged())return!1;if(!(null==e?void 0:e.hasUnrelatedTemplates()))return!1;var r=[];try{r=JSON.parse(window.localStorage.getItem("unrelated_templates_modal_shown")||[])}catch(e){}if(r.indexOf(t)>-1)return!1;n&&I.a.addClassName(n,"disabled");var a=new Qa.b;return a.components={"unrelated-templates-modal":function(){return i.e(192).then(i.bind(null,"ibuy"))}},a.template="<unrelated-templates-modal @onClosed=\"emitEvent('onClosed')\"/>",a.emitEvent=function(e,i){if("onClosed"===e){n&&I.a.removeClassName(n,"disabled");try{r.push(t),window.localStorage.setItem("unrelated_templates_modal_shown",JSON.stringify(r))}catch(e){}}},new Qa.a(a).append(document.body),!0}var jo=i("rF+z"),Uo=i("N5d+");function zo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Go(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Go(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Go(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Ho(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Yo(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Ho(a,n,r,o,s,"next",e)}function s(e){Ho(a,n,r,o,s,"throw",e)}o(void 0)}))}}var qo,Wo,Ko,Zo=Class({_par:null,_camera:null,_scene:null,_renderer:null,_model:null,_material:null,_loadedJsFilesCount:null,_loadedJFilesNeeded:null,_textureLoader:null,_mapObj:null,_previousPreviewStr:null,dimensions:null,_3dModelLoaded:null,__construct:function(e){this._par=e,this.node=tag("div","live-3d-view pf-pt-lg-16",[this._nodeStatus=tag("div","pf-d-none"),this._nodeMain=tag("div","live-3d-view__main")]),this._validate3dViewCreation()&&Uo.a.loadResourcesAsync(PF.ASSETS_URL+Vn.PATH_THREE_JS,[PF.ASSETS_URL+Vn.PATH_OBJ_LOADER_JS,PF.ASSETS_URL+Vn.PATH_ORBIT_CONTROLS_JS],this._generate3d.bind(this))},_validate3dViewCreation:function(){var e,t=null===(e=this._par.getSelectedVariant())||void 0===e?void 0:e.templateId;return Vn.getMapObject(t)?this._par.getCanvasObj()?!!this._isWebGlAvailable()||(console.error("WebGl is not available for your browser"),this._setAndShowError(dlang("generator","Failed to load 3D model")),!1):(console.error("Canvas object is not reachable!"),this._setAndShowError(dlang("generator","Failed to load 3D model")),!1):(console.error("Obj file could not be found for ",Object(_e.a)().productId,t),this._setAndShowError(dlang("generator","Failed to load 3D model")),!1)},_generate3d:(Ko=Yo(regeneratorRuntime.mark((function e(t){var i,n,r,a,o,s,l,c,d,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return this._setAndShowError(this,dlang("generator","Failed to load 3D model")),e.abrupt("return");case 3:if(e.prev=3,r=null===(i=this._par.getSelectedVariant())||void 0===i?void 0:i.templateId,this._mapObj=Vn.getMapObject(r),this._mapObj){e.next=10;break}return console.error("map config object not defined",Object(_e.a)().productId,r),this._setAndShowError(this,dlang("generator","Failed to load 3D model")),e.abrupt("return");case 10:return e.prev=10,e.next=13,this._getAndPrepareImg();case 13:a=e.sent,e.next=19;break;case 16:return e.prev=16,e.t0=e.catch(10),e.abrupt("return");case 19:if((o=PF.ASSETS_URL+this._mapObj.objFile)&&a){e.next=24;break}return console.error("base64ImageSrc or objFilePath is not defined",o),this._setAndShowError(this,dlang("generator","Failed to load 3D model")),e.abrupt("return");case 24:if(this.dimensions=Vn.getDimensions(this._mapObj),null!==(n=this.dimensions)&&void 0!==n&&n.width&&this.dimensions.height){e.next=29;break}return console.error("Dimensions for 3d model is not defined"),this._setAndShowError(this,dlang("generator","Failed to load 3D model")),e.abrupt("return");case 29:this._camera=new THREE.PerspectiveCamera(75,this.dimensions.width/this.dimensions.height,.1,1e3),s=Vn.getPositionValues(this._mapObj),this._camera.position.x=s.posX,this._camera.position.y=s.posY,this._camera.position.z=s.zoom,(l=new THREE.OrbitControls(this._camera,this._nodeMain)).noZoom=!0,l.minPolarAngle=this._mapObj.minPolarAngle||0,l.maxPolarAngle=this._mapObj.maxPolarAngle||Math.PI,l.minAzimuthAngle=this._mapObj.minAzimuthAngle||-1/0,l.maxAzimuthAngle=this._mapObj.maxAzimuthAngle||1/0,l.noPan=!0,this._scene=new THREE.Scene,c=new THREE.AmbientLight(Vn.AMBIENT_LIGHT_COLOR,Vn.AMBIENT_LIGHT_INTENSITY),this._scene.add(c),(d=new THREE.DirectionalLight(Vn.DIRECTIONAL_LIGHT_COLOR,Vn.DIRECTIONAL_LIGHT_INTENSITY)).position.set(1,1,1).normalize(),this._scene.add(d),(u=new THREE.DirectionalLight(Vn.DIRECTIONAL_LIGHT_COLOR,Vn.DIRECTIONAL_LIGHT_INTENSITY)).position.set(-1,-1,-1).normalize(),this._scene.add(u),this._model=new THREE.Object3D,this._scene.add(this._model),this._updateMaterial(a,this._init3dModel.bind(this,o)),this._renderer=new THREE.WebGLRenderer({alpha:!0,antialias:!0}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(this.dimensions.width,this.dimensions.height),this._renderer.setClearColor(16777215,0),this._nodeMain.appendChild(this._renderer.domElement),this._animate(),e.next=65;break;case 61:e.prev=61,e.t1=e.catch(3),this._setAndShowError(dlang("generator","Failed to load 3D model")),console.error(e.t1);case 65:case"end":return e.stop()}}),e,this,[[3,61],[10,16]])}))),function(e){return Ko.apply(this,arguments)}),getTextureLoader:function(){return this._textureLoader||(THREE.ImageUtils.crossOrigin="",this._textureLoader=new THREE.TextureLoader),this._textureLoader},_getAndPrepareImg:function(){var e=this;return new Promise(function(){var t=Yo(regeneratorRuntime.mark((function t(i,n){var r,a,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._par.getSelectedPlacementId){t.next=2;break}return t.abrupt("return",n());case 2:if(a=Vn.getFillColor(e._mapObj),o=e._par.getSelectedPlacementId(),s=(null===(r=e._mapObj)||void 0===r?void 0:r.placementId)||Vn.DEFAULT_PLACEMENT_ID,t.prev=5,o!==s){t.next=12;break}return t.next=9,e._getCanvasPreview(a);case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=Vn.getPlacementImage(s);case 13:return l=t.t0,t.next=16,e._resamplePngFile(l,a);case 16:l=t.sent,t.next=22;break;case 19:t.prev=19,t.t1=t.catch(5),n();case 22:i(l);case 23:case"end":return t.stop()}}),t,null,[[5,19]])})));return function(e,i){return t.apply(this,arguments)}}())},_getCanvasPreview:function(e){var t=this;return new Promise(function(){var i=Yo(regeneratorRuntime.mark((function i(n,r){var a,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t._par.getCanvasObj){i.next=2;break}return i.abrupt("return",r());case 2:if(a=t._par.getCanvasObj()){i.next=5;break}return i.abrupt("return",!1);case 5:if(o=a.convertToPreview({multiplier:1,fillColor:e})){i.next=8;break}return i.abrupt("return",r());case 8:return i.abrupt("return",n(o));case 9:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}())},_updateMaterial:function(e,t){var i=this;this.getTextureLoader().load(e,(function(e){var n,r;(e.wrapS=THREE.RepeatWrapping,e.generateMipmaps=!1,e.wrapS=e.wrapT=THREE.ClampToEdgeWrapping,e.minFilter=THREE.LinearFilter,e.needsUpdate=!1,null!==(n=i._material)&&void 0!==n&&n.map)?i._material.map=e:(null===(r=i._material)||void 0===r||r.dispose(),i._material=new THREE.MeshPhongMaterial({map:e,needsUpdate:!1}));t&&t(),e.dispose()}),null,this._onDataLoadError)},_init3dModel:function(e){var t=this._par.getLoaded3dObj();t?this._onObjLoaded(t):new THREE.OBJLoader(new THREE.LoadingManager).load(e,this._onObjLoaded.bind(this),this._onObjLoadProgress,this._onDataLoadError)},scheduleDesignReload:function(){P.a.delay("3d-model-reload",this.reloadDesign.bind(this),50)},reloadDesign:(Wo=Yo(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._3dModelLoaded){e.next=2;break}return e.abrupt("return");case 2:return this._nodeStatus.textContent="",e.prev=3,e.next=6,this._getAndPrepareImg();case 6:t=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return");case 12:t&&this._previousPreviewStr!==t&&(this._previousPreviewStr=t,this._updateMaterial(t,this._setMaterialForModel.bind(this)),this.startAnimate());case 13:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(){return Wo.apply(this,arguments)}),_setMaterialForModel:function(){var e=this;this._model&&this._model.traverse((function(t){if(t instanceof THREE.Mesh){var i,n;if(null!==(i=t.material)&&void 0!==i&&i.displose)null===(n=t.material)||void 0===n||n.dispose();t.material=e._material}}))},_getPngDimensions:function(e){e=e.split(",")[1];var t=atob(e.slice(0,50)).slice(16,24),i=Uint8Array.from(t,(function(e){return e.charCodeAt(0)})),n=new DataView(i.buffer);return{width:n.getInt32(0),height:n.getInt32(4)}},_resamplePngFile:(qo=Yo(regeneratorRuntime.mark((function e(t,i){var n,r,a,o,s,l,c,d,u,h,p,g,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._mapObj.rowColCount,t){e.next=3;break}return e.abrupt("return",new Promise((function(e,t){return t()})));case 3:return r=this._getPngDimensions(t),a=document.createElement("canvas"),o=a.getContext("2d"),a.width=r.width*n,a.height=r.height*n,o.fillStyle=i,o.fillRect(0,0,a.width,a.height),this._resampleAddSelectedVariantColor(r,o),this._resampleStaticColors(r,o),e.prev=12,e.next=15,this._resampleStaticImage(r,a);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(12),e.abrupt("return",new Promise((function(e,t){return t()})));case 20:s="",l=0,c=Object.entries(Vn.getPlacementMap(this._mapObj));case 22:if(!(l<c.length)){e.next=45;break}if(d=zo(c[l],2),u=d[0],h=d[1],(p=Vn.getPlacementImage(h+"_"+this._mapObj.templateIds[0]))||(p=Vn.getPlacementImage(h)),!p){e.next=42;break}if(e.prev=27,!this._mapObj.rotateBy90Deg){e.next=32;break}return e.next=31,this._rotateImageBy90Deg(p);case 31:p=e.sent;case 32:return g=u%this._mapObj.rowColCount*r.width,f=Math.floor(u/this._mapObj.rowColCount)*r.height,e.next=36,this._drawImageReturnBase64(p,a,g,f,r.width,r.height);case 36:s=e.sent,e.next=42;break;case 39:return e.prev=39,e.t1=e.catch(27),e.abrupt("return",new Promise((function(e,t){return t()})));case 42:l++,e.next=22;break;case 45:return e.abrupt("return",s);case 46:case"end":return e.stop()}}),e,this,[[12,17],[27,39]])}))),function(e,t){return qo.apply(this,arguments)}),_rotateImageBy90Deg:function(e){return new Promise((function(t,i){var n=new Image;n.onload=function(){var e=document.createElement("canvas");e.width=n.height,e.height=n.width;var i=e.getContext("2d");i.translate(Math.floor(n.height/2),Math.floor(n.width/2)),i.rotate(Math.PI/180*90),i.drawImage(n,-n.width/2,-n.height/2),t(e.toDataURL())},n.onerror=i,n.crossOrigin="anonymous",n.src=e}))},_drawImageReturnBase64:function(e,t,i,n,r,a,o){return new Promise((function(s,l){var c=function(){t.getContext("2d").drawImage(this,i,n,r,a),Vn.staticImageCache[e]=this,s(t.toDataURL())};if(o&&Vn.staticImageCache[e])c.apply(Vn.staticImageCache[e]);else{var d=new Image;d.onload=c,d.onerror=l,d.crossOrigin="anonymous",d.src=e}}))},_resampleAddSelectedVariantColor:function(e,t){if(this._mapObj&&e&&t){var i=this._mapObj.variantColorSector;if(i){var n=this._par.getDesignData(),r=this._getSelectedVariantHexColor(n);r&&this._resampleColorSector(e,t,i,r)}}},_resampleColorSector:function(e,t,i,n){t.fillStyle=n;var r=i%this._mapObj.rowColCount*e.width,a=Math.floor(i/this._mapObj.rowColCount)*e.height;t.fillRect(r,a,e.width,e.height)},_resampleStaticColors:function(e,t){var i;if(null!==(i=this._mapObj)&&void 0!==i&&i.staticColorMap&&e&&t)for(var n=0,r=Object.entries(this._mapObj.staticColorMap);n<r.length;n++){var a=zo(r[n],2),o=a[0],s=a[1];this._resampleColorSector(e,t,o,s)}},_resampleStaticImage:function(e,t){var i=this;return new Promise(function(){var n=Yo(regeneratorRuntime.mark((function n(r,a){var o,s,l,c,d,u,h,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(o=i._mapObj)&&void 0!==o&&o.staticImageMap&&e&&t){n.next=3;break}return r(),n.abrupt("return");case 3:s=0,l=Object.entries(i._mapObj.staticImageMap);case 4:if(!(s<l.length)){n.next=19;break}return c=zo(l[s],2),d=c[0],u=c[1],h=d%i._mapObj.rowColCount*e.width,p=Math.floor(d/i._mapObj.rowColCount)*e.height,n.prev=8,n.next=11,i._drawImageReturnBase64(u,t,h,p,e.width,e.height,!0);case 11:n.next=16;break;case 13:return n.prev=13,n.t0=n.catch(8),n.abrupt("return",a());case 16:s++,n.next=4;break;case 19:r();case 20:case"end":return n.stop()}}),n,null,[[8,13]])})));return function(e,t){return n.apply(this,arguments)}}())},_animate:function(){this._renderer&&(this._animationKey=requestAnimationFrame(this._animate.bind(this)),this._renderer.render(this._scene,this._camera))},stopAnimate:function(){this._animationKey&&cancelAnimationFrame(this._animationKey)},startAnimate:function(){this.stopAnimate(),this._animate(),qt.a.hide(this._par.loadingNode)},_onObjLoaded:function(e){var t,i,n,r,a;this._3dModelLoaded=!0,e.position.x=(null===(t=this._mapObj)||void 0===t?void 0:t.objPosAdjustX)||0,e.position.y=(null===(i=this._mapObj)||void 0===i?void 0:i.objPosAdjustY)||0,e.position.z=(null===(n=this._mapObj)||void 0===n?void 0:n.objPosAdjustZ)||0,0===e.rotation.z&&this._mapObj.rotateBy90Deg?e.rotateZ(THREE.Math.degToRad(90)):0===e.rotation.z||this._mapObj.rotateBy90Deg||e.rotateZ(THREE.Math.degToRad(-90)),this._model.add(e),this._setMaterialForModel(),this._par.on3dObjectLoaded&&this._par.on3dObjectLoaded(this._model,this._mapObj.uniqueId),this._par.showWarningAlert&&null!==(r=this._mapObj)&&void 0!==r&&r.showWarning&&null!==(a=this._mapObj)&&void 0!==a&&a.warningBannerData&&new PFComponentsBanner({id:"banner-warning",type:"warning",className:"pf-position-absolute pf-w-100 ",heading:this._mapObj.warningBannerData.header,content:this._mapObj.warningBannerData.content,closable:!0}).prepend(this._nodeMain),qt.a.hide(this._par.loadingNode)},_onObjLoadProgress:function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(Math.round(t,2)+"% downloaded")}},_onDataLoadError:function _onDataLoadError(e){this._setAndShowError(dlang("generator","Failed to load 3D model")),console.error(e)},_setAndShowError:function _setAndShowError(e){this._nodeStatus.textContent=e,I.a.removeClassName(this._nodeStatus,"pf-d-none"),qt.a.hide(this._par.loadingNode)},_isWebGlAvailable:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}},_getSelectedVariantHexColor:function(e){var t;return null!=e&&null!==(t=e.hexColors)&&void 0!==t&&t.length?e.hexColors[e.hexColors.length-1]:null},reset3dModelLoaded:function(){this._3dModelLoaded=!1},destroy:function(){var e,t,i;null===(e=this._renderer)||void 0===e||e.dispose(),null===(t=this._material)||void 0===t||t.dispose(),null===(i=this._scene)||void 0===i||i.dispose()}},I.a.Base);window&&((globalThis||{}).PFProductPushLive3dView=Zo);var Qo=Class({getCanvasObj:null,loadingNode:null,getSelectedVariant:null,getDesignData:null,getLoaded3dObj:null,getSelectedPlacementId:null,on3dObjectLoaded:null,showWarningAlert:null,onWarningAlertClose:null});function Xo(e){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $o(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Jo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function es(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ts(e,t){return(ts=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function is(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=as(e);if(t){var r=as(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ns(this,i)}}function ns(e,t){return!t||"object"!==Xo(t)&&"function"!=typeof t?rs(e):t}function rs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function as(e){return(as=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function os(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function ss(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function ls(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}window&&((globalThis||{}).PFProductPushLive3dViewPar=Qo);var cs=new WeakMap,ds=new WeakMap,us=new WeakSet,hs=new WeakSet,ps=new WeakSet,gs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ts(e,t)}(a,e);var t,i,n,r=is(a);function a(e){var t;return Jo(this,a),t=r.call(this),ps.add(rs(t)),hs.add(rs(t)),us.add(rs(t)),cs.set(rs(t),{writable:!0,value:void 0}),ds.set(rs(t),{writable:!0,value:void 0}),t.node=PF.Customer.abTestBgFill()?tag("div","design-tools-mke pf-py-20"):t.node=tag("div","design-tools-mke pf-border-bottom pf-py-20"),ls(rs(t),cs,e),t.init(),t}return t=a,n=[{key:"copyTextToClipboard",value:function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly","readonly"),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t),new Po.a({type:Po.a.TYPE_SUCCESS,content:"Layer data in JSON format copied to clipboard"})}}],(i=[{key:"init",value:function(){tag("a",{className:"pf-btn pf-btn-secondary pf-mb-24 col-12",style:{pointerEvents:"auto",top:0,right:0},onclick:ss(this,hs,_s).bind(this)},[tag("i","pf-i pf-i-content-copy pf-bold pf-mr-4"),tag("span","",dlang("generator","Get design data and preview"))]).append(this.node),tag("div","pf-h4",[tag("span","",dlang("generator","Or paste design data"))]).append(this.node);var e=new jt.a({type:"text",showClearButton:!0,placeholder:dlang("generator","Paste design layers and press Enter"),name:"DesignLayerInput",id:"design-layer-input"});e.node.append(this.node),e.node.addEventListener("keydown",ss(this,us,fs).bind(this))}},{key:"destroy",value:function(){os(this,ds).destroy(),ls(this,ds,null)}}])&&es(t.prototype,i),n&&es(t,n),a}(He.a),fs=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13===t.keyCode){e.next=2;break}return e.abrupt("return");case 2:i=t.target.value,e.prev=3,JSON.parse(i),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(3),new Po.a({type:Po.a.TYPE_ERROR,content:"Error in layer data formatting!"}),e.abrupt("return");case 11:return e.next=13,Object(fa.a)("product-generator/get-design-data-from-layers",{designLayers:i});case 13:if((n=e.sent).success){e.next=17;break}return new Po.a({type:Po.a.TYPE_ERROR,content:"Error parsing layer data on server!"}),e.abrupt("return");case 17:os(this,cs).designer.addGroupTemplateLayers({designData:n.designLayers,isPlainLayers:!0}),new Po.a({type:Po.a.TYPE_SUCCESS,content:"Design added"});case 19:case"end":return e.stop()}}),e,this,[[3,7]])})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){$o(a,n,r,o,s,"next",e)}function s(e){$o(a,n,r,o,s,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),_s=function(){var e,t=os(this,cs).designer.getDesignData(),i=os(this,cs).templates.getSelectedTemplate().getKey(),n=null===(e=t.templates[i])||void 0===e?void 0:e.toArray({forRpc:!0}).layers;if(n){n=Object.values(n).map((function(e){return e.type===x.a.TYPE&&(delete e.url,delete e.svg),delete e.quickDesignId,delete e.groupId,delete e.groupType,e}));var r=os(this,cs).designer.getDesignFillColor(os(this,cs).designer.getSelectedPlacementId());r&&n.unshift({type:vo.a.TYPE_FILL,color:r}),gs.copyTextToClipboard(JSON.stringify(n)),ss(this,ps,ms).call(this)}else new Po.a({type:Po.a.TYPE_ERROR,content:"There are no layers in design!"})},ms=function(){var e=document.createElement("a"),t=os(this,cs).getDesignerMockup().getMockup().getPreviewImageEncodedString();e.setAttribute("href",t),e.setAttribute("download","preview"),e.style.display="none",document.body.appendChild(e);var i=r.a.disable;r.a.disable=!0,e.click(),r.a.disable=i,document.body.removeChild(e)},vs=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Jo(this,e),this.designer=t.designer||void 0,this.templates=t.templates||void 0,this.getDesignerMockup=t.getDesignerMockup||void 0},ys=i("B5vy");function bs(e){return(bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ps(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Cs(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ts(e,t){return(Ts=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Is(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Es(e);if(t){var r=Es(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ws(this,i)}}function ws(e,t){return!t||"object"!==bs(t)&&"function"!=typeof t?Ss(e):t}function Ss(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Es(e){return(Es=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ks(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function Os(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var As=new WeakMap,Ls=new WeakMap,Ns=new WeakMap,Ds=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ts(e,t)}(s,e);var t,i,n,r,a,o=Is(s);function s(e){var t,i,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),n=o.call(this),As.set(Ss(n),{writable:!0,value:null}),Ls.set(Ss(n),{writable:!0,value:null}),Ns.set(Ss(n),{writable:!0,value:null}),Os(Ss(n),Ns,e),Os(Ss(n),As,ks(Ss(n),Ns).item),n.node=Object(I.b)("div","col-3 pf-px-4 quick-design-picker__col",[Os(Ss(n),Ls,Object(I.b)("div",{className:"quick-design-picker__item pf-p-4 pf-mb-12 pf-position-relative",onclick:n._onClick.bind(Ss(n)),prop:{ondragstart:n._quickDesignDragStart.bind(Ss(n)),ondragend:n._quickDesignDragEnd.bind(Ss(n))}},[Object(I.b)("div","quick-design-picker__labels",[null!==(t=ks(Ss(n),As).extra)&&void 0!==t&&t.new?Object(I.b)("span","quick-design-picker__new"):"",null!==(i=ks(Ss(n),As).extra)&&void 0!==i&&i.hidden?Object(I.b)("span","pf-badge pf-badge-small pf-badge--primary",dlang("generator","hidden")):""]),Object(I.b)("div","quick-design-picker__ratio",[Object(I.b)("div","quick-design-picker__ratio__inner",[n._getSpinnerAndLoadDimensions(ks(Ss(n),As),ks(Ss(n),Ns).showEmpty)])])]))]),n}return t=s,(i=[{key:"_getSpinnerAndLoadDimensions",value:function(e,t){var i=this,n=function(n){"clipart"===e.designData[n].type&&i._getSpinner(e.designData[n].clipartItem,t,(function(t,i){e.designData[n].clipartItem.width=t,e.designData[n].clipartItem.height=i}))};for(var r in e.designData)n(r);return this._getSpinner(e,t,(function(t,i){e.width=t,e.height=i}))}},{key:"_getSpinner",value:function(e,t,i){var n=e.image.urlThumb,r=Object(I.b)("img",{className:"img-responsive",src:t?"":PF.ASSETS_URL+"images/layout/spinner-white.gif",style:{opacity:.3}}),a=new Image;return a.onload=function(){r.src=n,r.style.opacity=1,i&&i(a.width,a.height)},a.src=n,r}},{key:"_quickDesignDragStart",value:function(e){ks(this,Ns).fileDropZone.enableDomElementDropZone(),e.dataTransfer.setData("domelement",JSON.stringify(ks(this,As)))}},{key:"_quickDesignDragEnd",value:function(){ks(this,Ns).fileDropZone.disableDomElementDropZone()}},{key:"_onClick",value:(r=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ks(this,Ns).onClickCallback(ks(this,As),t));case 1:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(i,n){var a=r.apply(e,t);function o(e){Ps(a,i,n,o,s,"next",e)}function s(e){Ps(a,i,n,o,s,"throw",e)}o(void 0)}))},function(e){return a.apply(this,arguments)})}])&&Cs(t.prototype,i),n&&Cs(t,n),s}(He.a);function Rs(e){return(Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xs(e,t){return(xs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Vs(e);if(t){var r=Vs(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ms(this,i)}}function Ms(e,t){return!t||"object"!==Rs(t)&&"function"!=typeof t?Bs(e):t}function Bs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vs(e){return(Vs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function js(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function Us(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function zs(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var Gs=new WeakMap,Hs=new WeakMap,Ys=new WeakMap,qs=new WeakMap,Ws=new WeakMap,Ks=new WeakMap,Zs=new WeakMap,Qs=new WeakMap,Xs=new WeakMap,$s=new WeakSet,Js=new WeakSet,el=new WeakSet,tl=new WeakSet,il=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xs(e,t)}(i,e);var t=Fs(i);function i(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=t.call(this),tl.add(Bs(r)),el.add(Bs(r)),Js.add(Bs(r)),$s.add(Bs(r)),Gs.set(Bs(r),{writable:!0,value:null}),Hs.set(Bs(r),{writable:!0,value:null}),Ys.set(Bs(r),{writable:!0,value:null}),qs.set(Bs(r),{writable:!0,value:null}),Ws.set(Bs(r),{writable:!0,value:!1}),Ks.set(Bs(r),{writable:!0,value:8}),Zs.set(Bs(r),{writable:!0,value:null}),Qs.set(Bs(r),{writable:!0,value:!1}),Xs.set(Bs(r),{writable:!0,value:{}}),zs(Bs(r),Xs,e),zs(Bs(r),Zs,Us(Bs(r),Xs).group),r.node=Object(I.b)("div","pf-mb-32",[Object(I.b)("div","pf-mb-8 pf-d-flex pf-align-items-center",[zs(Bs(r),Ys,Object(I.b)("h5","pf-h5 pf-m-0",Us(Bs(r),Zs).name)),null!==(n=Us(Bs(r),Zs).extra)&&void 0!==n&&n.new?Object(I.b)("span","pf-badge pf-badge-small pf-badge--primary pf-ml-4",clang("Badge","New")):"",zs(Bs(r),Hs,Us(Bs(r),Zs).items.length>Us(Bs(r),Ks)?Object(I.b)("a",{className:"pf-ml-auto pf-mr-12 pf-link pf-ui-body",onclick:js(Bs(r),tl,ol).bind(Bs(r))},dlang("generator","See more")):"")]),zs(Bs(r),Gs,Object(I.b)("div","row-flex")),zs(Bs(r),qs,Object(I.b)("div","row-flex"))]),js(Bs(r),$s,nl).call(Bs(r)),r}return i}(He.a),nl=function(){I.a.clearNode(Us(this,Gs));var e=Us(this,Zs).items.length;e>Us(this,Ks)&&(e=Us(this,Ks));for(var t=0;t<e;t++)js(this,el,al).call(this,Us(this,Zs).items[t],Us(this,Gs))},rl=function(){if(Us(this,Qs))Us(this,Ws)?(I.a.removeClassName(Us(this,qs),"pf-d-none"),I.a.clearNode(Us(this,Hs)),Object(I.b)("span","",dlang("generator","See less")).append(Us(this,Hs))):(I.a.addClassName(Us(this,qs),"pf-d-none"),I.a.clearNode(Us(this,Hs)),Object(I.b)("span","",dlang("generator","See more")).append(Us(this,Hs)));else if(I.a.clearNode(Us(this,qs)),Us(this,Ws)&&!(Us(this,Zs).items.length<=Us(this,Ks))){for(var e=Us(this,Zs).items.length,t=Us(this,Ks);t<e;t++)js(this,el,al).call(this,Us(this,Zs).items[t],Us(this,qs));I.a.clearNode(Us(this,Hs)),Object(I.b)("span","",dlang("generator","See less")).append(Us(this,Hs)),zs(this,Qs,!0)}},al=function(e,t){new Ds({item:e,onClickCallback:Us(this,Xs).onClickCallback,showEmpty:!0,fileDropZone:Us(this,Xs).fileDropZone}).append(t)},ol=function(){zs(this,Ws,!Us(this,Ws)),js(this,Js,rl).call(this)},sl=i("Svo9");function ll(e){return(ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cl(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function dl(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){cl(a,n,r,o,s,"next",e)}function s(e){cl(a,n,r,o,s,"throw",e)}o(void 0)}))}}function ul(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hl(e,t){return(hl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=_l(e);if(t){var r=_l(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return gl(this,i)}}function gl(e,t){return!t||"object"!==ll(t)&&"function"!=typeof t?fl(e):t}function fl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _l(e){return(_l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ml(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function vl(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function yl(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var bl=new WeakMap,Pl=new WeakMap,Cl=new WeakMap,Tl=new WeakMap,Il=new WeakMap,wl=new WeakMap,Sl=new WeakMap,El=new WeakMap,kl=new WeakMap,Ol=new WeakMap,Al=new WeakMap,Ll=new WeakMap,Nl=new WeakSet,Dl=new WeakSet,Rl=new WeakSet,xl=new WeakSet,Fl=new WeakSet,Ml=new WeakSet,Bl=new WeakSet,Vl=new WeakSet,jl=new WeakSet,Ul=new WeakSet,zl=new WeakSet,Gl=new WeakSet,Hl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hl(e,t)}(o,e);var t,i,n,r,a=pl(o);function o(e){var t,i,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=a.call(this),Gl.add(fl(t)),zl.add(fl(t)),Ul.add(fl(t)),jl.add(fl(t)),Vl.add(fl(t)),Bl.add(fl(t)),Ml.add(fl(t)),Fl.add(fl(t)),xl.add(fl(t)),Rl.add(fl(t)),Dl.add(fl(t)),Nl.add(fl(t)),bl.set(fl(t),{writable:!0,value:[]}),i=fl(t),r=null,(n="fileDropZone")in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,Pl.set(fl(t),{writable:!0,value:null}),Cl.set(fl(t),{writable:!0,value:null}),Tl.set(fl(t),{writable:!0,value:null}),Il.set(fl(t),{writable:!0,value:null}),wl.set(fl(t),{writable:!0,value:null}),Sl.set(fl(t),{writable:!0,value:null}),El.set(fl(t),{writable:!0,value:null}),kl.set(fl(t),{writable:!0,value:null}),Ol.set(fl(t),{writable:!0,value:""}),Al.set(fl(t),{writable:!0,value:0}),Ll.set(fl(t),{writable:!0,value:null}),yl(fl(t),El,e),t.fileDropZone=vl(fl(t),El).fileDropZone,yl(fl(t),Ll,new Ht.a([yl(fl(t),Tl,tag("h5","pf-h5 pf-mb-16 pf-d-none",dlang("generator","Recently used"))),yl(fl(t),Cl,tag("div","row-flex pf-mb-12 pf-d-none")),yl(fl(t),Pl,tag("div","pf-mt-24")),yl(fl(t),wl,tag("div","row-flex pf-d-none"))])),t.node=tag("div","quick-design-picker",[tag("a",{className:"pf-link-block pf-mb-24",onclick:vl(fl(t),El).onBackCallback},[tag("i","pf-i pf-i-chevron-left pf-i-24 pf-text-muted"),tag("span","pf-pl-4",lang("See all design layers"))]),yl(fl(t),Il,tag("div","pf-mb-12")),vl(fl(t),Ll)]),ml(fl(t),Ml,Ql).call(fl(t)),t}return t=o,(i=[{key:"renderGroups",value:(r=dl(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!vl(this,kl)){e.next=3;break}return ml(this,Nl,Yl).call(this),e.abrupt("return");case 3:return e.next=5,ml(this,Gl,ic).call(this);case 5:ml(this,Nl,Yl).call(this);case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"onItemClick",value:function(){var e=dl(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.unavailableTechniques&&t.unavailableTechniques.indexOf(vl(this,El).selectedPlacementTechnique)>-1)){e.next=2;break}return e.abrupt("return");case 2:return Object(sl.a)(t.id,vl(this,El).selectedPlacementTechnique),vl(this,El).onAddFileCallback(t),e.next=6,ml(this,zl,tc).call(this);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}])&&ul(t.prototype,i),n&&ul(t,n),o}(He.a),Yl=function(){return ml(this,Ml,Ql).call(this),ml(this,Fl,Zl).call(this),vl(this,Ll).addScrollEventListener(),this},ql=function(e){I.a.clearNode(vl(this,Pl)),yl(this,bl,e);for(var t=0,i=vl(this,bl).length;t<i;t++)ml(this,Rl,Wl).call(this,vl(this,bl)[t]);yl(this,kl,!0),ml(this,Fl,Zl).call(this)},Wl=function(e){new il({group:e,fileDropZone:this.fileDropZone,onClickCallback:this.onItemClick.bind(this)}).append(vl(this,Pl))},Kl=function(){return vl(this,kl)&&vl(this,Al)>0},Zl=function(){var e=dl(regeneratorRuntime.mark((function e(){var t,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(sl.e)(vl(this,El).selectedPlacementTechnique);case 2:for(t=e.sent,yl(this,Al,t.length),I.a.clearNode(vl(this,Cl)),ml(this,xl,Kl).call(this)?(I.a.removeClassName(vl(this,Cl),"pf-d-none"),I.a.removeClassName(vl(this,Tl),"pf-d-none")):(I.a.addClassName(vl(this,Cl),"pf-d-none"),I.a.addClassName(vl(this,Tl),"pf-d-none")),i=0,n=t.length;i<n;i++)new Ds({item:t[i],onClickCallback:this.onItemClick.bind(this),showEmpty:!0,fileDropZone:this.fileDropZone,isIndividual:!0}).append(vl(this,Cl));return e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),Ql=function(){"en"===he.a.language&&(yl(this,Ol,""),ml(this,Vl,$l).call(this),I.a.clearNode(vl(this,Il)),new jt.a({onChange:ml(this,Bl,Xl).bind(this),onKeyUp:ml(this,Bl,Xl).bind(this),type:"text",showClearButton:!0,placeholder:dlang("generator","Search quick designs"),className:"tt-input",name:"SearchQuickDesigns",id:"search-quick-designs"}).append(vl(this,Il)))},Xl=function(e){vl(this,Ol)!==e&&(yl(this,Ol,e),ml(this,Vl,$l).call(this))},$l=function(){if(I.a.addClassName(vl(this,Cl),"pf-d-none"),I.a.addClassName(vl(this,Tl),"pf-d-none"),I.a.addClassName(vl(this,Pl),"pf-d-none"),!vl(this,Ol))return ml(this,xl,Kl).call(this)&&(I.a.removeClassName(vl(this,Cl),"pf-d-none"),I.a.removeClassName(vl(this,Tl),"pf-d-none")),I.a.removeClassName(vl(this,Pl),"pf-d-none"),I.a.addClassName(vl(this,wl),"pf-d-none"),void vl(this,Ll).updateScrollShadowing();ml(this,jl,Jl).call(this),I.a.removeClassName(vl(this,wl),"pf-d-none"),vl(this,Ll).updateScrollShadowing()},Jl=function(){if(I.a.clearNode(vl(this,wl)),vl(this,Ol)){yl(this,Ol,vl(this,Ol).toLowerCase());for(var e=!0,t=0;t<vl(this,bl).length;t++)for(var i=vl(this,bl)[t],n=0;n<i.items.length;n++){var r=i.items[n];if(r.name.toLowerCase().includes(vl(this,Ol)))new Ds({item:r,onClickCallback:this.onItemClick.bind(this),showEmpty:!1,isIndividual:!0,fileDropZone:vl(this,El).fileDropZone}).append(vl(this,wl)),e=!1}e&&ml(this,Ul,ec).call(this)}},ec=function(){tag("div","pf-w-100",[tag("img",{className:"pf-w-100",src:zt.a}),tag("div","pf-ui-body pf-text-center",dlang("generator","No results found! Try another keyword or check out our quick design collections."))]).append(vl(this,wl))},tc=function(){var e=dl(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ml(this,Ml,Ql).call(this),e.next=3,this.renderGroups();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),ic=function(){var e=dl(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qt.a.show(vl(this,Ll).node),e.next=3,Object(sl.c)(vl(this,El).selectedPlacementTechnique);case 3:t=e.sent,ml(this,Dl,ql).call(this,t),qt.a.hide(vl(this,Ll).node);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),nc=i("mrkb"),rc=i("1yrs"),ac=i("xyjD");var oc=i("5OoY"),sc=i("KLvT");function lc(e){return(lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cc(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function dc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uc(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hc(e,t){return(hc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=_c(e);if(t){var r=_c(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return gc(this,i)}}function gc(e,t){return!t||"object"!==lc(t)&&"function"!=typeof t?fc(e):t}function fc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _c(e){return(_c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mc(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function vc(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}var yc=new WeakMap,bc=new WeakMap,Pc=new WeakSet,Cc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hc(e,t)}(a,e);var t,i,n,r=pc(a);function a(e){var t;return dc(this,a),t=r.call(this),Pc.add(fc(t)),yc.set(fc(t),{writable:!0,value:void 0}),bc.set(fc(t),{writable:!0,value:void 0}),vc(fc(t),bc,e),t.node=tag("div","designer-layer-picker-chooser"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(fc(t),Pc,Tc).call(fc(t)),t}return t=a,(i=[{key:"destroy",value:function(){mc(this,yc).destroy(),vc(this,yc,null)}}])&&uc(t.prototype,i),n&&uc(t,n),a}(He.a),Tc=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new Qa.b).components={"layer-picker-chooser":function(){return i.e(282).then(i.bind(null,"PKXN"))}},t.template="<layer-picker-chooser\n            @on-file-picker-chosen=\"emitEvent('onFilePickerChosen', $event)\"\n            @on-text-picker-chosen=\"emitEvent('onTextPickerChosen', $event)\"\n            @on-clipart-picker-chosen=\"emitEvent('onClipartPickerChosen', $event)\"\n            @on-promo-mockup-picker-chosen=\"emitEvent('onPromoMockupPickerChosen', $event)\"\n            @on-quick-designs-picker-chosen=\"emitEvent('onQuickDesignsPickerChosen', $event)\"\n            @on-licensed-asset-picker-chosen=\"emitEvent('onLicensedAssetPickerChosen', $event)\"\n            @on-vue-picked=\"emitEvent('onVuePicked', $event)\"\n            @on-back-to-default-view=\"emitEvent('onBackToDefaultView', $event)\"\n        />",t.emitEvent=function(e,t){"onFilePickerChosen"===e?mc(n,bc).onFilePickerChosen():"onTextPickerChosen"===e?mc(n,bc).onTextPickerChosen():"onClipartPickerChosen"===e?mc(n,bc).onClipartPickerChosen():"onPromoMockupPickerChosen"===e?mc(n,bc).onPromoMockupPickerChosen():"onQuickDesignsPickerChosen"===e?mc(n,bc).onQuickDesignsPickerChosen():"onLicensedAssetPickerChosen"===e?mc(n,bc).onLicensedAssetPickerChosen():"onVuePicked"===e?mc(n,bc).onVuePicked():"onBackToDefaultView"===e&&mc(n,bc).onBackToDefaultView()},t.plugins={store:Object(sc.a)()},vc(this,yc,new Qa.a(t)),mc(this,yc).append(this.node);case 7:case"end":return e.stop()}}),e,this)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){cc(a,n,r,o,s,"next",e)}function s(e){cc(a,n,r,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),Ic=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dc(this,e),this.onFilePickerChosen=t.onFilePickerChosen,this.onTextPickerChosen=t.onTextPickerChosen,this.onClipartPickerChosen=t.onClipartPickerChosen,this.onPromoMockupPickerChosen=t.onPromoMockupPickerChosen,this.onQuickDesignsPickerChosen=t.onQuickDesignsPickerChosen,this.onLicensedAssetPickerChosen=t.onLicensedAssetPickerChosen,this.onBackToDefaultView=t.onBackToDefaultView,this.onVuePicked=t.onVuePicked},wc=i("YvQZ"),Sc=i("0nZy");function Ec(e){return function(e){if(Array.isArray(e))return Ac(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Oc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kc(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=Oc(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function Oc(e,t){if(e){if("string"==typeof e)return Ac(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ac(e,t):void 0}}function Ac(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Lc(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Nc(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Lc(a,n,r,o,s,"next",e)}function s(e){Lc(a,n,r,o,s,"throw",e)}o(void 0)}))}}var Dc,Rc=Class({_KEY_SELECTED_COLORS:"productPushSelectedColors",_KEY_SELECTED_SIZES:"productPushSelectedSizes",_generatorParams:null,_templates:null,generatorVariants:null,_selectedColors:[],_selectedRegionAttributes:{},_selectedSizes:[],_initialSizes:[],allColors:null,discontinuedColors:{},allSizes:null,translatedSizes:null,allAvailableSizes:null,_disabledSizes:[],previewMockupVariant:null,_variantArea:null,designData:null,_par:null,_layerPicker:null,_textPicker:null,_nodeTextPicker:null,_layerPickerChooser:null,_clipartPicker:null,_mockupPicker:null,_quickDesignPicker:null,_licensedAssetPicker:null,_regionPicker:null,_colorPicker:null,_designFillColorPicker:null,_designFillColorApplyCheckbox:null,_sizePicker:null,_techniquePicker:null,_productOptionsPicker:null,_resizeTimeout:null,_renderTimeouts:{},_placementSelector:null,storeId:null,_zoomInLoading:!1,_mockup:null,_mockupMainMaxWidth:0,_mockupMainMaxHeight:0,allVariants:{},_pickerTabContents:{},_designerTabContents:{},_shouldRegeneratePreview:!0,_3dObjUniqueId:0,_3dStatus:0,_orientation:"",_templateType:null,observer:null,excludedPlacements:{},_technique:"",allLabelTypesAvailable:!1,_dynamicStickyFooter:null,_nodeFooter:tag("div"),_nodeTextDigitizationPriceDecrease:null,_nodeHatSideBackDigitizationPriceDecrease:null,_nodeMainMockupArea:null,_nodeMainMockupAreaImage:null,_placementOptions:null,_placementOptionsRawStorage:null,_embroideryHelper:null,_videoTutorialsModal:null,_templateEditorPositionsCalculated:!1,_shownBackgroundRemovalModal:!1,_shouldShowUnrelatedTemplatesPopover:!1,_isInitialised:!1,_isLoadingProduct:!1,__construct:function(e){this._par=e,Object(nc.b)(),Object(_e.e)(e.product),this._technique=e.initDesignerTechnique||this._getInitTechnique(),this._par.observer?this.observer=this._par.observer:this.observer=new mr,this.node=tag("div",{className:"product-push "+(this._par.shouldShowPrice&&!this._par.isModalDesigner?"pf-mb-48":"")+" "+(Object(L.b)()?" is-touch":""),id:"js--product-push-designer"}),this._showLoader(this.node),this._initialize(),ue.a.setFontDependencies(Object(me.getPFCanvasFonts)()),window.dump=this._dump},_initialize:function(){var e=this;return Nc(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([Object(me.setPFCanvasFonts)(),Object(ac.c)()]);case 2:e._par.store&&e._par.store.storeId&&(e.storeId=e._par.store.storeId),e._par.isProductPushMode?(e._mockupMainMaxWidth=e._par.pushMockupMainMaxWidth,e._mockupMainMaxHeight=e._par.pushMockupMainMaxHeight):(e._mockupMainMaxWidth=e._par.mockupMainMaxWidth,e._mockupMainMaxHeight=e._par.mockupMainMaxHeight),e.designData=new rr.a,(i=new tr).validateAddingLayer=e.validateAddingLayer.bind(e),i.getSelectedMockupVariant=e._getSelectedVariant.bind(e),i.getOrientation=e.getOrientation.bind(e),i.getDesignMeta=e._getDesignMeta.bind(e),i.getTechnique=e.getTechnique.bind(e),e._templates=new sr(i),e.allVariants=e._getAllVariants(),e._orientation=e._par.forceOrientation,e.previewMockupVariant=e._par.previewMockupVariant,e._subscribeTemplateEvents(),e._initTabContents(),e._updateExcludedPlacements(),e.generatorRepository=new p.a,(n=new jn).shouldAllowFileColorChanger=e.shouldAllowFileColorChanger.bind(e),n.getSelectedPlacementId=e.getSelectedPlacementId.bind(e),n.getSelectedPlacementTechnique=e.getSelectedPlacementTechnique.bind(e),n.designerNode=e.node,n.getNodeMainMockupArea=e.getNodeMainMockupAreaNode.bind(e),n.scheduleEmbroideryPreviewUpdate=e._scheduleEmbroideryPreviewUpdate.bind(e),n.templates=e._templates,n.editImageLayer=e._editImageLayer.bind(e),n.onLayerColorsChanged=e._onLayerColorsChanged.bind(e),n.getAvailablePlacements=e.getAvailablePlacements.bind(e),n.pickerConfig=e._par.pickerConfig,n.isAllOverProduct=e.isAllOverProduct.bind(e),n.onAllImagesProcessed=e.onAllImagesProcessed.bind(e),n.getProductOptionsPicker=e.getProductOptionsPicker.bind(e),n.isCustomizingMode=e._par.isCustomizingMode,e._embroideryHelper=new Gn(n),e.render(),e._par.autoLoad&&e._loadProduct(e._par.designerState,!0,!1,e._par.productChanged),e._par.isProductlessMode||(e._dynamicStickyFooter=new E({tabs:e._pickerTabs,content:e._pickerTabContents,ctaContent:e._getCtaFooterContent(),designerPar:e._par,secondFooter:e._nodeFooter}),e._dynamicStickyFooter.append(e.node)),e._isInitialised=!0;case 40:case"end":return t.stop()}}),t)})))()},_getCtaFooterContent:function(){var e;return this._par.isMockupGeneratorMode?[tag("div","",[tag("i","pf-i pf-i-arrow-right pf-i-24")]),tag("div","pf-ui-caption pf-bold",this._par.ctaText)]:[tag("div","",[tag("i","pf-i pf-i-cart pf-i-24")]),tag("div","pf-ui-caption pf-bold",null===(e=Object(_e.a)())||void 0===e?void 0:e.getPriceReadable())]},_getInitTechnique:function(e){var t=Object(_e.a)(),i=this._getTechniqueFromStorage()||(null==t?void 0:t.availableTechniques.slice().shift())||(null==t?void 0:t.type);if(null!=t&&t.isJewelry()&&i!==ce.a.TECHNIQUE_ENGRAVING&&(i=ce.a.TECHNIQUE_ENGRAVING),e)return i;var n=this._par.productTemplateEditorState;return n&&(this._isProductTemplateEditor()&&n.isNewTemplateEditor()||(i=null)),i},_dump:function(){var e=function(e){if(!e)return{};var t=e.position,i={id:e.uniqueId,parent:e.parentLayerUniqueId,qd:e.quickDesignId,g:e.groupId,type:"",data:"",position:Number(t.width).toFixed(4)+"x"+Number(t.height).toFixed(4)+", x"+Number(t.left).toFixed(4)+"y"+Number(t.top).toFixed(4)+", r"+Number(t.rotation).toFixed(2),flipX:e.flipX,flipY:e.flipY,pattern:e.patternType};if(e.isTextLayer())i.type=e instanceof R.a?"textbox":"text",i.data='"'+e.text.replace(/\n/," ")+'", '+Number(e.size).toFixed(1)+", "+e.color+", "+e.alignment+", "+e.getFontName();else if(e.isClipartLayer())i.type="clipart",i.data=e.clipartItem.id+", "+e.clipartItem.name+", "+e.fillColor;else if(e.isLicensedAssetLayer()){var n,r,a,o;i.type="licensed",i.data=(null===(n=e.licensedAssetItem)||void 0===n?void 0:n.type)+", "+(null===(r=e.licensedAssetItem)||void 0===r?void 0:r.status)+", "+(null===(a=e.licensedAssetItem)||void 0===a?void 0:a.id)+", "+(null===(o=e.licensedAssetItem)||void 0===o?void 0:o.externalId)}else e.temporaryFileItem?(i.type="temporaryFileItem",i.data=e.temporaryFileItem.fileId+", "+e.temporaryFileItem.filename+", "+e.temporaryFileItem.filesize+", "+e.temporaryFileItem.urlLarge):e.fileItem&&(i.type="fileItem",i.data=e.fileItem.fileId+", "+e.fileItem.filename+", "+e.fileItem.filesize+", "+e.fileItem.urlLarge);return i},t=this._templates.getActiveLayer();for(var i in this._templates._userTemplates){var n=Object.keys(this._templates._userTemplates[i]).length;if(n>0)for(var r in console.log("â”œâ”€â”¬"+i,n),this._templates._userTemplates[i]){if(Object.keys(this._templates._userTemplates[i][r]).length>0){var a=this._templates._userTemplates[i][r],o=a.layers.length;if(console.log("â”‚ â”œâ”€â”¬"+a.getKey(),"("+a.width+"x"+a.height+")",o),o>0)for(var s=0;s<o;s++){var l=e(a.layers[s]),c=t&&t.uniqueId===a.layers[s].uniqueId?"font-weight:bold;":"";console.log("â”‚ â”‚ â”œâ”€â”¬%c"+l.id+" "+l.type+(l.parent?" p:"+l.parent:"")+(l.g?" g:"+l.g:"")+(l.qd?" qd:"+l.qd:"")+" "+l.position+" flipX:"+l.flipX+" flipY:"+l.flipY+(l.pattern?" pattern:"+l.pattern:""),c),console.log("â”‚ â”‚ â”‚ â”‚%c "+l.data,"color:dimgray;"+c)}else console.log("â”‚ â”‚ â”œâ”€â”€%c(empty)","color:dimgray")}else console.log("â”‚ â”œâ”€â”€%c(empty)","color:dimgray")}else console.log("â”œâ”€â”€%c(empty)","color:dimgray")}console.log("Active Layer:",t),console.log("lastSelectedColor:",this.lastSelectedColor,"lastSelectedSize:",this.lastSelectedSize,"_shouldAllowCustomizablePush:",this._shouldAllowCustomizablePush())},_unsubscribeTemplateEvents:function(){this._templates&&this._templates.getChangeListener().unsubscribe(this._onLayerAdded).unsubscribe(this._onLayerAddedOrRemoved).unsubscribe(this._onLayerRemoved).unsubscribe(this._onLayerOrderChanged).unsubscribe(this._onTemplatePositionsChanged).unsubscribe(this._onCropStateChanged).unsubscribe(this._onActiveLayerChanged).unsubscribe(this._onTemplateResized).unsubscribe(this._checkOutOfBoundsLayers).unsubscribe(this._onPreviewChanged).unsubscribe(this.requireMockupRegenerationAndShowDesigner).unsubscribe(this.requireMockupRegeneration)},_subscribeTemplateEvents:function(){this._templates&&(this._templates.getChangeListener().addOnLayerAddedListener(this._onLayerAdded).addOnLayerAddedOrRemovedListener(this._onLayerAddedOrRemoved).addOnLayerRemovedListener(this._onLayerRemoved).addOnLayerOrderChangedListener(this._onLayerOrderChanged).addOnTemplatePositionsChangedListener(this._onTemplatePositionsChanged).addOnCropStateChanged(this._onCropStateChanged).addOnActiveLayerChanged(this._onActiveLayerChanged).addOnTemplateResizedListener(this._onTemplateResized).addOnLayerColorsChanged(this._onLayerColorsChanged).addOnZoomChanged(this._onZoomChanged).addOnLayerCustomizableStateChanged(this._checkOutOfBoundsLayers).addonPreviewChanged(this._onPreviewChanged),this._isDesignerTabsVisible()&&this._templates.getChangeListener().addOnLayerAddedOrRemovedListener(this.requireMockupRegenerationAndShowDesigner).addOnTemplatePositionsChangedListener(this.requireMockupRegenerationAndShowDesigner).addOnLayerOrderChangedListener(this.requireMockupRegeneration).addOnLayerConfigurationChanged(this.requireMockupRegenerationAndShowDesigner).addOnLayerColorsChanged(this.requireMockupRegenerationAndShowDesigner).addOnDesignFillColorChanged(this.requireMockupRegenerationAndShowDesigner))},_unsubscribeTemplateEventsIfNeeded:function(){return!Object(L.a)(this.node)&&(this._unsubscribeTemplateEvents(),!0)},_showLoader:function(e,t){this._par.onLoaderToggle?this._par.onLoaderToggle(e,t,!0):qt.a.show(e,t)},_hideLoader:function(e){I.a.removeClassName(e,"loading"),this._par.onLoaderToggle?this._par.onLoaderToggle(e,null,!1):qt.a.hide(e)},_getTechniqueFromStorage:function(){var e;return Object(k.a)(null===(e=Object(_e.a)())||void 0===e?void 0:e.productId).getTechniqueFromMemory()},_getSelectedVariant:function(){return this.previewMockupVariant},_loadProduct:function(e,t,i,n){var r,a=this;this._showLoader(this.node);var o=this._par.generatorParameters;if(this._par.productTemplateEditorState&&(i?o=null:this._par.generatorParameters=null),o)return this._productLoaded(t,i,o).then((function(){return a._hideLoader(a.node)})),!1;this.observer.emitDesignerDisabled();var s,l=Object(_e.a)(),c={productChanged:n,storeId:this._par.store.storeId,isMockupGeneratorMode:this._par.isMockupGeneratorMode,isProductPushMode:this._par.isProductPushMode,isOrderFlowMode:this._par.isOrderFlowMode,productId:(null==l?void 0:l.productId)||this._par.productId,designerState:e,excludedPlacements:this.excludedPlacements,callback:(s=Nc(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a._par.onProductLoaded&&a._par.onProductLoaded(n),e.next=3,a.waitInitialRender();case 3:return e.next=5,a._productLoaded(t,i,n);case 5:a._regionPicker&&a._updatePickersByRegion(a._regionPicker.getSelectedRegions(),[]),a._par.isProductPushMode&&null!==(r=a._par)&&void 0!==r&&null!==(o=r.product)&&void 0!==o&&o.isPhoneCase()&&(a.allVariants=a._getAllVariants(),a._renderSizePicker()),a._isLoadingProduct=!1,a._hideLoader(a.node);case 9:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)}),technique:this._technique,forceTechnique:i,forceRequest:i,forceOrientation:this._orientation,generatorDesignKey:this._par.generatorDesignKey,useGeneratedDesignRpcUrl:this._par.useGeneratedDesignRpcUrl,generatorVariant:this.previewMockupVariant,forceTemplateType:this._templateType,productOptions:this._par.pickerConfig.productOptionsValues,similarProductPushState:this._par.similarProductPushState,productTemplateEditorState:this._par.productTemplateEditorState,currency:(null==l||null===(r=l.priceRange)||void 0===r?void 0:r.currency)||null};this._isLoadingProduct=!0,this._par.useGeneratedDesignRpcUrl?this.generatorRepository.loadProduct(c):this.generatorRepository.loadGeneratorProduct(c)},_getAllVariants:function(){var e=new u.a;return e.variantItemCache?Object.values(e.variantItemCache):{}},_reloadEverything:function(){var e=new Hn.a;this._par.designerState&&(e.generatorDesignId=this._par.designerState.generatorDesignId),this._par.designerState=e,e.addFromTemplates(this._templates),this._savePlacementOptionsLocaly(),this._templates.setActiveLayer(null),this._onDesignerTabPicked(Rc.TAB_DESIGNER,!0),this._loadProduct(e,!0,!1,!0)},_productLoaded:function(e,t,i){var r=this;return Nc(regeneratorRuntime.mark((function a(){var o,s,c,d,u,h,p,g,f,_,m,v,y,b,P,C,T;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.waitInitialRender();case 2:if(Fn.a.resetGrid(),r._generatorParams=i,s=null!==(o=null==i?void 0:i.placementsWithOnlyBackgroundColor)&&void 0!==o?o:[],Object(_e.f)(s),r._par.isCustomizerEnabled=r._generatorParams.isCustomizerEnabled,r._conflictCalculator&&r._conflictCalculator.setConflictingTypes(r._generatorParams.conflictingTypes),r._placementOptions=r._generatorParams.placementOptions,r._productOptionsPicker&&r._productOptionsPicker.setPickerGeneratorPlacements(i.availablePlacements),r._templates.setRequiredDpi(i.requiredDPI),r.variantLimit=i.variantLimit&&parseInt(i.variantLimit,10)||null,r.allColors=i.colors,r.allSizes=i.sizes,r.translatedSizes=i.translatedSizes,r.regionData=i.regions,r._selectedRegionAttributes={},r._orientation||(r._orientation=i.orientation),(r._par.isProductPushMode||r._par.isMockupGeneratorMode&&r._canRenderColorPicker()&&r._canRenderSizePicker(!0))&&(r.discontinuedColors=r._getDiscontinuedColorsPerSize(i.variantMapping),r.allColors=r._getAvailableColors(i.variantMapping)),r._selectedColors.length||(i.preselectedData&&i.preselectedData.colors?(c=i.preselectedData.colors.slice(),(r._par.isOrderFlowMode||r._par.isChangePrintfileMode)&&(c=c.slice(0,1)),r._selectedColors=c):r._selectedColors=r._getDefaultSelectedColors()),d=Object(_e.a)(),u=!(null!=d&&d.canHaveSizePickerForProductTemplates()),r._isProductTemplateEditor()&&!r._selectedSizes.length&&(r._selectedSizes=u?r.allSizes.slice():i.preselectedData&&i.preselectedData.templateSelectedSizes?i.preselectedData.templateSelectedSizes.slice():[]),!r._selectedSizes.length&&r._par.isProductPushMode&&(r._selectedSizes=r._getDefaultPickerValue(n.a.TYPE_SIZE)),(!r._par.isOrderFlowMode&&!r._par.isChangePrintfileMode||r._isCreatingProductFromTemplate())&&(r._selectedSizes.length||(i.preselectedData&&i.preselectedData.sizes?(h=i.preselectedData.sizes.slice(),(r._par.isOrderFlowMode||r._par.isChangePrintfileMode)&&(h=h.slice(0,1)),r._selectedSizes=h):r._isCreatingProductFromTemplate()?r._isProductTemplateDetailsEditor()&&r._canRenderSizePicker()?r._selectedSizes=[]:r._selectedSizes=r._getDefaultSelectedSizes().slice(0,1):r._selectedSizes=r._getDefaultSelectedSizes())),r._initialSizes=r._selectedSizes,i.preselectedData&&(p=r._technique,i.preselectedData.technique?r._technique=i.preselectedData.technique:r._technique||(r._technique=r._getInitTechnique(!0)),r._isProductTemplateDetailsEditor()||p===r._technique||(Object(k.a)(null==d?void 0:d.productId).rememberLastUsedTechnique(r._technique),r._renderTextboxPicker()),r._par.pickerConfig&&i.preselectedData.optionData&&(r._par.pickerConfig.setOptionsValues(i.preselectedData.optionData),r._productOptionsPicker&&(g=new br.a(r._createProductOptionsPickerPar()),r._productOptionsPicker.setProductOptions(g),r._productOptionsPicker.render()))),r.designData=i.designData,r.designData.store=r._par.store,r.designData.product=d,r._isProductTemplateEditor()&&(f=r._par.productTemplateEditorState.sourceProductTemplate,i.preselectedData.templateSelectedSizes?r.designData.templateSelectedSizes=i.preselectedData.templateSelectedSizes.slice():r.designData.templateSelectedSizes=f?(f.sizes||[]).slice():u?[]:r._selectedSizes.slice()),r._placementOptions&&(r.designData.rawPlacementOptions=r._placementOptions.getData()),r._templates.silentlyRemoveAllTemplates(),r._templates.silentlyCopyLayers(i.calculatedPositions),t&&(r._templates.silentlyRemoveAllLayers(),r._productOptionsPicker=null,r._renderProductOptions()),e&&r._par.designerState&&r._templates.silentlySetDesignerState(r._par.designerState),r._selectedVariantCount=0,r._allSelectedVariantCount=0,Fn.a.isZoomedIn=!1,r._setHideEmptyPlacements(i.calculatedPositions),!r._placementSelector){a.next=49;break}if(r._priceCalculator=new l.b(d,i.pricesCollection),r._priceCalculator.setAvailablePlacements(i.availablePlacements),_=r._getLicensedAssetIdsByPlacement(),!Object.keys(_).length){a.next=48;break}return a.next=48,Object(yo.d)(_).then((function(e){r._priceCalculator.setLicensedAssetsPrice(e)}));case 48:r._placementSelector.setPlacements(r._generatorParams.availablePlacements);case 49:if(r._isProductTemplateDetailsEditor()?r._shouldUseFullTemplateEditor()&&(m=i.preselectedData.sizes||[],r._disabledSizes=r.allSizes.filter((function(e){return!m.includes(e)}))):(r._renderLayerPickerChooser(),r._renderLayerPicker(),r._renderOrientationPicker(),r._renderClipartPicker(),r._renderQuickDesignPicker(),r._renderLicensedAssetPicker(),r._renderEmbroideryImagePicker(),r._renderPatternPicker()),r._renderPickerTabs(),r._onProductLoadedShowDesignTab&&(r.showDesignTab(),r._onProductLoadedShowDesignTab=!1),r._par.isChangePrintfileMode||(!r._regionPicker&&r._isProductTemplateDetailsEditor()&&r._renderRegionPicker(),r._isProductTemplateDetailsEditor()||r._par.isProductlessMode||r._renderTechniquePicker(),r._renderColorPicker(),r._renderSizePicker(),r._renderAvailabilityWarning()),r._isProductTemplateDetailsEditor()||r._par.isProductlessMode||r._renderInlineProductPicker(),v=r._templates.getUsedFonts(),e&&r._shouldPreloadFonts()||_o.a.isDesignCachedInSession()?r._preloadFontsAndSetActiveLayer(v,r.onFontsPreloaded.bind(r,v)):r._onFontsPreloadedFinal(),r._get3dViewConfigObject()&&e&&(r._show3dViewWarningAlert=!0),0===v.length&&r._removeCustomizerDataFromAllLayers(),y=!!document.documentMode,!e||!r._par.isMockupGeneratorMode||y){a.next=75;break}if(b=window.location.search,P=new URLSearchParams(b),C=null==P?void 0:P.get("quick-design"),T=null==P?void 0:P.get("licensed-asset"),!C){a.next=68;break}r._addQuickDesignById(parseInt(C)),a.next=75;break;case 68:if(!T){a.next=75;break}if(isNaN(T)||r._isLicensedAssetPickerDisabled()){a.next=74;break}return a.next=72,r._licensedAssetPicker.getLicensedAssetById(parseInt(T));case 72:a.next=75;break;case 74:isNaN(T)&&!r._isLicensedAssetPickerDisabled()&&(setTimeout(r._showPickerTab.bind(r,Rc.TAB_LICENSEDASSET,T),10),r._licensedAssetPicker.getLicensedAssetsByKeyword(T));case 75:_o.a.isDesignCachedInSession()&&r.showDesignTab();case 76:case"end":return a.stop()}}),a)})))()},displayTemplateSizeChangeWarningIfNeeded:function(){var e,t=this;if((null===(e=Object(_e.a)())||void 0===e?void 0:e.productId)===ce.a.ID_GILDAN_18500&&this._par.designerState&&(this._par.existingVariants||this._par.orderLineItem)&&(!this._par.existingVariants||this._par.designerState.generatorDesignId)){var i=this._templates.getUserTemplate(this.getSelectedPlacementId(),this._getSelectedVariant().templateId);if(i){var n=[];if(this._par.existingVariants){var r=this._par.existingVariants.filter((function(e){return e.designId===t._par.designerState.generatorDesignId}));if(!(r&&r.length&&r[0].orderLineItem&&r[0].orderLineItem.design&&r[0].orderLineItem.design.templates))return;n=r[0].orderLineItem.design.templates}else if(this._par.orderLineItem){if(!this._par.orderLineItem.design||!this._par.orderLineItem.design.templates)return;n=this._par.orderLineItem.design.templates}var a=n.find((function(e){return e.placementId===t.getSelectedPlacementId()&&(e.width===i.width&&e.height===i.height||e.height===i.width&&e.width===i.height)}));if(a||(a=n.find((function(e){return e.placementId===t.getSelectedPlacementId()}))),a&&(a.width!==i.width&&a.width!==i.height||a.height!==i.height&&a.height!==i.width)){var o=Math.round(100*i.width)/100,s=Math.round(100*i.height)/100,l=[tag("div","pf-h4",dlang("generator",'We changed our recommended print file size to {width}"x{height}"').replace("{width}",o).replace("{height}",s)),tag("div","",dlang("generator",'You can adjust your design to the new size and save the changes. If you donâ€™t want to make any changes, close the editor and weâ€™ll scale your current print file to {width}"x{height}"â€”the placement only appears misaligned in the editor; your product will be printed as normal.').replace("{width}",o).replace("{height}",s))];new ae.a(l,"warning",!1,!0,!0,null).prepend(this._nodeMainMockupArea)}}}},onFontsPreloaded:function(e,t){var i=this;return Nc(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t||(t=i._onFontsPreloadedFinal),n.next=3,i.waitInitialRender();case 3:i.shouldAllowTextboxLayer()||t&&t(),r=e.filter((function(e){return!Object(me.getPFCanvasFonts)().LOADED_TTF_FONTS.hasOwnProperty(e.fontKey)})),a=0,r.length>0?r.forEach((function(e){ue.a.loadTTFFont(e.fontKey,e["path-ttf"],"",(function(){++a===r.length&&t&&t()}))}),i):t&&t();case 7:case"end":return n.stop()}}),n)})))()},_onFontsPreloadedFinal:function(){var e=this;return Nc(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.waitInitialRender();case 2:e._par.isChangePrintfileMode?e._processVariantData():e._regionPicker||e._par.isProductlessMode||(e._renderRegionPicker(),e._regionPicker&&e._updatePickersByRegion(e._regionPicker.getSelectedRegions(),[])),(i=e._templates.hasLayers())&&e._setDefaultActiveLayer(!0),e._processEmbroideryDesign(e.updateView.bind(e)),i&&(e._colorizeClipartLayers(),e._removeCustomizerDataFromAllLayers()),e._par.onReady&&e._par.onReady(),setTimeout(function(){this.observer.emitDesignerReady(),this._disableAddDesignTabIfNeeded(),this._par.disableDesignerLeaveWarning||this._isProductTemplateEditor()||new r.a(this._templates,this._par.isModalDesigner,this._placementOptions)}.bind(e),1);case 9:case"end":return t.stop()}}),t)})))()},_processEmbroideryDesign:function(e){var t=this;return Nc(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.waitInitialRender();case 2:t.shouldAllowFileColorChanger()||t._embroideryHelper.customizingDesignWithNewEmbroideryColorPicker()?t._templates.hasLayers()?t._embroideryHelper.canSwitchToNewEmbrColorPicker()?t._embroideryHelper.switchToNewEmbrColorPicker():t._embroideryHelper.colorizeEmbroideryLayers():e&&e():(e&&e(),t._generatorParams.availablePlacements.filter((function(e){return e.technique===ce.a.TECHNIQUE_EMBROIDERY})).forEach(function(e){this._updateEmbroideryColorsForPlacement(e.id)}.bind(t)),t._tryApplyingEmbroideryColorization());case 3:case"end":return i.stop()}}),i)})))()},_processVariantData:function(){var e,t=this,i=new u.a,n=null===(e=Object(_e.a)())||void 0===e?void 0:e.productId,r=i.getCachedVariantsByProductId(n);r.length?setTimeout(function(){this._setChangePrintFileAttributes(r)}.bind(this),1):i.getVariants(n,(function(e,i){t._setChangePrintFileAttributes(i)}))},_shouldPreloadFonts:function(){return!(!this._par.designerState&&!this._par.productTemplateEditorState)&&(this._par.isOrderFlowMode||this._par.isChangePrintfileMode||!!this._par.similarProductPushState||!!this._par.productTemplateEditorState||this._par.isCustomizingMode||this._par.isProductPushMode)},_preloadFontsAndSetActiveLayer:function(e,t){var i=e.filter((function(e){return!j.a.hasFontLoaded(e.fontKey)})),n=0;i.length>0?i.forEach((function(e){Object(me.loadJSFontFrontend)(e.fontKey,(function(){++n===i.length&&t&&t()}))})):t&&t()},_setDefaultActiveLayer:function(e){var t=this._getSelectedVariant(),i=t?t.templateId:null,n=this._templates.getActiveLayer()||this._templates.getFirstLayer(this.getSelectedPlacementId(),i);if(n){var r=this._templates.getTemplateByLayer(n);e?this._templates.silentlySetActiveLayer(n):this._templates.setActiveLayer(n,null),r&&r.placementId&&this._placementSelector.setSelectedPlacementById(r.placementId),n instanceof x.a&&this._onClipartColorChanged(n)}},_setChangePrintFileAttributes:function(e){var t,i,n=[];for(t in this._selectedColors=[],this._selectedSizes=[],e)for(i in this._par.existingVariants)e[t].variantId===this._par.existingVariants[i].variantId&&(-1===this._selectedSizes.indexOf(e[t].size)&&this._selectedSizes.push(e[t].size),-1===n.indexOf(e[t].color)&&n.push(e[t].color));for(t in this.allColors)for(i in n)this.allColors[t].color===n[i]&&this._selectedColors.push(this.allColors[t]);var r=this.getSelectedGeneratorVariants();this.generatorVariants=r.generatorVariants,this._selectedVariantCount=r.variantCount;var a=this._par.defaultPlacementId?this.getGeneratorVariantByPlacementId(this._par.defaultPlacementId,!0):this.generatorVariants[0];this.setPreviewMockupVariant(a),this._templates.setActiveLayerFromTemplate(a.placementId,a.templateId),this.setActivePlacement(a.placementId),this._renderMockupMainArea()},_getAvailableColors:function(e){var t,i=[],n=kc(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;!r.discontinued&&i.indexOf(r.color)&&i.push(r.color)}}catch(e){n.e(e)}finally{n.f()}var a=this.allColors;for(var o in a){var s=a[o];i.includes(s.color)||delete a[o]}return a},_getDefaultPickerValue:function(e,t){var i="",r=this._par.pickerConfig;switch(e){case n.a.TYPE_COLOR:var a=r.colorConfig.defaultValue||"";for(var o in this.allColors){var s=this.allColors[o];if(a===s.color){i=s;break}}break;case n.a.TYPE_SIZE:i=r.sizeConfig.defaultValue||"",this.allSizes.indexOf(i)<0&&(i="");break;case n.a.TYPE_PRODUCT_OPTIONS:var l=r.productOptionsValues?r.productOptionsValues:this._productOptionsPicker?this._productOptionsPicker.getValues():{};return t?l[t]:l}return i?[i]:[]},_initTabContents:function(){this._pickerTabContents[Rc.TAB_PRODUCT]=tag("div"),this._pickerTabContents[Rc.TAB_DESIGN]=tag("div"),this.shouldAllowTextboxLayer()?this._pickerTabContents[Rc.TAB_TEXTBOX]=tag("div"):this._pickerTabContents[Rc.TAB_TEXT]=tag("div"),this._pickerTabContents[Rc.TAB_IMAGE]=tag("div"),this._pickerTabContents[Rc.TAB_CLIPART]=tag("div"),this._pickerTabContents[Rc.TAB_MOCKUPS]=tag("div"),this._pickerTabContents[Rc.TAB_QUICKDESIGN]=tag("div"),this._pickerTabContents[Rc.TAB_LICENSEDASSET]=tag("div"),this._designerTabContents[Rc.TAB_DESIGNER]=tag("div"),this._designerTabContents[Rc.TAB_PREVIEW]=tag("div"),this._designerTabContents[Rc.TAB_3D]=tag("div")},_isProductTemplateEditor:function(){return this._par.productTemplateEditorState&&this._par.productTemplateEditorState.isTemplateEditFlow()},_isCreatingProductFromTemplate:function(){return this._par.productTemplateEditorState&&this._par.productTemplateEditorState.isProductCreateFlow()},_isProductTemplateDetailsEditor:function(){return this._isCreatingProductFromTemplate()&&this._par.productTemplateEditorState.useSimpleDesigner},render:function(){var e=this._isProductTemplateDetailsEditor();if(e&&(this._par.arePickersVisible=!0),this._nodeProductOptions=tag("div"),this._renderProductOptions(),this._placementSelector=new Zn(e?function(){}:this._onPlacementSelectorChanged,this._getPlacementPrices()),!e){var t=Object(_e.a)();null!=t&&t.isAdvancedInsideLabelAllowed()&&(this._labelSwitcher=new Kn),this._conflictCalculator=new vr(this._placementSelector,this._templates),this._placementLimiter=new Nr.a(this._templates,this._placementSelector,this._par.isMockupGeneratorMode),this.shouldAllowTextboxLayer()?(this._nodeTextboxPicker=tag("div"),this._renderTextboxPicker()):(this._nodeTextPicker=tag("div"),this._renderTextPicker()),this._nodeInlineProductPicker=tag("div"),this._nodeEmbroideryImagePicker=tag("div"),this._nodePatternPicker=tag("div","pf-mt-12"),this._nodeLayerPicker=tag("div","pf-mb-24"),this._nodeDesignFillColorPickerWarning=tag("div","pf-mb-24"),this._nodeDesignFillColorPicker=PF.Customer.abTestBgFill()?tag("div","pf-px-8 product-push__design-fill-color-picker"):tag("div","pf-mb-24 pf-px-8 product-push__design-fill-color-picker"),this._nodeClipartPicker=tag("div","pf-mb-24"),this._nodeMockupPicker=tag("div","pf-mb-24"),this._nodeQuickDesignPicker=tag("div","pf-mb-24"),this._nodeLicensedAssetPicker=tag("div","pf-mb-24"),this._nodeOrientationPicker=tag("div","pf-mb-24"),this._nodeLayerPickerChooser=tag("div"),this._nodeAddidasBannerProductTab=tag("div","pf-my-24"),this._nodeAddidasBannerDesignTab=tag("div","pf-my-24"),this._nodeAdvancedTemplatePicker=tag("div","pf-px-8 pf-mt-24"),this._nodeTechniquePicker=tag("div"),this._renderTechniquePicker()}this._nodeRegionPicker=tag("div"),this._renderRegionPicker(),this._nodeAvailabilityWarning=tag("div"),this._renderAvailabilityWarning(),this._nodeColorPicker=tag("div"),this._renderColorPicker(),this._nodeAvailability=tag("div"),this._renderAvailability(),this._nodeUsedColors=tag("div"),this._renderUsedColors(),this._nodeSizePicker=tag("div"),this._renderSizePicker(),this._nodeVariantWarning=tag("div","product-push__variant-warning"),this._renderVariantWarning(),this._nodeDiscontinuedWarning=tag("div","product-push__discontinued-warning"),this._renderDiscontinuedWarning(),this._nodeUnavailableSizeColorWarning=tag("div"),this._renderUnavailableSizeColorWarning(),this._nodeExistingVariantsWarning=tag("div","product-push__existing-warning"),this._renderExistingVariantsWarning(),this._nodePickerTabs=tag("div"),this._nodePickerTabContents=tag("div"),e||this._renderPickerTabs(),this._renderPickerTabContents(),this._renderDetailsEditor(),this._renderFull()},_renderDetailsEditor:function(){if(this._isProductTemplateDetailsEditor()){var e=[this._nodeRegionPicker,this._nodeAvailability,this._nodeAvailabilityWarning,this._nodeColorPicker,this._nodeSizePicker,this._nodeVariantWarning,this._nodeDiscontinuedWarning,this._nodeUnavailableSizeColorWarning,this._nodeExistingVariantsWarning,this._nodeUsedColors];tag("div","row pf-mb-0",[tag("div","col-md-12 pf-mt-8 pf-mb-48",[this._nodePickerTabContents])]).append(this.node),this._buildPickerTabContent(Rc.TAB_PRODUCT,e),this._renderFooter()}},_renderFull:function(){if(!this._isProductTemplateDetailsEditor()){var e=Object(_e.a)();this._nodeVideoTutorial=tag("div"),this._renderVideoTutorial(),this._nodeDesignerTabContents=tag("div"),this._renderDesignerTabContents(),this._nodeDesignerTabs=tag("div"),this._activeDesignerTabId=Rc.TAB_DESIGNER,this._showDesignerTab(this._activeDesignerTabId),this._par.isOrderFlowMode||this._par.isCustomizingMode?this._nodeMockupArea=tag("div","row",[this._placementSelector,!(null==e||!e.isAdvancedInsideLabelAllowed())&&this._labelSwitcher,this._nodeMainMockupArea=tag("div","main-mockup-area"),this._nodeMockupVariantArea=tag("div","hidden")]):this._nodeMockupArea=tag("div","",[this._placementSelector,!(null==e||!e.isAdvancedInsideLabelAllowed())&&this._labelSwitcher,this._nodeMainMockupArea=tag("div",{className:"main-mockup-area "+(this._isEmpty()?"main-mockup-area--empty-mockup":""),style:{position:"relative"}}),tag("div","pf-mb-8"),this._nodeMockupVariantArea=tag("div")]),tag("div","row pf-mb-0",[this._par.arePickersVisible?this._nodeLayerPickerCol=tag("div","col-12 col-md-4 pf-mt-md-8 pf-mb-md-48",[this._nodePickerTabs,this._nodePickerTabContents]):"",this._nodeDesignerCol=tag("div","col-12 "+(this._par.arePickersVisible?"col-md-8":""),[this._nodeDesignerTabs,this._nodeDesignerTabContents])]).append(this.node);var t=[this._nodeInlineProductPicker,this._nodeOrientationPicker,this._nodeRegionPicker,this._nodeAvailability,this._nodeTechniquePicker,this._nodeAvailabilityWarning,this._nodeColorPicker,this._nodeSizePicker,this._nodeProductOptions,this._nodeVariantWarning,this._nodeDiscontinuedWarning,this._nodeUnavailableSizeColorWarning,this._nodeExistingVariantsWarning,this._nodeLayerPickerChooser,this._nodeUsedColors,this._nodeAddidasBannerProductTab],i=[this._nodeLayerPicker,this._nodeDesignFillColorPickerWarning,this._nodeDesignFillColorPicker,this._nodeAddidasBannerDesignTab],n=[tag("a",{className:"pf-link-block",onclick:this.showDesignTab.bind(this)},[tag("i","pf-i pf-i-chevron-left pf-i-24 pf-text-muted"),tag("span","pf-pl-4",lang("Back to design tools"))]),tag("hr","pf-my-12"),this._nodeEmbroideryImagePicker,this._nodePatternPicker];this._buildPickerTabContent(Rc.TAB_PRODUCT,t),this._buildPickerTabContent(Rc.TAB_DESIGN,i),this.shouldAllowTextboxLayer()?this._buildPickerTabContent(Rc.TAB_TEXTBOX,[this._nodeTextboxPicker]):this._buildPickerTabContent(Rc.TAB_TEXT,[this._nodeTextPicker]),this._buildPickerTabContent(Rc.TAB_IMAGE,n),this._buildPickerTabContent(Rc.TAB_CLIPART,[this._nodeClipartPicker]),this._buildPickerTabContent(Rc.TAB_MOCKUPS,[this._nodeMockupPicker]),this._buildPickerTabContent(Rc.TAB_QUICKDESIGN,[this._nodeQuickDesignPicker]),this._buildPickerTabContent(Rc.TAB_LICENSEDASSET,[this._nodeLicensedAssetPicker]),this._buildDesignerTabContent(Rc.TAB_DESIGNER,[this._nodeMockupArea]),this._buildDesignerTabContent(Rc.TAB_PREVIEW,[this._nodePreviewArea=tag("div")]);var r=this._par.productTemplateEditorState;(this._par.isMockupGeneratorMode||this._par.isProductPushMode||!this._par.isOrderFlowMode||r)&&this._renderFooter(),null!=e&&e.shouldShowAdidasBanner()&&this._renderAdidasBannerTabs(),window.removeEventListener("resize",this._onWindowResizeThrottle,!1),window.addEventListener("resize",this._onWindowResizeThrottle,!1)}},_onWindowResizeThrottle:function(){P.a.delay("designer-window-resize",this._onWindowResize.bind(this),50)},_onWindowResize:function(){if(!this._zoomInLoading&&Object(L.a)(this._nodeMainMockupArea)&&(this._process3dAreaAfterResize(),this._mockup&&this._mockup.getMockup()&&this._mockup.getMockup().node)){var e=this._mockup.getMockup(),t=e.node.parentNode,i=e.node,n=this._par.isProductPushMode?this._par.pushMockupMainMaxWidth:this._par.mockupMainMaxWidth,r=t.clientWidth!==t.scrollWidth,a=i.clientWidth!==n&&t.clientWidth>i.clientWidth+100;(r||a)&&this._onResize(50)}},getNodeMainMockupAreaNode:function(){return this._nodeMainMockupArea||null},append:function(e){var t=this;return this.node.append(e),this.waitInitialRender().then((function(){var e;t._renderFooter(),t._renderLayerPickerChooser(),null===(e=t._layerPicker)||void 0===e||e.render(),t._updateChooserDisablingOptions()})),this},_buildPickerTabContent:function(e,t){for(var i in t)t[i].append(this._pickerTabContents[e])},_buildDesignerTabContent:function(e,t){for(var i in t)t[i].append(this._designerTabContents[e])},_getPlacementPrices:function(){return this._par.isOrderFlowMode?this._par.pickerConfig.placementPrices:null},_getDiscontinuedColorsPerSize:function(e){var t,i,n={},r={},a=kc(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;(t=o.size)in n||(n[t]=[]),n[t].push(o.color),o.discontinued&&(t in r||(r[t]=[]),r[t].push(o.color))}}catch(e){a.e(e)}finally{a.f()}for(var s in this.allColors){var l=this.allColors[s].color;for(t in n)-1===n[t].indexOf(l)&&(t in r||(r[t]=[]),r[t].push(l))}return r},_renderInlineProductPicker:function(){if(this._par.arePickersVisible){I.a.clearNode(this._nodeInlineProductPicker);var e=Ee;e.onProductPickedCallback=this._onProductPickedFromPicker,e.isProductPickable=!this._par.isProductPushMode&&!this._par.isOrderFlowMode&&!this._par.productTemplateEditorState,e.isSync=this._par.isProductPushMode,new Ve(e).append(this._nodeInlineProductPicker)}},_renderPickerTabs:function(){var e=this;if(this._par.arePickersVisible){if(!this._pickerTabs){I.a.clearNode(this._nodePickerTabs);var t=new Mt.a("primary top-icons tabs-justify pf-tabs-generator-mobile"+(this._par.isProductlessMode?"":" pf-mb-md-24"));this._pickerTabs=t,this._par.isProductlessMode||t.add({caption:dlang("generator","Product"),icon:tag("i","pf-i pf-i-tshirt-crew-outline pf-i-24"),customId:Rc.TAB_PRODUCT,onclick:this.showProductTab.bind(this)});var i=!1;this._isProductTemplateDetailsEditor()||this._par.isProductlessMode||t.add({caption:dlang("generator","Design"),icon:tag("i","pf-i pf-i-palette-outline pf-i-24"),customId:Rc.TAB_DESIGN,onclick:function(){i||(m.a.trackClickedOnDesignTab(e._par.isModalDesigner,e._par),i=!0),e.showDesignTab()}}),t.append(this._nodePickerTabs)}if(this._par.isProductlessMode){var n,r,a;this._generatorParams=this._par.generatorParameters;var o=null!==(n=null===(r=this._par)||void 0===r||null===(a=r.generatorParameters)||void 0===a?void 0:a.placementsWithOnlyBackgroundColor)&&void 0!==n?n:[];Object(_e.f)(o),this.showDesignTab()}else this.showProductTab()}},_renderDesignerTabs:function(){var e=this;if(!this._isProductTemplateDetailsEditor()&&this._nodeDesignerTabs){I.a.clearNode(this._nodeDesignerTabs);var t=!this._templates.hasLayers()&&!this._hasPlacementWithDesignFillColor();if(this._isDesignerTabsVisible()&&!t&&(this._selectedSizes.length||this._selectedColors.length)&&0!==this.getSelectedGeneratorVariants(!1).generatorVariants.length){var i=new Mt.a("secondary");i.add({caption:this._getTemplateTabName(),isActive:this._activeDesignerTabId===Rc.TAB_DESIGNER,customId:Rc.TAB_DESIGNER,onclick:this._onDesignerTabPicked.bind(this,Rc.TAB_DESIGNER)}),this._canRender3dViewTab()&&i.add({caption:tag("div","",[dlang("generator","3D view"),tag("span","pf-badge pf-badge-small pf-badge-new pf-badge--primary pf-badge-new pf-ml-4",clang("Badge","New"))]),isActive:this._activeDesignerTabId===Rc.TAB_3D,customId:Rc.TAB_3D,onclick:this._on3dViewTabClick.bind(this)}),this._isMockupViewAvailable()&&i.add({caption:dlang("generator","Mockup view"),isActive:this._activeDesignerTabId===Rc.TAB_PREVIEW,customId:Rc.TAB_PREVIEW,onclick:function(){e._onDesignerTabPicked(Rc.TAB_PREVIEW);var t=e._getSelectedMappings();e.generatorRepository.getGeneratorVariants(t,(function(t){e._generatorParams.generatorVariants=Object.assign(e._generatorParams.generatorVariants,t),e._showMockupPreview()}))}}),tag("div","pf-mb-12 text-center",[i]).append(this._nodeDesignerTabs)}}},_on3dViewTabClick:function(){var e;this._activeDesignerTabId!==Rc.TAB_DESIGNER&&this._onDesignerTabPicked(Rc.TAB_DESIGNER,!0),this._activeDesignerTabId=Rc.TAB_3D,this._needToShow3dTab=!0,this._rearrangeNodesFor3dView(!0),this._onAfterDesignerTabChanged(),null===(e=this._live3dView)||void 0===e||e.scheduleDesignReload()},_onAfterDesignerTabChanged:function(){this._par.onActiveDesignerTabChanged&&this._par.onActiveDesignerTabChanged(this._activeDesignerTabId)},_canRender3dViewTab:function(){var e=this._get3dViewConfigObject(),t=Vn.getNeededPlacementId(e);return e&&this.hasDesignForPlacement(t)},_save3dViewCanvasImagesIfNeeded:function(e,t){var i=this._get3dViewConfigObject(),n=this._getCanvasObject();if(i&&n){(this._needToShow3dTab||this._activeDesignerTabId===Rc.TAB_3D)&&(this._show3DPreview(),this._needToShow3dTab=!1);var r,a=this._templates.getTemplatesByPlacement(e.placementId);for(var o in a)r=xn.a.getPreviewString(a[o].getKey()+t),Vn.savePlacementImage(this.getSelectedPlacementId()+"_"+a[o].templateId,r);Vn.savePlacementImage(this.getSelectedPlacementId(),r)}},_rearrangeNodesFor3dView:function(e,t){this._node3DArea||(this._node3DArea=tag("div","live-3d-view-container col-lg-3 order-1 order-lg-2 pf-p-0")),this._nodeLayerPickerCol&&this._nodeDesignerCol&&this._nodeMainMockupArea&&(e?(I.a.addClassName(this._nodeLayerPickerCol,"pf-d-none"),I.a.removeClassName(this._nodeDesignerCol,"col-md-8"),I.a.addClassName(this._nodeDesignerCol,"col-md-12"),I.a.addClassName(this._nodeMainMockupArea,"main-mockup-area--with-3dview")):(I.a.removeClassName(this._nodeLayerPickerCol,"pf-d-none"),I.a.removeClassName(this._nodeDesignerCol,"col-md-12"),I.a.addClassName(this._nodeDesignerCol,"col-md-8"),I.a.removeClassName(this._nodeMainMockupArea,"main-mockup-area--with-3dview"),this._node3DArea.remove()),this.hasDesignForPlacement(this.getSelectedPlacementId())?t||this._renderMockupMainArea():this.renderEmptyMockup(this._getSelectedVariant()))},_process3dAreaAfterResize:function(){var e,t,i,n,r=this._get3dViewConfigObject();if(r){var a=Vn.getDimensions(r),o=(null===(e=this._live3dView)||void 0===e||null===(t=e.dimensions)||void 0===t?void 0:t.width)||-1,s=(null===(i=this._live3dView)||void 0===i||null===(n=i.dimensions)||void 0===n?void 0:n.height)||-1;(o!==a.width||s!==a.height)&&(this._update3dStatus(Vn.STATUS_RELOAD_MODEL),this._activeDesignerTabId===Rc.TAB_3D&&this._show3DPreview(),this._dropZoneArea.repositionDropAreafor3dCombo())}},_get3dViewConfigObject:function(){var e,t=null===(e=this._getSelectedVariant())||void 0===e?void 0:e.templateId;return Vn.getMapObject(t)},_isMockupViewAvailable:function(){var e=this,t=this.getAvailablePlacements().map((function(e){return e.id})).filter((function(t){return e.hasDesignForPlacement(t)}));return Object.values(this._generatorParams.generatorVariants).filter((function(e){return t.indexOf(e.placementId)>-1&&e.role!==fr.a.ROLE_TEMPLATE&&e.role!==fr.a.ROLE_ADVANCED_TEMPLATE})).length>0},_isDesignerTabsVisible:function(){var e=Object(_e.a)();return!this._par.isCustomizingMode&&e&&(e.isMug()||e.isDrinkware()||e.isSublimation()||e.isCutSew()||e.isCanvas()||e.isPoster()||e.isFramedPoster()||e.isSticker()||this._isEngraving())},_onDesignerTabPicked:function(e,t){this._activeDesignerTabId!==e?(this._activeDesignerTabId=e,this._onBeforeSwitchToTab(e,t),t||this._renderDesignerTabs(),this._showDesignerTab(e),this._onAfterDesignerTabChanged()):t||this._renderDesignerTabs()},_onBeforeSwitchToTab:function(e,t){var i,n;(null===(i=this._mockup)||void 0===i||i.applyCropIfNeeded(),e!==Rc.TAB_3D)&&(null===(n=this._live3dView)||void 0===n||n.stopAnimate(),this._rearrangeNodesFor3dView(!1,t))},_renderPickerTabContents:function(){for(var e in this._pickerTabContents)this._pickerTabContents[e].append(this._nodePickerTabContents)},_renderDesignerTabContents:function(){for(var e in this._designerTabContents)this._designerTabContents[e].append(this._nodeDesignerTabContents)},_showPickerTab:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this._par.arePickersVisible){for(var i in this._pickerTabContents)i===e?I.a.removeClassName(this._pickerTabContents[i],"hidden"):I.a.addClassName(this._pickerTabContents[i],"hidden");var n=e===Rc.TAB_PRODUCT?e:Rc.TAB_DESIGN;this._pickerTabs.markTabAsSelectedById(n),n===Rc.TAB_PRODUCT?this._isProductTemplateDetailsEditor()||(this._templates.setActiveLayer(null,null,!0),this._renderLayerPickerChooser()):(!this._templates.hasLayersForPlacement(this.getSelectedPlacementId())||this._templates.getActiveLayer()&&this._templates.getActiveGroupLayers()||this._templates.setActiveLayerFromTemplate(this.previewMockupVariant.placementId,this.previewMockupVariant.templateId),this._renderLayerPicker()),e===Rc.TAB_CLIPART?this._clipartPicker.renderGroups():e===Rc.TAB_QUICKDESIGN?this._quickDesignPicker.renderGroups():e===Rc.TAB_LICENSEDASSET&&t?this._licensedAssetPicker.renderItems():e===Rc.TAB_MOCKUPS?this._renderMockupPicker():e===Rc.TAB_IMAGE&&this._patternPicker&&this._patternPicker.resubscribeToEvents(),this._mockup&&this._mockup.renderMirrorCheckbox(this._templates.getActiveLayer(),e===Rc.TAB_IMAGE),Object(L.b)()&&y()(".tooltip").tooltip("hide"),T.l(E.EVENT_UPDATE_MOBILE_FOOTER,e)}},_showDesignerTab:function(e){for(var t in this._designerTabContents)t===e?I.a.removeClassName(this._designerTabContents[t],"hidden"):I.a.addClassName(this._designerTabContents[t],"hidden");T.l(E.EVENT_UPDATE_MOBILE_FOOTER)},_showMockupPreview:function(){if(this._shouldRegeneratePreview){I.a.clearNode(this._nodePreviewArea);var e=this.getDesignData(),t=null;e.generatorVariants.length?this._par.isCustomizingMode||this._productOptionsPicker&&this._productOptionsPicker.hasValidOptions()?(this.isFileLimitExceeded(M.a)||this.isFileLimitExceeded(Te.a))&&(t=this.getFileLimitExceededText()):t=e.product.isEmbroidery()?dlang("generator","Please select thread colors!"):dlang("generator","Please select product options!"):t=dlang("generator","Please select size, color and at least one file!"),null===t&&(this._shouldRegeneratePreview=!1),new Mn.a(e,t).append(this._nodePreviewArea),t&&(this._productOptionsPicker.updateErrorStatus(),this.showProductTab()),T.l(E.EVENT_UPDATE_MOBILE_FOOTER)}},_update3dStatus:function(e,t){var i;!t&&this._3dStatus<=e||(this._3dStatus=e,e===Vn.STATUS_RELOAD_MODEL&&(this._show3dViewWarningAlert=!0,null===(i=this._live3dView)||void 0===i||i.reset3dModelLoaded()))},_show3DPreview:(Dc=Nc(regeneratorRuntime.mark((function e(t){var i,n,r,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._live3dView||this._3dStatus===Vn.STATUS_RELOAD_MODEL||this._3dStatus===Vn.STATUS_RELOAD_MODEL_PROCESSING){e.next=12;break}e.t0=this._3dStatus,e.next=e.t0===Vn.STATUS_RELOAD_PRINTFILE?4:e.t0===Vn.STATUS_NO_CHANGES?7:9;break;case 4:return e.next=6,null===(i=this._live3dView)||void 0===i?void 0:i.reloadDesign();case 6:return e.abrupt("break",9);case 7:return null===(n=this._live3dView)||void 0===n||n.startAnimate(),e.abrupt("break",9);case 9:this._update3dStatus(Vn.STATUS_NO_CHANGES,!0),e.next=13;break;case 12:this._3dStatus===Vn.STATUS_RELOAD_MODEL&&(this._update3dStatus(Vn.STATUS_RELOAD_MODEL_PROCESSING,!0),null===(r=this._live3dView)||void 0===r||r.stopAnimate(),this._loaded3dObj=null,I.a.clearNode(this._node3DArea),(a=new Qo).getCanvasObj=this._getCanvasObject.bind(this),a.loadingNode=this._node3DArea,a.getSelectedVariant=this._getSelectedVariant.bind(this),a.getDesignData=this.getDesignData.bind(this),a.getLoaded3dObj=function(){return o._loaded3dObj},a.getSelectedPlacementId=this.getSelectedPlacementId.bind(this),a.on3dObjectLoaded=this._on3dObjectLoaded.bind(this),a.showWarningAlert=this._show3dViewWarningAlert,a.onWarningAlertClose=function(){this._show3dViewWarningAlert=!1}.bind(this),t||qt.a.show(this._node3DArea),this._live3dView=new Zo(a),this._live3dView.append(this._node3DArea));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return Dc.apply(this,arguments)}),_getCanvasObject:function(){var e,t,i;return null===(e=this._mockup)||void 0===e||null===(t=e.getMockup())||void 0===t||null===(i=t.getCanvas())||void 0===i?void 0:i.getCanvas()},_on3dObjectLoaded:function(e,t){this._loaded3dObj=e,this._3dObjUniqueId=t,this._update3dStatus(Vn.STATUS_NO_CHANGES,!0)},requireMockupRegeneration:function(){this._shouldRegeneratePreview=!0,this._update3dStatus(Vn.STATUS_RELOAD_PRINTFILE)},requireMockupRegenerationAndShowDesigner:function(e){var t=Array.prototype.slice.call(arguments).some((function(e){return e&&e.skipMockupRegeneration})),i=Array.prototype.slice.call(arguments).some((function(e){return e&&e.skipSwitchToDesignerTab}));t||this.requireMockupRegeneration(),this._activeDesignerTabId===Rc.TAB_3D||i||this._onDesignerTabPicked(Rc.TAB_DESIGNER),e||this._renderFooter()},setMockupControlsVisibility:function(e){this._mockup&&this._mockup.updateControlsVisibility(e)},showProductTab:function(){this._showPickerTab(Rc.TAB_PRODUCT),this._disableAddDesignTabIfNeeded()},showDesignTab:function(){this._getSelectedVariant()&&this._technique!==ce.a.TYPE_STOCK_PRODUCT&&this._showPickerTab(Rc.TAB_DESIGN)},setLayerPickerError:function setLayerPickerError(e){this._layerPicker.showError(),this._layerPicker.nodeError.textContent=e},_onProductPickedFromPicker:function(e){if(!this._templates.hasLayers()||confirm(lang("Changes that you made may not be saved. Are you sure?"))){r.a.disable=!0,this._showLoader(this.node);try{location.assign(e.getMockupGeneratorUrl())}catch(t){location.href=e.getMockupGeneratorUrl()}}},_renderTextPicker:function(){if(I.a.clearNode(this._nodeTextPicker),this._par.arePickersVisible){var e=new B;e.templates=this._templates,e.onLayerCreated=this._onTextLayerCreated,e.onLayerRemoved=this._onTextLayerRemoved,e.onLayerConfigurationChanged=this._onTextLayerChanged,e.placementSelector=this._placementSelector,e.allowCustomizableLayers=this._shouldAllowCustomizablePush,e.technique=this._technique,e.onBackCallback=this.showDesignTab.bind(this),e.isAdvancedTemplate=this._isAdvancedTemplateLoaded.bind(this),this.shouldAllowFileColorChanger()&&(e.getSelectedEmbroideryColors=this._embroideryHelper.getSelectedPaletteColors.bind(this._embroideryHelper),e.threadColorSelectionLimit=ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS,e.embroideryTypePrices=this._getEmbroideryPricesData()),this._textPicker&&this._textPicker.unsubscribeTemplateEvents(),this._textPicker=new j.a(e),this._textPicker.append(this._nodeTextPicker),this._toggleTextPickerAvailability()}},_renderTextboxPicker:function(){var e=this;return Nc(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.shouldAllowTextboxLayer()){t.next=3;break}return e._renderTextPicker(),t.abrupt("return");case 3:return t.next=5,e.waitInitialRender();case 5:if(I.a.clearNode(e._nodeTextboxPicker),e._par.arePickersVisible){t.next=8;break}return t.abrupt("return");case 8:(i=new B).templates=e._templates,i.onLayerCreated=e._onTextLayerCreated,i.onLayerRemoved=e._onTextLayerRemoved,i.onLayerConfigurationChanged=e._onTextLayerChanged,i.placementSelector=e._placementSelector,i.allowCustomizableLayers=e._shouldAllowCustomizablePush,i.technique=e._technique,i.onBackCallback=e.showDesignTab.bind(e),i.isAdvancedTemplate=e._isAdvancedTemplateLoaded.bind(e),i.isAllOver=e.isAllOverProduct.bind(e),i.hasProductlessScale=e._par.isPromoMakerMode||e._par.isMockupMakerMode,i.selectedGeneratorVariants=function(){return e.getSelectedGeneratorVariants()},e.shouldAllowFileColorChanger()&&(i.getSelectedEmbroideryColors=e._embroideryHelper.getSelectedPaletteColors.bind(e._embroideryHelper),i.threadColorSelectionLimit=ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS,i.embroideryTypePrices=e._getEmbroideryPricesData()),e._textboxPicker&&e._textboxPicker.unsubscribeTemplateEvents(),e._textboxPicker=new ye(i),e._textboxPicker.append(e._nodeTextboxPicker),e._toggleTextboxPickerAvailability();case 26:case"end":return t.stop()}}),t)})))()},_preloadFontsUsedInGroupDesign:function(e,t){var i=e.designData.filter((function(e){var t;return null===(t=e.textInput)||void 0===t?void 0:t.font})).map((function(e){var t;return null===(t=e.textInput)||void 0===t?void 0:t.fontArray}));this.onFontsPreloaded(i,t)},_addGroupDesignLayers:function(e){var t,i=this,n=++Rc.GROUP_DESIGN_COUNTER,a=this.getSelectedPlacementId(),o=!!document.documentMode||!!window.StyleMedia,s=e instanceof Bo.c,l=this.getGeneratorVariantByPlacementId(a),c=this._templates.getUserTemplate(this.getSelectedPlacementId(),l.templateId);e.designData.forEach((function(r){if(r){if(r.type===vo.a.TYPE_FILL)return void(i._canHaveDesignFillColor()&&i._onDesignFillColorChanged(r.color));r.type===x.a.TYPE&&delete r.svg,t=Sr.a.layerFromArray(r),s||e.isPlainLayers||t.addToGroupType(e,n),s||Object(ys.a)(t,c.width,c.height),o&&t instanceof R.a&&t.arcAngle&&(t.arcAngle=0),i._templates.addLayerToPlacementTemplates(a,t,!s,!0,!0,s)}}));var d=this._templates.getTemplatesByPlacement(a);this._templates.getChangeListener().notifyLayersAdded(d),this._templates.setActiveLayer(t,this),this._templates.setActiveLayerFromTemplate(l.placementId,l.templateId),this._afterLayerAddedAndLoaded(),s&&(this._templates.updateDesignerLeaveWarningLayers(),r.a.updateInitialStateOptions=this._placementOptions.getData())},_addQuickDesignById:function(e){var t=this;return Nc(regeneratorRuntime.mark((function i(){var n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t._showLoader(t._nodeMainMockupArea),n={itemIds:[e],forTechnique:t._technique},i.next=4,Object(sl.g)(n);case 4:if(1===(r=i.sent).length){i.next=9;break}return console.warn("Wrong count Quick designs loaded: "+r.length),t._hideLoader(t._nodeMainMockupArea),i.abrupt("return");case 9:t._preloadFontsUsedInGroupDesign(r[0],t._addGroupDesignLayers.bind(t,r[0]));case 10:case"end":return i.stop()}}),i)})))()},addGroupTemplateLayers:function(e,t){var i=this;this._preloadFontsUsedInGroupDesign(e,(function(){i._addGroupDesignLayers(e),t&&t()}))},_renderEmbroideryImagePicker:function(){if(I.a.clearNode(this._nodeEmbroideryImagePicker),this._par.arePickersVisible&&this.shouldAllowFileColorChanger()){var e=this.getSelectedPlacementId(),t=this.getSelectedPlacementTechnique(),i=new je;i.templateChangeListener=this._templates.getChangeListener(),i.fileColorMapperPalette=this._embroideryHelper.getFileColorChangerColors(e,t),i.onLayerRemoved=this.showDesignTab.bind(this),i.threadColorSelectionLimit=ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS,i.embroideryTypePrices=this._getEmbroideryPricesData(),i.getSelectedEmbroideryColors=this._embroideryHelper.getSelectedPaletteColors.bind(this._embroideryHelper),i.onEmbroideryTypeChangedCallback=this.onEmbroideryTypeChanged.bind(this),i.shouldShowExtraPriceForEmbroideryType=this.shouldShowExtraPriceForEmbroideryType.bind(this),this._embroideryImagePicker&&this._embroideryImagePicker.unsubscribeTemplateEvents(),this._embroideryImagePicker=new Ge(i),this._embroideryImagePicker.append(this._nodeEmbroideryImagePicker),this._recalcEmbroideryPriceOptionsValue()}},_renderPatternPicker:function(){if(this._par.arePickersVisible&&this._shouldEnablePatternPicker())if(this._patternPicker)this._patternPicker.resubscribeToEvents();else{I.a.clearNode(this._nodePatternPicker);var e=new be;e.templates=this._templates,e.onLayerRemoved=this.showDesignTab.bind(this),this._patternPicker=new Ie(e),this._patternPicker.append(this._nodePatternPicker)}else I.a.clearNode(this._nodePatternPicker)},_renderDesigningTools:function(){var e=this;return Nc(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Gt.q)(Gt.g);case 2:if(i=t.sent,i&&(e._par.isProductlessMode||e._par.isMockupGeneratorMode)&&!I.a.hasClassName(e._nodeLayerPicker.lastChild,"design-tools-mke")&&!Object(_e.d)(e.getSelectedPlacementId())){t.next=6;break}return t.abrupt("return");case 6:n=new vs({designer:e,templates:e._templates,getDesignerMockup:function(){return e._mockup}}),new gs(n).node.append(e._nodeLayerPicker);case 9:case"end":return t.stop()}}),t)})))()},_getEmbroideryPricesData:function(){var e;return{currency:null===(e=Object(_e.a)())||void 0===e?void 0:e.priceRange.currency,prices:this._productOptionsPicker.getPrices()[zn.a.NAME_EMBROIDERY_TYPE]}},_manageEmbroiderySelectedColorsOnLayersAdded:function(e){var t,i=kc(e);try{for(i.s();!(t=i.n()).done;){var n,r=kc(t.value.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;this._embroideryHelper.updateSelectedEmbroideryPaletteColors(a)}}catch(e){r.e(e)}finally{r.f()}}}catch(e){i.e(e)}finally{i.f()}},onEmbroideryTypeChanged:function(e){var t=this._templates.getActiveLayer();t&&e&&(t.embroideryType=e,this.firstLayerWith3dEmbroidery||e!==oe.a.DIGITIZATION_3D&&e!==oe.a.DIGITIZATION_3D?this.firstLayerWith3dEmbroidery&&this.firstLayerWith3dEmbroidery.uniqueId===t.uniqueId&&e===oe.a.DIGITIZATION_FLAT&&(this.firstLayerWith3dEmbroidery=this._getFirstEmbroideryLayerWith3dType()):this.firstLayerWith3dEmbroidery=t,this._recalcEmbroideryPriceOptionsValue())},_recalcFirstLayerWith3dEmbroidery:function(){if(this.firstLayerWith3dEmbroidery){var e,t=this._getTemplate(this.getSelectedPlacementId());if(t)for(var i in t.layers)if(t.layers[i].uniqueId===this.firstLayerWith3dEmbroidery.uniqueId){e=t.layers[i];break}e||(this.firstLayerWith3dEmbroidery=this._getFirstEmbroideryLayerWith3dType())}else this.firstLayerWith3dEmbroidery=this._getFirstEmbroideryLayerWith3dType()},shouldShowExtraPriceForEmbroideryType:function(e){return!this.firstLayerWith3dEmbroidery||!e||this.firstLayerWith3dEmbroidery.uniqueId===e.uniqueId},_recalcEmbroideryPriceOptionsValue:function(){var e=this._getFirstEmbroideryLayerWith3dType(),t=this._productOptionsPicker.getValues()[zn.a.NAME_EMBROIDERY_TYPE],i=e?e.embroideryType:oe.a.DIGITIZATION_FLAT;t!==i&&this._productOptionsPicker.setValue(zn.a.NAME_EMBROIDERY_TYPE,i)},_getFirstEmbroideryLayerWith3dType:function(){var e,t=this._getTemplate(this.getSelectedPlacementId());if(t)for(var i in t.layers)if(t.layers[i].embroideryType===oe.a.DIGITIZATION_3D||t.layers[i].embroideryType===oe.a.DIGITIZATION_BOTH){e=t.layers[i];break}return e},renderTextPickerForProductCustomizer:function(){var e=new B;e.technique=this._technique,e.allowCustomizableLayers=function(){return!1},e.placementSelector=this._placementSelector,e.isAdvancedTemplate=this._isAdvancedTemplateLoaded.bind(this),e.isAllOver=this.isAllOverProduct.bind(this),this._textPicker=new j.a(e)},_onTextLayerChanged:function(e){if(e.isTextLayer()){var t=e instanceof R.a?this._textboxPicker:this._textPicker;P.a.delay("_templates.updateTextLayer",this._templates.updateTextLayer.bind(this,e,t),e.getUpdateDelay()),this._scheduleEmbroideryPreviewUpdate(this.getSelectedPlacementId(),e),this._mockup&&(this._mockup.getMockup().displayOutOfBoundsIndicator(),this._mockup.getMockup().displayCustomizableTextLayerError()),this._layerPicker&&this._layerPicker.updateLayer(e),this.setMockupControlsVisibility(),this._renderFooter()}},_onLayerDuplicate:function(e){this._activeDesignerTabId!==Rc.TAB_PREVIEW&&this._activeDesignerTabId!==Rc.TAB_3D||(this.requireMockupRegenerationAndShowDesigner(),this.resizeMockupArea()),this._templates.duplicateLayerToPlacementTemplates(e),this.setMockupControlsVisibility(),this._validateTextLayerCount(),this._renderMockupMainArea()},_onTextLayerCreated:function(e,t,i){this._activeDesignerTabId!==Rc.TAB_PREVIEW&&this._activeDesignerTabId!==Rc.TAB_3D||(this.requireMockupRegenerationAndShowDesigner(),this.resizeMockupArea()),this._templates.addLayerToPlacementTemplates(this.getSelectedPlacementId(),e,t,!1,i),this._templates.silentlySetActiveLayer(e),this.setMockupControlsVisibility(),this._validateTextLayerCount(),this._renderMockupVariantArea()},_onTextLayerRemoved:function(e){this._templates.removeLayer(this._templates.getTemplateByLayer(e),e),this._templates.setActiveLayer(null),this._validateTextLayerCount()},_onActiveLayerChanged:function(e){var t,i;e&&((null===(t=this._pickerTabs)||void 0===t||null===(i=t.getActiveTab())||void 0===i?void 0:i.uniqueId)!==Rc.TAB_DESIGN&&this.showDesignTab(),"function"==typeof this._par.onActiveLayerChanged&&this._par.onActiveLayerChanged(e));this._mockup&&e&&(this._mockup.getMockup().displayOutOfBoundsIndicator(),this._mockup.getMockup().displayCustomizableTextLayerError(),e.length?this._mockup.getMockup().setActiveGroup(e,!0,this):this._mockup.getMockup().setActiveLayer(e,!0,this))},_validateTextLayerCount:function(){var e=this._templates.getLayerCountByType(F.a,this._placementSelector.getSelectedPlacementId());e+=this._templates.getLayerCountByType(R.a,this._placementSelector.getSelectedPlacementId());var t=jo.a.getLayerLimit(this.getSelectedPlacementTechnique()),i=!t||t>e,n=dlang("dashboard","Max limit is {number} text layers. Please delete a layer if you want to add another one.").replace("{number}",t);this._layerPickerChooser&&Object(wc.d)({key:Sc.i.TEXTBOX_COUNT_RESTRICTION,value:n,shouldUnset:i}),this._textPicker&&this._textPicker.enabled(i).render(),this._textboxPicker&&this._textboxPicker.setEnabled(i).render()},_renderWarningNode:function(e,t,i,n){I.a.clearNode(e),tag("div","pf-mt-24 pf-mb-12",[tag("div","pf-mb-12",[tag("b",null,t)]),tag("div",n+"-box-warning",i)]).append(e)},_renderUnavailableVariantBlock:function(e,t,i){return tag("div","pf-pt-8 variation-warning-block",[t?tag("span",{className:"pf-d-inline-block",style:{minWidth:"20%"}},[tag("b",null,t)]):"",tag("span",{className:"swatches swatches--medium",style:{verticalAlign:"middle"}},[new en.a(i)])]).append(e)},_renderExistingVariantsWarning:function(){if(this._par.existingVariants&&0!==this._par.existingVariants.length&&!this._par.isChangePrintfileMode){var e=dlang("generator","Variants that won't be updated"),t=dlang("generator","These variants are already in your store and won't be updated");this._renderWarningNode(this._nodeExistingVariantsWarning,e,t,"blue");var i=new Ji.a;i.showInline=!0,i.onChange=function(){},i.isColorClickable=!1;var n=this._getExistingProductVariantData();this._nodeExistingVariationBlock=tag("div");var r=!1;for(var a in n){for(var o in i.colors={},n[a]){var s=n[a][o];s.color&&s.colorCode&&(i.colors[s.color]=[s.colorCode],s.colorCode2&&i.colors[s.color].push(s.colorCode2),r||(r=!0))}"null"===a&&(a=""),this._renderUnavailableVariantBlock(this._nodeExistingVariationBlock,a,i)}var l=!(!Object.keys(n).length||!Object.keys(n).filter((function(e){return"null"!==e})).length);this._renderVariationWarningHeader(this._nodeExistingVariationBlock,l,r),this._nodeExistingVariationBlock.append(this._nodeExistingVariantsWarning)}},_renderUsedColors:function(){if(this._par.isChangePrintfileMode){var e,t=[],i=[];for(var n in this._par.existingVariants)t.push((new u.a).getCachedVariantById(this._par.existingVariants[n].variantId));for(e in t)i.push({color:t[e].color,colorCode:t[e].colorCode,colorCode2:t[e].colorCode2});if(!(i.length<=1&&null==i[0].colorCode)){var r=new Ji.a;for(var a in r.showInline=!0,r.colors={},r.isColorClickable=!1,i){var o=i[a];o.color&&o.colorCode&&(r.colors[o.color]=[o.colorCode],o.colorCode2&&r.colors[o.color].push(o.colorCode2))}y.a.isEmptyObject(r.colors)||(Object(I.a)({tag:"div",els:[{tag:"h6",text:dlang("generator","Selected color(s):")},{tag:"span",className:"swatches swatches--huge",style:{verticalAlign:"middle"},els:[new en.a(r)]}]}).append(this._nodeUsedColors),tag("hr").prepend(this._nodeUsedColors))}}},_renderDiscontinuedWarning:function(){if(this._colorPicker){I.a.clearNode(this._nodeDiscontinuedWarning);var e=this._colorPicker.getSelectedColorNames(),t=this._getDiscontinuedColorSelected(e);if(0!==Object.keys(t).length){var i=dlang("generator","Discontinued variants"),n=this._par.isProductPushMode?dlang("generator","These variants are discontinued and won't be pushed into your store"):dlang("generator","These variants are discontinued and won't be generated");this._renderWarningNode(this._nodeDiscontinuedWarning,i,n,"orange");var r=new Ji.a;r.showInline=!0,r.onChange=function(){},r.isColorClickable=!1,this._nodeDiscontinuedVariationBlock=tag("div");var a=!1;for(var o in t)if(-1!==this._selectedSizes.indexOf(o)){for(var s in r.colors={},t[o]){var l=t[o][s];r.colors[l]=this._colorPicker.getColorCodes(l),a||(a=!0)}var c=this._sizePicker?o:"";this._renderUnavailableVariantBlock(this._nodeDiscontinuedVariationBlock,c,r)}var d=!!this._sizePicker;this._renderVariationWarningHeader(this._nodeDiscontinuedVariationBlock,d,a),this._nodeDiscontinuedVariationBlock.append(this._nodeDiscontinuedWarning,t)}}},_renderUnavailableSizeColorWarning:function(){var e=this;if(this._regionPicker&&this._colorPicker&&this._sizePicker&&this._par.isProductPushMode){I.a.clearNode(this._nodeUnavailableSizeColorWarning);var t=this._regionPicker.getRegionVariants(this.getRegion());if(t.length){var i={};this._getSelectedMappings().forEach((function(e){t.includes(e.variantId)||(i[e.size]||(i[e.size]=[]),i[e.size].push(e.color))})),Object.keys(i).length&&function(){var t=new Ji.a;t.showInline=!0,t.onChange=function(){},t.isColorClickable=!1,e._nodeUnavailableSizeColorBlock=tag("div");var n=function(n){if(e._selectedSizes.indexOf(n)<0)return"continue";t.colors={},i[n].forEach((function(i){(!e.discontinuedColors[n]||e.discontinuedColors[n]&&!e.discontinuedColors[n].includes(i))&&(t.colors[i]=e._colorPicker.getColorCodes(i))})),Object.keys(t.colors).length&&e._renderUnavailableVariantBlock(e._nodeUnavailableSizeColorBlock,n,t)};for(var r in i)n(r);e._renderVariationWarningHeader(e._nodeUnavailableSizeColorBlock,!0,!0),e._nodeUnavailableSizeColorBlock.append(e._nodeUnavailableSizeColorWarning)}()}}},_renderVariationWarningHeader:function(e,t,i){tag("div","pf-text-muted",[t?tag("span",{className:"pf-d-inline-block",style:{minWidth:"20%"}},dlang("generator","Size")):"",i?tag("span",null,dlang("generator","Colors")):""]).prepend(e)},_getDiscontinuedColorSelected:function(e){var t=this,i={},n=function(n){if(-1===t._selectedSizes.indexOf(n))return"continue";var r=t.discontinuedColors[n];i[n]=e.filter((function(e){return r.indexOf(e)>-1})),0===i[n].length&&delete i[n]};for(var r in this.discontinuedColors)n(r);return i},_updateExcludedPlacements:function(){var e,t=this._par.isOrderFlowMode,i=this._par.isProductPushMode&&(null===(e=Object(_e.a)())||void 0===e?void 0:e.isAdvancedInsideLabelAllowed()),n=this._par.productTemplateEditorState;t||i||n||!Object(_e.c)()||(this.excludedPlacements[ce.a.TYPE_T_SHIRT]=[oe.a.TYPE_LABEL_INSIDE])},_renderFooter:function(){var e=this._templates.getUsedFonts();(e.length||this._shouldPreloadFonts()||this._par.isFooterVisible)&&this.onFontsPreloaded(e,this._renderFooterAfterFonts.bind(this))},_renderFooterAfterFonts:function(){var e,t,i=this;if(I.a.clearNode(this._nodeFooter),this._cleanupMoreDropdown(),this._par.isFooterVisible){var n=this._isVariantLimitExceeded(),r=this._getEbayStockQuantityExceededError(),a=!this.hasNeededQuality(),o=Object(rc.h)(this._templates,this.designData),s=this._isInvalidVariantCombination(),l=Object(rc.f)(this._templates,this.generatorVariants),d=Object(rc.e)(this._templates,this.generatorVariants),u=Object(rc.g)(this._templates,this.generatorVariants),h=Object(rc.d)(this._templates,this.generatorVariants),p=this.hasEmbroideryPositionError(),g=this.hasEmbroideryTextSizeError(),f=this.hasEmbroideryTextTooBigError(),_=this.hasEmbroideryTextOverlapError(),m=this.hasTextSizeError(),v=this.hasClipartSizeError(),y=this.hasLayersOverlapError(),b=this.hasLayersPositionError(),P=!this.areEmbroideryThreadColorsValid(),C=this.hasEmbroideryNotesError(),w=[],S=[],k=!1,O=!0;if(this._isProductTemplateDetailsEditor()||(this._productOptionsPicker.hasValidOptions()?this._productOptionsPicker.updateErrorStatus():this._productOptionsPicker.hasOption(zn.a.NAME_EMBROIDERY_TYPE)?k=!0:w.push(dlang("generator","Please check if all required options are selected."))),this._sizePicker&&this._sizePicker.updateErrorStatus(),r){var A=dlang("dashboard","The amount of selected variants ({0}) exceeds the available quantity ({1}) for your eBay store.");A=A.format(r.used,r.limit),S.push(A),S.push(tag("br"))}if(n&&(S.push(dlang("generator","Storeâ€™s variant limit per product exceeded!")),S.push(tag("br"))),a&&(S.push(c.a.PRINTFILE_TOO_SMALL),S.push(tag("br"))),this._isProductTemplateDetailsEditor()||(this.isFileLimitExceeded(M.a)||this.isFileLimitExceeded(Te.a))&&(S.push(this.getFileLimitExceededText()),S.push(tag("br"))),s){S.push(dlang("generator","Discontinued colors/sizes canâ€™t be pushed to your store. Please unselect them."));var N=this._par.store.isEtsy()?langUrl("/faq/integrations/etsy/288-can-t-publish-products-on-etsy"):langUrl("/faq/integrations/webflow/482-are-there-any-product-variant-selection-limitations-for-my-webflow-store");this._par.store.isEtsy()&&S.push(tag("a",{className:"pf-ml-4",target:"_blank",href:N},clang("button that leads to FAQ","Help"))),S.push(tag("br"))}if(this._layerPicker&&I.a.addClassName(this._layerPicker.nodeError,"hidden"),o&&w.push(lang("Please add a design!")),this._getSelectedVariant())for(var D in this._par.existingVariants){var R=this._par.existingVariants[D];for(var x in this._getSelectedVariants()){var F=this._getSelectedVariants()[x];R.variantId===F.variantId&&w.push(lang("Can't push already synced variant!"))}}l||d?S.push(dlang("generator","Personalization tool doesn't support text arcs or multiple lines")):u?S.push(dlang("generator","Personalization tool doesn't support graphic colors")):h&&S.push(dlang("generator","Personalization tool doesn't support cropped images")),g?S.push(c.a.EMBROIDERY_TEXT_TOO_SMALL):f?S.push(c.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT):_?S.push(c.a.EMBROIDERY_LAYERS_OVERLAPPING):p?S.push(c.a.EMBROIDERY_OUT_OF_BOUNDS):m?S.push(c.a.LAYER_TEXT_TOO_SMALL):v?S.push(c.a.LAYER_CLIPART_TOO_SMALL):y?S.push(c.a.ENGRAVING_LAYERS_OVERLAPPING):b?S.push(c.a.LAYER_OUT_OF_BOUNDS):P?S.push(c.a.EMBROIDERY_THREAD_COLOR_LIMIT.replace("{limit}",ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS)):C&&!this._par.isMockupGeneratorMode&&S.push(c.a.EMBROIDERY_NOTES_MISSING);var B=this.exceededTextLayerCharacterLimit();B&&S.push(c.a.TEXT_TOO_LONG.replace("{limit}",B));var V,j=2;if(PF.Customer.isLogged()&&this._par.isMockupGeneratorMode&&!this._par.isProductPushMode&&!this._isProductTemplateEditor()&&(j=3),tag("div","row no-gutters pf-pl-12 pf-pr-4 pf-px-md-0 pf-pt-8 pf-pt-md-0",[this._footerButtonWrapper=tag("div",(this._par.shouldShowPrice?"col-12":"col-11")+" col-md-auto order-2 order-md-1 pf-d-flex pf-align-items-center",[this._par.onBack?tag("a",{onclick:this._onBack.bind(this),className:"pf-btn pf-btn-secondary pf-mr-12 pf-w-25 pf-w-md-auto"},clang("Go back","Back")):"",this._footerButtonContinue=tag("a",{className:"pf-btn pf-btn-primary "+(this._par.onBack?"pf-w-75":"pf-w-100")+" pf-w-md-auto",style:{pointerEvents:"auto"},onclick:this._onContinue.bind(this)},[this._par.ctaText,this._footerButtonContinueSpinner=tag("span","pf-i pf-i-loading pf-i-spin pf-i-24 pf-d-none  pf-ml-4")]),this._footerExpandMenu=3===j?tag("ul",{className:"mg-sticky-footer-more-menu dropdown-menu dropdown-menu-right pf-ui-body pf-px-0 pf-py-8 pf-rounded-0"},[this._footerExpandMenuFirst=tag("li","",[this._nodeButtonOrderPreviewMock=tag("a",{className:"pf-px-16 pf-py-8",onclick:function(){i._collapseMoreLinks(),i._nodeButtonOrderPreview.onclick()}},clang("action","Order"))]),this._footerExpandMenuSecond=tag("li","",[this._footerButtonSaveToTemplatesMock=tag("a",{className:"pf-px-16 pf-py-8",onclick:function(e){i._collapseMoreLinks(),i._footerButtonSaveToTemplates.onclick(e)}},clang("action","Save to templates"))])]):"",this._footerButtonMore=3===j?this._footerButtonMore=tag("a",{className:"pf-btn pf-btn-secondary pf-ml-12 pf-w-50 pf-w-md-auto pf-d-sm-none",onclick:this._onMoreToggle.bind(this)},[clang("action","More"),this._footerButtonMoreCaret=tag("span","pf-i pf-i-chevron-down pf-i-24 pf-ml-12 pf-text-gray")]):"",this._footerButtonSaveToTemplates=PF.Customer.isLogged()&&this._par.isMockupGeneratorMode?this._footerButtonSaveToTemplates=tag("a",{className:"pf-btn pf-btn-secondary pf-ml-12 pf-w-50 pf-w-md-auto "+(3===j?"pf-d-none pf-d-sm-inline-block":""),style:{pointerEvents:"auto"},onclick:this._onSaveToTemplates.bind(this)},[clang("action","Save to templates"),this._footerButtonSaveToTemplatesSpinner=tag("span","pf-i pf-i-loading pf-i-spin pf-i-24 pf-d-none  pf-ml-4")]):"",this._nodeButtonOrderPreview=this._par.isProductPushMode||this._isProductTemplateEditor()?"":this._nodeButtonOrderPreview=tag("a",{className:"pf-btn pf-btn-secondary pf-ml-12 pf-w-50 pf-w-md-auto "+(3===j?"pf-d-none pf-d-sm-inline-block":""),style:{pointerEvents:"auto"},onclick:this._onFinish.bind(this,this._initOrderPreview)},PF.Customer.isAnonymous()?dlang("site","Add to cart"):clang("action","Order"))]),tag("div","col-12 col-md-auto order-3 order-md-2",[tag("div","pf-text-red pf-bold pf-pb-8 pf-pb-md-0 pf-px-8 pf-mt-4 pf-mt-md-8",S.map((function(e){return tag("span","pf-mx-4","string"==typeof e?e:[e])})))]),this._par.shouldShowPrice?tag("div","col-12 col-md order-1 order-md-3 text-left text-md-right",[tag("div","pf-py-8 pf-py-md-0",[this._nodeFooterPrice=tag("div","pf-h4"),this._nodeFooterPriceDescription=tag("span","pf-text-muted",lang("Excl. taxes and other charges"))])]):""]).append(this._nodeFooter),this._par.shouldShowPrice&&this._updateDesignerPricesUsingPriceCalculator(),(w.length||S.length||k||this._selectedVariantCount<1)&&(I.a.addClassName(this._footerButtonContinue,"disabled"),this._nodeButtonOrderPreview&&(I.a.addClassName(this._nodeButtonOrderPreview,"disabled"),this._nodeButtonOrderPreview.onclick=this._reCheckAndUpdateErrorStatus.bind(this,o)),this._footerButtonSaveToTemplates&&(I.a.addClassName(this._footerButtonSaveToTemplates,"disabled"),this._footerButtonSaveToTemplates.onclick=this._reCheckAndUpdateErrorStatus.bind(this,o)),this._footerButtonContinue.onclick=this._reCheckAndUpdateErrorStatus.bind(this,o),O=!1),PF.Customer.mockupGeneratorRestricted&&(I.a.addClassName(this._footerButtonContinue,"disabled"),this._footerButtonContinue.onclick=null,O=!1),this._par.isMockupGeneratorMode&&this._dynamicStickyFooter&&this._dynamicStickyFooter.updateFooter(),this._par.onFooterRender?this._par.onFooterRender(this._nodeFooter):this._dynamicStickyFooter&&this._dynamicStickyFooter.setSecondFooter(this._nodeFooter),this._par.onCanContinueChange&&this._par.onCanContinueChange(O),!Object(L.a)(null===(e=this.getDynamicStickyFooter())||void 0===e?void 0:e.node))null===(V=this.getDynamicStickyFooter())||void 0===V||V.append(this.node);null===(t=this.getDynamicStickyFooter())||void 0===t||t.setSecondFooter(this._nodeFooter),window.addEventListener("resize",this._collapseMoreLinks,!1),T.n(E.EVENT_UPDATE_MOBILE_FOOTER,this._collapseMoreLinks,this),T.n(T.c,this._collapseMoreLinks,this),T.n(T.d,this._collapseMoreLinks,this),this._setupMoreDropdown(!1)}},_cleanupMoreDropdown:function(){window.removeEventListener("resize",this._collapseMoreLinks,!1),T.m(E.EVENT_UPDATE_MOBILE_FOOTER,this._collapseMoreLinks),T.m(T.c,this._collapseMoreLinks),T.m(T.d,this._collapseMoreLinks),this._collapseMoreLinks();var e=y()(this._footerExpandMenu).parents(".dynamic-sticky-footer__second-wrap");e.find(".mg-sticky-footer-more-menu").remove(),e.find(".mg-sticky-footer-secondary-more-menu").remove()},_setupMoreDropdown:function(e){var t=y()(this._footerExpandMenu).parents(".dynamic-sticky-footer__second-wrap");if(this._footerExpandMenu&&!I.a.hasClassName(this._footerExpandMenu,"__is-init")&&(t.find(".mg-sticky-footer-more-menu").remove(),t.find(".mg-sticky-footer-secondary-more-menu").remove(),t.prepend(this._footerExpandMenu),I.a.addClassName(this._footerExpandMenu,"__is-init")),e&&this._footerButtonMore&&this._footerExpandMenu){var i=t.get(0).getBoundingClientRect(),n=this._footerButtonMore.getBoundingClientRect();t.css("overflow","visible"),this._footerExpandMenu.style.right=i.right-n.right+"px"}else t.css("overflow","hidden")},_expandMoreLinks:function(){var e=this;this._setupMoreDropdown(!0),I.a.hasClassName(this._footerButtonSaveToTemplates,"disabled")?I.a.addClassName(this._footerButtonSaveToTemplatesMock,"disabled"):I.a.removeClassName(this._footerButtonSaveToTemplatesMock,"disabled"),I.a.hasClassName(this._nodeButtonOrderPreview,"disabled")?I.a.addClassName(this._nodeButtonOrderPreviewMock,"disabled"):I.a.removeClassName(this._nodeButtonOrderPreviewMock,"disabled"),I.a.addClassName(this._footerExpandMenu,"pf-d-block"),setTimeout((function(){e._expandedMenuRect=e._footerExpandMenu.getBoundingClientRect(),y()(document).on("click.moreLinkOuterClick",e._outerClickFromMoreLinks.bind(e))}),0)},_outerClickFromMoreLinks:function(e){var t=this._expandedMenuRect||this._footerExpandMenu.getBoundingClientRect(),i=e.clientX>=t.left&&e.clientX<=t.right,n=e.clientY>=t.top&&e.clientY<=t.bottom;i&&n||this._collapseMoreLinks()},_collapseMoreLinks:function(){this._footerExpandMenu&&I.a.removeClassName(this._footerExpandMenu,"pf-d-block"),this._setupMoreDropdown(!1),y()(document).off("click.moreLinkOuterClick")},_onMoreToggle:function(){I.a.hasClassName(this._footerExpandMenu,"pf-d-block")?this._collapseMoreLinks():this._expandMoreLinks()},_getSelectedVariants:function(){var e,t,i=this,n=null===(e=this._colorPicker)||void 0===e?void 0:e.selectedColors.map((function(e){return e.color})),r=(null===(t=this._sizePicker)||void 0===t?void 0:t.selectedSizes)||this.designData.templateSelectedSizes;return this._generatorParams.allAvailableVariants.filter((function(e){return(!r||i._isProductTemplateEditor())&&n&&n.includes(e.color)||!n&&r&&r.includes(e.size)||r&&n&&n.includes(e.color)&&r.includes(e.size)}))},_getSelectedVariantsPriceInfo:function(){var e=this,t=this._getSelectedVariants(),i=[];return(t=t.length?t:this._generatorParams.allAvailableVariants).forEach((function(t){var n,r={};I.a.O2O(r,t.priceData);var a=e._priceCalculator.getTotal(t)+e.getProductOptionsPicker().getExtraPrice(),o=a-t.priceData.price,s=e._priceCalculator.getTotal(t,!0)+e.getProductOptionsPicker().getExtraPrice()-t.priceData.discountedPrice;s>0&&(r.discountType=Or.a.DISCOUNT_TYPE_CUSTOM),r.price=a,r.originalPrice=t.priceData.originalPrice+o,r.discountedPrice=t.priceData.discountedPrice+s,r.bulkDiscountTiers=null===(n=Object(_e.a)())||void 0===n?void 0:n.priceRange.bulkDiscountTiers,r.color=t.color,r.size=t.size,i.push(r)})),this._isProductTemplateEditor()&&(this._generatorParams.templatePrices=i),i},_setFooterPrice:function(e){this._par.shouldShowPrice&&(I.a.clearNode(this._nodeFooterPrice),I.a.addClassName(this._nodeFooterPriceDescription,"pf-d-none"),null!=e&&e.length&&(N.a.createDiscountElementFromPriceDataArray({priceData:e}).append(this._nodeFooterPrice),I.a.removeClassName(this._nodeFooterPriceDescription,"pf-d-none")))},_reCheckAndUpdateErrorStatus:function(e){return this._layerPicker&&!this._layerPicker.updateErrorStatus()?(this.showDesignTab(),this._layerPicker.showError(),void this._layerPicker.scrollToNodeError()):this._layerPicker&&!this._layerPicker.checkProductOptionsStatus()?(this.showDesignTab(),void this._layerPicker.getProductOptionsPicker().scrollToNodeError()):this._productOptionsPicker&&!this._productOptionsPicker.updateErrorStatus()?(this.showProductTab(),void this._productOptionsPicker.scrollToNodeError()):this._sizePicker&&!this._sizePicker.updateErrorStatus()?(this.showProductTab(),void this._sizePicker.scrollToNodeError()):void(e&&this._generatorParams&&this.gotoFirstPlacementAndDisplayNoRealDesignMsg())},gotoFirstPlacementAndDisplayNoRealDesignMsg:function(){var e=this.getAvailablePlacements().slice().shift();e&&this.setActivePlacement(e.id),setTimeout(function(){this.showDesignTab(),this._layerPicker.showError(),this._layerPicker.scrollToNodeError()}.bind(this),0)},trackTransparencyWarningContinueClick:function(){var e=this,t=Object(_e.a)();t&&(t.isDtgShirt()||t.isDtgTote())&&this._templates.getPlacementIdsHavingFiles(M.a).forEach((function(t){e._templates.getLayersByType(M.a,t).forEach((function(e){e&&e.hasTransparencyIssues&&e.hasTransparencyIssues()&&m.a.trackTransparencyWarningContinue(e.fileItem?e.fileItem.fileId:null)}))}))},_initOrderPreview:function(){var e;this.trackTransparencyWarningContinueClick(),null===(e=this._mockup)||void 0===e||e.applyCropIfNeeded();var t=new g.a;t.onChildComponentProductOptionsChanged=this._onChildComponentProductOptionsChanged.bind(this,!1);var i=new rr.a;I.a.O2O(i,this.getDesignData()),t.designData=i,t.designData.generatorVariants=this.getSelectedGeneratorVariants(!1).generatorVariants,t.generatorParams=this._generatorParams,new f.a(t)},_hasPlacementWithDesignFillColor:function(){return!!this._placementOptions&&this._placementOptions.hasPlacementWithFillColor()},_getEbayStockQuantityExceededError:function _getEbayStockQuantityExceededError(){if(!this._par.store.canManageStock()||this._par.isOrderFlowMode)return!1;if(!this._par.store.hasEnabledLimits())return!1;var e=(this._par.store.newProductLimits||{}).quantity||0,t=(this._par.existingVariants||[]).length,i=this._allSelectedVariantCount-t;return i>e&&{limit:e,used:i}},_isInvalidVariantCombination:function(){if(!this._colorPicker)return!1;if(!this._par.store.needsAllVariantCombinations())return!1;var e=this._colorPicker.getSelectedColorNames(),t=this._getDiscontinuedColorSelected(e);return Object.keys(t).length>0},_isVariantLimitExceeded:function(){if(this._par.isChangePrintfileMode)return!1;var e=this._par.existingVariants?this._par.existingVariants.length:0;return!!(this.variantLimit&&this._allSelectedVariantCount+e>this.variantLimit)},_colorizeClipartLayers:function(){this._templates.getLayersByType(x.a,this._placementSelector.getSelectedPlacementId()).forEach(this._onClipartColorChanged)},_onClipartColorChanged:function(e){var t=this;return Nc(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.waitInitialRender();case 2:t._layerPicker&&t._layerPicker.updateLayer(e),t._templates.updateClipartLayer(e,t._layerPicker),t.setMockupControlsVisibility(),t.updateView(),t._clipartPicker&&t._clipartPicker.renderGroups(),T.l(T.d);case 8:case"end":return i.stop()}}),i)})))()},_onPlacementItemAdded:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._updateActivePlacement(e);var n=null;switch(!0){case t instanceof or.a:n=M.a.fromFileItem(t);break;case t instanceof Er.a:n=x.a.fromClipartItem(t),Object(_e.c)()&&Object(ve.b)(n);break;case t instanceof Ir.a:return void this._addQuickDesignById(t.id);case t instanceof ua:(n=Te.a.fromLicensedAssetItem(t)).licensedAssetItem.licensedAssetId=i;break;default:console.error("Invalid item type:",t)}if(!this._isProductReloadRequired(e.id,n)||n instanceof Te.a)if(this.shouldAllowFileColorChanger()){this._showLoader(this.node);var r=this._embroideryHelper.getEmbrTypeFromDigitizedItem(t);r&&(n.embroideryType=r),this._embroideryHelper.quantizeLayer(e,n)}else{this._templates.addLayerToPlacementTemplates(e.id,n,!1);var a=this.getGeneratorVariantByPlacementId(e.id);this._templates.silentlySetActiveLayer(null),this._templates.setActiveLayerFromTemplate(a.placementId,a.templateId),this._afterLayerAddedAndLoaded()}else this._reloadProductAfterPlacementFileAdded(e,t)},_onLayerColorsChanged:function(e,t,i,n,r){if(t instanceof M.a){var a=this._templates.getFreshLayer(t);a.overrideColors=t.overrideColors,this._embroideryHelper.recolorizeImageLayer(a,e,i,n,r)}var o;t.isTextLayer()&&(!t.color instanceof le.a&&this._embroideryHelper.updateSelectedEmbroideryPaletteColors(t),t instanceof F.a?this._textPicker.render():t instanceof R.a&&null!==(o=Object(_e.a)())&&void 0!==o&&o.isEmbroidery()&&this._textboxPicker.render());T.l(T.d)},_onZoomChanged:function(e){var t=this._templates.getUserTemplate(this.getSelectedPlacementId(),this._getSelectedVariant().templateId);e?(t.layers.forEach(function(e){e.overrideImagePulse&&(e.overrideImagePulse=null,this._templates.getChangeListener().notifyTemplatePositionsChanged([t],e))}.bind(this)),this._embroideryHelper.lastZoomedInEmbroideryTemplate=t):t.layers.forEach(function(e){this._scheduleEmbroideryPreviewUpdate(this.getSelectedPlacementId(),e)}.bind(this))},_onPreviewChanged:function(e,t,i,n){var r=this;if(!this._unsubscribeTemplateEventsIfNeeded()){var a=n?fe.l:"";if(xn.a.getPreviewString(t.getKey()+a)!==e){var o,s=0,l=0,c=this._templates.getTemplatesByPlacement(t.placementId),d=this.getSelectedGeneratorVariants(!1,!0).generatorVariants;for(var u in c)if(t.isRelated(c[u]))xn.a.setPreviewString(c[u].getKey()+a,e);else for(var h in d){var p=d[h];if(p.templateId===c[u].templateId){var g={fillColor:this._placementOptions.getPlacementFillColor(c[u].placementId)};s+=1,xn.a.setPreviewStringFromTemplate(c[u],p.mockupPosition,g,(function(){(l+=1)>=s&&r._variantArea&&r._variantArea.renderMockupPreviewStrings()}),a)}}if(setTimeout((function(){r._save3dViewCanvasImagesIfNeeded(t,a)}),400),this._variantArea&&s<1&&this._variantArea.renderMockupPreviewStrings(),this._activeDesignerTabId===Rc.TAB_3D)null===(o=this._live3dView)||void 0===o||o.scheduleDesignReload()}}},_updateActivePlacement:function(e){this._templates.setActiveLayer(null),this._placementSelector.setSelectedPlacement(e),this._par.placementDependentOptions&&this._productOptionsPicker.setSelectedPlacementId(e.id)},_isProductReloadRequired:function(e,t){if(this._generatorParams.availableOrientations&&this._generatorParams.availableOrientations.length)return!0;if(!(t instanceof M.a))return!1;if(this._hasTemplateTypeChanged()&&this._isAdvancedTemplateAvailable())return!0;if(this._savePlacementOptionsLocaly(),this._generatorParams.layerMatchesAdvancedTemplate(e,t))return!0;var i=this.getGeneratorVariantByPlacementId(e,!1);return i&&i.role===fr.a.ROLE_ADVANCED_TEMPLATE},_savePlacementOptionsLocaly:function(){this._placementOptions&&(this._placementOptionsRawStorage=this._placementOptions.getData())},_reloadProductAfterPlacementFileAdded:function(e,t){var i,n=new Hn.a;t instanceof or.a?n.addPlacementFileLayer(e.id,t):t instanceof Er.a?n.addPlacementClipartLayer(e.id,t,null):t instanceof ua&&n.addPlacementLicensedAssetLayer(e.id,t);var r=this._orientation;!r&&this._generatorParams.availableOrientations.length>1&&this._templates.hasLayers()&&(r=this._templates.getOrientation()),this._savePlacementOptionsLocaly();var a=Object(_e.a)();this.generatorRepository.loadGeneratorProduct({storeId:this._par.store.storeId,isMockupGeneratorMode:this._par.isMockupGeneratorMode,isProductPushMode:this._par.isProductPushMode,productId:null==a?void 0:a.productId,designerState:n,excludedPlacements:this.excludedPlacements,callback:this._onNewFileAddedAndLoaded.bind(this,e),technique:this._technique,forceOrientation:r,forceTemplateType:this._templateType,forceRequest:!0,currency:(null==a||null===(i=a.priceRange)||void 0===i?void 0:i.currency)||null})},_afterLayerAddedAndLoaded:function(){this._onFilesChanged(),this._renderMockupVariantArea(),this._renderMockupMainArea()},_onNewFileAddedAndLoaded:function(e,t){var i;this._generatorParams=t;var n=null!==(i=null==t?void 0:t.placementsWithOnlyBackgroundColor)&&void 0!==i?i:[];Object(_e.f)(n),this._placementOptions=this._generatorParams.placementOptions,this._templates.copyLayersFromTemplates(t.calculatedPositions);var r=this.getGeneratorVariantByPlacementId();r&&(this._templates.silentlySetActiveLayer(null),this._templates.setActiveLayerFromTemplate(r.placementId,r.templateId,this)),this._afterLayerAddedAndLoaded()},_onFilesChanged:function(){this._productOptionsPicker&&(this._productOptionsPicker.setFileTypesWithFiles(this._templates.getPlacementIdsHavingFiles()).setPlacementIdsWithFiles(this._templates.getPlacementIdsHavingFiles(M.a)),this._renderProductOptions(),this._renderFooter(),this._par.onPickerChanged&&this._par.onPickerChanged(),this._placementOptionsRawStorage&&this._loadDesignFillColor())},_onResize:function(e){this.previewMockupVariant&&this.node.clientWidth&&(I.a.addClassName(this._nodeMainMockupArea,"loading"),clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(this._renderMockupMainArea,e||300))},resizeMockupArea:function(){this._onResize(100)},_onLayerRemoved:function(e,t){this._par.onFileRemoved&&e.length&&this._par.onFileRemoved(t.fileItem.fileId,e[0].placementId),this._onFilesChanged(),this.shouldAllowFileColorChanger()&&(this._embroideryHelper.manageEmbroiderySelectedColorsOnLayerRemove(t),this._recalcFirstLayerWith3dEmbroidery(),this._recalcEmbroideryPriceOptionsValue()),this._templates.removeFeatureDesignCopied(this.getSelectedPlacementId())},_onLayerAdded:function(e){e.length<1||(m.a.trackAddFirstLayer(this._par.isModalDesigner,e,this._par),this._tryApplyingEmbroideryColorization(),this._mockup&&this._mockup.isMirroredChecked()&&this._templates.addMirroredLayersForTemplates(),this.shouldAllowFileColorChanger()&&(this._manageEmbroiderySelectedColorsOnLayersAdded(e),this._recalcEmbroideryPriceOptionsValue()))},validateAddingLayer:function(e,t){if(e===M.a.TYPE&&(e=new M.a),t||(t=1),this._layerPicker&&e instanceof M.a){var i=this._templates.getTemplateByLayer(e);return this._templates.getLayerCountByType(M.a,this._placementSelector.getSelectedPlacementId(),i)+t<=this._layerPicker.fileCountLimit}if(this._layerPicker&&e.isLicensedAssetLayer())return this._templates.getLayerCountByType(Te.a,this._placementSelector.getSelectedPlacementId())+t<=this._layerPicker.licensedAssetCountLimit;if(this._layerPicker&&e.isTextLayer()){var n=jo.a.getLayerLimit(this.getSelectedPlacementTechnique());if(n)return this._templates.getLayerCountByType(F.a,this._placementSelector.getSelectedPlacementId())+this._templates.getLayerCountByType(R.a,this._placementSelector.getSelectedPlacementId())+t<=n}return!0},_renderLayerPicker:function(){var e=this;return Nc(regeneratorRuntime.mark((function t(){var i,n,r,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._par.arePickersVisible){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.waitInitialRender();case 4:if(e._renderLayerPickerChooser(),I.a.clearNode(e._nodeLayerPicker),(i=e._generatorParams.availablePlacements)&&!(i.length<1)){t.next=9;break}return t.abrupt("return");case 9:n=e.getSelectedPlacementId()||i.slice().shift().id,r=Object(_e.a)(),a=null!=r&&r.isEmbroidery()?"EMBROIDERY":null==r?void 0:r.fileTagGroup,(o=new we).placements=i,o.activePlacementId=n,o.templates=e._templates,o.onPicked=e._onPlacementItemAdded,o.onColorChanged=e._onClipartColorChanged,o.conflictCalculator=e._conflictCalculator,o.fileCountLimit=e._getFileCountLimit(),o.licensedAssetCountLimit=e._getMaxLicensedAssetLayerCount(),o.onRequestRemoveBg=e._onRequestRemoveBg,o.enableRemoveBg=e._shouldEnableRemoveBg(),o.allowCustomizableLayers=e._shouldAllowCustomizablePush(),o.storeId=e._par.store.storeId,o.includeSamples=e._par.pickerConfig.isSampleOrder,o.searchTag=e._par.pickerConfig.getFileTag(n,a),o.onItemEdit=e._onLayerEdit,o.onCustomizableChanged=e._onTextLayerChanged,o.onDuplicate=e._onLayerDuplicate,o.getLayerPickerChooser=function(){return e._layerPickerChooser},o.nodeVideoTutorial=e._nodeVideoTutorial,e._isAdvancedTemplateAvailable()&&(o.nodeTemplateTypePicker=e._nodeAdvancedTemplatePicker),o.isAdvancedTemplate=e._isAdvancedTemplateLoaded.bind(e),o.isAllOver=e.isAllOverProduct.bind(e),o.hasAtLeastOneDesignFillColor=e.hasAtLeastOneDesignFillColor.bind(e),o.validateAddingLayer=e.validateAddingLayer.bind(e),o.getSelectedMockupVariant=e._getSelectedVariant.bind(e),(null==r?void 0:r.type)!==ce.a.TYPE_CUT_SEW&&(o.productOptions=e._getProductOptions(),o.productOptionsValues=e.getProductOptionsValues(),o.onProductOptionsChanged=e._onChildComponentProductOptionsChanged.bind(e,!0),o.productOptionsPlacements=e._generatorParams.availablePlacements.slice()),o.showPatternPicker=e._shouldEnablePatternPicker(),o.placementSelector=e._placementSelector,o.onSelectQualityTag=e._onSelectQualityTag.bind(e),o.openQTagPopoverLayerId=e._openQTagPopoverLayerId,o.isMockupGeneratorMode=e._par.isMockupGeneratorMode,o.hideQualityNode=e._par.isProductlessMode,o.showSizesInPx=1===e._templates.getRequiredDpi(),o.waitInitialDesignerRender=e.waitInitialRender.bind(e),PF.Customer.abTestBgFill()&&(e._renderDesignFillColorPicker(),o.designFillColorPicker=e._nodeDesignFillColorPicker),e._layerPicker=new Se.a(o).append(e._nodeLayerPicker),e._renderDesigningTools(),e._renderFillColorWarning();case 51:case"end":return t.stop()}}),t)})))()},_onSelectQualityTag:function(e){this._openQTagPopoverLayerId=e},_onLayerEdit:function(e,t,i){e=e.isTextLayer()?this._templates.getLayerById(e.uniqueId):e,t.isTextLayer()?this.shouldAllowTextboxLayer()?(e instanceof F.a?(i&&i.stopPropagation(),e=this._convertTextLayerToTextboxLayer(e)):this._templates.silentlySetActiveLayer(e),this._textboxPicker.editTextboxLayer(e),this._showPickerTab(Rc.TAB_TEXTBOX)):(this._textPicker.editTextLayer(e),this._templates.silentlySetActiveLayer(e),this._showPickerTab(Rc.TAB_TEXT)):(t.isImageLayer()||t.isClipartLayer()||t.isLicensedAssetLayer)&&this._editImageLayer(e)},_convertTextLayerToTextboxLayer:function(e){var t=this._templates.getTemplateByLayer(e),i=this._layerPicker.getLayerIndexInPicker(t.placementId,e.uniqueId,!0),n=new R.a.fromTextLayer(e);return ue.a.calculateTextboxPositions(n,!0),this._templates.removeLayer(t,e,!1,!0),this._templates.addLayerToPlacementTemplates(this.getSelectedPlacementId(),n,!0,!0),this._templates.silentlySetActiveLayer(n),this._templates.reorderLayer(n,i),this._isTextLayerConverted=!0,n},getProductOptionsValues:function(e,t){var i=this._validateEmbroideryTypeForText(this._productOptionsPicker.getValues());return!e&&y.a.isEmptyObject(i)&&(i=this._getDefaultPickerValue(n.a.TYPE_PRODUCT_OPTIONS)),t&&I.a.O2O(i,this._getTextUsedColors()),i},_validateEmbroideryTypeForText:function(e){var t=zn.a.NAME_EMBROIDERY_TYPE;return this._placementSelector.getSelectedPlacementId()!==oe.a.TYPE_EMBROIDERY_FRONT||this._isEmbroideryWithText()&&e.hasOwnProperty(t)&&"flat"!==e[t]&&(e[t]="flat"),e},_getTextUsedColors:function(){var e={},t=this._templates.getPlacementIdsHavingFiles();for(var i in t){var n=t[i];e[zn.a.getTextThreadName(n)]=this._templates.getUsedColors(n)}return e},_renderMockupPicker:function(){if(this._par.arePickersVisible&&!this._mockupPicker){var e=new Mo;e.onBack=this.showDesignTab,e.onPicked=this._onProductTemplatePicked,this._mockupPicker=new xo(e),this._mockupPicker.append(this._nodeMockupPicker)}},_onProductTemplatePicked:function(e){this._onPlacementItemAdded(this._placementSelector.getSelectedPlacement(),e)},_renderClipartPicker:function(){if(this._par.arePickersVisible){I.a.clearNode(this._nodeClipartPicker);var e=null;this._dropZoneArea&&(e=this._dropZoneArea,this._dropZoneArea.setActivePlacement(this._placementSelector.getSelectedPlacement())),this._clipartPicker=new Ri({onAddFileCallback:this._onPlacementItemAdded.bind(this,this._placementSelector.getSelectedPlacement()),onBackCallback:this.showDesignTab,selectedPlacementTechnique:this._getActiveTechnique(),fileDropZone:e}),this._clipartPicker.append(this._nodeClipartPicker)}},_renderQuickDesignPicker:function(){var e=this;return Nc(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._par.arePickersVisible){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.waitInitialRender();case 4:I.a.clearNode(e._nodeQuickDesignPicker),e._dropZoneArea&&e._dropZoneArea.setActivePlacement(e._placementSelector.getSelectedPlacement()),e._quickDesignPicker=new Hl({onAddFileCallback:e._onPlacementItemAdded.bind(e,e._placementSelector.getSelectedPlacement()),onBackCallback:e.showDesignTab,selectedPlacementTechnique:e._getActiveTechnique(),fileDropZone:e._dropZoneArea}),e._quickDesignPicker.append(e._nodeQuickDesignPicker);case 8:case"end":return t.stop()}}),t)})))()},_renderLicensedAssetPicker:function(){var e,t;if(this._par.arePickersVisible){I.a.clearNode(this._nodeLicensedAssetPicker);var i=new pa;i.onAddFileCallback=this._onPlacementItemAdded.bind(this,this._placementSelector.getSelectedPlacement()),i.onBackCallback=this.showDesignTab,i.selectedPlacementTechnique=this._getActiveTechnique(),i.storeId=this.storeId,i.currency=(null===(e=Object(_e.a)())||void 0===e||null===(t=e.priceRange)||void 0===t?void 0:t.currency)||Ra.a.CURRENCY_USD,this._dropZoneArea&&(i.fileDropZone=this._dropZoneArea,this._dropZoneArea.setActivePlacement(this._placementSelector.getSelectedPlacement())),this._licensedAssetPicker=new Za(i),this._licensedAssetPicker.append(this._nodeLicensedAssetPicker)}},_renderOrientationPicker:function(){this._par.arePickersVisible&&this._generatorParams.availableOrientations.length&&(I.a.clearNode(this._nodeOrientationPicker),this._orientationPicker=new $i(this._generatorParams.generatorVariants,this._generatorParams.availableOrientations,this._onOrientationChanged,this._orientation),this._orientationPicker.append(this._nodeOrientationPicker))},getOrientation:function(){return this._orientation||null},_onOrientationChanged:function(){this._orientation=this._orientationPicker.getValue(),this.requireMockupRegenerationAndShowDesigner(),this._reloadEverything()},_createProductOptionsPickerPar:function(){var e=new yr.a;return e.optionItems=this._getProductOptions(),e.values=this._getDefaultPickerValue(n.a.TYPE_PRODUCT_OPTIONS),e.onChange=this.onProductOptionChanged,e},_renderProductOptions:function(){if(this._par.arePickersVisible||this._par.isCustomizingMode){if(I.a.clearNode(this._nodeProductOptions),!this._productOptionsPicker){var e=this._createProductOptionsPickerPar();this._productOptionsPicker=new s.a(e)}this._toggleTextboxPickerAvailability(),this._shouldProductOptionsBeHidden()||(this._productOptionsPicker.hasVisibleOptions()&&tag("hr").append(this._nodeProductOptions),this._productOptionsPicker.append(this._nodeProductOptions))}},_shouldProductOptionsBeHidden:function(){var e;return this._technique===ce.a.TYPE_EMBROIDERY||(null===(e=Object(_e.a)())||void 0===e?void 0:e.type)!==ce.a.TYPE_CUT_SEW&&(!this._productOptionsPicker.hasVisibleOptions()||this._par.isOrderFlowMode&&!this._templates.getPlacementIdsHavingFiles().length)},_renderAvailabilityWarning:function(){if(this._par.arePickersVisible&&((this._canRenderColorPicker()||this._canRenderSizePicker())&&(I.a.clearNode(this._nodeAvailabilityWarning),tag("div","",[tag("hr")]).append(this._nodeAvailabilityWarning)),!(!this.allColors||!this.allSizes||!this._selectedColors.length&&this.allColors[0]||!this._selectedSizes.length&&this.allSizes[0]||!this._canRenderOSSWarning()||this._par.isMockupGeneratorMode||this._par.productTemplateEditorState))){I.a.clearNode(this._nodeAvailabilityWarning);var e=ca.a.UNAVAILABLE.DESC;this.allColors[0]?this.allSizes[0]||(e=ca.a.UNAVAILABLE.DESC_COLOR_ONLY):e=ca.a.UNAVAILABLE.DESC_SIZE_ONLY,tag("div","",[tag("hr"),tag("div","alert alert-danger text-center-padding-10",e)]).append(this._nodeAvailabilityWarning)}},_canRenderOSSWarning:function(){var e=this;return!!this.allVariants.find((function(t){var i,n=t.isTemporaryOutOfStock,r=t.color,a=t.size;return r===((null===(i=e._selectedColors[0])||void 0===i?void 0:i.color)||null)&&a===(e._selectedSizes[0]||null)&&n}))},_renderColorPicker:function(){var e,t=this;if(this._par.arePickersVisible&&(I.a.clearNode(this._nodeColorPicker),this._canRenderColorPicker())){this._selectedColors.length||(this._selectedColors=this._getDefaultPickerValue(n.a.TYPE_COLOR));var i=new tn.a;i.values=this.allColors.slice(),i.selectedValues=this._selectedColors.slice(),i.selectedLimit=this._getMaxColorsLimit(),i.pickerTitle=null===(e=Object(_e.a)())||void 0===e?void 0:e.getColorPickerTitle(this._getMaxColorsLimit()),i.onChangedCallback=this._onColorsChanged,i.isPopoverEnabled=this._par.pickerConfig.colorConfig.isPopoverEnabled,i.canDeselectLast=!this._par.isOrderFlowMode&&!this._par.isChangePrintfileMode,i.getSelectedSizes=function(){return t._selectedSizes},this._colorPicker=new nn(i).append(this._nodeColorPicker);var r=[],a=[];if(this._dsrSettingsApplied()){var o,s=_.reduce(this.allSizes,(function(e,i){return e[i]=t.discontinuedColors[i]||[],e}),{});r=(o=_).intersection.apply(o,Ec(Object.values(s))),a=this._regionPicker?_.difference(this.allColors.map((function(e){return e.color})),this.getSelectedRegionVariants().map((function(e){return e.color}))):[]}this._colorPicker.setDiscontinuedColors(r).setDisabledRegionColors(a).setUnavailableColors([]).render()}},_canRenderColorPicker:function(){return this._par.arePickersVisible&&this.allColors&&this.allColors.length&&this.allColors.length>1},_renderFillColorWarning:function(){var e,t;I.a.clearNode(this._nodeDesignFillColorPickerWarning),Object(_e.d)(this.getSelectedPlacementId())&&(e=this._nodeDesignFillColorPickerWarning,t=dlang("generator","This product isn't reversible"),tag("div","alert alert-warning",t).append(e))},_renderDesignFillColorPicker:function(){if((this._par.arePickersVisible||this._par.isCustomizingMode)&&this._nodeDesignFillColorPicker&&this._canHaveDesignFillColor()){I.a.clearNode(this._nodeDesignFillColorPicker),tag("h6","pf-h6 pf-mb-8 pf-d-inline-block",[this._par.isProductlessMode?dlang("generator","Area background color"):dlang("generator","Print area background color")]).append(this._nodeDesignFillColorPicker);var e=new ne.a;if(e.colors=this._getDesignFillColorOptions(),e.color=this.getDesignFillColor(),e.hideRGB=!1,e.onChange=this._onDesignFillColorChanged,e.scrollToDropDown=!0,this._designFillColorPicker=new re.a(e).append(this._nodeDesignFillColorPicker),this._loadDesignFillColor(),this._checkIfBgColorApplyToAllCheckBoxIsNeeded()){var t=new Pr.a;t.label=dlang("generator","Apply to all placements"),t.wrapperClass="control-options pf-pt-16",t.isChecked=this._placementOptions.isSameFillForAllPlacements(),t.onchange=this._onDesignFillColorApplyCheckboxChanged,this._designFillColorApplyCheckbox=new Cr.a(t).append(this._nodeDesignFillColorPicker),this._manageCheckboxShowHide()}}},_canHaveDesignFillColor:function(){return this.isAllOverProduct(!0)||this._par.isProductlessMode},_checkIfBgColorApplyToAllCheckBoxIsNeeded:function(){if(this._generatorParams.availablePlacements.length<2)return!1;var e=this.getAvailablePlacements(),t=0;for(var i in e){var n=e[i];if(-1===oe.a.DESIGN_FILL_COLOR_EXCEPTION_PLACEMENTS.indexOf(n.id)&&t++,t>1)return!0}},_manageCheckboxShowHide:function(){this._designFillColorApplyCheckbox&&(oe.a.DESIGN_FILL_COLOR_EXCEPTION_PLACEMENTS.indexOf(this.getSelectedPlacementId())>-1?(this._designFillColorApplyCheckbox.setChecked(!1),this._designFillColorApplyCheckbox.hide()):(this._designFillColorApplyCheckbox.setChecked(this._placementOptions.isSameFillForAllPlacements()),this._designFillColorApplyCheckbox.show()))},_getDesignFillColorOptions:function(){var e=re.a.getNoneColor();return Object.assign(e,this._getColors()),e},hasDesignFillColor:function(e){return e=void 0!==e?e:this.getSelectedPlacementId(),!!this.getDesignFillColor(e)},hasAtLeastOneDesignFillColor:function(){return!!this._placementOptions&&this._placementOptions.hasPlacementWithFillColor()},_loadDesignFillColor:function(){var e;if(this.isAllOverProduct(!0)){this._placementOptionsRawStorage&&(this._placementOptions=Ar.a.fromArray(this._placementOptionsRawStorage),this._placementOptionsRawStorage=null);var t=this.getDesignFillColor();null===(e=this._designFillColorPicker)||void 0===e||e.setColor(t,!0)}},getDesignFillColor:function(e){return this._placementOptions?this._placementOptions.getPlacementFillColor(null!=e?e:this.getSelectedPlacementId()):null},_getColors:function(){if(this.isAllOverProduct())return re.a.allOverColors();var e=re.a.defaultColors(),t=Object(_e.a)();return null!=t&&t.isWhiteDtgTote()&&delete e.White,null!=t&&t.isBlackMug()&&delete e.Black,e},isAllOverProduct:function(e){var t=Object(_e.a)(),i=(null==t?void 0:t.isMug())||(null==t?void 0:t.isDrinkware())||(null==t?void 0:t.isPhoneCase())||(null==t?void 0:t.isPoster())||(null==t?void 0:t.isCanvas())||(null==t?void 0:t.isFramedPoster());return e?this._templates.isCoverMode()||i:this._templates.isCoverMode()&&!i},_onDesignFillColorChanged:function(e){this._designFillColorApplyCheckbox&&this._designFillColorApplyCheckbox.isChecked()?this._placementOptions.setAllPlacementFillColor(e):this._placementOptions.setPlacementFillColor(this.getSelectedPlacementId(),e),this.designData.rawPlacementOptions=this._placementOptions.getData(),this.requireMockupRegeneration(),this.updateView(),this.observer.emitDesignFillColorChanged(this._placementOptions.hasPlacementWithFillColor()),this._templates.getChangeListener().notifyDesignFillColorChanged(),T.l(T.d)},_onDesignFillColorApplyCheckboxChanged:function(e){if(e.target.checked){var t=this.getDesignFillColor();this._placementOptions.setAllPlacementFillColor(t),this._onDesignFillColorChanged(t)}},_getMaxColorsLimit:function(){return this._par.pickerConfig.colorConfig.maxValues?this._par.pickerConfig.colorConfig.maxValues:this._isVariantLimitExceeded()?this._selectedColors.length:this.allColors.length},_onColorsChanged:function(e,t){var i;if(this._popoverCloseTimeoutColor&&clearTimeout(this._popoverCloseTimeoutColor),this.observer.emitBeforeColorsChanged(e)){var n=this.allColors.map((function(e){return e.color}));e=e.filter((function(e){return n.includes(e.color)}));var r=[];for(var a in e)e[a].color?r.push(e[a].color):e[a].colors;var o=(null===(i=this._regionPicker)||void 0===i?void 0:i.getMatchingVariants())||null,s=Object(_e.a)(),l=null==s?void 0:s.productId;if(!this.lastSelectedColor&&this._selectedColors.length&&(this.lastSelectedColor=this._selectedColors[0].color),this._colorPicker.validateSelectedColors(this.regionData,r,o,this.allVariants.filter((function(e){return l===e.productId})),null==s?void 0:s.sizes,this._onColorPopoverClosed.bind(this))){this.requireMockupRegenerationAndShowDesigner();var c=this.lastSelectedColor;if((t=t||!1)||e.length!==this.allColors.length)if(this.lastSelectedColor=null,e.length>this._selectedColors.length){for(var d in e)if(!this.isColorSelected(e[d].color)){this.lastSelectedColor=e[d].color;break}}else e.length>0&&e.length<this._selectedColors.length&&this.isColorSelected(c,e)&&(this.lastSelectedColor=c);this._selectedColors=e,0===this._selectedColors.length&&(this._selectedColors.push([].concat(this.allColors).shift()),this._colorPicker.setColors(this._selectedColors).render(),this._colorPicker.updateErrorStatus()),!this.lastSelectedColor&&e[0]&&(this.lastSelectedColor=e[0].color),(this._par.isMockupGeneratorMode||this._par.isProductPushMode||this._isProductTemplateEditor())&&this._renderSizePicker(),this.updateView(),this.observer.emitAfterColorsChanged(e);var u=this._getSelectedMappings()[0],h=u.color,p=u.size;T.l(oc.a.EVENT_VARIANT_COLOR_CHANGED,{color:h,size:p}),this._colorPicker.setColors(e).render(),I.a.clearNode(this._nodeAvailabilityWarning),tag("div","",[tag("hr")]).append(this._nodeAvailabilityWarning)}}},_onColorPopoverClosed:function(){var e=this;this._par.isOrderFlowMode&&(this._popoverCloseTimeoutColor=setTimeout((function(){e._colorPicker.setColors(e.allColors.filter((function(t){return O.a.isEqual(t.color,e.lastSelectedColor)}))).render()}),500))},isColorSelected:function(e,t){for(var i in t=t||this._selectedColors)if(O.a.isEqual(t[i].color,e))return!0;return!1},isSizeSelected:function(e,t){for(var i=0,n=(t=t||this._selectedSizes).length;i<n;i++)if(O.a.isEqual(t[i],e))return!0;return!1},getGeneratorVariantById:function(e,t){var i=this._getGeneratorVariants(t);if(!i.length)return null;for(var n=0,r=i.length;n<r;n++)if(i[n]&&i[n].generatorVariantId===e)return i[n];if(t)for(n=0,r=(i=this.getSelectedGeneratorVariants(!1,!0).generatorVariants).length;n<r;n++)if(i[n]&&i[n].generatorVariantId===e)return i[n];return PF.DEV&&console.log("Generator variant not found for id: "+e),null},_renderTechniquePicker:function(){if(this._isTechniquePickerAvailable()){I.a.clearNode(this._nodeTechniquePicker);var e=new Lr.a;e.techniques=this._getTechniques(),e.hasNewPlacement=this._generatorParams.hasNewPlacement,e.activeValue=this._getActiveTechnique(),e.callback=this._onTechniquePicked,e.isGenerator=!0,e.isMockupGenerator=this._par.isMockupGeneratorMode,e.useStrictRegionCheck=!this._dsrSettingsApplied(),this._regionPicker&&(e.regions=this._regionPicker.getSelectedRegions()),this._techniquePicker=(this._getTechniques().length>1?new a.a(e):tag("div")).append(this._nodeTechniquePicker),tag("hr").prepend(this._techniquePicker.node),this._techniquePicker.toggleChangeTechniquePopup(this._templates.hasLayers())}},_onTechniquePicked:function(e){var t;this._technique=e;var i=new Hn.a;this._labelSwitcher&&this._labelSwitcher.hide(),this._par.designerState&&(i.generatorDesignId=this._par.designerState.generatorDesignId),this._par.designerState=i,this._templates.setActiveLayer(null),this._templates.silentlyRemoveAllTemplates(),this._placementSelector.deselectPlacement(),this.requireMockupRegenerationAndShowDesigner(!0),Object(k.a)(null===(t=Object(_e.a)())||void 0===t?void 0:t.productId).rememberLastUsedTechnique(e),this._renderTextboxPicker(),this.observer.emitMainTechniqueChanged(e),this._loadProduct(i,!0,!0,!0)},onAllImagesProcessed:function(){this._isProductTemplateDetailsEditor()||this._renderTechniquePicker(),this.updateView()},_getTechniques:function(){return this._generatorParams.availableTechniques?this._generatorParams.availableTechniques.map((function(e){return{type:e,label:ce.a.LABELS[e]}})):[]},_getActiveTechnique:function(){if(this._technique)return this._technique;var e=Object(_e.a)(),t=this._templates.getTechnique()||(null==e?void 0:e.type);return Object(k.a)(null==e?void 0:e.productId).rememberLastUsedTechnique(),t},_isTechniquePickerAvailable:function(){return this._generatorParams&&this._generatorParams.availableTechniques&&this._generatorParams.availableTechniques.length>1},_renderRegionPicker:function(){if(this._par.arePickersVisible&&!this._par.isMockupGeneratorMode&&!this._isProductTemplateEditor()&&(I.a.clearNode(this._nodeRegionPicker),this.regionData)){var e=this.regionData.allowedSellingRegions||this._par.pickerConfig.activeRegion,t=Object(_e.a)(),i=t.availableTechniques||[];this._regionPicker=new aa(new la({regionData:this.regionData,activeRegion:e,onChange:this._onRegionChanged.bind(this),productId:t.productId,shouldShowAvailabilityInfo:!t.isAdidas(),shouldLimitPickableRegionCount:!i.includes(ce.a.TYPE_EMBROIDERY)})),this._dsrSettingsApplied()?tag("p","pf-ui-body",dlang("dashboard","Available product customization based on your selling region and preferences")).append(this._nodeRegionPicker):(this._regionPicker.node.append(this._nodeRegionPicker),this._isProductTemplateDetailsEditor()||tag("hr").prepend(this._regionPicker.node))}},_updatePickersByRegion:function(e,t){this._techniquePicker&&this._techniquePicker.updateTechniqueAvailability(e),this._dsrSettingsApplied()||this._setAllowedRegionColorsAndSizes(e);var i=this.allSizes,n=this.allColors,r=this._selectedColors.map((function(e){return e.color})).filter((function(e){return!n.map((function(e){return e.color})).some((function(t){return t===e}))})),a=this._selectedSizes.filter((function(e){return!i.some((function(t){return t===e}))}));for(var o in e){var s=e[o];if(this._selectedRegionAttributes[s]){for(var l in this._selectedRegionAttributes[s].sizes)-1===this._selectedSizes.indexOf(this._selectedRegionAttributes[s].sizes[l])&&this._selectedSizes.push(this._selectedRegionAttributes[s].sizes[l]);for(var c in n)for(var d in this._selectedRegionAttributes[s].colors)n[c].color===this._selectedRegionAttributes[s].colors[d]&&this._selectedColors.push(n[c])}}if(r){if(t.length)for(var u in t){var h=t[u];this._selectedRegionAttributes[h]={colors:r}}for(var p in this._selectedColors)for(var g in r)this._selectedColors[p].color===r[g]&&this._selectedColors.splice(p,1)}if(a){if(t.length)for(var f in t){var _=t[f];Object.assign(this._selectedRegionAttributes[_],{sizes:a})}for(var m in a){var v=this._selectedSizes.indexOf(a[m]);v>-1&&this._selectedSizes.splice(v,1)}}0!==r.length&&0===this._selectedColors.length&&this._selectedColors.push(n[0]);var y,b=!1,P=kc(this._selectedColors);try{for(P.s();!(y=P.n()).done;){y.value.color===this.lastSelectedColor&&(b=!0)}}catch(e){P.e(e)}finally{P.f()}!b&&this._selectedColors.length>0&&(this.lastSelectedColor=this._selectedColors[0].color);var C,T=!1,I=kc(this._selectedSizes);try{for(I.s();!(C=I.n()).done;){C.value===this.lastSelectedSize&&(T=!0)}}catch(e){I.e(e)}finally{I.f()}!T&&this._selectedSizes.length>0&&(this.lastSelectedSize=this._selectedSizes[0]),this._renderColorPicker(),this._renderDesignFillColorPicker(),this._renderSizePicker(),this.updateView()},_onRegionChanged:function(e,t){var i;(new u.a).setActiveStockedInRegion(e,null===(i=Object(_e.a)())||void 0===i?void 0:i.productId),this.observer.emitRegionChanged(e)?this._updatePickersByRegion(e,t):this._techniquePicker&&this._techniquePicker.updateTechniqueAvailability(e)},_setAllowedRegionColorsAndSizes:function(e){var t,i=[],n=kc(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;i.push(this.regionData.variantsByRegion[r])}}catch(e){n.e(e)}finally{n.f()}var a,o,s=[].concat.apply([],i).filter((function(e,t,i){return i.indexOf(e)===t})).filter((function(e){return i.every((function(t){return t.indexOf(e)>-1}))})),l=this._generatorParams.variantMapping,c=[];for(a in l)for(o in s)l[a].variantId===s[o]&&c.push(l[a]);var d=[],u=[];for(a in c)d.push(c[a].size),u.push(c[a].color);var h=d.filter((function(e,t){return d.indexOf(e)===t})),p=u.filter((function(e,t){return u.indexOf(e)===t})),g=[],f=this._generatorParams.colors;for(a in p)for(o in f)p[a]===f[o].color&&g.push(f[o]);return this.allColors=g,this.allSizes=h,!0},_shouldRenderSizePicker:function(){return!!this._par.arePickersVisible&&(!this._isProductTemplateEditor()||(null===(e=Object(_e.a)())||void 0===e?void 0:e.canHaveSizePickerForProductTemplates()));var e},_canRenderSizePicker:function(e){var t=Object(_e.a)();if(!(t&&(e||this._generatorParams&&this._shouldRenderSizePicker())))return!1;if(this._recalcAvailableSizes(),!e&&(!this.allAvailableSizes||this.allAvailableSizes.length<1||!this._getAvailableSizesCount()))return!1;if(!e&&1===this._getAvailableSizesCount()&&!this._par.pickerConfig.sizeConfig.maxValues)return!1;var i=[ce.a.TYPE_T_SHIRT,ce.a.TYPE_CUT_SEW,ce.a.TYPE_SUBLIMATION,ce.a.TYPE_SHOES,ce.a.TYPE_JEWELRY,ce.a.TYPE_EMBROIDERY];return!(this._par.isMockupGeneratorMode&&-1!==i.indexOf(t.type)&&!t.isPillow()&&!t.isLaptopSleeve()&&!t.isTowel())},_renderSizePicker:function(){var e;if(this._canRenderSizePicker()){I.a.clearNode(this._nodeSizePicker),1===this.allAvailableSizes.length&&(this._selectedSizes.length||(this._selectedSizes=this.allAvailableSizes.slice()));var t=this._par.existingVariants&&this._par.store.isEtsy(),i=this.designData.product.isDtgShirt();t&&i&&this._setExistingVariantSizes(),this._selectedSizes.length||(this._selectedSizes=this._getDefaultPickerValue(n.a.TYPE_SIZE));var r=new tn.a;if(r.values=this.allAvailableSizes,r.allValues=this.allSizes,r.disabledSizes=this._disabledSizes,r.selectedValues=this._selectedSizes,r.selectedLimit=this._getMaxSizeLimit(),r.onChangedCallback=this._onSizesChanged,r.designData=this.designData,r.isPopoverEnabled=this._par.pickerConfig.sizeConfig.isPopoverEnabled,r.productId=null===(e=Object(_e.a)())||void 0===e?void 0:e.productId,r.isSizeGuideVisible=this._par.isOrderFlowMode||this._par.isChangePrintfileMode,this._par.isOrderFlowMode&&(r.translatedSizes=this.translatedSizes),this._sizePicker=new Qi.a(r).append(this._nodeSizePicker),this._dsrSettingsApplied()&&(this._sizePicker.setSelectedRegionDisabledValues(this.getSelectedRegionVariants(),this.allVariants,"size",this.regionData),this._sizePicker.setInactiveSizes(this._sizePicker.getSelectedRegionDisabledValues("size"))),t&&i)this._disableSizePicker();else if(this._par.onDisabledSizesWarn){var a=this._par.onDisabledSizesWarn(this._disabledSizes);a&&new ae.a(a,"warning pf-d-flex").append(this._nodeSizePicker)}this._canRenderColorPicker()&&tag("hr").prepend(this._sizePicker.node)}},_isAddVariantsFlow:function(){return!(!this._par.existingVariants||!this._par.existingVariants.length)},_renderAdvancedTemplatePicker:function(){if(this._par.arePickersVisible&&this._isAdvancedTemplateAvailable()&&this._nodeAdvancedTemplatePicker){var e=[h.a.TEMPLATE_TYPE_SIMPLE,h.a.TEMPLATE_TYPE_ADVANCED];this._updateTemplateType(),I.a.clearNode(this._nodeAdvancedTemplatePicker),this._advancedTemplatePicker=new an(e,this._onTemplateTypeChanged.bind(this),this.getTemplateTypeLoaded.bind(this),this._templateType),this._advancedTemplatePicker.toggleTemplatePickerPopup(this._templates.hasLayers()),this._advancedTemplatePicker.append(this._nodeAdvancedTemplatePicker)}},_onTemplateTypeChanged:function(){this._templateType=this._advancedTemplatePicker.getValue(),this._templates.silentlyRemoveAllLayers(),this._onProductLoadedShowDesignTab=!0,this._advancedTemplatePicker.toggleTemplatePickerPopup(this._templates.hasLayers()),this._reloadEverything()},_isAdvancedTemplateAvailable:function(){return!(!this._generatorParams||!this._generatorParams.variantMapping)&&this._getSelectedMappings().some(function(e){if(e.advancedTemplateSize){var t=Object.keys(e.advancedTemplateSize);for(var i in t)if(t[i]!==oe.a.TYPE_LABEL_INSIDE&&t[i]===this.getSelectedPlacementId())return!0}}.bind(this))},_hasTemplateTypeChanged:function(){return this._templateType!==this.getTemplateTypeLoaded()},_getAvailableSizesCount:function(){return this.allAvailableSizes.length},_recalcAvailableSizes:function(){var e=this;return this.allAvailableSizes=this._getSelectedMappings(!0).map((function(e){return e.size})).filter((function(t,i,n){return t&&n.indexOf(t)===i&&e.allSizes.indexOf(t)>-1})).sort(A.a.sizeSortingCallback),(this._par.isMockupGeneratorMode||this._par.isProductPushMode)&&this._recalcSelectedSizes(),this.allAvailableSizes},_recalcSelectedSizes:function(){var e=this;this._sizePicker&&this._sizePicker.isSelectAllChecked()?this._selectedSizes=this.allAvailableSizes.slice():this._selectedSizes=this._selectedSizes.filter((function(t){return e.allAvailableSizes.includes(t)})),this._selectedSizes.length||(this._selectedSizes=this.allAvailableSizes.slice(0,this._getMaxSizeLimit()))},recalculatePositionsForTemplateEditor:function(){var e,t,i=this,n=null===(e=this._par.productTemplateEditorState)||void 0===e||null===(t=e.sourceProductTemplate)||void 0===t?void 0:t.sizes;if(n&&this._shouldUseFullTemplateEditor()&&!this._templateEditorPositionsCalculated&&(this._isCreatingProductFromTemplate()||this._isProductTemplateEditor())){var r={};if(!this.generatorVariants){var a=this.getSelectedGeneratorVariants();this.generatorVariants=a.generatorVariants,this._selectedVariantCount=a.variantCount,this._allSelectedVariantCount=a.allVariantCount}this.generatorVariants.filter((function(e){return n.includes(e.size)})).forEach((function(e){if(void 0===r[e.placementId]){r[e.placementId]=e;var t=n.slice(),a=Object(rc.c)(i._templates,e);i._generatorParams.getGeneratorVariantsArray().forEach((function(n){if(!t.includes(n.size)&&e.placementId===n.placementId){t.push(n.size);var r=Object(rc.c)(i._templates,n);i._templates.recalculateTemplateLayersBySource(r,a)}}))}})),this._templateEditorPositionsCalculated=!0}},_shouldUseFullTemplateEditor:function(){if(!Object(_e.c)())return!1;var e=Object(_e.a)();return e.isPoster()||e.isCanvas()||e.isMug()||e.isSticker()||e.isPillow()||e.isPhoneCase()||e.isLaptopSleeve()||e.isTowel()},_getMaxSizeLimit:function(){return this._par.pickerConfig.sizeConfig.maxValues||this.allAvailableSizes.length},_setExistingVariantSizes:function(){var e=this._par.existingVariants.map((function(e){return(new u.a).getCachedVariantById(e.variantId).size}));this._selectedSizes=e.filter((function(t,i){return e.indexOf(t)===i}))},_disableSizePicker:function(){var e=tag("span",{className:"glyphicon glyphicon-info-sign size-picker-tooltip",attr:{title:dlang("generator","New color variants will be added in the existing size range.")}}).append(this._sizePicker.sizeNodeTitle);y()(e).tooltip(),I.a.addClassName(this._sizePicker.sizeCheckboxSelector,"disabled")},_onSizesChanged:function(e){var t,i=this;if(this._popoverCloseTimeoutSize&&clearTimeout(this._popoverCloseTimeoutSize),this.observer.emitSizesChanged(e)&&(!this._sizePicker||!e.some((function(e){return i._sizePicker.isSizeDisabled(e)})))){var n=this._regionPicker?this._regionPicker.getMatchingVariants():null,r=this.regionData;!this.lastSelectedSize&&this._selectedSizes.length&&(this.lastSelectedSize=this._selectedSizes[0]);var a=null===(t=Object(_e.a)())||void 0===t?void 0:t.productId;if(!this._sizePicker||this._sizePicker.validateSelectedSize(r,e.join(" "),n,this.allVariants.filter((function(e){return a===e.productId})),(function(){i._popoverCloseTimeoutSize=setTimeout((function(){i._sizePicker.setSizes(i.allSizes.filter((function(e){return O.a.isEqual(e,i.lastSelectedSize)}))).render()}),500)}))){if(this.requireMockupRegenerationAndShowDesigner(),this.lastSelectedSize=null,e.length>this._selectedSizes.length)for(var o in e)if(!this.isSizeSelected(e[o])){this.lastSelectedSize=e[o];break}if(this._par.store.isWix()&&this._isAddVariantsFlow()&&(this.designData.shouldShowWixMockupWarning=e!==this._initialSizes),this._selectedSizes=e,0===this._selectedSizes.length){var s=this.allAvailableSizes.find((function(e){return!i._sizePicker.isSizeDisabled(e)}));s&&(this._selectedSizes.push(s),this._sizePicker.setSizes(this._selectedSizes).render())}!this.lastSelectedSize&&e[0]&&(this.lastSelectedSize=e[0]),0===e.length&&(this._renderDiscontinuedWarning(),this._renderUnavailableSizeColorWarning()),this.recalculatePositionsForTemplateEditor(),this.updateView(),this.observer.emitAfterSizesChanged(e),T.l(T.d),I.a.clearNode(this._nodeAvailabilityWarning),tag("div","",[tag("hr")]).append(this._nodeAvailabilityWarning)}}},_renderAvailability:function(){var e=this._par.isMockupGeneratorMode||this._par.isChangePrintfileMode||this._par.isCustomizingMode||this._par.isProductlessMode,t=Object(_e.a)();if(null!=t&&t.shouldShowAvailabilityTab()&&!e){var i=(null==t?void 0:t.getProductPageUrl())+"#availability";Object(L.a)(this.node)||T.m("showProductAvailability",null),T.n("showProductAvailability",(function(){window.open(i,"_blank").focus()}),this)}},_renderLayerPickerChooser:function(){var e=this;return Nc(regeneratorRuntime.mark((function t(){var i,n,r,a,o,s,l,c,d,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.waitInitialRender();case 2:if(e._nodeLayerPickerChooser){t.next=4;break}return t.abrupt("return");case 4:a=Object(_e.d)(e.getSelectedPlacementId()),o=!e._isLicensedAssetPickerDisabled()&&!e._par.isProductlessMode&&!a,s=null===(i=e._layerPickerChooser)||void 0===i?void 0:i.node.childNodes[0].hasChildNodes(),l=e.shouldAllowTextboxLayer()?Rc.TAB_TEXTBOX:Rc.TAB_TEXT,s?e._nodeLayerPickerChooser.contains(e._layerPickerChooser.node)||(I.a.clearNode(e._nodeLayerPickerChooser),tag("div","pf-mb-24",[tag("hr"),e._layerPickerChooser]).append(e._nodeLayerPickerChooser)):(I.a.clearNode(e._nodeLayerPickerChooser),c=new Ic({onFilePickerChosen:function(){var t;m.a.trackDesignTabsInProductOrDesignTab(e._par.isModalDesigner,(null===(t=e._pickerTabs.getActiveTab())||void 0===t?void 0:t.customId)||"design","Choose file",e._par),e.showDesignTab(),Se.a.checkForWarnings(!1,e.getLayerPicker().requestFilePicking.bind(e,e._placementSelector.getSelectedPlacement()))},onTextPickerChosen:function(){var t;m.a.trackDesignTabsInProductOrDesignTab(e._par.isModalDesigner,(null===(t=e._pickerTabs.getActiveTab())||void 0===t?void 0:t.customId)||"design","Add text",e._par),e._showPickerTab(l),e._templates.setActiveLayer(null),e.shouldAllowTextboxLayer()?e._textboxPicker.resetText(!0):e._textPicker.resetText()},onClipartPickerChosen:function(){var t;m.a.trackDesignTabsInProductOrDesignTab(e._par.isModalDesigner,(null===(t=e._pickerTabs.getActiveTab())||void 0===t?void 0:t.customId)||"design","Add clipart",e._par),e._showPickerTab(Rc.TAB_CLIPART)},onPromoMockupPickerChosen:e._showPickerTab.bind(e,Rc.TAB_MOCKUPS),onQuickDesignsPickerChosen:function(){var t;m.a.trackDesignTabsInProductOrDesignTab(e._par.isModalDesigner,(null===(t=e._pickerTabs.getActiveTab())||void 0===t?void 0:t.customId)||"design","Add quick design",e._par),e._showPickerTab(Rc.TAB_QUICKDESIGN)},onLicensedAssetPickerChosen:function(){var t;m.a.trackDesignTabsInProductOrDesignTab(e._par.isModalDesigner,(null===(t=e._pickerTabs.getActiveTab())||void 0===t?void 0:t.customId)||"design","Premium images",e._par),e._showPickerTab(Rc.TAB_LICENSEDASSET)},onBackToDefaultView:function(){e.showDesignTab(),I.a.removeClassName(e._nodeDesignFillColorPickerWarning,"pf-d-none"),I.a.removeClassName(e._nodeDesignFillColorPicker,"pf-d-none"),I.a.removeClassName(e._nodeAddidasBannerDesignTab,"pf-d-none"),I.a.hasClassName(e._nodeLayerPicker.lastChild,"design-tools-mke")&&I.a.removeClassName(e._nodeLayerPicker.lastChild,"pf-d-none"),e._layerPicker.render()},onVuePicked:function(){I.a.addClassName(e._nodeDesignFillColorPickerWarning,"pf-d-none"),I.a.addClassName(e._nodeDesignFillColorPicker,"pf-d-none"),I.a.addClassName(e._nodeAddidasBannerDesignTab,"pf-d-none"),I.a.hasClassName(e._nodeLayerPicker.lastChild,"design-tools-mke")&&I.a.addClassName(e._nodeLayerPicker.lastChild,"pf-d-none"),e._layerPicker.hideAllExceptVuePicker()}}),tag("div","pf-mb-24",[tag("hr"),e._layerPickerChooser=new Cc(c)]).append(e._nodeLayerPickerChooser)),e._updateChooserDisablingOptions(),Object(wc.c)({key:Sc.b.IS_PROMO_MOCKUP_PICKER_AVAILABLE,value:e._par.isPromoMakerMode}),Object(wc.c)({key:Sc.b.IS_QUICK_DESIGNS_PICKER_AVAILABLE,value:!a&&(null===(n=e._generatorParams)||void 0===n?void 0:n.areQuickDesignsAvailable)}),Object(wc.c)({key:Sc.b.IS_LICENSED_ASSET_PICKER_AVAILABLE,value:o}),Object(wc.c)({key:Sc.b.IS_TITLE_HIDDEN,value:!1}),Object(wc.c)({key:Sc.b.IS_MOCKUP_MAKER_MODE,value:e._par.isMockupMakerMode}),Object(wc.b)(),d=e._conflictCalculator.getConflictingPlacementTitles(e.getSelectedPlacementId()),u=null===(r=e._placementLimiter)||void 0===r?void 0:r.isLimitReached(),e._templates.hasLayersForPlacement(e.getSelectedPlacementId())||0!==d.length||u?I.a.addClassName(e._nodeLayerPickerChooser,"hidden"):I.a.removeClassName(e._nodeLayerPickerChooser,"hidden");case 19:case"end":return t.stop()}}),t)})))()},_updateChooserDisablingOptions:function(){Object(wc.d)({key:Sc.i.FILES_UNAVAILABLE,value:"",shouldUnset:!this.isFilePickerDisabled()}),Object(wc.d)({key:Sc.i.TEXTBOX_UNAVAILABLE,value:"",shouldUnset:!Object(_e.d)(this.getSelectedPlacementId())}),Object(wc.d)({key:Sc.i.CLIPARTS_UNAVAILABLE,value:"",shouldUnset:!this._isClipartPickerDisabled()}),this._toggleTextPickerAvailability(),this._toggleTextboxPickerAvailability(),this._validateTextLayerCount()},_renderAdidasBannerTabs:function(){I.a.clearNode(this._nodeAddidasBannerProductTab),this._getAdidasBanner().append(this._nodeAddidasBannerProductTab),I.a.clearNode(this._nodeAddidasBannerDesignTab),this._getAdidasBanner().append(this._nodeAddidasBannerDesignTab)},_getAdidasBanner:function(){var e=new Vt.a;return e.id="adidas-banner",e.type="gray",e.icon="/static/images/icons/adidas.svg",e.content=dlang("generator","Follow the {linkStart}adidasÂ®â€™ acceptable content guidelines{linkEnd} when customizing this product").replace("{linkStart}",'<a href="https://help.printful.com/hc/en-us/articles/360015873279-What-designs-can-I-use-to-customize-adidas-products" target="_blank" rel="noopener noreferrer">').replace("{linkEnd}","</a>"),new Bt.a(e)},isFilePickerDisabled:function(){return this._isEngraving()||this._isLargeEmbroidery()||Object(_e.d)(this.getSelectedPlacementId())},isTextPickerDisabled:function(){return Object(_e.d)(this.getSelectedPlacementId())},_isClipartPickerDisabled:function(){var e=this._placementSelector.getSelectedPlacement();return e&&(e.technique===ce.a.TECHNIQUE_EMBROIDERY||Object(_e.d)(e.id))},_isLicensedAssetPickerDisabled:function(){return this.getSelectedPlacementTechnique()===ce.a.TECHNIQUE_EMBROIDERY||this._isEngraving()},_isEmbroideryWithText:function(){return this.getSelectedPlacementTechnique()===ce.a.TECHNIQUE_EMBROIDERY&&this._templates.hasTextLayers(this._placementSelector.getSelectedPlacementId())},_isLargeEmbroidery:function(){return this.getSelectedPlacementId()===oe.a.TYPE_EMBROIDERY_LARGE_CENTER},_isEngraving:function(){return this._technique===ce.a.TECHNIQUE_ENGRAVING},onProductOptionChanged:function(e){var t=this;return Nc(regeneratorRuntime.mark((function i(){var n,r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t.observer.emitProductOptionsChanged()){i.next=2;break}return i.abrupt("return");case 2:return n=e.getOption(),t.shouldAllowFileColorChanger()||(n.isEmbroideryType()||n.isEmbroideryFrontColors()||n.isEmbroideryFront3dColors()?r=oe.a.TYPE_EMBROIDERY_FRONT:n.isEmbroideryLeftColors()?r=oe.a.TYPE_EMBROIDERY_LEFT:n.isEmbroideryRightColors()?r=oe.a.TYPE_EMBROIDERY_RIGHT:n.isEmbroideryBackColors()?r=oe.a.TYPE_EMBROIDERY_BACK:n.isEmbroideryLeftChestColors()?r=oe.a.TYPE_EMBROIDERY_CHEST_LEFT:n.isEmbroideryCenterChestColors()?r=oe.a.TYPE_EMBROIDERY_CHEST_CENTER:n.isEmbroideryLargeCenterColors()?r=oe.a.TYPE_EMBROIDERY_LARGE_CENTER:n.isEmbroideryLeftCornerColors()?r=oe.a.TYPE_EMBROIDERY_CORNER_LEFT:n.isEmbroideryRightCornerColors()?r=oe.a.TYPE_EMBROIDERY_CORNER_RIGHT:n.isEmbroideryApparelColors()?r=oe.a.TYPE_EMBROIDERY_APPAREL_FRONT:n.isEmbroideryApparelBackColors()&&(r=oe.a.TYPE_EMBROIDERY_APPAREL_BACK)),i.next=6,t.waitInitialRender();case 6:r&&(t.shouldAllowFileColorChanger()||t._updateEmbroideryColorsForPlacement(r),r!==t.getSelectedPlacementId()&&t.setActivePlacement(r)),t._renderFooter(),t._par.arePickersVisible&&((a=t._productOptionsPicker.getValues()).hasOwnProperty(e.getName())||(a[e.getName()]=e.getValue()),t._layerPicker.setProductOptionsValues(a).renderOptions(wr.a.fromArray({id:t.getSelectedPlacementId()}))),t.requireMockupRegenerationAndShowDesigner(),t._par.onPickerChanged&&t._par.onPickerChanged();case 11:case"end":return i.stop()}}),i)})))()},_onChildComponentProductOptionsChanged:function(e,t){if(this._isEmbroideryWithText()&&!this.shouldAllowFileColorChanger()&&I.a.O2O(t,this._getTextUsedColors()),this._productOptionsPicker){var i=this._productOptionsPicker.getValues();I.a.O2O(i,t),t=i;var n=new yr.a;n.optionItems=this._getProductOptions(),n.values=t,n.onChange=this.onProductOptionChanged;var r=new br.a(n);r.setPlacementIdsWithLayers(this._templates.getPlacementIdsHavingFiles()).setPlacementIdsWithFiles(this._templates.getPlacementIdsHavingFiles(M.a)).renderOptions(),this._productOptionsPicker.setProductOptions(r).render()}console.log("[W] Final option values calculated",t),this.designData.productOptions=t,e&&(this._updateEmbroideryColorsForPlacement(this.getSelectedPlacementId()),t.hasOwnProperty(zn.a.NAME_NOTES)&&this.observer.emitEmbroideryNotesValueChanged());var a=e?500:0;setTimeout(function(){this.observer.emitProductOptionsChanged(t)}.bind(this),a),this.requireMockupRegenerationAndShowDesigner(),this._toggleTextboxPickerAvailability(t[zn.a.NAME_EMBROIDERY_TYPE]),this._par.onPickerChanged&&this._par.onPickerChanged()},_tryApplyingEmbroideryColorization:function(){this.shouldAllowFileColorChanger()||this._productOptionsPicker&&(this._productOptionsPicker.setFileTypesWithFiles(this._templates.getPlacementIdsHavingFiles()).setPlacementIdsWithFiles(this._templates.getPlacementIdsHavingFiles(M.a)),this._updateEmbroideryColorsForPlacement(this.getSelectedPlacementId()))},_editImageLayer:function(e){this._embroideryImagePicker&&(this._recalcFirstLayerWith3dEmbroidery(),this._recalcEmbroideryPriceOptionsValue(),this._embroideryImagePicker.editImageLayer(e,this.getSelectedPlacementId())),this._templates.silentlySetActiveLayer(e),this._showPickerTab(Rc.TAB_IMAGE)},_updateEmbroideryColorsForPlacement:function(e){var t=this._getAvailablePlacementByPlacementId(e);if(t&&t.technique===ce.a.TECHNIQUE_EMBROIDERY){for(var i=function(){this._mockup&&!this._par.isCustomizingMode||this.updateView();for(var e=this._getTemplate(t.id),i=0,n=e.layers.length;i<n;i++)this._scheduleEmbroideryPreviewUpdate(t.id,e.layers[i],!1)}.bind(this),n=this._getEmbroideryColorsForPlacement(t.id),r=this._templates.getUniqueFilesForPlacement(t.id),a=0,o=r.length;a<o;a++)this._updateEmbroideryColorsForPlacementAndFile(t,r[a],n,i);i()}},_getEmbroideryColorsForPlacement:function(e){if(!this._productOptionsPicker&&!this._par.isCustomizingMode)return[];if(-1===oe.a.TYPE_EMBROIDERY_FILES.indexOf(e))return[];var t=this._par.isCustomizingMode?this._par.pickerConfig.productOptionsValues||{}:this._productOptionsPicker.getValues(),i=this._validateEmbroideryTypeForText(t),n=[];if(oe.a.PLACEMENT_COLOR_MAP[e]===zn.a.NAME_EMBROIDERY_TYPE){var r=i[oe.a.PLACEMENT_COLOR_MAP[e]];"3d"!==r&&(n=n.concat(i[zn.a.NAME_THREAD_COLORS]||[])),"flat"!==r&&(n=n.concat(i[zn.a.NAME_THREAD_COLORS_3D]||[]))}else n=i[oe.a.PLACEMENT_COLOR_MAP[e]]||[];return n},_updateEmbroideryColorsForPlacementAndFile:function(e,t,i,n){var r=function(i){this._templates.overrideLayerImages(e.id,t.fileId,i),e.id===this.getSelectedPlacementId()&&n&&n()}.bind(this);i.length<1?r(null):new D.a(t.urlPreview,i,r)},_toggleTextPickerAvailability:function(e){if(this._layerPickerChooser&&!this._par.isCustomizingMode){var t=this._isTextPickerAvailable(e),i=dlang("dashboard","Text is only available in flat embroidery and can't be combined with 3D puff elements. Please choose flat embroidery to add text.");Object(wc.d)({key:Sc.i.TEXTBOX_EMBROIDERY,value:i,shouldUnset:t})}},_toggleTextboxPickerAvailability:function(e){if(this.shouldAllowTextboxLayer()){if(this._layerPickerChooser&&!this._par.isCustomizingMode){var t=this._isTextPickerAvailable(e),i=dlang("dashboard","Text is only available in flat embroidery and can't be combined with 3D puff elements. Please choose flat embroidery to add text.");Object(wc.d)({key:Sc.i.TEXTBOX_EMBROIDERY,value:i,shouldUnset:t})}}else this._toggleTextPickerAvailability(e)},_isTextPickerAvailable:function(e){var t=this._placementSelector.getSelectedPlacementId();e||(e=t===oe.a.TYPE_EMBROIDERY_FRONT?this.getProductOptionsValues(!0)[zn.a.NAME_EMBROIDERY_TYPE]:"flat");var i=this._templates.hasLayersForPlacement(t,M.a);return"flat"===e||!e||!i||this.shouldAllowFileColorChanger()},_scheduleEmbroideryPreviewUpdate:function(e,t,i,n){if(this._technique===ce.a.TYPE_EMBROIDERY){var r=this._getAvailablePlacementByPlacementId(e);if(!r||r.technique===ce.a.TECHNIQUE_EMBROIDERY){var a=e+t.uniqueId;this._renderTimeouts[a]&&clearTimeout(this._renderTimeouts[a]);var o=i?0:3e3;this._renderTimeouts[a]=setTimeout(this._renderEmbroideryImagePreview.bind(this,e,t,a,n),o)}}},_renderEmbroideryImagePreview:function(e,t,i,n){if(this._templates.getTemplateByLayer(t)){var r=[],a={};if((t=this._templates.getFreshLayer(t)).isImageLayer()?(r=this._getEmbroideryColorsForPlacement(e),a=t.overrideColors?t.overrideColors:{}):t.isTextLayer()&&t.color?r=[t.color]:t.isClipartLayer()&&t.fillColor&&(r=[t.fillColor]),0!==r.length||0!==Object.keys(a).length)if(!this.shouldAllowFileColorChanger()&&t.position.width*t.position.height>ge.a.MAX_EMBROIDERY_PREVIEW_AREA)t.overrideImagePulse&&(t.overrideImagePulse=null,this.updateView());else{var o=this._renderTimeouts[i],s=this._embroideryPreviewGenerated.bind(this,e,t,o,i,n);this.generatorRepository.generateEmbroideryPreview(t,r,this._par.generatorDesignKey,s)}}},_embroideryPreviewGenerated:function(e,t,i,n,a,o){if(this._renderTimeouts[n]===i){var s=new Image;s.onload=function(){var i=this._templates.getFreshLayer(t);i&&(i.overrideImagePulse=s.src,t.isImageLayer()?this._templates.updateImageLayer(i,this._templates,!0):t.isTextLayer()?this._templates.updateTextLayer(i,this._templates,!0,!0):e===this.getSelectedPlacementId()&&this.updateView(),a&&"function"==typeof a&&a())}.bind(this),s.src=o.image,r.a.updateInitialStateOptions=this._placementOptions.getData()}else console.log("Skipping preview since another task was active")},_renderVariantWarning:function(){if(!this._par.isOrderFlowMode){I.a.clearNode(this._nodeVariantWarning);var e=null;this._isVariantLimitExceeded()&&(e=this._renderExceededVariantLimitWarning()),this._getEbayStockQuantityExceededError()&&(e=this._renderEbayStockQuantityWarning()),e&&e.append(this._nodeVariantWarning)}},_renderEbayStockQuantityWarning:function(){var e=this._getEbayStockQuantityExceededError();if(!e)return null;var t=tag("div","alert alert-danger");return t.innerHTML="<b>"+dlang("dashboard","You've exceeded the total quantity of variants eBay allows you to add this month.")+"</b> "+dlang("dashboard","You're attempting to add {0} variants, but your remaining available eBay item quantity this month is {1} new items (variants).").format("<b>"+e.used+"</b>","<b>"+e.limit+"</b>")+"<br/>"+dclang("dashboard","eBay product push","Try un-checking some colors or sizes."),t},_renderExceededVariantLimitWarning:function(){if(!this._isVariantLimitExceeded())return null;var e=!!this._par.existingVariants&&this._par.existingVariants.length>0,t="<b>"+dlang("generator","You've exceeded your store's variant limit per product.")+"</b> ";return t+=e?(1===this._par.existingVariants.length?1===this.variantLimit?dlang("generator","You selected {0} including existing {1} variant, but the limit is {2} variant."):dlang("generator","You selected {0} additionally to existing {1} variants, but the limit is {2} variants."):1===this.variantLimit?dlang("generator","You selected {0} including existing {1} variants, but the limit is {2} variant."):dlang("generator","You selected {0} additionally to existing {1} variants, but the limit is {2} variants.")).format("<b>"+this._allSelectedVariantCount+"</b>","<b>"+this._par.existingVariants.length+"</b>",this.variantLimit+"</b>"):dnlang("generator","You selected {0}, but the limit is {1} variant.","You selected {0}, but the limit is {1} variants.",this.variantLimit).format("<b>"+this._allSelectedVariantCount+"</b>","<b>"+this.variantLimit+"</b>"),tag("div","alert alert-danger",[tag("span",{innerHTML:t}),tag("br"),dlang("generator","Try un-checking some colors or sizes, or create a new product if necessary.")])},_reRenderPickerTabs:function(e){this._pickerTabs.render(),this._dropZoneArea&&(e?(this._dropZoneArea.disable(),I.a.addClassName(this._layerPickerChooser.node,"hidden")):(this._dropZoneArea.enable(),I.a.removeClassName(this._layerPickerChooser.node,"hidden")))},_disableAddDesignTabIfNeeded:function(){if(this._pickerTabs){var e=this._pickerTabs.getTabById(Rc.TAB_DESIGN);e&&(this._technique===ce.a.TYPE_STOCK_PRODUCT?(e.isDisabled=!0,e.tooltipTitle=dlang("generator","This product isn't available for customization"),this._reRenderPickerTabs(!0),this._addDesignDataForStockProduct()):this._par.isProductPushMode&&(this._getSelectedVariant()?e.isDisabled&&(e.isDisabled=!1,e.tooltipTitle="",this._reRenderPickerTabs()):(e.isDisabled=!0,e.tooltipTitle=dlang("generator","To start designing, please select a new variant thatâ€™s not already synced to your store."),this._reRenderPickerTabs(!0))))}},_addDesignDataForStockProduct:function(){var e=this._getSelectedVariant();this._placementOptions&&e&&(this._placementOptions.getPlacementFillColor(e.placementId)||this._onDesignFillColorChanged("#000000"))},updateView:function(){var e=this;return Nc(regeneratorRuntime.mark((function t(){var i,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.waitInitialRender();case 2:if(e._renderDesignFillColorPicker(),i=e.getSelectedGeneratorVariants(),e.generatorVariants=i.generatorVariants,e._selectedVariantCount=i.variantCount,e._allSelectedVariantCount=i.allVariantCount,e.setPreviewMockupVariant(null),(n=e.getGeneratorVariantByPlacementId(!1,!0))&&e._isProductTemplateDetailsEditor()?e.setPreviewMockupVariant(n):n&&(e.setPreviewMockupVariant(n),e._placementSelector.setSelectedPlacementById(e.previewMockupVariant.placementId),e._par.placementDependentOptions&&e._productOptionsPicker.setSelectedPlacementId(e.previewMockupVariant.placementId),e._renderQuickDesignPicker(),(r=e._pickerTabs&&e._pickerTabs.getActiveTab())&&r.customId===Rc.TAB_PRODUCT?e._renderLayerPickerChooser():e._renderLayerPicker(),e._toggleTextboxPickerAvailability(),e._validateTextLayerCount()),e._renderFooter(),e._renderDiscontinuedWarning(),e._renderUnavailableSizeColorWarning(),e._renderVariantWarning(),e._renderDesignerTabs(),e._renderAdvancedTemplatePicker(),e._isProductTemplateDetailsEditor()||!e._isEmpty()){t.next=20;break}return e.renderEmptyMockup(),e._par.isChangePrintfileMode&&e._isEmbroideryWithText()&&e._renderProductOptions(),t.abrupt("return");case 20:e._isProductTemplateDetailsEditor()||(e._renderOrientationPicker(),e._renderProductOptions(),e._renderMockupVariantArea(),e._renderMockupMainArea());case 21:case"end":return t.stop()}}),t)})))()},updatePlacementPrices:function(e){this._placementSelector.setPriceDataAndRender(e)},getGeneratorVariantByPlacementId:function(e,t){e=e||this.getSelectedPlacementId();var i=this.lastSelectedColor,n=this.lastSelectedSize,r=this.getSelectedGeneratorVariants(!1,!0).generatorVariants;if(t)return r.sort((function(t,r){var a=0,o=0;return a+=2*Number(t.placementId===e),a+=Number(O.a.isEqual(t.color,i)),a+=Number(O.a.isEqual(t.size,n)),o+=2*Number(r.placementId===e),o+=Number(O.a.isEqual(r.color,i)),a>(o+=Number(O.a.isEqual(r.size,n)))?-1:a===o?0:1}))[0];for(var a in r){var o=r[a],s=!i||!o.color||O.a.isEqual(i,o.color),l=!n||!o.size||O.a.isEqual(n,o.size),c=!e||e===o.placementId;if(s&&l&&c)return o}return null},_canGeneratePreview:function(){return this.generatorVariants&&0!==this.generatorVariants.length},_renderMockupVariantArea:function(){if(!this._par.isFooterVisible)return!1;var e=this.hasDesignForPlacement(this.getSelectedPlacementId()),t=this._getGeneratorVariants(!e),i=this.getSelectedPlacementId(),n=t.filter((function(e){return e.placementId===i}));if(n.length<2)this._variantArea&&(this._variantArea.remove(),this._variantArea=null,I.a.clearNode(this._nodeMockupVariantArea));else if(this._variantArea)this._variantArea.setGeneratorVariants(n,this.previewMockupVariant),e||this._variantArea.renderMockupPreviewStrings();else{var r;I.a.clearNode(this._nodeMockupVariantArea);var a=new Qn,o=!this._isProductTemplateEditor()||(null===(r=Object(_e.a)())||void 0===r?void 0:r.canHaveSizePickerForProductTemplates());a.generatorVariants=n,a.activeGeneratorVariant=this.previewMockupVariant,a.onGeneratorVariantRemove=o?this._onGeneratorVariantRemove:null,a.onGeneratorVariantSelect=this._onGeneratorVariantSelect,a.templates=this._templates,a.designData=this.designData,this._variantArea=new er(a),this._variantArea.append(this._nodeMockupVariantArea)}},_getGeneratorVariants:function(e){return this._canGeneratePreview()&&!e?this.generatorVariants:this.getSelectedGeneratorVariants(!0,!0).generatorVariants},_onGeneratorVariantRemove:function(e){var t,i=[],n=[],r=this.getSelectedPlacementId(),a=this._getGeneratorVariants();for(var o in a){var s=a[o];s.generatorVariantId!==e&&s.placementId===r&&(s.size&&i.indexOf(s.size)<0&&i.push(s.size),s.color&&n.indexOf(s.color)<0&&n.push(s.color))}if((n=this.allColors.filter((function(e){return n.indexOf(e.color)>-1}))).length&&n.length!==this._selectedColors.length)return this._onColorsChanged(n),void this._colorPicker.setColors(n).render();i.length&&i.length!==this._selectedSizes.length&&(this._onSizesChanged(i),null===(t=this._sizePicker)||void 0===t||t.setSizes(i).render())},_getFirstInsideLabelGeneratorVariantId:function(e){var t=this._generatorParams.generatorVariants,i=null,n=null;for(var r in e||(e=this._par.isOrderFlowMode&&this._selectedColors.length>0?this._selectedColors[0].color:this.lastSelectedColor),t){var a=t[r];if(a.isInsideLabel())if((!a.color||!e||O.a.isEqual(a.color,e))&&(a.templateType===qn.a.LABEL_CUSTOM?n=a.generatorVariantId:a.templateType===qn.a.LABEL_NATIVE&&(i=a.generatorVariantId)),i&&n)break}return{native:i,custom:n}},_onGeneratorVariantSelect:function(e){this._onPlacementSelectorChanged(e,!0)},_onPlacementSelectorChanged:function(e,t){var i,n=!0;if(e instanceof wr.a?(i=this.getGeneratorVariantByPlacementId(e.id))||(i=this.getGeneratorVariantByPlacementId(e.id,!0)):Number(e)?(i=this.getGeneratorVariantById(e,!0),n=!1):i="string"==typeof e?this.getGeneratorVariantByPlacementId(e):this.getGeneratorVariantByPlacementId(),i&&(this.setPreviewMockupVariant(i),this._templates.setActiveLayerFromTemplate(i.placementId,i.templateId),this.lastSelectedColor=i.color,this.lastSelectedSize=i.size),n){var r=this._pickerTabs&&this._pickerTabs.getActiveTab();r&&r.customId&&(this._renderLayerPickerChooser(),this._showPickerTab(r.customId))}if(this._embroideryHelper.recalcGlobalSelectedEmbroiderySelectedColors(),this._embroideryHelper.reScheduleEmbroideryPreviewForTemplate(),t||Fn.a.resetZoom(),this._renderFooter(),this._loadDesignFillColor(),this._manageCheckboxShowHide(),this._renderClipartPicker(),this._renderQuickDesignPicker(),this._renderLicensedAssetPicker(),this._canRenderNativeInsideLabelSelection())this._renderInsideLabel();else{if(this._isEmpty())return this._renderTextboxPicker(),this.renderEmptyMockup(i),this._hideInsideLabelSwitcher(),void T.l(E.EVENT_UPDATE_MOBILE_FOOTER);this._renderMockupVariantArea(),this._renderMockupMainArea(),this._hideInsideLabelSwitcher()}Object(wc.a)(),this._toggleTextboxPickerAvailability(),this._validateTextLayerCount(),T.l(E.EVENT_UPDATE_MOBILE_FOOTER),this._shouldShowUnrelatedTemplatesPopover=!1},_hideInsideLabelSwitcher:function(){var e;null!==(e=Object(_e.a)())&&void 0!==e&&e.isAdvancedInsideLabelAllowed()&&this._labelSwitcher.hide()},_renderInsideLabel:function(){var e=!1;_.isUndefined(this._par.store.storeId)||(e=(new d.a).getCachedStore(this._par.store.storeId).hasFlag(kr.a.FLAG_CUSTOM_INSIDE_LABELS_ALLOWED));var t=Object(_e.a)();if(!this._isTemplatePreselected()&&this._isPlacementInsideLabel()&&!this.designData.labelTemplateType&&(null==t?void 0:t.isDtgShirt())&&(null==t?void 0:t.hasAdvancedInsideLabel)&&!this._isProductTemplateEditor()&&e){var i=new qn.a.Par;i.nativeTemplateSelected=this._setSelectedInsideLabelTemplate.bind(this,qn.a.LABEL_NATIVE),i.customTemplateSelected=this._setSelectedInsideLabelTemplate.bind(this,qn.a.LABEL_CUSTOM),this.nodeInsideLabelTemplatePicker=new qn.a(i),I.a.clearNode(this._nodeMainMockupArea),this.nodeInsideLabelTemplatePicker.append(this._nodeMainMockupArea),this._renderLayerPicker(),this._renderClipartPicker(),this._renderQuickDesignPicker(),this._renderLicensedAssetPicker(),this._renderTextboxPicker(),this._renderEmbroideryImagePicker(),this._renderPatternPicker()}var n=this._isProductTemplateEditor()||!e,r=(null==t?void 0:t.hasAdvancedInsideLabel)&&n;if(r&&(this.designData.labelTemplateType=qn.a.LABEL_NATIVE),this._isTemplatePreselected()){null!=t&&t.hasAdvancedInsideLabel||(this.designData.labelTemplateType=qn.a.LABEL_CUSTOM),null!=t&&t.hasAdvancedInsideLabel&&this._labelSwitcher.setActiveSwitch.bind(this,this.designData.labelTemplateType),this._setSelectedInsideLabelTemplate(this.designData.labelTemplateType);var a=this._getFirstInsideLabelGeneratorVariantId(),o=this._generatorParams.generatorVariants[a[this.designData.labelTemplateType]];r&&this._labelSwitcher.hide(),this._templates.setActiveLayerFromTemplate(o.placementId,o.templateId),this.setPreviewMockupVariant(o),this._renderLayerPicker(),this._renderClipartPicker(),this._renderQuickDesignPicker(),this._renderLicensedAssetPicker(),this._renderTextboxPicker(),this._renderEmbroideryImagePicker(),this._renderPatternPicker()}},_isTemplatePreselected:function(){var e;if(null===(e=Object(_e.a)())||void 0===e||!e.isDtgShirt())return!1;if(this.getSelectedPlacementId()!==oe.a.TYPE_LABEL_INSIDE)return!1;if(this.designData.labelTemplateType)return!0;var t=this.getSelectedGeneratorVariants().generatorVariants;if(t)for(var i in t)if(t[i].isInsideLabel()&&t[i].templateType)return this.designData.labelTemplateType=t[i].templateType,!0;return!1},_setSelectedInsideLabelTemplate:function(e){var t;this._updateMockupPlacements();var i=this._getFirstInsideLabelGeneratorVariantId();null!==(t=Object(_e.a)())&&void 0!==t&&t.hasAdvancedInsideLabel&&this._labelSwitcher.show(e,this._setSelectedInsideLabelTemplate.bind(this)),this.designData.labelTemplateType=e;var n=this._generatorParams.generatorVariants[i[e]];this.setPreviewMockupVariant(n),this._isEmpty()?this.renderEmptyMockup(n):n&&(this._templates.setActiveLayerFromTemplate(n.placementId,n.templateId),this.updateView()),this._dropZoneArea&&this._isPlacementInsideLabel()&&this._dropZoneArea.setInsideLabelType(e),e===qn.a.LABEL_NATIVE&&this._labelSwitcher.getLabelPopover(this._applyPopoverInfoNode)},_applyPopoverInfoNode:function(e){e&&e.append(this._nodeMainMockupArea)},_updateMockupPlacements:function(){var e;this.observer.emitPlacementLayersChanged(this.designData)&&(this.hasDesignForPlacement(this.getSelectedPlacementId())?I.a.addClassName(this._nodeLayerPickerChooser,"hidden"):(this.renderEmptyMockup(),I.a.removeClassName(this._nodeLayerPickerChooser,"hidden")),this._activeDesignerTabId!==Rc.TAB_3D||this._canRender3dViewTab()||this._onDesignerTabPicked(Rc.TAB_DESIGNER,!0),this._renderFooter(),this._par.placementDependentOptions&&this._productOptionsPicker.setSelectedPlacementId(this.getSelectedPlacementId()),this._dropZoneArea&&(this._nodeMainMockupArea.dataset.placement=this.getSelectedPlacementId()),this._techniquePicker&&this._techniquePicker.toggleChangeTechniquePopup(this._templates.hasLayers()),this._advancedTemplatePicker&&this._advancedTemplatePicker.toggleTemplatePickerPopup(this._templates.hasLayers()),this._isPlacementInsideLabel()&&null!==(e=Object(_e.a)())&&void 0!==e&&e.isDtgShirt()&&this.designData.labelTemplateType===qn.a.LABEL_NATIVE&&this._labelSwitcher&&this._labelSwitcher.getLabelPopover(this._applyPopoverInfoNode))},_updateDesignerPricesUsingPriceCalculator:function(){if(this._priceCalculator){var e=[];for(var t in this._generatorParams.availablePlacements){var i=this._generatorParams.availablePlacements[t].id;this.hasDesignForPlacement(i)&&e.push(i)}this._priceCalculator.updatePlacementsWithLayers(e),this.updatePlacementPrices(this._priceCalculator.getFormattedPlacementPrices()),this._setFooterPrice(this._getSelectedVariantsPriceInfo())}},_renderMockupMainArea:function(){var e,t=this;if(this.previewMockupVariant){this._showLoader(this._nodeMainMockupArea,{minHeight:200}),null===(e=this._mockup)||void 0===e||e.applyCropIfNeeded();var i=this._calculateMockupMainAreaSize(),n=new pr;n.templates=this._templates,n.generatorVariant=this.previewMockupVariant,n.onReady=this._onMainMockupAreaReady,n.mockupMaxWidth=i.maxWidth,n.mockupMaxHeight=i.maxHeight,n.disableLayerManipulations=this._par.disableLayerManipulations,n.disableOutOfBoundsErrorMessages=this._par.disableOutOfBoundsErrorMessages,n.activeLayer=this._templates.getActiveLayer(),n.isCustomizingMode=this._par.isCustomizingMode,n.isProductlessMode=this._par.isProductlessMode,n.placementOptions=this._placementOptions,n.node3dView=this._activeDesignerTabId===Rc.TAB_3D?this._node3DArea:null,n.variantArea=this._variantArea,n.shouldShowUnrelatedTemplatesPopover=function(){return t._shouldShowUnrelatedTemplatesPopover};var r=Object(rc.c)(this._templates,this.previewMockupVariant);r&&(n.templateKey=r.getKey()),(r.layers.length>1||!this._templates._shouldShowUnrelatedTemplatesPopover)&&(this._shouldShowUnrelatedTemplatesPopover=!1),n.hideZoomButton=this._par.hideZoomButton,this._mockup=new _r(n)}},_onMainMockupAreaReady:function(){var e;if(this.observer.emitMainMockupReady()&&this._mockup&&(this.hasDesignForPlacement(this.getSelectedPlacementId())||this._isAdvancedTemplateLoaded())){if(I.a.clearNode(this._nodeMainMockupArea),I.a.removeClassName(this._nodeMainMockupArea,"main-mockup-area--empty-mockup"),this._isAdvancedTemplateLoaded()?(this._addAdvancedTemplateWarning(),this._par.isOrderFlowMode||this._layerPicker.clearGuidelineIfo()):this._removeAdvancedTemplateWarning(),this._isTextLayerConverted&&(this._getWarningNode(dlang("generator","Please double-check text before clicking Continue")).append(this._nodeMainMockupArea),this._isTextLayerConverted=!1),this._mockup.append(this._nodeMainMockupArea),this._par.similarProductPushState&&null!==(e=Object(_e.a)())&&void 0!==e&&e.isCutSew()){var t=tag("div","text-center",dlang("generator","Please double-check your design alignment in the print area before you continue"));new ae.a([t],"warning",!1,!1,!0,null).prepend(this._nodeMainMockupArea)}this.displayTemplateSizeChangeWarningIfNeeded(),this._hideLoader(this._nodeMainMockupArea),this._shouldInitDropZone()&&!Object(L.b)()&&this._par.withGlobalDropZone&&(this.storeId?this._initDropZone(this.storeId,!1):(new d.a).getFirstId(this._initDropZone)),this._disableAddDesignTabIfNeeded(),this._onResizeCalled||(this._onResize(),this._onResizeCalled=!0),this._shouldShowUnrelatedTemplatesPopover=!0}},_isAdvancedTemplateLoaded:function(){return this.previewMockupVariant&&this.previewMockupVariant.role===fr.a.ROLE_ADVANCED_TEMPLATE&&(!this.designData.labelTemplateType||this.designData.labelTemplateType!==qn.a.LABEL_NATIVE)},_onLayerAddedOrRemoved:function(){var e=this,t=function(){this.updateView(),this._updateMockupPlacements(),T.l(T.d)}.bind(this),i=this._getLicensedAssetIdsByPlacement();Object.keys(i).length?Object(yo.d)(i).then((function(i){e._priceCalculator.setLicensedAssetsPrice(i),t()})):(this._priceCalculator.setLicensedAssetsPrice(0),t())},getLicensedAssetsPrice:function(){return this._priceCalculator.getLicensedAssetsPrice()},_getLicensedAssetIdsByPlacement:function(){var e=this._templates.getTemplates(),t={},i=function(i){if(!e.hasOwnProperty(i))return"continue";for(var n in e[i])e[i].hasOwnProperty(n)&&e[i][n].layers.forEach((function(e){e.isLicensedAssetLayer()&&(t.hasOwnProperty(i)||(t[i]=[]),t[i].push(e.licensedAssetItem.licensedAssetId))}))};for(var n in this._templates.getTemplates())i(n);return t},_onLayerOrderChanged:function(){this._renderMockupMainArea(),this._renderMockupVariantArea(),T.l(T.d)},_calculateMockupMainAreaSize:function(){var e=1,t=this._mockupMainMaxWidth,i=this._mockupMainMaxHeight,n=this._nodeMainMockupArea;return null!=n&&n.clientWidth&&t>n.clientWidth&&(e=t/n.clientWidth),{maxWidth:t/e,maxHeight:i/e}},_getProductWarning:function(){var e,t=Object(_e.a)();if((null==t?void 0:t.productId)!==ce.a.ID_T_SHIRT_BB453&&(null==t?void 0:t.productId)!==ce.a.ID_T_SHIRT_TC245||this.getSelectedPlacementId()!==(oe.a.TYPE_FRONT||oe.a.TYPE_BACK))if(-1!==ce.a.YOGA_PRODUCTS.indexOf(null==t?void 0:t.productId)&&this._isPlacementInsideLabel())e=dlang("generator","Please note - back waist print file is copied on the inside of the waistband, so the inside label will appear on top of your design");else{if(this.getSelectedPlacementId()!==oe.a.TYPE_BACK||(null==t?void 0:t.productId)!==ce.a.ID_ANVIL_71600)return"";e=dlang("generator","Because of the stitching at the top, we recommend placing graphics lower so they donâ€™t print over the seams")}else e=dlang("generator","Placement is approximate and graphics larger than 12x13â€ will be scaled to clear the garment seams");return this._getWarningNode(e)},_getWarningNode:function(e){return tag("div","generator-mockup__warning-message alert alert-warning alert-dismissible text-center",[tag("button",{className:"close",attr:{"aria-label":lang("Close")},data:{dismiss:"alert"}},"Ã—"),tag("span","",e)])},setPreviewMockupVariant:function(e){var t,i=(null===(t=this.previewMockupVariant)||void 0===t?void 0:t.templateId)!==(null==e?void 0:e.templateId),n=this._isAdvancedTemplateLoaded();this.previewMockupVariant=e,this._manage3dViewPropsOnVariantChange(e,i),n!==this._isAdvancedTemplateLoaded()&&this._updateTemplateType()},_manage3dViewPropsOnVariantChange:function(e,t){var i;if(e&&this._loaded3dObj&&t){var n=null===(i=this._get3dViewConfigObject())||void 0===i?void 0:i.uniqueId;n&&(this._3dObjUniqueId===n?this._update3dStatus(Vn.STATUS_RELOAD_PRINTFILE):(this._update3dStatus(Vn.STATUS_RELOAD_MODEL),this._3dObjUniqueId=n),this._needToShow3dTab=this._canRender3dViewTab())}},setProductOptions:function(e){this._productOptionsPicker||(this._productOptionsPicker=new s.a(new yr.a)),this._productOptionsPicker.setProductOptions(e)},_onTemplatePositionsChanged:function(e,t){this._needToReRenderVariantArea(e,t)&&this._renderMockupVariantArea(),this._renderFooter(),this.observer.emitPlacementPositionsChanged(),this._displayQualityIndicators(),this._par.onPositionsChanged&&this._par.onPositionsChanged(),T.l(T.d)},_onCropStateChanged:function(e,t){this._renderFooter()},_needToReRenderVariantArea:function(e,t){if(!this._templates||!t)return!1;var i=this._templates.getActiveTemplate(this.getSelectedPlacementId());if(i){var n=i.getLayerIndex(t);if(n>-1)return e.some((function(e){var i;return(null===(i=e.layers[n])||void 0===i?void 0:i.uniqueId)!==t.uniqueId}))}return!1},_onTemplateResized:function(e,t){if(this._renderFooter(),this._displayQualityIndicators(),this._technique===ce.a.TYPE_EMBROIDERY)for(var i in e)if(e[i].technique===ce.a.TECHNIQUE_EMBROIDERY){this._scheduleEmbroideryPreviewUpdate(e[i].placementId,t);break}T.l(T.d)},_displayQualityIndicators:function(){this._mockup&&!this._par.isProductlessMode&&(this._mockup.getMockup().displayOutOfBoundsIndicator(),this._mockup.getMockup().displayQualityIndicators(),this._mockup.getMockup().displayCustomizableTextLayerError())},getSelectedGeneratorVariants:function(e,t){var i={generatorVariants:[],variantCount:0,allVariantCount:0},n={},r=this._getSelectedMappings();for(var a in r){var o=r[a];if(!this._isVariantDiscontinued(o.size,o.color))if(this._par.existingVariants&&this._isVariantExistingForProduct(o.size,o.color)&&!this._par.isChangePrintfileMode){if(0===i.variantCount){var s=Object.values(Object.assign({},o.mockupIds,o.templateIds));for(var l in s){var c=s[l],d=this._generatorParams.generatorVariants[c];i.generatorVariants.push(d),i.variantCount++,i.allVariantCount++}}}else{var u=!1,h=!1;for(var p in this._generatorParams.availablePlacements){var g=this._generatorParams.availablePlacements[p];if(this._templates.hasTemplates(g.id)&&(u||(u=!0,i.allVariantCount+=1),t||this.hasDesignForPlacement(g.id))){var f=null,_=o.mockupIds[g.id],m=o.templateIds[g.id];if(_||m||console.error("active generator variant missing for color ".concat(o.color," and placement ").concat(g.id)),g.id===oe.a.TYPE_LABEL_INSIDE&&this.designData.product.isAdvancedInsideLabelAllowed()){var v=qn.a.LABEL_CUSTOM;if(this.designData.hasLabelNative()){var y=_||m,b=this._generatorParams.generatorVariants[y].color,P=this._getFirstInsideLabelGeneratorVariantId(b);_=P[v=qn.a.LABEL_NATIVE],m=P[v]}this._isPlacementInsideLabel()&&this.hasLayersForPlacement(this.getSelectedPlacementId())&&!this.designData.labelTemplateType&&(this.designData.labelTemplateType=v,this._labelSwitcher.show(v,this._setSelectedInsideLabelTemplate.bind(this)))}if(f=e?_||m:m||_,this._isZoomedTemplate(o,g)&&(f=m),h||(h=!0,i.variantCount++),!n[f]){var C=this._generatorParams.generatorVariants[f];n[f]=1,i.generatorVariants.push(C)}}}}}return i},_isZoomedTemplate:function(e,t){return this._isZoomedTemplateShown()&&void 0!==e.templateIds[t.id]},_isZoomedTemplateShown:function(){var e,t=null===(e=Object(_e.a)())||void 0===e?void 0:e.availableTechniques;return!!t&&(t.indexOf(ce.a.TYPE_T_SHIRT)>-1||t.indexOf(ce.a.TYPE_EMBROIDERY)>-1)},_getSelectedMappings:function(e){if(!this._generatorParams)return[];var t,i=[],n=kc(this._generatorParams.variantMapping);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.color&&!this.isColorSelected(r.color)||(e||!r.size||this.isSizeSelected(r.size,this._getFakeSelectedSizes()))&&i.push(r)}}catch(e){n.e(e)}finally{n.f()}return i},_getFakeSelectedSizes:function(){return this._par.isOrderFlowMode&&!this._selectedSizes.length?this.allSizes:null},_isVariantDiscontinued:function(e,t){return e in this.discontinuedColors&&-1!==this.discontinuedColors[e].indexOf(t)},_isVariantExistingForProduct:function(e,t){var i=this._getExistingProductVariantData(),n=!1;for(var r in i[e])i[e][r].color==t&&(n=!0);return e in i&&n},_getExistingProductVariantData:function(){var e=[];for(var t in this._par.existingVariants)e.push((new u.a).getCachedVariantById(this._par.existingVariants[t].variantId));var i,n={};for(i in e)n[e[i].size]=[];for(i in e)n[e[i].size].push({color:e[i].color,colorCode:e[i].colorCode,colorCode2:e[i].colorCode2});return n},_onFinish:function(e){var t;if(m.a.trackClickedOnFinish(this._templates,this._par),Vo(this._variantArea,null===(t=Object(_e.a)())||void 0===t?void 0:t.productId,this._footerButtonContinue))this._enableContinueButton();else{var i=this.getMissingUploadPrintFiles();i.length?new Tr.a(i,e,this._enableContinueButton):e()}},_enableContinueButton:function(){I.a.removeClassName(this._footerButtonContinue,"loading"),I.a.removeClassName(this._footerButtonContinue,"disabled"),this._hideLoader(this.node),2===this._footerButtonContinue.childNodes.length&&this._footerButtonContinue.removeChild(this._footerButtonContinue.childNodes[1])},_onFinishCallback:function(){var e=this;this.trackTransparencyWarningContinueClick();var t=this.getDesignData(),i=this._getSelectedMappings();this.generatorRepository.getGeneratorVariants(i,(function(i){e._generatorParams.generatorVariants=Object.assign(e._generatorParams.generatorVariants,i),e._enableContinueButton(),e._par.productTemplateEditorState?e._par.onProductDesigned(t):(e._par.onProductDesigned(t,e.getSelectedGeneratorVariants(!1).generatorVariants),e._forgetColorsAndSizes(),e._par.isOrderFlowMode||e._rememberColorsAndSizes())}))},_onBack:function(e){this._par.onBack()},_onContinue:function(e){var t,i,n=this;m.a.trackClickedOnContinue(this._templates,this._par),null===(t=this._mockup)||void 0===t||t.applyCropIfNeeded(),e.preventDefault(),I.a.hasClassName(this._footerButtonContinue,"disabled")||Vo(this._variantArea,null===(i=Object(_e.a)())||void 0===i?void 0:i.productId,this._footerButtonContinue)||(I.a.addClassName(this._footerButtonContinue,"disabled"),I.a.removeClassName(this._footerButtonContinueSpinner,"pf-d-none"),this._showLoader(this.node),this._onFinish((function(){n._onFinishCallback()})))},_onSaveToTemplates:function(e){var t,i,n=this;if(m.a.trackClickedOnSaveToTemplates(this._templates,this._par),e.preventDefault(),!I.a.hasClassName(this._footerButtonSaveToTemplates,"disabled")&&!Vo(this._variantArea,null===(t=Object(_e.a)())||void 0===t?void 0:t.productId,this._footerButtonSaveToTemplates)){null===(i=this._mockup)||void 0===i||i.applyCropIfNeeded(),I.a.addClassName(this._footerButtonSaveToTemplates,"disabled"),I.a.removeClassName(this._footerButtonSaveToTemplatesSpinner,"pf-d-none"),this._footerButtonSaveToTemplates.onclick=null;var r=function(){I.a.removeClassName(n._footerButtonSaveToTemplates,"disabled"),I.a.addClassName(n._footerButtonSaveToTemplatesSpinner,"pf-d-none"),n._footerButtonSaveToTemplates.onclick=n._onSaveToTemplates},a=this.getDesignData(),o=(a.colors||[]).filter((function(e){return!!e}));a.canHaveColorPicker()&&o.length||(a.templateSelectedSizes=a.sizes),this._getSelectedVariants().forEach((function(e){var t=e.variantId;a.generatorVariantsIdsToSave.push(t)})),Object(bo.g)({designData:a}).then((function(){new Po.a({type:Po.a.TYPE_SUCCESS,content:dlang("generator","Successfully saved to Product templates")}),r()})).catch((function(e){Object(mo.a)(e),new Po.a({type:Po.a.TYPE_ERROR,content:dlang("generator","Error while saving to Product templates! Please contact support!")}),r()}))}},getSizes:function(){return this._selectedSizes},setSizes:function(e){this._selectedSizes=e},getColors:function(){return this._selectedColors},setColors:function(e){this._selectedColors=e},getRegion:function(){return this._regionPicker?this._regionPicker.getSelectedRegions():[o.a.REGION_USA]},getSizePicker:function(){return this._sizePicker},getColorPicker:function(){return this._colorPicker},getLayerPicker:function(){return this._layerPicker},getProductOptionsPicker:function(){return this._productOptionsPicker},getSelectedRegionVariants:function(){return this._regionPicker?this._regionPicker.getMatchingVariants():[]},getValuesToRemember:function(){return{size:this.getSizes().slice().shift(),color:this.getColors().map((function(e){return e.color})).slice().shift(),region:this.getRegion(),options:this.getProductOptionsValues()}},getAvailablePlacements:function(){return this._generatorParams.availablePlacements},isPlacementSimple:function(e){return!this.hasDesignFillColor(e)&&this._templates.isPlacementSimple(e)},getTechnique:function(){var e;return this._technique||(null===(e=Object(_e.a)())||void 0===e?void 0:e.type)},getDesignData:function(){var e,t=Object(_e.a)();this.designData.colors=this.getSelectedColorNameArray(),this.designData.hexColors=this.getSelectedColorHexArray(),this.designData.sizes=this._selectedSizes,this.designData.productId=null==t?void 0:t.productId,this.designData.productTemplateId=this._isCreatingProductFromTemplate()&&this._par.productTemplateEditorState.sourceProductTemplate?this._par.productTemplateEditorState.sourceProductTemplate.id:null,this._isProductTemplateEditor()&&(this.designData.templateSelectedSizes=this._shouldRenderSizePicker()?this._selectedSizes.slice():this.designData.templateSelectedSizes||[]);var i=this.allAvailableSizes;this.designData.sizes&&i&&(this.designData.sizes=this.designData.sizes.filter((function(e){return i.includes(e)}))),this.designData.templateSelectedSizes&&i&&(this.designData.templateSelectedSizes=this.designData.templateSelectedSizes.filter((function(e){return i.includes(e)}))),this._productOptionsPicker&&(this.designData.productOptions=this.getProductOptionsValues(!0,this.shouldIncludeTextThreadColors())),this.designData.storeId=this._par.store.storeId,this.designData.templates={},this.designData.generatorVariants=[],this.designData.forceOrientation=this._orientation||"",this.designData.forceTemplateType=this._templateType,this.designData.useSizeConversion=null==t?void 0:t.useSizeConversion,this.designData.store=this._par.store.storeId?(new d.a).getCachedStore(this._par.store.storeId):this._par.store,this.designData.technique=this.getTechnique();var n,r={},a=kc(null!==(e=this.generatorVariants)&&void 0!==e?e:[]);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=Object(rc.c)(this._templates,o);this.designData.templates[s.getKey()]=s;var l,c=kc(s.layers);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(u instanceof M.a){var h=u.fileItem.fileId;r[o.placementId]=r[o.placementId]||[],r[o.placementId].indexOf(h)<0&&r[o.placementId].push(h)}}}catch(e){c.e(e)}finally{c.f()}}}catch(e){a.e(e)}finally{a.f()}this.designData.filesIdsByPlacement=r;var p,g=this.designData.defaultGeneratorVariantId,f=null,_=kc(this.getSelectedGeneratorVariants(!0).generatorVariants);try{for(_.s();!(p=_.n()).done;){var m=p.value;g==m.generatorVariantId&&(f=m.generatorVariantId),this.designData.generatorVariants.push(m)}}catch(e){_.e(e)}finally{_.f()}if(!f){var v=this.getSelectedGeneratorVariants(!1).generatorVariants[0];v&&v.generatorVariantId&&(this.designData.generatorVariants.push(v),f=v.generatorVariantId)}this.designData.defaultGeneratorVariantId=f;var y=new Yn.a(this.designData,this._generatorParams);return this.designData.generatorVariantsIdsToSave=y.getMockupVariantIds(),this.designData.sizeGuideUnits=[Dr.c],this.designData.rawPlacementOptions=this._placementOptions.getData(),this.designData},_getProductOptions:function(){var e,t=[zn.a.NAME_EMBROIDERY_FONT,zn.a.NAME_TEXT_THREAD_COLORS,zn.a.NAME_TEXT_THREAD_COLORS_LEFT,zn.a.NAME_TEXT_THREAD_COLORS_RIGHT,zn.a.NAME_TEXT_THREAD_COLORS_BACK,zn.a.NAME_TEXT_THREAD_COLORS_CHEST_LEFT,zn.a.NAME_TEXT_THREAD_COLORS_CHEST_CENTER,zn.a.NAME_TEXT_THREAD_COLORS_LARGE_CENTER,zn.a.NAME_TEXT_THREAD_COLORS_CORNER_LEFT,zn.a.NAME_TEXT_THREAD_COLORS_CORNER_RIGHT,zn.a.NAME_TEXT_THREAD_COLORS_APPAREL,zn.a.NAME_TEXT_THREAD_COLORS_APPAREL_BACK];return this.getTechnique()!==ce.a.TYPE_EMBROIDERY&&t.push(zn.a.NAME_NOTES),null===(e=Object(_e.a)())||void 0===e?void 0:e.getOptionItems(t).map(function(e){return this._manageOptionItemVisibleProperty(e),e.isEmbroideryType()&&this._isEmbroideryWithText()&&(e.disabledValues=[oe.a.DIGITIZATION_3D,oe.a.DIGITIZATION_BOTH],e.disabledValuesLabelText=dlang("dashboard","Text can't be combined with 3D puff elements.")),e}.bind(this))},_manageOptionItemVisibleProperty:function(e){var t=[zn.a.NAME_NOTES,zn.a.OPTION_INSIDE_POCKET],i=[zn.a.NAME_EMBROIDERY_TYPE,zn.a.NAME_THREAD_COLORS_3D,zn.a.NAME_THREAD_COLORS,zn.a.NAME_THREAD_COLORS_LEFT,zn.a.NAME_THREAD_COLORS_RIGHT,zn.a.NAME_THREAD_COLORS_BACK,zn.a.NAME_THREAD_COLORS_CHEST_LEFT,zn.a.NAME_THREAD_COLORS_CHEST_CENTER,zn.a.NAME_THREAD_COLORS_LARGE_CENTER,zn.a.NAME_THREAD_COLORS_CORNER_LEFT,zn.a.NAME_THREAD_COLORS_CORNER_RIGHT,zn.a.NAME_THREAD_COLORS_APPAREL,zn.a.NAME_THREAD_COLORS_APPAREL_BACK];(this._par.isMockupGeneratorMode&&t.indexOf(e.name)>-1||this.shouldAllowFileColorChanger()&&i.indexOf(e.name)>-1)&&(e.visible=!1)},getSelectedColorNameArray:function(){var e=[];for(var t in this._selectedColors)e.push(this._selectedColors[t].color);return e},getSelectedColorHexArray:function(){return this._selectedColors.map((function(e){return e.colorCode}))},_getGeneratorVariantFromVariantMapping:function(e,t){var i,n;for(var r in e.mockupIds)if(i=this._generatorParams.generatorVariants[e.mockupIds[r]],r===t){n=this._generatorParams.generatorVariants[e.mockupIds[r]];break}for(var a in e.templateIds)if(i=this._generatorParams.generatorVariants[e.templateIds[a]],a===t)return this._isZoomedTemplateShown()?this._generatorParams.generatorVariants[e.templateIds[a]]:n||this._generatorParams.generatorVariants[e.templateIds[a]];return n||i},_isEmpty:function(){var e=this._technique===ce.a.TYPE_STOCK_PRODUCT,t=this._canGeneratePreview()&&this._templates.hasLayersForPlacement(this.getSelectedPlacementId());return e||!this.isAdvancedTemplateType()&&!t},isAdvancedTemplateType:function(){return this._templateType===h.a.TEMPLATE_TYPE_ADVANCED},_updateTemplateType:function(){this._templateType=this.getTemplateTypeLoaded()},renderEmptyMockup:function(e){var t;if(xn.a.clearPreviewStrings(),!this._canRenderNativeInsideLabelSelection()||this._isTemplatePreselected()){var i,n=e||this._getFirstEmptyMockupVariant(),r=this.getSelectedPlacementId();if(!n&&null!==(t=this._generatorParams)&&void 0!==t&&t.variantMapping)for(var a in this._generatorParams.variantMapping){if(n)break;var o=this._generatorParams.variantMapping[a];n=this._getGeneratorVariantFromVariantMapping(o,r)}if(I.a.clearNode(this._nodeMainMockupArea),I.a.removeClassName(this._nodeMainMockupArea,"loading"),I.a.removeClassName(this._nodeMainMockupArea,"main-mockup-area--empty-mockup"),this._removeAdvancedTemplateWarning(),this._renderMockupVariantArea(),this._shouldInitDropZone())this._par.withGlobalDropZone&&(this.storeId?this._initDropZone(this.storeId,!0):(new d.a).getFirstId(function(e){this._initDropZone(e,!0),this.storeId=e}.bind(this)));else null===(i=this._dropZoneArea)||void 0===i||i.disable();if(this.hasDesignFillColor()&&(this._renderMockupMainArea(),this._onMainMockupAreaReady()),n){var s=this._getProductWarning();s&&s.append(this._nodeMainMockupArea),this.hasDesignFillColor()||(I.a.addClassName(this._nodeMainMockupArea,"main-mockup-area--empty-mockup"),this._renderEmptyMockupImage(n)),this._needToShow3dTab&&(this._show3DPreview(),this._needToShow3dTab=!1)}}else this._renderInsideLabel()},_addAdvancedTemplateWarning:function(){this.nodeAdvancedTemplateWarning||(this.nodeAdvancedTemplateWarning=this._getWarningNode(dlang("generator","You are now in advanced mode")),I.a.addClassName(this.nodeAdvancedTemplateWarning,"generator-mockup__warning-message"),this.nodeAdvancedTemplateWarning.append(this._nodeMainMockupArea))},_removeAdvancedTemplateWarning:function(){this.nodeAdvancedTemplateWarning&&(I.a.removeNode(this.nodeAdvancedTemplateWarning),this.nodeAdvancedTemplateWarning=null)},_shouldInitDropZone:function(){var e,t,i=this.getSelectedPlacementId(),n=null===(e=this._conflictCalculator)||void 0===e?void 0:e.getConflictingPlacementTitles(i),r=!this._templates.hasLayersForPlacement(i)&&0!==(null==n?void 0:n.length),a=null===(t=this._placementLimiter)||void 0===t?void 0:t.isLimitReached(),o=Object(_e.d)(i);return this._isEmpty()&&!r&&!this._isEngraving()&&!a&&!this._isLargeEmbroidery()&&!o},_renderEmptyMockupImage:function(e,t){var i=this;return Nc(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={image:e.backgroundImageUrl||"",shadow:e.backgroundShadowUrl||"",base:e.generatorImageUrl||""},n.next=3,i.waitProductLoad();case 3:if(!i._par.isProductlessMode){n.next=6;break}return i._updateEmptyMockupImage(e,r.base),n.abrupt("return");case 6:(r.image||r.shadow||r.base)&&ue.a.backgroundFromCache(r,{width:Math.ceil(i._nodeMainMockupArea.clientWidth),height:Math.ceil(i._nodeMainMockupArea.clientWidth)},(function(n){if(n)return"data:,"===n?(console.warn("Image data returned from cloudfront:",n,r),void(t||i._renderEmptyMockupImage(e,!0))):void i._updateEmptyMockupImage(e,n);console.warn("Couldnt backgroundFromCache (_renderEmptyMockupImage)",r)}));case 7:case"end":return n.stop()}}),n)})))()},_updateEmptyMockupImage:function(e,t){this._nodeMainMockupAreaImage&&I.a.removeNode(this._nodeMainMockupAreaImage),this.hasLayersForPlacement(this.getSelectedPlacementId())&&this._technique!==ce.a.TYPE_STOCK_PRODUCT||(this._nodeMainMockupAreaImage=tag("img",{className:"img-responsive pf-mx-auto pf-my-0",src:t,style:{backgroundColor:e.backgroundColor||"",boxShadow:"inset 0 0 0 2px white"}}),this._nodeMainMockupAreaImage.complete||this._nodeMainMockupAreaImage.addEventListener("load",T.l.bind(null,E.EVENT_UPDATE_MOBILE_FOOTER)),this._handle3dAreaNodeForEmptyMockup()),this._dropZoneArea&&this._dropZoneArea.setGeneratorVariant(e,!0)},_getVariantIdIntersection:function(e,t){if(!e||!t)return[];var i=[];return e.forEach((function(e){t.forEach((function(t){e.variantId===t.variantId&&i.push(t.variantId)}))})),i},_getFirstEmptyMockupVariant:function(){var e;if(null===(e=this._generatorParams)||void 0===e||!e.variantMapping)return null;var t=this.lastSelectedColor,i=this._getVariantIdIntersection(this._par.existingVariants,this._generatorParams.variantMapping);for(var n in this._generatorParams.variantMapping){var r=this._generatorParams.variantMapping[n],a=!1;if(-1==i.indexOf(r.variantId)&&((!t||O.a.isEqual(r.color,t))&&(0!==this._selectedSizes.length&&this._selectedSizes[0]||(a=!0),(!r.color||this.isColorSelected(r.color))&&(!r.size||this.isSizeSelected(r.size)||a))))for(var o in this._generatorParams.availablePlacements){var s=this._generatorParams.availablePlacements[o];if(this.getSelectedPlacementId()===s.id){if(s.id===oe.a.TYPE_LABEL_INSIDE){var l,c=this._getFirstInsideLabelGeneratorVariantId();return null!==(l=Object(_e.a)())&&void 0!==l&&l.hasAdvancedInsideLabel&&this._generatorParams.allLabelTypesAvailable||(this.designData.labelTemplateType=qn.a.LABEL_CUSTOM),this._generatorParams.generatorVariants[c[this.designData.labelTemplateType]]}if(this._isZoomedTemplate(r,s))return this._generatorParams.generatorVariants[r.templateIds[s.id]];var d=r.mockupIds[s.id];if(d)return this._generatorParams.generatorVariants[d];if(d=r.templateIds[s.id])return this._generatorParams.generatorVariants[d]}}}return null},hasNeededQuality:function(){var e;if(!this._templates.getRequiredDpi()||null!==(e=Object(_e.a)())&&void 0!==e&&e.isEmbroidery()||this._technique===ce.a.TYPE_STOCK_PRODUCT)return!0;var t=this._templates.getQuality();for(var i in this.generatorVariants){var n=Object(rc.c)(this._templates,this.generatorVariants[i]);if(n.layers.length>0&&n.getLowestDPI(t)<this._templates.getRequiredDpi())return!1}return!0},isFileLimitExceeded:function(e){var t=e===Te.a?this._getMaxLicensedAssetLayerCount:this._getMaxFileLayerCount;for(var i in this.generatorVariants){var n=Object(rc.c)(this._templates,this.generatorVariants[i]),r=0;if(0!==n.layers.length){for(var a in n.layers)n.layers[a]instanceof e&&r++;if(r>t())return!0}}return!1},getFileLimitExceededText:function(){return dlang("dashboard","Max. limit for uploaded image layers is {file_limit} and for Premium Image layers is {licensed_asset_limit}. Please delete a layer if you want to add another one.").replace("{file_limit}",String(this._getMaxFileLayerCount())).replace("{licensed_asset_limit}",String(this._getMaxLicensedAssetLayerCount()))},isDesignValid:function(){switch(this._technique){case ce.a.TYPE_EMBROIDERY:return!(this.hasEmbroideryPositionError()||this.hasEmbroideryTextSizeError()||this.hasEmbroideryTextTooBigError()||this.hasEmbroideryTextOverlapError());case ce.a.TECHNIQUE_ENGRAVING:return!(this.hasLayersOverlapError()||this.hasTextSizeError()||this.hasClipartSizeError())}return!0},hasEmbroideryPositionError:function hasEmbroideryPositionError(){return Object(rc.a)(c.a.EMBROIDERY_OUT_OF_BOUNDS,this._templates,this.generatorVariants,this._technique)},hasEmbroideryTextSizeError:function hasEmbroideryTextSizeError(){return Object(rc.a)(c.a.EMBROIDERY_TEXT_TOO_SMALL,this._templates,this.generatorVariants,this._technique)},hasEmbroideryTextTooBigError:function hasEmbroideryTextTooBigError(){return Object(rc.a)(c.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT,this._templates,this.generatorVariants,this._technique)},hasEmbroideryTextOverlapError:function hasEmbroideryTextOverlapError(){return Object(rc.a)(c.a.EMBROIDERY_LAYERS_OVERLAPPING,this._templates,this.generatorVariants,this._technique)},hasTextSizeError:function hasTextSizeError(){return Object(rc.b)(c.a.LAYER_TEXT_TOO_SMALL,this._templates,this.generatorVariants,this._technique)},hasClipartSizeError:function hasClipartSizeError(){return Object(rc.b)(c.a.LAYER_CLIPART_TOO_SMALL,this._templates,this.generatorVariants,this._technique)},hasLayersOverlapError:function hasLayersOverlapError(){return Object(rc.b)(c.a.ENGRAVING_LAYERS_OVERLAPPING,this._templates,this.generatorVariants,this._technique)},hasLayersPositionError:function hasLayersPositionError(){return Object(rc.b)(c.a.LAYER_OUT_OF_BOUNDS,this._templates,this.generatorVariants,this._technique)},exceededTextLayerCharacterLimit:function(){if(!this.generatorVariants||!this.generatorVariants.length)return null;for(var e=null,t=0,i=this.generatorVariants.length;t<i;t++){var n=Object(rc.c)(this._templates,this.generatorVariants[t]);if(n&&(e=n.exceededTextLayerCharacterLimit()||null))break}return e},areEmbroideryThreadColorsValid:function(){return!this._embroideryHelper.hasEmbroideryThreadColorsError()},hasEmbroideryNotesError:function hasEmbroideryNotesError(){if(!this.shouldAllowFileColorChanger()||!this._generatorParams)return!1;var e=this._templates.getTemplates();if(this._embroideryHelper.hasLayerWithPartial3dType(e)){var t=this._productOptionsPicker.getValues();if(!t||!t[zn.a.NAME_NOTES])return!0}return!1},_rememberColorsAndSizes:function(){try{window.localStorage.setItem(this._getSessionStorageKey(this._KEY_SELECTED_COLORS),JSON.stringify(this.getSelectedColorNameArray())),window.localStorage.setItem(this._getSessionStorageKey(this._KEY_SELECTED_SIZES),JSON.stringify(this._selectedSizes))}catch(e){console.error("Could not remember Colors and size")}},_forgetColorsAndSizes:function(){window.localStorage.removeItem(this._getSessionStorageKey(this._KEY_SELECTED_COLORS)),window.localStorage.removeItem(this._getSessionStorageKey(this._KEY_SELECTED_SIZES))},_getDefaultSelectedColors:function(){try{var e=window.localStorage.getItem(this._getSessionStorageKey(this._KEY_SELECTED_COLORS))}catch(e){console.log("Local storage not supported!")}var t=e&&JSON.parse(e)||[],i=[];this.allColors.forEach((function(e){return t.includes(e.color)?i.push(e):null}));var r=this._getDefaultPickerValue(n.a.TYPE_COLOR);return r.length>0?r:i.length?i:this.allColors.slice(0,1)},_getDefaultSelectedSizes:function(){try{var e=window.localStorage.getItem(this._getSessionStorageKey(this._KEY_SELECTED_SIZES))}catch(e){console.log("Local storage not supported!")}var t=e&&JSON.parse(e)||[],i=[];return this.allSizes.forEach((function(e){return t.includes(e)?i.push(e):null})),i.length?i:this.allSizes},_getSessionStorageKey:function(e){var t;return this._getStorageKeyPrefix()+(null===(t=Object(_e.a)())||void 0===t?void 0:t.productId)+e},_getStorageKeyPrefix:function(){return this._par.isOrderFlowMode?"orderFlow_":""},getGeneratorParams:function(){if(!this._generatorParams)throw"Cannot access generator params";return this._generatorParams},getPlacementFilePosition:function(e,t){var i=new wr.a;if(i.id=e,!this.hasLayersForPlacement(i.id))return null;var n=this._getTemplate(e);for(var r in n.layers){var a=n.layers[r];if(!a.isTextLayer()&&!(a instanceof x.a))if(a instanceof Te.a){if(a.licensedAssetItem.licensedAssetId===t)return a.position}else if(a.fileItem.fileId===t)return a.position}return null},_getTemplate:function(e){var t=this.getGeneratorVariantByPlacementId(e);return t?Object(rc.c)(this._templates,t):new Sr.a},setActivePlacement:function(e){this._placementSelector.setSelectedPlacementById(e,!0)},getMissingUploadPrintFiles:function(){var e,t=[];if((null===(e=Object(_e.a)())||void 0===e?void 0:e.type)!==ce.a.TYPE_CUT_SEW)return t;var i,n=kc(this._generatorParams.availablePlacements);try{for(n.s();!(i=n.n()).done;){var r=i.value;sr.MISSING_PRINTFILES_WARNING.indexOf(r.id)<0||(this.hasDesignForPlacement(r.id)||t.push(r.title))}}catch(e){n.e(e)}finally{n.f()}return t},_initDropZone:function(e,t){var i=this;return Nc(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([i.waitInitialRender(),i.waitProductLoad()]);case 2:(r=new lr).targetNode=i.node,r.callback=i._onDropZoneFileUploaded.bind(i),r.onClick=i._onDropzoneClick.bind(i),r.storeId=e,i.storeId=e,r.isModalDesigner=i._par.isModalDesigner,r.activePlacement=i._placementSelector.getSelectedPlacement(),r.getMaxFileLayerCount=i._getMaxFileLayerCount.bind(i),r.validateAddingLayer=i.validateAddingLayer.bind(i),r.nodeDomElementDropArea=i._nodeMainMockupArea,r.onDropDomElement=i._onDropDomElement.bind(i),r.enableTransparencyValidation=!0,r.generatorVariant=i.previewMockupVariant,r.is3dViewActive=function(){return i._activeDesignerTabId===Rc.TAB_3D},i._dropZoneArea?(i._dropZoneArea.setActivePlacement(r.activePlacement),i._dropZoneArea.setGeneratorVariant(r.generatorVariant,!0),i._handle3dAreaNodeOnInitDropZone(t),i._isCurrentPlacementConflicting()||i._dropZoneArea.enable(),t&&!i._isCurrentPlacementConflicting()?I.a.removeClassName(i._dropZoneArea.node,"pf-d-none"):I.a.addClassName(i._dropZoneArea.node,"pf-d-none")):(i._dropZoneArea=new hr(r),i._handle3dAreaNodeOnInitDropZone(t),i._clipartPicker&&(i._clipartPicker.fileDropZone=i._dropZoneArea),i._quickDesignPicker&&(i._quickDesignPicker.fileDropZone=i._dropZoneArea),i._licensedAssetPicker&&(i._licensedAssetPicker._par.fileDropZone=i._dropZoneArea));case 18:case"end":return n.stop()}}),n)})))()},_handle3dAreaNodeOnInitDropZone:function(e){if(!e||this._activeDesignerTabId!==Rc.TAB_3D)return this._dropZoneArea.append(this._nodeMainMockupArea),void(this._nodeMainMockupArea3dMode&&I.a.clearNode(this._nodeMainMockupArea3dMode));this._nodeMainMockupArea3dMode=tag("div","text-center row",[this._dropZoneArea,this._node3DArea]).append(this._nodeMainMockupArea)},_handle3dAreaNodeForEmptyMockup:function(){if(this._activeDesignerTabId!==Rc.TAB_3D)return I.a.removeClassName(this._nodeMainMockupAreaImage,"col-lg-9 order-2 order-lg-1"),void this._nodeMainMockupAreaImage.append(this._nodeMainMockupArea);this._nodeMainMockupArea3dMode&&(I.a.addClassName(this._nodeMainMockupAreaImage,"col-lg-9 order-2 order-lg-1"),this._nodeMainMockupAreaImage.append(this._nodeMainMockupArea3dMode))},_onDropzoneClick:function(){var e=this;this._getSelectedVariant()&&(C.a.isWindowSmallerThan(C.a.SM)?setTimeout((function(){e.showDesignTab(),e._dynamicStickyFooter._onTabClick()}),0):(this._dynamicStickyFooter._onTabClick(),this._layerPicker.requestFilePicking(this._placementSelector.getSelectedPlacement())))},_getMaxFileLayerCount:function(){return this._layerPicker?this._layerPicker.fileCountLimit:this._getFileCountLimit()},_getMaxLicensedAssetLayerCount:function(){return this._layerPicker?this._layerPicker.licensedAssetCountLimit:10},_onDropZoneFileUploaded:function(e){this._isCurrentPlacementConflicting()?this._hideLoader(this.node):this._onPlacementItemAdded(this._placementSelector.getSelectedPlacement(),e)},_isCurrentPlacementConflicting:function(){if(!this._generatorParams.conflictingTypes)return!1;for(var e in this._generatorParams.conflictingTypes){var t=this._generatorParams.conflictingTypes[e];if(this.hasLayersForPlacement(t.placementId))for(var i in t.conflictsWith)if(t.conflictsWith[i].id===this.getSelectedPlacementId())return!0}return!1},_getFileCountLimit:function(){return jo.a.getLayerLimit(this.getSelectedPlacementTechnique())||5},getTemplateTypeLoaded:function(){return this.hasDesignForPlacement(this.getSelectedPlacementId())?this._isAdvancedTemplateLoaded()?h.a.TEMPLATE_TYPE_ADVANCED:h.a.TEMPLATE_TYPE_SIMPLE:this._canGeneratePreview()?h.a.TEMPLATE_TYPE_SIMPLE:this._templateType||null},_onDropDomElement:function(e,t){var i=e.dataTransfer.getData("domelement"),n=JSON.parse(i);if("getty"===n.type)this._licensedAssetPicker.onItemClick(n);else if("clipart"===n.type){var r=new Er.a.fromArray(n);this._onPlacementItemAdded(t,r)}else{var a=new Ir.a.fromArray(n);this._onPlacementItemAdded(t,a)}},getSelectedPlacementId:function(){var e;return null===(e=this._placementSelector)||void 0===e?void 0:e.getSelectedPlacementId()},getSelectedPlacementTechnique:function(){var e=this._placementSelector&&this._placementSelector.getSelectedPlacement();return e?e.technique:null},hasLayersForPlacement:function(e){return this._templates.hasLayersForPlacement(e)},hasDesignForPlacement:function(e){return this.hasLayersForPlacement(e)||this.hasDesignFillColor(e)},_getTemplateTabName:function(){var e=Object(_e.a)();return null!=e&&e.isApparelEmbroidery()||null!=e&&e.isEmbroideryApron()||this._technique===ce.a.TYPE_EMBROIDERY&&null!=e&&e.isDtgShirt()?Rc.TAB_ZOOMED_IN_TITLE:Rc.TAB_TEMPLATE_TITLE},addClickListenerToTemplateLayers:function(e){console.log("addClickListenerToTemplateLayers",this._templates.getTemplates())},setActiveLayerByCustomizeKey:function(e){var t=this._templates.getLayerByCustomizeKey(e),i=this._templates.getTemplateByLayer(t);this.getSelectedPlacementId()!==i.placementId&&this.setActivePlacement(i.placementId),this._templates.setActiveLayer(t,"productCustomizer",!0)},getLayerByCustomizeKey:function(e){return this._templates.getLayerByCustomizeKey(e)},updateTextLayerByCustomizeKey:function(e,t,i){var n=this._templates.getLayerByCustomizeKey(e);n.text=t,n.color=i,this._templates.updateTextLayer(n,"productCustomizer")},updateTextboxLayerByCustomizeKey:function(e,t,i,n,r){var a=this._templates.getLayerByCustomizeKey(e);a.text=t,a.color=i,n&&(a.strokeColor=n),r&&(a.shadowColor=r),this._templates.updateTextLayer(a,"productCustomizer")},updateFileLayerByCustomizeKey:function(e,t,i){this._templates.updateFileLayerByCustomizeKey(e,t,i)},_setHideEmptyPlacements:function(e){if(this._par.hideEmptyPlacements){var t={};e.forEach((function(e){t[e.placementId]=e.layers.length})),this._generatorParams.availablePlacements.forEach(function(e){t[e.id]>0||(e.hide=!0)}.bind(this))}},_shouldAllowCustomizablePush:function(e){return!0===this._par.isCustomizerEnabled&&!0===this._par.isCustomizerEnabledJS&&(e||!this._par.isChangePrintfileMode)&&(e||!this._par.existingVariants||0===this._par.existingVariants.length)},isEmbroidery:function(){var e;return(null===(e=Object(_e.a)())||void 0===e?void 0:e.isEmbroidery())||this._technique===ce.a.TYPE_EMBROIDERY},shouldAllowFileColorChanger:function(){return this.isEmbroidery()},shouldIncludeTextThreadColors:function(){return!this.shouldAllowFileColorChanger()},shouldAllowTextboxLayer:function(){return void 0===window._USE_OLD_TEXT_LAYERS||!window._USE_OLD_TEXT_LAYERS},_shouldEnablePatternPicker:function(){var e=Object(_e.a)();return!(null!=e&&e.isEmbroidery())&&!(null!=e&&e.isSticker())&&!(null!=e&&e.isJewelry())&&this._technique!==ce.a.TECHNIQUE_EMBROIDERY&&!this._isEngraving()&&this.isAllOverProduct(!0)},_shouldEnableRemoveBg:function(){var e;return!(this._isEngraving()||null!==(e=Object(_e.a)())&&void 0!==e&&e.isEmbroidery()||this._isLogoMakerMode())},_isLogoMakerMode:function(){var e;return(null===(e=this._templates.getActiveTemplate(this.getSelectedPlacementId()))||void 0===e?void 0:e.technique)===ce.a.TECHNIQUE_LOGO},_onRequestRemoveBg:function(e,t){var n,r=this;null==t||t.stopPropagation(),!e.isImageLayer()||null!==(n=e.fileItem.extra)&&void 0!==n&&n.noBackgroundFound||!this._shownBackgroundRemovalModal&&(this._shownBackgroundRemovalModal=!0,function(){var e=!0;try{e="1"===localStorage.getItem("BackgroundRemovalStorageKey")}catch(e){}if(e)return!1;var t=new Qa.b,n=void 0;return t.components={"background-removal-modal":function(){return i.e(192).then(i.bind(null,"WmC3"))}},t.template="<background-removal-modal @onClosed=\"emitEvent('onClosed')\"/>",t.emitEvent=function(e,t){if("onClosed"===e){try{localStorage.setItem("BackgroundRemovalStorageKey","1")}catch(e){}n.destroy()}},(n=new Qa.a(t)).append(document.body),!0}())||(e.isRemovedBg||e.removeBgPreview?(e.isRemovedBg=!e.isRemovedBg,e.isRemovedBg&&this._mockup.getMockup().displayRemoveBackgroundMessage(Rc.REMOVE_BG_MESSAGE_OK),this._templates.updateImageLayer(e,this._templates,!1),T.l(T.d)):(this._showLoader(this.node,{loadingText:dclang("generator","background removal","Hold on, weâ€™re removing the background"),loadingTextTimeout:1}),this.generatorRepository.getRemoveBg(e,this._templates.getTemplateByLayer(e),!1,(function(t){r._hideLoader(r.node),t.result?t.removeBgPreview&&(e.isRemovedBg=!0,e.removeBgPreview=t.removeBgPreview,r._mockup.getMockup().displayRemoveBackgroundMessage(Rc.REMOVE_BG_MESSAGE_OK),r._templates.updateImageLayer(e,r._templates,!1),T.l(T.d)):t.noBackgroundFound?(e.fileItem.extra||(e.fileItem.extra={}),e.fileItem.extra.noBackgroundFound=!0,r._mockup.getMockup().displayRemoveBackgroundMessage(Rc.REMOVE_BG_MESSAGE_NO_BACKGROUND_FOUND),r._layerPicker.render(),r._templates.updateImageLayer(e,r._templates,!0)):r._mockup.getMockup().displayRemoveBackgroundMessage(Rc.REMOVE_BG_MESSAGE_OTHER_ACTIVE_TASK)}),(function(e){r._hideLoader(r.node),e.rateLimit?r._mockup.getMockup().displayRemoveBackgroundMessage(Rc.REMOVE_BG_MESSAGE_LIMIT_REACHED):r._mockup.getMockup().displayRemoveBackgroundMessage(Rc.REMOVE_BG_MESSAGE_ERROR)}))))},_checkOutOfBoundsLayers:function(){this._mockup.getMockup()&&(this._mockup.getMockup().displayOutOfBoundsIndicator(),this._mockup.getMockup().displayCustomizableTextLayerError()),this._renderFooter()},setSizeAndColor:function(e,t){this.lastSelectedSize=e,this.lastSelectedColor=t,this._selectedSizes=null===e?[]:[e];var i,n=!1,r=kc(this._generatorParams.colors);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(O.a.isEqual(a.color,t)){this._selectedColors=[a],n=!0;break}}}catch(e){r.e(e)}finally{r.f()}n||1!==this._generatorParams.colors.length||(console.log("Color",t,"was not found within generator colors. We picked the only available color instead."),this._selectedColors=this._generatorParams.colors.slice(0)),this.updateView(),this._par.onPositionsChanged&&this._par.onPositionsChanged()},_removeCustomizerDataFromAllLayers:function(){this._shouldAllowCustomizablePush(!0)||this._templates.removeCustomizerDataFromAllLayers()},_canRenderNativeInsideLabelSelection:function(){var e=Object(_e.a)();return this._isPlacementInsideLabel()&&(null==e?void 0:e.isDtgShirt())&&(null==e?void 0:e.hasAdvancedInsideLabel)&&this._generatorParams.allLabelTypesAvailable},refreshClipartColors:function(){this._templates.refreshClipartColors(function(e){e instanceof x.a&&this._onClipartColorChanged(e)}.bind(this))},_isPlacementInsideLabel:function(){return this.getSelectedPlacementId()===oe.a.TYPE_LABEL_INSIDE},getDynamicStickyFooter:function(){return this._dynamicStickyFooter},_renderVideoTutorial:function(){if(I.a.clearNode(this._nodeVideoTutorial),this._par.isProductlessMode)return!1;var e=!1;try{var t="1"===window.localStorage.getItem("VideoTutorialDoneStorageKey"),i="1"===window.sessionStorage.getItem("VideoTutorialHideStorageKey");if(e="1"===window.localStorage.getItem("VideoTutorialHasSeenStorageKey"),t||i)return}catch(e){console.log("Local storage not supported!")}tag("div","pf-mt-16 pf-border-top pf-pt-12",[tag("i","pf-i pf-i-video pf-i-24 pf-text-gray"),tag("a",{className:"pf-ui-body pf-link pf-pl-8",onclick:function(){localStorage.setItem("VideoTutorialHasSeenStorageKey","1"),this.showVideoModalWindow()}.bind(this)},dlang("generator","Video tutorials")),e?tag("a",{className:"pull-right pf-ui-body pf-link pf-pl-16",onclick:function(){localStorage.setItem("VideoTutorialDoneStorageKey","1"),I.a.clearNode(this._nodeVideoTutorial)}.bind(this)},dlang("generator","Done")):"",tag("a",{className:"pull-right pf-ui-body pf-link",onclick:function(){sessionStorage.setItem("VideoTutorialHideStorageKey","1"),localStorage.setItem("VideoTutorialHasSeenStorageKey","1"),I.a.clearNode(this._nodeVideoTutorial)}.bind(this)},dlang("generator","Hide"))]).append(this._nodeVideoTutorial)},showVideoModalWindow:function(){var e=this,t=new Be.a.Par;t.nodeClass="pf-modal product-push-video-tutorials-modal",t.title=dlang("generator","Video tutorials"),t.onClose=function(){return e._videoTutorialsModal.remove()};var i=tag("div","",[tag("div","pf-h4 pf-m-0 pf-pb-16",dlang("generator","Generator")),tag("div","row",[tag("div","col-12 col-md-8 pf-pb-12 pf-pb-md-40",[new go({videoId:he.a.isJp()?"0W9qsVapxnA":he.a.isEs()?"nYZKxcytoJY":he.a.isFr()?"apg3OPl52w0":"zu-qOmxmta0"})]),tag("div","col-12 col-md-4",[tag("div","pf-ui-subheading pf-m-0 pf-pb-40",dlang("generator","Mockup & printfile generator: Video tutorial"))]),tag("div","col-12 col-md-4",[tag("div","pf-h4 pf-pb-12 pf-pb-md-16 pf-m-0",dlang("generator","Printing")),new go({videoId:he.a.isEs()?"44ZwgqWhN9Y":"pB2IaQGoSMw"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-pb-md-32 pf-m-0",dlang("generator","How to create t-shirt designs in Printful Mockup generator")),tag("div","pf-d-block pf-d-md-none",[new go({videoId:he.a.isEs()?"TgwTgkSrbj4":"H8iYo08qDeE"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-m-0",dlang("generator","How to create AOP products in Printful Mockup generator"))])]),tag("div","col-12 col-md-4",[tag("div","pf-h4 pf-pb-12 pf-pb-md-16 pf-m-0",dlang("generator","Embroidery")),new go({videoId:he.a.isEs()?"ArcUo2jTd3U":"aEfsyYe26Zg"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-pb-md-32 pf-m-0",dlang("generator","Embroidery guidelines")),tag("div","pf-d-block pf-d-md-none",[new go({videoId:he.a.isEs()?"4Zd8-Td-t6s":"AzLAsZNvI00"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-m-0",dlang("generator","How to create embroidery files & mockups"))])]),tag("div","col-12 col-md-4",[tag("div","pf-h4 pf-pb-12 pf-pb-md-16 pf-m-0",dlang("generator","General tips")),new go({videoId:he.a.isEs()?"7MI3qDDYQbs":"mEIznf_BX6g"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-pb-md-32 pf-m-0",dlang("generator","Color correcting for print")),tag("div","pf-d-block pf-d-md-none",[new go({videoId:he.a.isEs()?"t-grwIrEjLM":"fxVFD00v3BU"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-m-0",dlang("generator","10 tips for a perfect print file"))])]),tag("div","col-4 pf-d-none pf-d-md-block",[new go({videoId:he.a.isEs()?"TgwTgkSrbj4":"H8iYo08qDeE"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-m-0",dlang("generator","How to create AOP products in Printful Mockup generator"))]),tag("div","col-4 pf-d-none pf-d-md-block",[new go({videoId:he.a.isEs()?"4Zd8-Td-t6s":"AzLAsZNvI00"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-m-0",dlang("generator","How to create embroidery files & mockups"))]),tag("div","col-4 pf-d-none pf-d-md-block",[new go({videoId:he.a.isEs()?"t-grwIrEjLM":"fxVFD00v3BU"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-m-0",dlang("generator","10 tips for a perfect print file"))])])]);this._videoTutorialsModal=new Be.a(t),this._videoTutorialsModal.setContent(i),this._videoTutorialsModal.show()},_getAvailablePlacementByPlacementId:function(e){var t=this.getAvailablePlacements().filter((function(t){return t.id===e})).pop();return t||null},waitInitialRender:function(){var e=this;return Nc(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(nc.c)((function(){return e._isInitialised}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},waitProductLoad:function(){var e=this;return Nc(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(nc.c)((function(){return!e._isLoadingProduct}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},waitInitialProductless:function(){var e=this;return Nc(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(nc.c)((function(){return e._isInitialised&&e._placementOptions&&e._layerPicker&&e._clipartPicker&&e._quickDesignPicker&&e._licensedAssetPicker&&e._designFillColorPicker}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},_getDesignMeta:function(){return this.designData.designMeta},_dsrSettingsApplied:function(){return!this.regionData||!!this.regionData.allowedSellingRegions}},I.a.Base);Rc.TAB_PRODUCT="product",Rc.TAB_DESIGN="design",Rc.TAB_TEXT="text",Rc.TAB_TEXTBOX="textbox",Rc.TAB_IMAGE="image",Rc.TAB_CLIPART="clipart",Rc.TAB_MOCKUPS="mockups",Rc.TAB_QUICKDESIGN="quick_design",Rc.TAB_LICENSEDASSET="licensed_asset",Rc.GROUP_DESIGN_COUNTER=0,Rc.TAB_DESIGNER="designer",Rc.TAB_PREVIEW="preview",Rc.TAB_3D="3d",Rc.TAB_TEMPLATE_TITLE=dlang("generator","Design view"),Rc.TAB_ZOOMED_IN_TITLE=dlang("generator","Zoomed-in view"),Rc.TECHNIQUE_DEPENDENT_VALIDATION={},Rc.TECHNIQUE_DEPENDENT_VALIDATION[ce.a.TECHNIQUE_ENGRAVING]=[c.a.ENGRAVING_LAYERS_OVERLAPPING,c.a.LAYER_TEXT_TOO_SMALL,c.a.LAYER_CLIPART_TOO_SMALL],Rc.REMOVE_BG_MESSAGE_OK="OK",Rc.REMOVE_BG_MESSAGE_NO_BACKGROUND_FOUND="NO_BACKGROUND_FOUND",Rc.REMOVE_BG_MESSAGE_OTHER_ACTIVE_TASK="OTHER_ACTIVE_TASK",Rc.REMOVE_BG_MESSAGE_LIMIT_REACHED="LIMIT_REACHED",Rc.REMOVE_BG_MESSAGE_ERROR="ERROR",window&&((globalThis||{}).PFProductPushDesigner=Rc)},u8P0:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ZtlV"),r=i("6JZw"),a=i("nF4n"),o=Class({optionValueId:0,optionId:0,option:null,optionName:"",value:"",toArrayKeys:["optionValueId","optionId","option","optionName","value"]},r.a);o.fromArray=function(e){var t=new o;return a.a.O2O(t,e),e.option&&(t.option=n.a.fromArray(e.option)),t},window&&((globalThis||{}).PFItemsCustomProductVariantOptionValue=o)},uGFp:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var n=i("gqyd"),r=i("nvph"),a=i("IbzY"),o=i("EqHI"),s=i("7QI8"),l=i("Vx67"),c=i("bRD6"),d=i("X5Ic"),u=i("tw/D"),h=i("6JZw"),p=i("LvDl");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function m(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,i){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}})(e,t,i||e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=T(e);if(t){var r=T(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return P(this,i)}}function P(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(_,e);var t,i,h,g=b(_);function _(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),I(C(e=g.call(this)),"toArrayKeys",[].concat(f(_.DESIGN_DATA_KEYS),f(_.SYNC_DATA_KEYS))),I(C(e),"toArrayKeysWithoutSyncData",f(_.DESIGN_DATA_KEYS)),I(C(e),"storeId",null),I(C(e),"productId",null),I(C(e),"productTemplateId",null),I(C(e),"customProductId",null),I(C(e),"productOptions",null),I(C(e),"colors",null),I(C(e),"sizes",null),I(C(e),"templateSelectedSizes",[]),I(C(e),"defaultGeneratorVariantId",null),I(C(e),"templates",null),I(C(e),"title",""),I(C(e),"description",""),I(C(e),"multiLanguageDetails",null),I(C(e),"prices",null),I(C(e),"initPrices",null),I(C(e),"quantities",null),I(C(e),"filesIdsByPlacement",null),I(C(e),"isVisible",null),I(C(e),"withSizeGuide",!0),I(C(e),"sizeGuideUnits",[]),I(C(e),"useSizeConversion",null),I(C(e),"generatorVariants",null),I(C(e),"isTransparent",null),I(C(e),"categoryIds",null),I(C(e),"taxRuleId",null),I(C(e),"integrationMarketplaceCategoryIds",null),I(C(e),"tags",null),I(C(e),"genderCategory",null),I(C(e),"generatorVariantsIdsToSave",null),I(C(e),"templateKeysToSave",null),I(C(e),"multipleMockups",!1),I(C(e),"store",null),I(C(e),"product",null),I(C(e),"forceOrientation",null),I(C(e),"forceTemplateType",null),I(C(e),"generatorDesignId",null),I(C(e),"orderId",null),I(C(e),"arePrintfilesHidden",!1),I(C(e),"shippingProfileId",null),I(C(e),"selectedShippingCost",null),I(C(e),"labelTemplateType",null),I(C(e),"itemUniqueId",null),I(C(e),"productTranslations",null),I(C(e),"translationLanguage",null),I(C(e),"rawPlacementOptions",null),I(C(e),"additionalGeneratorVariantIds",null),I(C(e),"designMeta",null),I(C(e),"hexColors",null),I(C(e),"technique",null),I(C(e),"isFreeShippingEnabled",!1),I(C(e),"shouldShowWixMockupWarning",!1),I(C(e),"marketplaceIdentities",null),I(C(e),"pushableVideoIds",null),I(C(e),"optionGroup",null),I(C(e),"skuPrefix",null),I(C(e),"productVendor",""),e}return t=_,(i=[{key:"toArray",value:function(e){var t=v(T(_.prototype),"toArray",this).call(this,e);return null!=e&&e.withoutSyncData?Object(p.pick)(t,this.toArrayKeysWithoutSyncData):t}},{key:"getGeneratorVariant",value:function(e){for(var t in this.generatorVariants)if(this.generatorVariants[t].generatorVariantId==e)return this.generatorVariants[t];PF.DEV&&console.log("Generator variant not found: "+e)}},{key:"getTemplate",value:function(e,t){for(var i in this.templates)if(this.templates[i].templateId==t&&this.templates[i].placementId==e)return this.templates[i];PF.DEV&&console.log("Generator template not found: "+t)}},{key:"getMockupPreview",value:function(e,t,i){if(e instanceof l.a||e instanceof c.a){var n=e instanceof l.a?e:this.getGeneratorVariant(this.defaultGeneratorVariantId)||this.generatorVariants[0],o=e instanceof c.a?e:this.getTemplate(e.placementId,e.templateId),s=new r.a;return s.designFillColor=u.a.fromArray(this.rawPlacementOptions).getPlacementFillColor(e.placementId),s.generatorVariant=n,s.maxWidth=t,s.maxHeight=i,s.template=o,s.isPrintfile=e instanceof c.a,new a.a(s)}return tag("img",{className:"generator-picker__printfile",src:PF.ASSETS_URL+"images/layout/printfile.svg"})}},{key:"isEmbroidery",value:function(){for(var e in this.generatorVariants)if(s.a.TYPE_EMBROIDERY_FILES.indexOf(this.generatorVariants[e].placementId)>-1)return!0;return!1}},{key:"getPlacementIdsWithDesign",value:function(){var e=[];for(var t in this.templates){var i=this.templates[t];i.layers.length>0&&-1===e.indexOf(i.placementId)&&e.push(i.placementId)}return e=e.concat(this.getPlacementIdsWithDesignFillColorSet()).filter((function(e,t,i){return i.indexOf(e)===t}))}},{key:"hasPlacementDesignFillColorSet",value:function(e){var t;if(!this.rawPlacementOptions)return!1;var i=this.rawPlacementOptions.find((function(t){return t.placement===e}));return(null==i||null===(t=i.options)||void 0===t?void 0:t.designFillColor)||!1}},{key:"getPlacementIdsWithDesignFillColorSet",value:function(){if(!this.rawPlacementOptions)return[];var e=[];for(var t in this.rawPlacementOptions){var i=this.rawPlacementOptions[t].placement;this.hasPlacementDesignFillColorSet(i)&&-1===e.indexOf(i)&&e.push(i)}return e}},{key:"hasTextLayers",value:function(){for(var e in this.templates)if(this.templates[e].layers.filter((function(e){return e.isTextLayer()})).length>0)return!0;return!1}},{key:"hasCustomizableLayers",value:function(){return this.getCustomizablePlacementsCount()>0}},{key:"getNonCustomizablePlacementsCount",value:function(){return Object.keys(this.templates).length-this.getCustomizablePlacementsCount()}},{key:"getCustomizablePlacementsCount",value:function(){var e=0;for(var t in this.templates){var i=this.templates[t];c.a.getCustomizableLayersCount(i)>0&&e++}return e}},{key:"hasClipartLayers",value:function(){for(var e in this.templates)if(this.templates[e].layers.filter((function(e){return e instanceof n.a})).length>0)return!0;return!1}},{key:"isCustomProduct",value:function(){return this.productId===d.a.ID_CUSTOM_PRODUCT}},{key:"isFlatEmbroidery",value:function(){return!(!this.productOptions||this.productOptions.embroidery_type!==s.a.DIGITIZATION_FLAT)}},{key:"is3DEmbroidery",value:function(){return!(!this.productOptions||this.productOptions.embroidery_type!==s.a.DIGITIZATION_3D)}},{key:"isPartial3DEmbroidery",value:function(){return!(!this.productOptions||this.productOptions.embroidery_type!==s.a.DIGITIZATION_BOTH)}},{key:"hasLabelNative",value:function(){return!(!this.labelTemplateType||this.labelTemplateType!==o.a.LABEL_NATIVE)}},{key:"canHaveColorPicker",value:function(){return!this.product||this.product.canHaveColorPicker()}},{key:"cloneDesignData",value:function(){return Object(p.cloneDeep)(this)}}])&&m(t.prototype,i),h&&m(t,h),_}(h.a);I(w,"META_COPY_DESIGN","copy_design"),I(w,"META_QUICK_DESIGN","quick_design"),I(w,"DESIGN_DATA_KEYS",["storeId","productId","productTemplateId","customProductId","productOptions","filesIdsByPlacement","colors","sizes","templateSelectedSizes","defaultGeneratorVariantId","templates","title","quantities","useSizeConversion","genderCategory","generatorVariantsIdsToSave","multipleMockups","forceOrientation","forceTemplateType","generatorDesignId","arePrintfilesHidden","templateKeysToSave","orderId","itemUniqueId","labelTemplateType","rawPlacementOptions","additionalGeneratorVariantIds","designMeta","marketplaceIdentities","isTransparent"]),I(w,"SYNC_DATA_KEYS",["description","multiLanguageDetails","translationLanguage","withSizeGuide","sizeGuideUnits","tags","categoryIds","integrationMarketplaceCategoryIds","isVisible","shippingProfileId","isFreeShippingEnabled","taxRuleId","selectedShippingCost","pushableVideoIds","prices","skuPrefix","productVendor"])},uV1j:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("S7uB"),r=i("QLN8"),a=i("hwc9"),o=i("nwx2"),s=i("cejl"),l=i("cCrT"),c=i("XLZy"),d=i("nF4n"),u=i("YBfo"),h=i("I/MA"),p=function(e){this.par=new n.a,d.a.O2O(this.par,e||{}),this.categories=new r.a,this.tabs=new o.a("secondary"),this.node=tag("div","product-picker pf-mt-12",[this.tabs,this.nodeBody=tag("div","row row-flex product-list")]),this.isSampleOrder=!1};p.prototype=new d.a.Base,p.prototype.load=function(){c.a.show(this.nodeBody),(this._isSync||this.par.isForGenerator)&&(this.par.includeDisabledInPush=!1),(new a.a).getProducts({callback:this.loadRe.bind(this),categoryId:this.par.categoryId,storeId:this.par.storeId,isScreenMode:this.par.isScreenMode?1:0,brand:this.par.brand,search:this.par.search,isForGenerator:this.par.isForGenerator,isForProductTemplates:this.par.isForProductTemplates,page:1,perPage:200,includeDisabledInPush:this.par.includeDisabledInPush?1:0})},p.prototype.append=function(e){return this.node.append(e),this.load(),this},p.prototype.loadRe=function(e){var t,i=0;for(t in c.a.hide(this.nodeBody),d.a.clearNode(this.nodeBody),this.renderTabs(e),e.total||tag("div","text-center alert alert-warning pf-p-16 pf-m-12 col-xs-12",e.total?[tag("span","",["Sorry, your search ",tag("b","",['"'+this.par.search+'"'])," did not match any products."])]:["Sorry, no products were found"]).append(this.nodeBody),e.items){i+=1;var n=e.items[t];this.par.productId&&this.par.productId===n.productId&&this.productClick(n),new s.a({product:n,callback:this.productClick.bind(this,n,!0),isUnavailable:this.isUnavailable(n),showFulfillmentCountries:this.par.showFulfillmentCountries,showSizes:this.par.showSizes,isSampleOrderContext:this.isSampleOrderFlow()}).append(this.nodeBody),i%4==0&&tag("div","clearfix hidden-xs").append(this.nodeBody),i%2==0&&tag("div","clearfix visible-xs visible-sm").append(this.nodeBody)}},p.prototype.renderTabs=function(e){if(this.tabs.clear(),!(e.brands.length<2))for(var t in ga("send",{hitType:"event",eventCategory:"ProductPicker",eventAction:"See brand tabs"}),this.tabs.add({caption:"All",onclick:this.loadBrand.bind(this,""),isActive:""===this.par.brand}),e.brands){var i=e.brands[t];this.tabs.add({caption:i,onclick:this.loadBrand.bind(this,i),isActive:i===this.par.brand})}},p.prototype.loadBrand=function(e){ga("send",{hitType:"event",eventCategory:"ProductPicker",eventAction:"Click on brand tab"}),this.par.brand=e,this.load()},p.prototype.productClick=function(e,t){this.isUnavailable(e)||(t&&this.par.shouldSaveState&&p.setState(e),this.par.callback(e))},p.prototype.isUnavailable=function(e){return e.isDisabledInPush&&(this.par.isForGenerator||this.par.isSync)},p.prototype.containsUnavailableProduct=function(e){for(var t in e.items)if(this.isUnavailable(e.items[t]))return!0;return!1},p.prototype.isSampleOrderFlow=function(){return u.a.isOrderFlow()&&(this.order=h.a.getActiveInstance(),this.isSampleOrder=this.order.isSampleOrder),this.isSampleOrder},p.setState=function(e){var t=new l.a,i={categoryId:e.categoryIds[0],productId:e.productId};t.query.categoryId=e.categoryIds[0],t.query.productId=e.productId,history.pushState(i,document.title,t.toString())},(globalThis||{}).PFProductPicker=p},unRh:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({categories:[],activeTopLevelCategory:null,activeCategoryId:null,shouldShowNew:!1,isTopLevel:!1});window&&((globalThis||{}).PFProductsCatalogSidebarMenuPar=n)},up3R:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=function(e,t,i){this.selfRemove=i||!1,!1!==this.selfRemove&&(this.selfRemove=parseInt(this.selfRemove,10),isNaN(this.selfRemove)&&(this.selfRemove=2e3)),"string"==typeof e&&(e=[e]),this.node=tag("div","pf-status-message pf-status-message--"+t,e)};r.prototype=new n.a.Base,r.prototype.append=function(e){return this.selfRemove&&setTimeout(this.prettyRemove.bind(this),this.selfRemove),this.node.append(e),setTimeout(function(){n.a.addClassName(this.node,"pf-status-message--visible")}.bind(this),50),this},r.prototype.prepend=function(e){return this.selfRemove&&setTimeout(this.prettyRemove.bind(this),this.selfRemove),this.node.prepend(e),setTimeout(function(){n.a.addClassName(this.node,"pf-status-message--visible")}.bind(this),50),this},r.prototype.prettyRemove=function(){n.a.removeClassName(this.node,"pf-status-message--visible"),setTimeout(n.a.removeNode.bind(this,this.node),500)},r.TYPE_SUCCESS="success",r.TYPE_WARNING="warning",r.TYPE_ERROR="error",window&&((globalThis||{}).PFComponentsStatusMessage=r)},v49Q:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("g357"),r=i("Op/+"),a=i("3R2j"),o=i("n5ho"),s=i("nF4n"),l=Class({_filter:null,_params:null,_selectedValues:[],_filterTypeMaterial:"material",__construct:function(e){this._params=e,this.node=Object(s.a)({tag:"div"}),this._params.type&&(this._selectedValues=e.selectedItems,this.render(this._params.productItems))},getType:function(){return this._params.type},render:function(e){var t=this._prepareFilter(this._params.productItems),i=this._prepareFilter(e);t.length&&(t=t.map(this._formatItem.bind(this,i)),i.length>=6&&(t=t.sort(this._sortSelected)),s.a.clearNode(this.node),this._filter=new a.a({header:this._params.title,items:t,selectedValues:this._selectedValues,enableSearchAt:10,searchItemBuffer:0,onChange:this._onChange}),this._filter.append(this.node))},_isMaterialType:function(){return this._filterTypeMaterial===this.getType()},_formatItem:function(e,t){var i=!0;return this._isMaterialType()&&(i=!1),{shouldCapitalize:i,text:this._getLabel(t,this.getType()),value:t,isActive:e.includes(t)}},_getLabel:function(e,t){return S.labelOverrides[t]&&S.labelOverrides[t][e]?S.labelOverrides[t][e]:e},getSelected:function(){return this._filter?this._filter.getSelected():[]},getMatchingProducts:function(e){return e.filter(this.filterProduct)},_prepareFilter:function(e){var t=[].concat.apply([],e.map(this.filterParam.bind(this)));return t.filter(this.filterEmptyOrDuplicateParam.bind(this,t))},_sortSelected:function(e,t){var i=e.isActive===t.isActive?0:e.isActive?-1:1;return this._selectedValues.indexOf(e.value)>-1?i=-2:this._selectedValues.indexOf(t.value)>-1&&(i=2),i},_onChange:function(e,t){this._selectedValues=e,e.length,this._params.onSomethingChanged(this,t)},getItems:function(){return this._filter?this._filter.items:[]},getProduct:function(e){return e instanceof o.a?e.getCachedProduct():e},filterProduct:function(e){if(!this._selectedValues.length)return!0;var t=e[this._params.type];if(t instanceof Array){var i;for(var n in t)if(!(this._selectedValues.indexOf(t[n])<0)){i=!0;break}return i}return this._selectedValues.indexOf(t)>-1},isEnabled:function(e){if(!this._filter)return!1;if(this._filter.items.length>1)return!0;var t=this._filter.items.map((function(e){return e.value})),i=e.filter(function(e){var i=e[this._params.type];if(i instanceof Array){var n;for(var r in i)if(!(t.indexOf(i[r])<0)){n=!0;break}return n}return t.indexOf(i)>-1}.bind(this));return e.length!==i.length},isParamBlacklisted:function(e){return["STOCK-PRODUCT"].indexOf(e)>-1},filterParam:function(e){var t=e[this._params.type];if(t instanceof Array){var i=[];for(var n in t){var r=t[n];i.indexOf(r)>-1||i.push(r)}if(i.length)return i}if(t)return t},filterEmptyOrDuplicateParam:function(e,t,i){return!(!t||!t.length)&&(!this.isParamBlacklisted(t)&&e.indexOf(t)===i)}},s.a.Base);l.Par=Class({type:"",title:"",productItems:[],selectedItems:[],onSomethingChanged:null}),window&&((globalThis||{}).PFProductsCatalogFiltersBase=l);var c=i("X5Ic"),d=i("cCrT"),u=i("Tt8e"),h=Class({_prepareFilter:function(e){var t={},i=[];return e.map(function(e){this.getProduct(e).colors.map(function(e){i.indexOf(e.colorName)>-1?t[e.colorName].times++:(i.push(e.colorName),t[e.colorName]={name:e.colorName,times:1})}.bind(this))}.bind(this)),u.a.convertToArray(t).sort(this._sortColors).map((function(e){return e.name}))},_sortColors:function(e,t){return t.times-e.times},filterProduct:function(e){if(!this._selectedValues.length)return!0;var t;for(var i in e.colors)this._selectedValues.indexOf(e.colors[i].colorName)<0||(t=!0);return this._isVariantAndHasColor(e)&&(t=!0),t},_isVariantAndHasColor:function(e){return e.color&&-1!==this._selectedValues.indexOf(e.color)},isEnabled:function(e){if(!this._filter)return!1;if(this._filter.items.length>1)return!0;var t=this._filter.items.map((function(e){return e.value})),i=e.filter((function(e){var i=!1;for(var n in e.colors)t.indexOf(e.colors[n].colorName)<0||(i=!0);return i}));return e.length!==i.length}},l);window&&((globalThis||{}).PFProductsCatalogFiltersColor=h);var p=Class({_prepareFilter:function(e){var t=[].concat.apply([],e.map(this._mapProductOrVariant.bind(this)));return t.filter(this.filterEmptyOrDuplicateParam.bind(this,t))},_mapProductOrVariant:function(e){var t=this.getProduct(e),i=[];for(var n in t.availableTechniques)t.availableTechniques[n]&&i.push(t.availableTechniques[n]);return t.isPolyPro&&i.push(c.a.TYPE_POLY_PRO),i},filterProduct:function(e){if(!this._selectedValues.length)return!0;var t,i=e;for(var n in e instanceof o.a&&(i=e.getCachedProduct()),this._selectedValues.includes(c.a.TYPE_POLY_PRO)&&i.isPolyPro&&(t=!0),i.availableTechniques)if(!(this._selectedValues.indexOf(i.availableTechniques[n])<0)){t=!0;break}return t}},l);window&&((globalThis||{}).PFProductsCatalogFiltersTechnique=p);var g=Class({_prepareFilter:function(e){var t=[].concat.apply([],e.map(this._mapSpecialOffer.bind(this)));return t.filter(this.filterEmptyOrDuplicateParam.bind(this,t))},_mapSpecialOffer:function(e){var t=[];return this.getProduct(e).priceRange.bulkDiscountTiers&&t.push(dlang("global","Bulk discount")),t},filterProduct:function(e){return!this._selectedValues.length||!!this.getProduct(e).priceRange.bulkDiscountTiers}},l);function f(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return m(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}window&&((globalThis||{}).PFProductsCatalogFiltersSpecialOffers=g);var v=Class({_prepareFilter:function(e){var t=[].concat.apply([],e.map(this._mapProductOrVariant.bind(this)));return t.filter(this.filterEmptyOrDuplicateParam.bind(this,t))},_mapProductOrVariant:function(e){var t=this.getProduct(e),i=Object.values(t.fulfillmentCountriesMap);return f(new Set(i))},filterProduct:function(e){if(!this._selectedValues.length)return!0;var t,i,n=function(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=_(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}(this._mapProductOrVariant(e));try{for(n.s();!(i=n.n()).done;){var r=i.value;if(-1!==this._selectedValues.indexOf(r)){t=!0;break}}}catch(e){n.e(e)}finally{n.f()}return t}},l);window&&((globalThis||{}).PFProductsCatalogFiltersFulfillmentCountries=v);var y=i("md/F"),b=Class({_prepareFilter:function(e){var t=[].concat.apply([],e.map(this._mapProductOrVariant.bind(this)));return t.filter(this.filterEmptyOrDuplicateParam.bind(this,t)).sort(y.a.sizeSortingCallback)},_mapProductOrVariant:function(e){var t=this.getProduct(e),i=[];for(var n in t.allSizes)this._isSizeValid(n)&&t.allSizes[n]&&i.push(n);return i},_isSizeValid:function(e){return!!e},filterProduct:function(e){if(!this._selectedValues.length)return!0;var t=e,i=null;if(e instanceof o.a&&(t=e.getCachedProduct(),i=e),i)return this._selectedValues.indexOf(i.size)>-1;var n,r={};for(var a in t.allSizes)t.allSizes[a]&&(r[a]=t.allSizes[a]);for(var s in r)if(!(this._selectedValues.indexOf(s)<0)){n=!0;break}return n}},l);window&&((globalThis||{}).PFProductsCatalogFiltersSize=b);var P=Class({_isSizeValid:function(e){return"cm"===e.slice(-2)}},b);window&&((globalThis||{}).PFProductsCatalogFiltersSizeCm=P);var C=Class({_isSizeValid:function(e){return"cm"!==e.slice(-2)}},b);window&&((globalThis||{}).PFProductsCatalogFiltersSizeIn=C);var T=i("4Ru2"),I=i("4CFC"),w=i("YBfo"),S=Class({_productOrVariantItems:[],_onFilterCallback:null,_totalCount:null,_filters:[],_filterClasses:{},_params:[],_finalLoad:!0,_sellingRegionSetting:null,__construct:function(e,t,i,n,a,o){var s=this;this._productOrVariantItems=e,this._onFilterCallback=function(){s._finalLoad=!1;for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t.apply(s,i)},this._totalCount=n,this._allowedFulfillmentRegions=i||[],this._finalLoad=o,this._sellingRegionSetting=a,this._filterClasses[w.a.FILTER_TYPES.color]=h,this._filterClasses[w.a.FILTER_TYPES.availableTechniques]=p,this._filterClasses[w.a.FILTER_TYPES.specialOffers]=g,this._sellingRegionSetting||(this._filterClasses[w.a.FILTER_TYPES.fulfillmentCountries]=v),e.filter((function(e){return e.sizes?e.sizes.join(", ").indexOf("cm")>-1:e.size.indexOf("cm")>-1})).length>0?(this._filterClasses[w.a.FILTER_TYPES.cmSizes]=P,this._filterClasses[w.a.FILTER_TYPES.inSizes]=C):this._filterClasses[w.a.FILTER_TYPES.allSizes]=b,this._params=(new r.PFProductsCatalogUtilsStore).getActiveFilters(),this.node=tag("div","catalog__sidebar-filter__body pf-mr-40 pf-mr-sm-0"),this._setFilterLabels(),this.render(this._productOrVariantItems)},render:function(e){this._filters=this._params.map(this._initFilter.bind(this,e)).filter(function(t){return t._params.type===w.a.FILTER_TYPES.brandingOptions||t._params.type===w.a.FILTER_TYPES.specialOffers?t.isEnabled(e):t.isEnabled(e)&&t.getItems().length>1}.bind(this)),this._applyAdditionalConditions(),this._onSomethingChanged(null,!0),s.a.clearNode(this.node),tag("div","",this._filters).append(this.node)},getAllSelectedValues:function(){return this._filters.map((function(e){return e.getSelected()})).filter((function(e){return e.length>0}))},_initFilter:function(e,t){var i=new l.Par;return i.type=t.type,i.title=t.title,i.productItems=e,i.selectedItems=this._getSelectedFromUrl(t.type),i.onSomethingChanged=this._onSomethingChanged,new(this._getFilterClass(t.type))(i)},_getFilterClass:function(e){return this._filterClasses[e]?this._filterClasses[e]:l},_getFilterByType:function(e){return this._filters.filter(function(t){return e===t.getType()}.bind(this)).shift()},_onSomethingChanged:function(e,t){var i=this._productOrVariantItems,n=this.updateFilters(this._filters,e,i);this.updateFilters(n.filters,e,n.productItems,this._totalCount),this._pushToHistory(n.productItems,t,this._totalCount),this._onFilterCallback&&this._onFilterCallback(i)},updateFilters:function(e,t,i,n){var r=[];for(var a in e){var o=e[a];0===o.getSelected().length&&r.push(o),t&&t.getType()===o.getType()||o.render(i),o.getSelected().length&&(i=o.getMatchingProducts(i))}return{productItems:i,filters:r,totalCount:n}},_applyAdditionalConditions:function(){var e=this._getFilterByType(w.a.FILTER_TYPES.cmSizes),t=this._getFilterByType(w.a.FILTER_TYPES.inSizes),i=this._getFilterByType(w.a.FILTER_TYPES.allSizes),n=this._getFilterByType(w.a.FILTER_TYPES.fulfillmentCountries);e&&e.getItems().length&&t&&t.getItems().length?i&&i.remove():(e&&e.remove(),t&&t.remove()),n&&n.getSelected().length<1&&this._allowedFulfillmentRegions.length<n.getItems().length&&(n._selectedValues=this._allowedFulfillmentRegions)},_getSelectedFromUrl:function(e){var t=new d.a;return t.query[e]?t.query[e].split("!"):[]},_setFilterLabels:function(){var e={};e[c.a.TYPE_EMBROIDERY]=dlang("products","Embroidery"),e[c.a.TYPE_MUG]=dlang("products","Mug"),e[c.a.TYPE_POSTER]=dlang("products","Poster"),e[c.a.TYPE_FRAMED_POSTER]=dlang("products","Framed Poster"),e[c.a.TYPE_CANVAS]=dlang("products","Canvas"),e[c.a.TYPE_T_SHIRT]=dlang("products","Direct to garment (DTG)"),e[c.a.TYPE_SUBLIMATION]=dlang("products","Sublimation"),e[c.a.TYPE_PHONE_CASE]=dlang("products","Phone case"),e[c.a.TYPE_CUT_SEW]=dlang("products","Cut & sew"),e[c.a.TECHNIQUE_ENGRAVING]=dlang("products","Engraving"),e[c.a.TYPE_TOTE]=dlang("products","Tote"),e[c.a.TECHNIQUE_HANG_TAG]=dlang("products","Hang tag"),e[c.a.TYPE_POLY_PRO]=dlang("products","DTG On Polyester"),e["FRAMED-PRINT"]=dlang("products","Framed canvas"),S.labelOverrides[w.a.FILTER_TYPES.availableTechniques]=e;var t={};t[T.a.REGION_USA]=Object(I.b)(T.a.REGION_USA),t[T.a.REGION_MEXICO]=Object(I.b)(T.a.REGION_MEXICO),t[T.a.REGION_EUROPE]=Object(I.b)(T.a.REGION_EUROPE),t[T.a.REGION_EUROPE_LATVIA]=Object(I.b)(T.a.REGION_EUROPE_LATVIA),t[T.a.REGION_EUROPE_MEXICO]=Object(I.b)(T.a.REGION_EUROPE_MEXICO),t[T.a.REGION_JAPAN]=Object(I.b)(T.a.REGION_JAPAN),t[T.a.REGION_EUROPE_SPAIN]=Object(I.b)(T.a.REGION_EUROPE_SPAIN),t[T.a.REGION_AUSTRALIA]=Object(I.b)(T.a.REGION_AUSTRALIA),S.labelOverrides[w.a.FILTER_TYPES.fulfillmentCountries]=t},_pushToHistory:function(e,t,i){var r={};this._filters.map((function(e){e.getSelected().length&&(r[e.getType()]=e.getSelected())})),n.a.createAndDispatch(this._finalLoad?w.a.EVENT_ALL_LOADED:w.a.EVENT_PRODUCTS_FILTER,{filter:r,productsOrVariants:e,skipHistory:!!t,totalCount:i})}},s.a.Base);S.labelOverrides={},window&&((globalThis||{}).PFProductsCatalogFilters=S)},v4sp:function(e,t,i){"use strict";var n=i("7OPZ"),r=i("PMDB"),a=i("y70k"),o=i("9Nv7");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=h(e);if(t){var r=h(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return u(this,i)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(FileLibraryError,e);var t=d(FileLibraryError);function FileLibraryError(){return l(this,FileLibraryError),t.apply(this,arguments)}return FileLibraryError}(i("xVVd").a);p(g,"code","FILE_LIBRARY_ERROR"),p(g,"defaultMessage","Unknown File Library error");var f,_,m,v=i("d8FT"),y=i.n(v),b=i("UfWW"),P=i.n(b),C=i("MJIl"),T=i.n(C),I=i("oCYn"),w=i("46ud"),S=i("atGO"),E=i("XJFE"),k=i("edgZ");function O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function A(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?O(Object(i),!0).forEach((function(t){L(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function L(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var N=function(){return{recentlyUsedFiles:[],directories:[],directoryLimit:999,showMore:!1,files:[],isFilesLoading:!0,selectedFileIds:new Set,navigation:{currentDirectory:null,totalFilesCount:0,currentPage:1,pageItemsLimit:24,pageItemsSort:w.c.CREATED_DATE_DESC,pageSwitchCallback:function(){},isSearch:!1,searchQuery:"",shouldUseRouter:!0},overrides:{currentDirectory:{directFilesCount:void 0,directoriesCount:void 0},directories:[]},editDirectory:null,itemToMove:null,modal:{isShowing:!1,headerText:null,contentText:null,action:{primary:null,secondary:null}},flowData:{}}};t.a={namespaced:!0,state:N(),mutations:(f={},L(f,n.I,(function(e){Object.assign(e,N())})),L(f,n.O,(function(e,t){var i=A(A(A({},t),{capabilities:t.getCapabilities()}),y()(e.overrides.currentDirectoryOverrides,(function(e){return void 0!==e})));e.overrides.currentDirectoryOverrides={directFilesCount:void 0,directoriesCount:void 0},t=new r.c(i),e.navigation.currentDirectory=t,e.navigation.totalFilesCount=t.directFilesCount})),L(f,n.Q,(function(e,t){e.overrides.directories.forEach((function(e){var i=P()(t,{id:e.id});-1!==i&&(t[i]=e)})),e.overrides.directories=[],e.directories=t})),L(f,n.V,(function(e,t){I.default.set(e,"files",t)})),L(f,n.T,(function(e,t){e.editDirectory=t})),L(f,n.kb,(function(e,t){e.showMore=t})),L(f,n.ab,(function(e,t){e.modal=A(A({},e.modal),t)})),L(f,n.S,(function(e,t){e.directoryLimit=t})),L(f,n.U,(function(e,t){new E.a({content:t.message,type:E.a.TYPE_ERROR,duration:2e3})})),L(f,n.Z,(function(e,t){new E.a({content:t,type:E.a.TYPE_SUCCESS,duration:2e3})})),L(f,n.P,(function(e,t){e.overrides.currentDirectoryOverrides=A(A({},e.currentDirectoryOverrides),t)})),L(f,n.R,(function(e,t){e.overrides.directories=t})),L(f,n.X,(function(e,t){e.navigation.isSearch=t})),L(f,n.ib,(function(e,t){e.navigation.searchQuery=t})),L(f,n.gb,(function(e,t){e.navigation.totalFilesCount=t})),L(f,n.cb,(function(e,t){e.navigation.pageItemsLimit=t})),L(f,n.db,(function(e,t){e.navigation.pageItemsSort=t})),L(f,n.eb,(function(e,t){e.navigation.pageSwitchCallback=t})),L(f,n.bb,(function(e,t){e.navigation.currentPage=t})),L(f,n.Y,(function(e,t){e.itemToMove=t})),L(f,n.fb,(function(e,t){e.navigation.shouldUseRouter=t})),L(f,n.jb,(function(e,t){e.selectedFileIds=t})),L(f,n.W,(function(e,t){e.flowData=t})),L(f,n.hb,(function(e,t){e.recentlyUsedFiles=t})),f),actions:(_={},L(_,n.C,(function(e,t){var i,a,s,l=e.state,c=e.commit,d=e.dispatch,u=!1!==(null==t?void 0:t.shouldCommit),h={directoryId:(isNaN(t)?null==t?void 0:t.directoryId:t)||null,limit:(null==t?void 0:t.limit)||(l.showMore?l.directoryLimit:7)};null!==(i=l.flowData)&&void 0!==i&&i.productId&&(h.productId=null===(a=l.flowData)||void 0===a?void 0:a.productId,h.technique=null===(s=l.flowData)||void 0===s?void 0:s.technique);return Object(o.a)("library/get-directory",h).then((function(e){var t,i,a,o,s,h,p;if(!e.success)throw new g(e.error.toString());var f=new r.c({id:e.directory.id,parentId:e.directory.parentId,type:e.directory.type,storeId:e.directory.storeId,name:e.directory.name,filesCount:null===(t=e.directory)||void 0===t?void 0:t.stats.filesCount,directFilesCount:null===(i=e.directory)||void 0===i?void 0:i.stats.directFilesCount,directoriesCount:null===(a=e.directory)||void 0===a?void 0:a.stats.directoriesCount,metadata:JSON.parse((null===(o=e.directory)||void 0===o?void 0:o.metadata)||"{}"),pathDirectories:(null===(s=e.directory)||void 0===s?void 0:s.pathDirectories)||[],capabilities:(null===(h=e.directory)||void 0===h?void 0:h.capabilities)||{}}),_=[];if(((null===(p=e.directory)||void 0===p?void 0:p.items)||[]).forEach((function(e){var t;_.push(new r.c({id:e.id,parentId:e.parentId,type:e.type,name:e.name,filesCount:null===(t=e.stats)||void 0===t?void 0:t.filesCount,directoriesCount:null==e?void 0:e.stats.directoriesCount,metadata:JSON.parse((null==e?void 0:e.metadata)||"{}"),capabilities:(null==e?void 0:e.capabilities)||{}}))})),!u)return{currentDirectory:f,directories:_};c(n.O,f),c(n.Q,_);var m=function(){d(n.D,{directoryId:f.id,page:l.navigation.currentPage,sort:l.navigation.pageItemsSort})};c(n.eb,m),m()})).catch((function(e){c(n.U,e)}))})),L(_,n.D,(function(e,t){var i,r,s,l=e.state,c=e.commit,d=(e.dispatch,!1!==(null==t?void 0:t.shouldCommit)),u={directoryId:t.directoryId,page:(null==t?void 0:t.page)||1,sort:t.sort||w.c.CREATED_DATE_DESC};null!==(i=l.flowData)&&void 0!==i&&i.productId&&(u.productId=null===(r=l.flowData)||void 0===r?void 0:r.productId,u.technique=null===(s=l.flowData)||void 0===s?void 0:s.technique);return Object(o.a)("library/get-directory-files",u).then((function(e){if(!e.success)throw new g(e.error.toString());var t=e.files.map((function(e){return a.a.fromArray(e)})).map((function(e){return new S.a({sourceFile:e})}));if(!d)return{files:t};c(n.V,t),c(n.cb,e.limit)})).catch((function(e){c(n.U,e)}))})),L(_,n.L,(function(e,t){var i,r=e.state,s=e.commit;s(n.ib,t);var l,c,d={query:t,page:r.navigation.currentPage,sort:r.navigation.pageItemsSort};null!==(i=r.flowData)&&void 0!==i&&i.productId&&(d.productId=null===(l=r.flowData)||void 0===l?void 0:l.productId,d.technique=null===(c=r.flowData)||void 0===c?void 0:c.technique);return Object(o.a)("library/search-files",d).then((function(e){if(!e.success)throw new g(e.error.toString());var t=e.files.map((function(e){return a.a.fromArray(e)})).map((function(e){return new S.a({sourceFile:e})}));s(n.V,t),s(n.gb,e.total),s(n.cb,e.limit)})).catch((function(e){s(n.U,e)}))})),L(_,n.d,(function(e,t){var i=e.state,r=e.commit;return Object(o.a)("library/delete-directory",{directoryId:t}).then((function(e){if(!e.success)throw new g(e.error.toString());i.directories.some((function(e){if(e.id===t)return r(n.P,{directoriesCount:i.navigation.currentDirectory.directoriesCount-(e.directoriesCount+1)}),!0})),r(n.Z,dlang("library","Folder deleted"))})).catch((function(e){r(n.U,e)}))})),L(_,n.e,(function(e,t){var i=e.state,r=e.commit,a=e.dispatch;return Object(o.a)("library/delete-directory-file",{fileIds:t.fileIds,directoryId:t.directoryId}).then((function(e){if(!e.success)throw new g(e.error.toString());var o=i.navigation.totalFilesCount-t.fileIds.length,s=o<0?0:o;r(n.P,{directFilesCount:s}),a(n.E),r(n.Z,dnlang("library","File deleted","Files deleted",t.fileIds.length))})).catch((function(e){r(n.U,e)}))})),L(_,n.f,(function(e,t){(0,e.commit)(n.T,t.clone())})),L(_,n.J,(function(e,t){var i=e.commit,r="library/save-directory",a=t.toArray();return t.id||(r="library/create-directory",a=A(A({},t.toArray()),{parentId:t.parentId})),Object(o.a)(r,{directory:JSON.stringify(a)}).then((function(e){if(!e.success)throw new g(e.error.toString());return e})).catch((function(e){i(n.U,e)}))})),L(_,n.K,(function(e){var t,i=e.state,r=e.commit,a=e.dispatch,o=i.editDirectory;o.parentId||(o.parentId=null===(t=i.navigation.currentDirectory)||void 0===t?void 0:t.id);a(n.J,o).then((function(e){if(e)if(i.editDirectory.id){var t=i.directories.map((function(e){return e.id===i.editDirectory.id?i.editDirectory:e}));r(n.Q,t),r(n.T,null),r(n.Z,dlang("library","Folder saved"))}else{var o;r(n.P,{directoriesCount:i.navigation.currentDirectory.directoriesCount+1}),a(n.C,null===(o=i.navigation.currentDirectory)||void 0===o?void 0:o.id),r(n.T,null),r(n.Z,dlang("library","New folder created"))}}))})),L(_,n.mb,(function(e,t){var i=e.state,r=e.commit,a=i.editDirectory;a.setAvatar(t),r(n.T,a)})),L(_,n.c,(function(e){(0,e.commit)(n.T,null)})),L(_,n.nb,(function(e,t){(0,e.commit)(n.kb,t)})),L(_,n.F,(function(e,t){var i=e.state,r=e.commit;return Object(o.a)("library/move-directory",{directoryId:t.directory.id,destinationDirectoryId:t.destinationDirectory.id}).then((function(e){if(!e.success)throw new g(e.error.toString());var a=t.destinationDirectory,o=i.itemToMove;return o.parentId=a.id,T()(a.pathDirectories,{id:i.navigation.currentDirectory.id})||r(n.P,{directoriesCount:i.navigation.currentDirectory.directoriesCount-(o.directoriesCount+1)}),a.directoriesCount+=o.directoriesCount+1,a.filesCount+=o.filesCount,r(n.R,[o,a]),r(n.Y,null),r(n.Z,dlang("library","You have moved the folder")),!0})).catch((function(e){return r(n.U,e),!1}))})),L(_,n.G,(function(e,t){var i=e.state,r=e.commit;return Object(o.a)("library/move-directory-file",{fileIds:t.fileIds,destinationDirectoryId:t.destinationDirectory.id}).then((function(e){if(!e.success)throw new g(e.error.toString());return r(n.P,{directFilesCount:i.navigation.currentDirectory.directFilesCount-t.fileIds.length}),r(n.Y,null),r(n.Z,dnlang("library","You have moved the file","You have moved the files",t.fileIds.length)),!0})).catch((function(e){return r(n.U,e),!1}))})),L(_,n.lb,(function(e,t){(0,e.commit)(n.ab,{isShowing:null==t?void 0:t.isShowing,headerText:null==t?void 0:t.headerText,contentText:null==t?void 0:t.contentText,action:{primary:null==t?void 0:t.actionPrimary,secondary:null==t?void 0:t.actionSecondary}})})),L(_,n.B,(function(e){(0,e.commit)(n.ab,{isShowing:!1})})),L(_,n.M,(function(e,t){var i=e.state,r=e.commit;if(i.files)if(t){var a=new Set;for(var o in i.files)a.add(i.files[o].sourceFile.fileId);r(n.jb,a)}else r(n.jb,new Set)})),L(_,n.N,(function(e,t){var i=e.state,r=e.commit;if(i.files){var a=new Set;i.selectedFileIds.forEach((function(e){a.add(e)})),t.selected?a.add(t.id):a.has(t.id)&&a.delete(t.id),r(n.jb,a)}})),L(_,n.E,(function(e){var t=e.commit;if(!e.getters[n.l])return Object(o.a)("library/get-recently-used-files",{}).then((function(e){if(!e.success)throw new g(e.error.toString());var i=e.files.map((function(e){var t=a.a.fromArray(e);return(new k.a).cacheFile(t),new S.a({sourceFile:t})}));t(n.hb,i)})).catch((function(e){t(n.U,e)}))})),L(_,n.H,(function(e){var t,i=e.state,r=e.dispatch;i.navigation.isSearch?r(n.L,i.navigation.searchQuery):r(n.C,null===(t=i.navigation.currentDirectory)||void 0===t?void 0:t.id)})),_),getters:(m={},L(m,n.g,(function(e){return e.navigation.currentDirectory})),L(m,n.h,(function(e){return e.directories})),L(m,n.k,(function(e){return e.files})),L(m,n.j,(function(e){return e.editDirectory})),L(m,n.A,(function(e){return e.showMore})),L(m,n.q,(function(e){return e.modal})),L(m,n.i,(function(e){return e.directoryLimit})),L(m,n.o,(function(e){return e.navigation.isSearch})),L(m,n.w,(function(e){return e.navigation.totalFilesCount})),L(m,n.x,(function(e){return Math.ceil(e.navigation.totalFilesCount/(e.navigation.pageItemsLimit||1))||1})),L(m,n.r,(function(e){return e.navigation.currentPage})),L(m,n.s,(function(e){return e.navigation.pageItemsLimit})),L(m,n.u,(function(e){return e.navigation.pageSwitchCallback})),L(m,n.t,(function(e){return e.navigation.pageItemsSort})),L(m,n.p,(function(e){return e.itemToMove})),L(m,n.v,(function(e){return e.navigation.shouldUseRouter})),L(m,n.z,(function(e){return e.selectedFileIds})),L(m,n.y,(function(e){return e.recentlyUsedFiles})),L(m,n.b,(function(e){var t=[],i=e.navigation.currentDirectory;if(!(i instanceof r.c))return t;if(e.navigation.isSearch){var n=i.pathDirectories.length?i.pathDirectories[0]:i;t.push({id:null,title:n.name}),t.push({id:-1,title:dlang("dashboard","Search results")})}else(t=i.pathDirectories.map((function(e){return{id:e.parentId?e.id:null,title:e.name}}))).push({id:i.id,title:i.name});return t})),L(m,n.l,(function(e){var t,i;return void 0===(null===(t=e.flowData)||void 0===t?void 0:t.isAnonymous)||(null===(i=e.flowData)||void 0===i?void 0:i.isAnonymous)})),L(m,n.m,(function(e){var t;return(null===(t=e.flowData)||void 0===t?void 0:t.id)===w.f.generator})),L(m,n.n,(function(e){var t;return(null===(t=e.flowData)||void 0===t?void 0:t.id)===w.f.library})),m)}},"v88+":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("7QI8"),r=i("nF4n"),a=i("7pSD"),o=Class({_current:"",_available:[],__construct:function(e){this._par=e,this._available=this._par.embroideryTypesAvailable.slice(),this._current=this._par.embroideryType,this.node=tag("div","",[tag("h6","",[dlang("generator","Embroidery type"),this._getTooltipNode()]),this._buttons=tag("div")]),this._par.nodeFooter&&tag("div","pf-mt-8",[this._par.nodeFooter]).append(this.node),this._render()},_render:function(){if(r.a.clearNode(this._buttons),this._par.renderRadioInput&&this._current!==n.a.DIGITIZATION_BOTH)for(var e in this._available){var t=this._available[e],i=this.getEmbroideryTypeMap(this._par.embroideryTypePrices,this._par.showExtraPrice)[t];tag("label",{text:i,className:"regular pf-d-block"},[tag("input",{type:"radio",className:"margin-right-10",value:e,checked:t==this._current,onclick:this._onEmbroideryTypePicked.bind(this,t)})]).append(this._buttons)}else tag("div","",this.getEmbroideryTypeMap(this._par.embroideryTypePrices,this._par.showExtraPrice)[this._current]).append(this._buttons)},_onEmbroideryTypePicked:function(e){this._current=e,this._render(),this._par.onEmbroideryTypeChangedCallback&&this._par.onEmbroideryTypeChangedCallback(e)},isValuePicked:function(){return!!this._current},getValueCount:function(){return this._available.length},_getTooltipNode:function(){if(!this._par.labelTooltipText)return tag();var e=tag("span",{className:"icon-info pf-text-gray option-label-sign",attr:{title:this._par.labelTooltipText}});return $(e).tooltip({html:!0,delay:{hide:450},container:"body"}),e},getValue:function(){return this._current},setValue:function(e){this._current=e||"",this._render()},getEmbroideryTypeMap:function(e){var t={};if(e){var i=e&&e.prices?e.prices:{},r=e&&e.currency?e.currency:"";t[n.a.DIGITIZATION_FLAT]=dlang("generator","Flat Embroidery"),t[n.a.DIGITIZATION_3D]=dlang("generator","3D Puff {price}").replace("{price}",this._par.showExtraPrice?"(+"+prettyMoney(i[n.a.DIGITIZATION_3D],r)+")":""),t[n.a.DIGITIZATION_BOTH]=dlang("generator","Partial 3D Puff {price}").replace("{price}",this._par.showExtraPrice?"(+"+prettyMoney(i[n.a.DIGITIZATION_BOTH],r)+")":"")}else t[n.a.DIGITIZATION_FLAT]=dlang("generator","Flat Embroidery"),t[n.a.DIGITIZATION_3D]=dlang("generator","3D Puff {price}").replace("{price}",""),t[n.a.DIGITIZATION_BOTH]=dlang("generator","Partial 3D Puff {price}").replace("{price}","");return t}},a.a);o.getDefaultEmbroideryType=function(){return n.a.DIGITIZATION_FLAT},window&&((globalThis||{}).PFProductPushEmbroideryTypePicker=o)},vUhP:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("C00j"),r=i("97Rx"),a=i("cvaF"),o=i("97Au"),s=i("Sucz"),l=Class({_modal:null,_languageContext:"user settings menu",_currency:"",__construct:function(e){this._currency=e;var t=this._getTaxOptionNode();if(null!==t){var i=tag("form","row",[tag("div","form-group col-md-12 pf-mb-0",[tag("div","taxes",[t])])]),r=new o.a.Par;r.title=n.a.getTaxName(this._currency)+" "+clang("user settings menu","settings"),r.onClose=this._onModalClose.bind(this),this._modal=new o.a(r),this._modal.setContent(i),this._modal.setFooterContent(this._getFooterContent()),this._modal.show()}},_getTaxOptionNode:function(){if(!n.a.isTaxAvailable(this._currency))return null;var e={className:"pf-mr-12",type:"radio",value:"1",name:"showPricesWithTax"},t=Object.assign({},e);return t.value="0",n.a.isTaxIncluded(this._currency)?e.checked="checked":t.checked="checked",tag("div",null,[tag("input",{type:"hidden",name:"taxCurrency",value:this._currency}),tag("p","pf-mb-16",lang("Please choose how you want to see prices")),tag("label",null,[tag("input",t),clang("tax","Excluding {taxName}").replace("{taxName}",n.a.getTaxName(this._currency))]),tag("label",null,[tag("input",e),clang("tax","Including {taxName}*").replace("{taxName}",n.a.getTaxName(this._currency))]),tag("div","pf-mt-12",[tag("p",{className:"pf-ui-caption text-muted pf-my-0"},[clang("tax","*Note that {taxName} rates may vary. The final price will be calculated at checkout.").replace("{taxName}",n.a.getTaxName(this._currency))])])])},_onModalClose:function(){this._modal.remove()},_getFooterContent:function(){return tag("div","pf-d-flex pf-justify-content-start",[tag("button",{className:"pf-btn pf-btn-primary pf-mr-8",type:"button",prop:{onclick:this._onApplySettings.bind(this)}},lang("Apply")),tag("button",{className:"pf-btn pf-btn-secondary",type:"button",prop:{onclick:this._onModalClose.bind(this)}},lang("Cancel"))])},_onApplySettings:function(){var e=new FormData(this._modal.getContentNode().querySelector("form"));Object(s.a)("user-settings/update-settings",e,function(e){1===e.success?(n.a.toggleTaxInclusion(e.currency,Boolean(e.includeTax)),this._onModalClose(),location.reload()):alert(e.error)}.bind(this),{processData:!1,contentType:!1})}});window&&((globalThis||{}).PFComponentsPriceTaxInclusionModal=l);var c=i("qs6/"),d=i("nF4n"),u={createPeriodicPriceDiscountAnnouncement:function(e,t,i){var n=e.minPriceDiscount&&e.minPriceDiscount.discountType,r=n&&c.a.DISCOUNT_PERIODIC_TYPES.includes(n);if(e.minPriceDiscount&&r&&1e3*e.minPriceDiscount.discountExpiryDate>=Date.now()){var a="";return t&&e.minPriceDiscount.discountExpiryDate&&(a=tag("span","pf-ml-8 pf-text-muted pf-ui-caption",lang("Valid until")+" "+prettyDate(e.minPriceDiscount.discountExpiryDate))),tag("div",i,[tag("span",{className:"pf-badge pf-badge--primary pf-badge-rect",style:{position:"unset"}},c.a.getDiscountName(n).toUpperCase()),a])}return""},createDiscountElementFromPriceRange:function(e,t,i){var r="";e.minPriceDiscount&&(r=c.a.getDiscountAppliedText(e.minPriceDiscount.discountType));var a=u.createDiscountElement({originalPrice:e.minOriginalPrice,currentPrice:e.minPrice,tooltipText:r,currency:e.currency,adjustmentForBasePrice:t,showTaxInclusion:i}),o=i&&n.a.isTaxAvailable(e.currency)?tag("br"):"";return a&&e.maxPrice>e.minPrice&&tag("span","",[dlang("products","Starting from")+" ",o]).prepend(a),a},createDiscountElementFromPriceDataArray:function(e){var t=e.priceData,i=e.basePriceAdjustment,n=void 0===i?0:i,r=e.showTaxInclusion,a=void 0!==r&&r,o=e.splitLines,s=void 0!==o&&o,l=e.allowTaxInclusion,d=void 0!==l&&l,h=e.flipLines,p=void 0!==h&&h;if(!t.length)return tag("span");var g,f,_,m,v=null;t.forEach((function(e){g=!g||e.originalPrice<g.originalPrice?e:g,f=!f||e.originalPrice>f.originalPrice?e:f,_=!_||e.discountedPrice<_.discountedPrice?e:_,m=!m||e.discountedPrice>m.discountedPrice?e:m,v=null===v||null===e.discountType||e.discountType===v?v||e.discountType:c.a.DISCOUNT_TYPE_MULTIPLE}));var y=c.a.getDiscountAppliedText(v);return u.createDiscountElement({originalPrice:g.originalPrice,currentPrice:_.discountedPrice,maxOriginalPrice:f.originalPrice,maxCurrentPrice:m.discountedPrice,tooltipText:y,currency:g.currency,adjustmentForBasePrice:n,showTaxInclusion:a,splitLines:s,flipLines:p,allowTaxInclusion:d})},createDiscountElementFromPriceData:function(e){var t=e.priceData,i=e.basePriceAdjustment,n=void 0===i?0:i,r=e.showTaxInclusion,a=void 0!==r&&r,o=e.splitLines,s=void 0!==o&&o,l=e.allowTaxInclusion,d=void 0!==l&&l,h=e.flipLines,p=void 0!==h&&h,g=e.tooltipPlacement,f=void 0===g?"top":g,_=t.discountedPrice;t.basePriceDiscount>0&&(_=t.price);var m=c.a.getDiscountAppliedText(t.getDisplayDiscountType());return u.createDiscountElement({originalPrice:t.originalPrice,currentPrice:_,tooltipText:m,currency:t.currency,adjustmentForBasePrice:n,showTaxInclusion:a,splitLines:s,flipLines:p,allowTaxInclusion:d,tooltipPlacement:f})},getDiscountTextFromAppliedDiscountTypes:function(e){var t="";return e.forEach((function(e){""!=t&&(t+=" "+lang("and")+" "),t+=c.a.getDiscountTypeText(e)})),""!=t&&(t+=" "+clang("(discount) applied","applied")),t},createDiscountElementFromPrices:function(e,t,i){return this.createDiscountElement({originalPrice:e,currentPrice:t,currency:i})},createDiscountElement:function(e){var t,i,o=e.originalPrice,s=e.currentPrice,c=e.maxOriginalPrice,u=e.maxCurrentPrice,h=e.tooltipText,p=void 0===h?"":h,g=e.currency,f=e.adjustmentForBasePrice,_=void 0===f?0:f,m=e.showTaxInclusion,v=void 0!==m&&m,y=e.splitLines,b=void 0!==y&&y,P=e.flipLines,C=void 0!==P&&P,T=e.allowTaxInclusion,I=void 0!==T&&T,w=e.tooltipPlacement,S=void 0===w?"top":w;if(!s&&!o)return tag("span");c=c===o?null:c,u=u===s?null:u,_&&(o+=_,s+=_,c=c?c+_:null,u=u?u+_:null);var E=a.a.getCurrency(g);if(E?(o=parseFloat(r.a.getDisplayValue(o,E)),s=parseFloat(r.a.getDisplayValue(s,E)),c=c?parseFloat(r.a.getDisplayValue(c,E)):null,u=u?parseFloat(r.a.getDisplayValue(u,E)):null):(o=parseFloat(o.toFixed(2)),s=parseFloat(s.toFixed(2)),c=c?parseFloat(c.toFixed(2)):null,u=u?parseFloat(u.toFixed(2)):null),c=c===u?null:c,I=(v=v||!1)||I||!1,o=o===s?null:o){var k=prettyMoney(I?n.a.addTax(g,o):o,g);c&&c!==o&&(k+=" - "+prettyMoney(I?n.a.addTax(g,c):c,g)),t={tag:"span",className:"original-price",text:k,style:{textDecoration:"line-through"},attr:{"aria-hidden":"true"}}}if(void 0!==s){var O=prettyMoney(I?n.a.addTax(g,s):s,g);u&&u!==s&&(O+=" - "+prettyMoney(I?n.a.addTax(g,u):u,g)),i={tag:"span",className:"current-price",text:" "+O},""!=p&&(i.attr={"data-toggle":"tooltip","data-original-title":"<span>"+p+"</span>","data-placement":S,"data-trigger":"hover"})}t&&(i.className=i.className+" discounted");var A=t?Object(d.a)(t):null,L=i?Object(d.a)(i):null;b=b||!1;var N,D="";if(v&&n.a.isTaxAvailable(g)){var R="";R=n.a.isTaxIncluded(g)?clang("Tax inclusion in price","incl. {taxName}").replace("{taxName}",n.a.getTaxName(g)):clang("Tax inclusion in price","excl. {taxName}").replace("{taxName}",n.a.getTaxName(g)),(D=tag(b?"div":"span",{className:"pf-link pf-ml-4 pf-ui-caption clickable",attr:{role:"link",tabindex:0}},[R])).addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault(),new l(g)}))}return N=C?tag("span","discount-container pf-bold",[L||"",A||"",D]):tag("span","discount-container pf-bold",[A||"",L||"",D]),void 0!==s&&""!=p&&$(L).tooltip({html:!0}),N}};(globalThis||{}).PFUtilsDiscount=u},vYHe:function(e,t,i){"use strict";i.d(t,"d",(function(){return p})),i.d(t,"a",(function(){return f})),i.d(t,"c",(function(){return g})),i.d(t,"b",(function(){return _}));var n=i("LvDl"),r=i.n(n);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=c(e);if(t){var r=c(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return l(this,i)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return t&&d(e.prototype,t),i&&d(e,i),e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,e),this.manifests=t.manifests?r.a.mapValues(t.manifests,(function(e){return new g(e)})):{},this.marketplaces=t.marketplaces?r.a.mapValues(t.marketplaces,(function(e){return new _(e)})):{}},g=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,e),this.marketplaceIdentity=t.marketplaceIdentity,this.integrationType=t.integrationType,this.displayName=t.displayName,this.disabled=t.disabled||!1,this.displayGroup=t.displayGroup,this.logoCssClass=t.logoCssClass,this.authorizationUrl=t.authorizationUrl},f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,e),this.storeId=t.storeId,this.marketplaceIdentity=t.marketplaceIdentity,this.priority=Number.parseInt(t.priority||1),this.status=t.status,this.displayStatus=t.displayStatus,this.message=t.message,this.settings=t.settings,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.isPendingChanges=t.isPendingChanges||!1}return u(e,[{key:"countsAsEnabled",get:function(){return[e.STATUS_ACTIVE,e.STATUS_ERROR].includes(this.status||e.STATUS_INACTIVE)}}],[{key:"STATUS_ACTIVE",get:function(){return"active"}},{key:"STATUS_INACTIVE",get:function(){return"inactive"}},{key:"STATUS_ERROR",get:function(){return"error"}}]),e}(),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(i,e);var t=s(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(this,i),(e=t.call(this,n)).isSaved=n.isSaved||!1,e.isEnabled=n.isEnabled||e.isSaved&&e.countsAsEnabled||!1,e}return u(i,[{key:"exportForStoreSettingsPOST",value:function(){return{marketplaceIdentity:this.marketplaceIdentity,priority:this.priority,isEnabled:this.isEnabled}}}]),i}(f)},vfQf:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("bUho"),r=i("nF4n"),a=Class({__construct:function(e,t,i,a,o){this._onDestroyCallback=o;var s={placement:"left",trigger:"manual",content:"EMPTY",template:Object(r.a)({tag:"div",className:"popover popover--extended",els:[{tag:"div",className:"popover__inner",els:[{tag:"div",className:"popover__title",els:[t]},{tag:"div",className:"popover__content",els:[i]},{tag:"a",className:"pf-btn pf-btn-primary margin-top-20",text:lang("Got it"),onclick:this._destroy.bind(this)}]},{tag:"div",className:"popover__overlay",onclick:this._destroy.bind(this)}]})};if(a)for(var l in a)s[l]=a[l];this._popover=new n.a(e,t,i,s)},show:function(){return this._popover.show()},_destroy:function(e){e&&e.stopPropagation(),this._popover.destroy(),this._onDestroyCallback&&this._onDestroyCallback()}});window&&((globalThis||{}).PFComponentsPopoverExtended=a)},wRc6:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("SvWC"),r=Class({id:null,shortName:null,name:null,returnAddressId:null,allowedIpList:[],isProductionBranch:!0,isAttendanceEnabled:!0,timezone:null,region:null,address:null,warehousingProductTypes:[],getRegion:function(){return 4===this.id||8===this.id?dlang("dashboard","Europe"):lang("United States")}});r.fromArray=function(e){var t=new r;return t.id=e.id,t.shortName=e.short_name,t.name=e.name,t.returnAddressId=e.return_address_id,t.isProductionBranch=1===e.is_production_branch,t.isAttendanceEnabled=1===e.is_attendance_branch,t.timezone=e.timezone,t.region=e.region,t.warehousingProductTypes=e.warehousingProductTypes,e.allowed_ip_list&&(t.allowedIpList=JSON.parse(e.allowed_ip_list)),e.address&&(t.address=n.a.fromArray(e.address)),t},window&&((globalThis||{}).PFItemsBranch=r)},wllI:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({embroideryTypesAvailable:null,embroideryType:null,onEmbroideryTypeChangedCallback:null,labelTooltipText:"",renderRadioInput:null,embroideryTypePrices:null,showExtraPrice:null,nodeFooter:null});window&&((globalThis||{}).PFProductPushEmbroideryTypePickerPar=n)},x0He:function(e,t,i){"use strict";i.d(t,"a",(function(){return D})),i.d(t,"b",(function(){return U}));var n=i("oCYn"),r=i("LvDl"),a=i.n(r),o=i("SBaP"),s=i("bA+e"),l=i("nF4n");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=m(e);if(t){var r=m(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function y(e,t){var i=t.get(e);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(e):i.value}function b(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function P(e,t,i){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,i);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=i}return i}function C(e,t,i,n){if(e!==t)throw new TypeError("Private static access of wrong provenance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}function T(e,t,i){if(e!==t)throw new TypeError("Private static access of wrong provenance");return i.get?i.get.call(e):i.value}var I=new WeakMap,w=new WeakMap,S=new WeakMap,E=new WeakMap,k=new WeakMap,O=new WeakSet,A=new WeakSet,L=new WeakMap,N=new WeakSet,D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,e);var t,i,n,r=g(o);function o(e){var t;return u(this,o),t=r.call(this),N.add(_(t)),L.set(_(t),{get:V,set:void 0}),A.add(_(t)),O.add(_(t)),I.set(_(t),{writable:!0,value:void 0}),w.set(_(t),{writable:!0,value:void 0}),S.set(_(t),{writable:!0,value:void 0}),E.set(_(t),{writable:!0,value:void 0}),k.set(_(t),{writable:!0,value:void 0}),P(_(t),w,e||{}),b(_(t),O,M).call(_(t)),P(_(t),E,o.getNewUniqueID()),t.node=tag(y(_(t),w).wrapTag||"div",{className:"mke-vue-wrapper",id:y(_(t),E)}),function(e,t,i){if(e!==t)throw new TypeError("Private static access of wrong provenance");return i}(o,o,R).call(o),P(_(t),S,b(_(t),A,B).call(_(t))),b(_(t),N,j).call(_(t)),t}return t=o,n=[{key:"getNewUniqueID",value:function(){var e;return"MkeVueWrapper"+(C(o,o,F,1+(e=+T(o,o,F))),e)}}],(i=[{key:"updateData",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=y(this,S);if(!n)throw new Error("Attempting to call updateData on a destroyed instance! ".concat(y(this,E)));a.a.forIn(y(this,k),(function(r,a){!e.hasOwnProperty(a)&&i&&n.$delete(y(t,k),a),e.hasOwnProperty(a)&&n.$set(y(t,k),a,e[a])}))}},{key:"setDataProp",value:function(e,t){var i=y(this,S);if(!i)throw new Error("Attempting to call setDataProp on a destroyed instance! ".concat(y(this,E)));i.$set(y(this,k),e,t)}},{key:"getRef",value:function(e){var t,i;if(!y(this,S))throw new Error("Attempting to access a destroyed Vue instance! ".concat(y(this,E)));return null!==(t=y(this,S))&&void 0!==t&&null!==(i=t.$refs)&&void 0!==i&&i.hasOwnProperty(e)?y(this,S).$refs[e]:void 0}},{key:"destroy",value:function(){var e=y(this,S);e&&(e.$destroy(),P(this,S,null),delete o.activeComponentMap[y(this,E)],l.a.clearNode(this.node))}}])&&h(t.prototype,i),n&&h(t,n),o}(o.a),R=function(){T(D,D,x)||(Object(s.b)(n.default,s.a.DYNAMIC_INSTANCE),C(D,D,x,!0))},x={writable:!0,value:void 0},F={writable:!0,value:0};v(D,"activeComponentMap",{});var M=function(){a.a.forIn(y(this,w).components||{},(function(e){if(!(e instanceof Function))throw new Error("MkeVueWrapper components must be defined like so: {'component': () => import('./xyz')}")})),a.a.forIn(y(this,w).plugins||{},(function(e,t){if(!e)throw new Error("MkeVueWrapper plugin '".concat(t,"' is null/undefined!"))}))},B=function(){var e=this;P(this,k,y(this,w).initialData?a.a.clone(y(this,w).initialData):{});var t=y(this,w).emitEvent,i=new n.default(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){v(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({template:y(this,w).template||"<div>Empty MkeVueWrapper instance! Please contact support!</div>",components:a.a.clone(y(this,w).components||{}),data:function(){return y(e,k)},methods:{emitEvent:function(e,i){t&&t(e,i)}},created:function(){y(e,w).onCreated&&y(e,w).onCreated()},mounted:function(){y(e,w).onMounted&&y(e,w).onMounted()}},y(this,L)));return D.activeComponentMap[y(this,E)]=i,i},V=function(){return a.a.omit(y(this,w).plugins||{},["template","components","data","methods","created","mounted","watch","computed","props","el","render","renderError","beforeCreate","beforeDestroy","destroyed","beforeMount","mounted","beforeUpdate","updated","activated","deactivated","errorCaptured","propsData"])},j=function(){l.a.clearNode(this.node);var e=tag("div","mke-vue-wrapper__inner");e.append(this.node),y(this,S).$mount(e)},U=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),this.components=t.components||{},this.plugins=t.plugins||{},this.template=t.template||"",this.initialData=t.initialData||{},this.emitEvent=t.emitEvent,this.onCreated=t.onCreated,this.onMounted=t.onMounted,this.wrapTag=t.wrapTag||"div"}},xB0w:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("97Au"),r=Class({__construct:function(e){this._errorText=e,this._showUploaderValidationWarning()},_showUploaderValidationWarning:function(){var e=new n.a.Par;e.modalDialogClass="generator-mockup__uploader-validation-warning modal-md",this._modal=new n.a(e),this._modal.setHeaderContent("");var t=tag("div","warning-text",[tag("h4",{text:dlang("generator","Warning")}),tag("p",{innerHTML:this._errorText.replace(/\n/g,"<br />")})]);this._modal.setContent(t);var i=tag("div","pf-text-left",[tag("a",{className:"pf-btn pf-btn-primary",text:lang("Try again"),onclick:function(){this._modal.remove()}.bind(this)})]);this._modal.setFooterContent(i),this._modal.show()}});window&&((globalThis||{}).PFComponentsUploaderValidationPopup=r);var a=Class({targetNode:null,uploaderPar:null,isPushGenerator:!1,validateAddingLayer:null,getMaxFileLayerCount:null,elementDropNode:null,onDone:function(e,t){console.error("File processed",e,t)},onFail:function(e){console.error("Failed",e),new r(e)},getUploadExtra:function(){return{}},onDragEnter:function(){console.log("Drag entered node")},onDragLeave:function(){console.log("Drag left node")},onDrop:function(e){console.log("Number of items dropped",e),$(".product-push__droparea").hide()},onDropElement:function(){console.log("Dropped element on node")}});window&&((globalThis||{}).PFComponentsDropZonePar=a)},xRbm:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return r}));var n=Object.freeze({STORAGE_KEY:"generatorClipartItems",CACHE_VERSION:5,MAX_RECENT_CACHE:24,MAX_RECENT_SHOW:6}),r=Object.freeze({HAS_LOADED_ALL:"HAS_LOADED_ALL"})},xTp9:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return r}));var n=Object.freeze({STORAGE_KEY:"generatorColorGraphicItems",CACHE_VERSION:1}),r=Object.freeze({HAS_LOADED_ALL:"HAS_LOADED_ALL"})},xXdn:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({onProductChoose:null,onCategoryChoose:null,isOrderFlow:!1,isAnonymousOrderFlow:!1,isMockupGenerator:!1,isPush:!1,isClean:!1,title:"",urlPrefix:"/products-catalog",activeCategoryId:null,currency:"",store:null,isEmbedded:!1,isProductTemplate:!1,banners:null,bannersPerPage:null,enableCategoriesSidebar:!1,headingNode:null,breadcrumbsNode:null,isFeaturedReviews:!1,sellingRegion:null,shouldSkipHistory:function(){return this.isOrderFlow&&!this.isAnonymousOrderFlow||this.isClean||this.isProductTemplate}});window&&((globalThis||{}).PFProductsCatalogInitializerPar=n)},xb4v:function(e,t,i){"use strict";i.d(t,"a",(function(){return D}));var n=Class({storeId:null,search:"",onPickCallback:null,onCheckedCallback:null,perPage:null,onlySampleFiles:!1,includeSwatches:!1,productId:null,syncProductId:null,withInstructions:!0,isModal:!1});(globalThis||{}).PFFileLibraryFileListPar=n;var r=i("c2KS"),a=Class({fileItem:null,onPicked:null,onChecked:null,onPreview:null,isModal:!1});(globalThis||{}).PFFileLibraryFileListItemPar=a;var o=i("N62G"),s=i("edgZ"),l=i("Q1Td"),c=i("fQ40"),d=i("L5Qw"),u=i("y70k"),h=i("cCrT"),p=i("XLZy"),g=i("nF4n"),f=i("96ed"),_=Class({_listItems:[],_checkedFileIds:[],_hasStorePusherEvent:!1,_processingFileItems:[],_hasFilePusherEvents:[],__construct:function(e){this._par=e,this._repository=new s.a,this.node=Object(g.a)({tag:"div",className:"",els:[this._nodeUpperPaging=Object(g.a)({tag:"div"}),this._nodeItems=Object(g.a)({tag:"div",className:"row list"}),this._nodeDownPaging=Object(g.a)({tag:"div"})]}),this._load(1)},_load:function(e){(this._page!=e||this._par.syncProductId)&&p.a.show(this._nodeItems,{minHeight:226}),this._page=e,this._par.onlySampleFiles?this._repository.getSampleFiles(this._gatherSearchParameters(),this._loadRe):this._par.syncProductId?(new l.a).getTaskMockupFiles(this._par.syncProductId,this._loadRe):this._repository.getFiles(this._gatherSearchParameters(),this._loadRe)},_gatherSearchParameters:function(){var e=new s.a.SearchPar;return e.storeId=this._par.storeId,e.search=this._par.search,e.includeSwatches=this._par.includeSwatches,e.onlySampleFiles=this._par.onlySampleFiles,e.page=this._page,e.perPage=this._par.perPage,this._par.productId&&(e.productId=this._par.productId),this._par.technique&&(e.technique=this._par.technique),e},reloadPage:function(e){this._load(e?1:this._page)},_loadRe:function(e){p.a.hide(this._nodeItems),this._renderList(e),this._renderPaging(e,this._nodeUpperPaging),this._renderPaging(e,this._nodeDownPaging),this._isProcessing(e)?(this._setLibraryReloadEvents(),this._reloadProcessingFallback(1e4)):this._unbindInactiveEvents()},_isProcessing:function(e){var t=!1;for(var i in e.items){var n=e.items[i];n.isProcessing()&&(this._processingFileItems[n.fileId]=n,t=!0)}return t},_unbindInactiveEvents:function(){this._hasStorePusherEvent&&(f.a.unbindStore(this._par.storeId,f.a.CHANNEL_LIBRARY,f.a.EVENT_COMPLETED,this._onFileItemCompleted),this._hasStorePusherEvent=!1),this._hasFilePusherEvents=[],this._processingFileItems=[]},_setLibraryReloadEvents:function(){if(PF.Customer.customerId&&!this._hasStorePusherEvent)f.a.subscribeStore(this._par.storeId,f.a.CHANNEL_LIBRARY,f.a.EVENT_COMPLETED,this._onFileItemCompleted),this._hasStorePusherEvent=!0;else for(var e in this._processingFileItems){var t=this._processingFileItems[e].fileId;this._hasFilePusherEvents[t]||(f.a.subscribeAnonymousUpload(t,f.a.EVENT_COMPLETED,this._onFileItemCompleted),this._hasFilePusherEvents[t]=!0)}},_reloadProcessingFallback:function(e){this._reloadTimeoutId&&clearTimeout(this._reloadTimeoutId),this._reloadTimeoutId=setTimeout(this._reloadProcessingFallbackRe.bind(this,this._page),e)},_reloadProcessingFallbackRe:function(e){if(this._page==e)for(var t in this._listItems)if(this._listItems[t].getFileItem().isProcessing())return void this.reloadPage()},_onFileItemCompleted:function(e){var t=u.a.fromArray(e);for(var i in this._repository.cacheFile(t),this._listItems){var n=this._listItems[i];if(n.getFileItem().fileId===t.fileId)return void n.setFileItem(t)}},_renderList:function(e){if(g.a.clearNode(this._nodeItems),e.total<=0){var t=[];if(this._par.search)t.push(tag("div","col-xs-12",[tag("span",{innerHTML:dlang("library",'No print files found for "<b>{searchText}</b>"').replace("{searchText}",this._par.search)}),tag("a",{className:"btn-block clearfix text-center margin-top-5 pf-link",onclick:this._searchInAllFiles,text:dlang("library","Remove all filters and search again")})]));else{var i=tag("div","col-xs-12",[tag("div","pf-mb-96 pf-d-none pf-d-sm-block",[tag("img",{src:"/static/images/custom-products/file-library.svg",prop:{style:"width: 30%"}})]),tag("div","pf-mb-48 pf-d-block pf-d-sm-none",[tag("img",{src:"/static/images/custom-products/file-library.svg",prop:{style:"width: 50%"}})]),tag("p","pf-m-0",[PF.Customer.isAnonymous()?dlang("library","No print files have been added yet."):dclang("library","No print files have been added yet for this store","No print files yet for this store.")," "+dlang("library",'Why not press the "Upload" or drag and drop files here to upload your first one?')])]);t.push(i)}var n="",r=!1;if((new h.a).path.indexOf("b2c")>-1&&(r=!0),!r&&!PF.Customer.customerId){var s=new h.a;(s=s.path+"?"+s.query.toString()).indexOf("b2c")>-1&&(s=langUrl("/dashboard/default/index"));var l=langUrl("/auth/login")+"?returnUrl="+s,c=langUrl("/auth/register")+"?returnUrl="+s,d=dlang("library",'<a href="{link1}" class="pf-link">Sign in</a> to access your file library. If you don\'t have an account yet, <a href="{link2}"  class="pf-link">sign up</a> here.').replace("{link1}",l).replace("{link2}",c);n=tag("div",{className:"col-xs-12 margin-top-10",innerHTML:d})}Object(g.a)({tag:"div",className:"margin-vertical-30 text-center",els:[t,n]}).append(this._nodeItems)}else{this._listItems=[];var u=[];for(var p in e.items){var f=e.items[p],_=new a;_.fileItem=f,_.onPicked=this._par.onPickCallback,_.onPreview=this._showPreviewPopup.bind(this,f),_.isModal=this._par.isModal,this._par.onCheckedCallback&&(_.onChecked=this._onCheckedStateChanged.bind(this));var m=new o.a(_);1===e.total&&this._par.withInstructions&&m.showInstruction(),this._checkedFileIds.indexOf(f.fileId)>-1&&m.setChecked(!0),this._listItems.push(m),m.append(this._nodeItems),u.push(m.getDetailNode())}$(u).matchHeight(),Object(g.a)({tag:"div",className:"clearfix"}).append(this._nodeItems)}},_showPreviewPopup:function(e){new r.a(this._gatherSearchParameters(),e,this._par.onPickCallback?this._par.onPickCallback.bind(null):null)},_renderPaging:function(e,t){g.a.clearNode(t);var i=new c.a;i.page=e.page,i.pages=e.pages,i.callback=this._load,new d.a(i).append(t)},_searchInAllFiles:function(){this._par.search="",this._load(1),ga("send",{hitType:"event",eventCategory:"FileLibrary",eventAction:"Remove filters and search again"})},getCheckedFileItems:function(){var e=[];for(var t in this._checkedFileIds)e.push(this._repository.getCachedFile(this._checkedFileIds[t]));return e},unCheckAllFileItems:function(){this._checkedFileIds=[],this.reloadPage()},_onCheckedStateChanged:function(e,t){if(t)this._checkedFileIds.push(e.fileId);else{var i=this._checkedFileIds.indexOf(e.fileId);this._checkedFileIds.splice(i,1)}this._par.onCheckedCallback&&this._par.onCheckedCallback()},removeFileItemFromList:function(e){for(var t in this._listItems)if(this._listItems[t].getFileItem().fileId==e.fileId)return void this._listItems[t].remove()},load:function(e){this._load(e)}},g.a.Base);(globalThis||{}).PFFileLibraryFileList=_;var m=function(e,t){for(var i in this.onFilesMovedCallback=t,this._moveButtonTitle=dlang("library","Please select at least one file"),this.node=Object(g.a)({tag:"div",className:"alert alert-warning",els:[{tag:"div",className:"row",els:[{tag:"div",className:"col-md-6 margin-top-10",text:dlang("library","Selected store is removed. You can move files to another store:")},{tag:"div",className:"col-md-4",els:[{tag:"span",className:"styled-select",style:{paddingRight:"45px"},els:[this.storeSelect=Object(g.a)({tag:"select"})]}]},{tag:"div",className:"col-md-2",els:[this.nodeButton=Object(g.a)({tag:"a",className:"pf-btn pf-btn-secondary btn-sm btn-block",text:lang("Move"),onclick:$.proxy(this.moveFiles,this),attr:{"data-toggle":"tooltip","data-placement":"top","data-container":"body","data-trigger":"hover","data-original-title":this._moveButtonTitle}})]}]}]}),$("button",this.node).tooltip(),e){var n=e[i];"active"==n.status&&Object(g.a)({tag:"option",value:n.storeId,text:n.name,attr:{"data-status":n.status}}).append(this.storeSelect)}};(m.prototype=new g.a.Base).moveFiles=function(){if(this.fileItems&&this.fileItems.length){if(confirm(dlang("library","Really move selected files?"))){var e=[],t=this.storeSelect.value;for(var i in this.fileItems)e.push(this.fileItems[i].fileId);(new s.a).moveFiles(e,t,$.proxy(this.moveFilesRe,this))}}else alert(this._moveButtonTitle)},m.prototype.moveFilesRe=function(){this.onFilesMovedCallback&&this.onFilesMovedCallback()},m.prototype.setFiles=function(e){this.fileItems=e,$(this.nodeButton).text(lang("Move"));var t=this.fileItems.length;t?(this.nodeButton.disabled=!1,$(this.nodeButton).text(dnlang("library","Move {count} file","Move {count} files",t).replace("{count}",t)),$(this.nodeButton).tooltip("destroy")):$(this.nodeButton).tooltip()},m.prototype.fileItems=null,m.prototype.onFilesMovedCallback=null,(globalThis||{}).PFFileLibraryFileMover=m;var v=i("l19W"),y=i("LUI9"),b=i("Te2b"),P=i("eYhR"),C=i("nwx2"),T=Class({_libraryTabs:new C.a("primary"),_libraryTabContents:{},_hideSampleTab:!1,__construct:function(e,t){t&&(this._hideSampleTab=!0),this._initLibraryTabContents(),this._initLibraryTabs(),this.node=tag("div",e?"margin-bottom-20":""),e&&this._libraryTabs.append(this.node)},_initLibraryTabs:function(){var e;(e=new P.a).caption=dlang("library","My files"),e.customId=T.TAB_MY_FILES,e.onclick=this.setActiveLibraryTab.bind(this,T.TAB_MY_FILES),this._libraryTabs.add(e),this._hideSampleTab||((e=new P.a).caption=tag("span","",dlang("dashboard","Sample files")),e.customId=T.TAB_SAMPLE_FILES,e.onclick=this.setActiveLibraryTab.bind(this,T.TAB_SAMPLE_FILES),this._libraryTabs.add(e))},_initLibraryTabContents:function(){this._libraryTabContents[T.TAB_MY_FILES]=Object(g.a)({tag:"div"}),this._hideSampleTab||(this._libraryTabContents[T.TAB_SAMPLE_FILES]=Object(g.a)({tag:"div"}))},renderLibraryTabContents:function(e){for(var t in this._libraryTabContents)this._libraryTabContents[t].append(e)},buildTabContent:function(e,t){for(var i in t)t[i].append(this._libraryTabContents[e])},setActiveLibraryTab:function(e){for(var t in this._libraryTabContents)t===e?(g.a.removeClassName(this._libraryTabContents[t],"hidden"),$(this._libraryTabContents[t]).find(".details").matchHeight()):g.a.addClassName(this._libraryTabContents[t],"hidden");this._libraryTabs.markTabAsSelectedById(e)}},g.a.Base);T.TAB_MY_FILES="myFiles",T.TAB_SAMPLE_FILES="sampleFiles",(globalThis||{}).PFFileLibraryTabs=T;var I=i("dJr+"),w=i("xeH2"),S=i.n(w),E=i("Gv5l"),k=i("/w+P"),O=i("iBt0"),A=i("9eNC"),L=i("97Au"),N=i("slIU"),D=function e(t){e.instanceCounter+=1,this.libraryRepository=new s.a,this.par=new I.a,g.a.O2O(this.par,t||{}),this._libraryTabs=new T(this.par.showTabSelector,this.par.hideSampleFiles),this.node=tag("div",{className:"file-library dropzone",data:{content:dlang("library","Drop files here")}}),this._render(),this._init()};D.instanceCounter=0,D.prototype=new g.a.Base,D.prototype._render=function(){g.a.clearNode(this.node);var e=this.par.showSearch?"":" filter--no-search",t=this.par.allowStoreChange?"":" filter--no-stores";this.nodeFilter=tag("div","filter"+e+t),this._renderFilterCells(),this.nodeFileMover=tag("div","file-mover hidden"),this.nodeMyFileList=tag("div"),this.nodeSampleFileList=tag("div"),this._libraryTabs.append(this.node);var i=[this.nodeFilter,this.nodeFileMover,this.nodeMyFileList],n=[this.nodeSampleFileList];if(!this.par.hideSampleFiles&&!localStorage.getItem("showSampleFiles-"+PF.Customer.customerId)){var r=new O.a([tag("div","pf-d-flex pf-flex-column pf-align-items-center pf-flex-md-row relative__block",[tag("img",{className:"img-responsive pf-mx-32 pf-mx-md-32 pf-mx-auto pf-mb-24 pf-mb-md-0",style:{maxHeight:"140px"},src:this.par.sampleBannerImage}),tag("div","text-center text-md-left pf-my-auto pf-mx-16 pf-mx-md-0",[tag("h5",{className:"pf-h3 pf-mb-8",style:{fontSize:"24px"},text:dlang("library","Use sample files made by our in-house designers!")}),tag("p",{className:"pf-text-muted pf-ui-body",innerHTML:dlang("library",'Our talented designers can help you with any design needs you have â€“ <a href="{url}" class="pf-link" target="_blank">get in touch with them</a>').replace("{url}",langUrl("/design-services"))})]),tag("i",{className:"cross__close",onclick:function(){return localStorage.setItem("showSampleFiles-"+PF.Customer.customerId,!0),r.prettyRemove(),ga("send","event","File Library","Sample file notification","Notification closed"),!1}})])],"grey pf-pl-16 pf-pl-md-0 pf-border");g.a.addClassName(r.node,"pf-my-32"),n.unshift(r.node)}this._libraryTabs.buildTabContent(T.TAB_MY_FILES,i),this.par.hideSampleFiles||this._libraryTabs.buildTabContent(T.TAB_SAMPLE_FILES,n),this._libraryTabs.renderLibraryTabContents(this.node),this._libraryTabs.setActiveLibraryTab(this.par.activeTab||T.TAB_MY_FILES)},D.prototype._init=function(){this._loadStoreAndFileList(),this.par.hideSampleFiles||this._loadSampleFileList(),this._initUploader(),this.par.withDropZone&&this._initDropZoneEvents()},D.prototype._renderFilterCells=function(){this.nodeUploadInput=Object(g.a)({tag:"input",type:"file",attr:{name:"file",multiple:"multiple"}}),this.nodeSearch=Object(g.a)({tag:"input",type:"text",value:this.par.search,style:{display:"block"},id:"library-search-"+D.instanceCounter,prop:{onkeyup:this.onSearchChange.bind(this),onchange:this.onSearchChange.bind(this)}});var e=[];this.par.allowStoreChange&&e.push({tag:"div",className:"filter-store-select",els:[this.nodeStoreSelect=Object(g.a)({tag:"select",className:"styled-select",prop:{onchange:this.onStoreSelectChange.bind(this)}})]}),this.par.showSearch&&e.push({tag:"div",className:"filter-search",els:[{tag:"div",style:{minHeight:"39px"},els:[this.nodeSearch]}]});var t="";for(var i in PF.EMBED_STORE||(t={tag:"td",style:{paddingLeft:"10px",width:"50px"},els:[new y.a(this.onGoogleDriveFilePicked.bind(this))]}),e.push({tag:"div",className:"filter-upload-methods",els:[{tag:"table",className:"table",els:[{tag:"tr",els:[{tag:"td",els:[{tag:"form",className:"form-inline hidden",attr:{method:"post",action:PF.Config.S3_UPLOAD_URL,enctype:"multipart/form-data"},els:[this.nodeUploadInput]},this.nodeUploadButton=Object(g.a)({tag:"a",className:this.par.uploadButtonClasses?this.par.uploadButtonClasses:"pf-btn pf-btn-primary pf-btn-block",text:lang("Upload"),onclick:this.onDefaultUploadClick.bind(this)})]},t,{tag:"td",style:{paddingLeft:"10px",width:"50px"},els:[new b.a(this.onDropBoxFilePicked.bind(this))]}]}]}]}),e.push({tag:"div",className:"clearfix"}),e)Object(g.a)(e[i]).append(this.nodeFilter)},D.prototype.append=function(e){return this.node.append(e),this.initTagsInput(),this},D.prototype.remove=function(){return this.uploader.destroy(),this.node.remove(),S()(document).off(this.getEventNamespace()),this},D.prototype.getEventNamespace=function(){return".file-library-"+D.instanceCounter},D.prototype.onDefaultUploadClick=function(e){if(!0===e){var t={event:"default-file-upload",eventCategory:"FileLibrary",eventAction:"Default file upload"};PF.DEV&&console.log("Track GTM Event "+JSON.stringify(t)),window.dataLayer=window.dataLayer||[],dataLayer.push(t),S()(this.nodeFilter).find("input[type=file]").click()}else v.a.showPopup(S.a.proxy(this.onDefaultUploadClick,this,!0,!1))},D.prototype.onGoogleDriveFilePicked=function(e){this.libraryRepository.createFromGoogleDrive(this.par.fileGroup,this.nodeSearch.value,this.par.storeId,null,e.googleFilename,e.googleFileId,e.oAuthToken,this.fileList.load.bind(this.fileList,1))},D.prototype.onDropBoxFilePicked=function(e,t){this.libraryRepository.createFromUrl(this.par.fileGroup,this.nodeSearch.value,this.par.storeId,null,t,e,S.a.proxy(this.fileList.load,this.fileList,1))},D.prototype._initUploader=function(){var e=new N.a.Par;e.node=this.nodeUploadInput,e.nodeDropZone=this.node,e.uploadUrl=this.par.uploadUrl,e.uploadDataUrl=this.par.uploadDataUrl,e.uploadCallbackUrl=this.par.uploadCallbackUrl,e.enableTransparencyValidation=!0,e.getUploadExtra=function(){return{storeId:this.par.storeId,group:this.par.fileGroup,tags:this.nodeSearch.value}}.bind(this),e.onDone=function(e){this.fileList&&this.fileList.reloadPage(!0),S()(this.nodeUploadButton).text(lang("Upload")),this.par.onDoneCallback&&this.par.onDoneCallback()}.bind(this),e.onProgress=function(e){S()(this.nodeUploadButton).text(e+"%")}.bind(this),e.onStart=function(){S()(this.nodeUploadButton).text(lang("Startingâ€¦")),this.par.showTabSelector&&this._libraryTabs.setActiveLibraryTab(T.TAB_MY_FILES)}.bind(this),e.onProcessFail=function(e,t){S()(this.nodeUploadButton).text(lang("Upload"));var i=new O.a(dlang("generator","Warning: {error}").replace("{error}",t),"danger",!1,!1,!0).append(this.nodeFilter);g.a.addClassName(i.node,"alert-relative"),setTimeout((function(){i.prettyRemove()}),1e4)}.bind(this),e.onFail=function(e){S()(this.nodeUploadButton).text(lang("Upload"))}.bind(this),this.uploader=new N.a(e)},D.prototype.initTagsInput=function(){0!=S()("#"+this.nodeSearch.id).length?S()(this.nodeSearch).tagsInput({width:"auto",height:"39px",defaultText:this.par.productType?"":dlang("library","Search files"),autocomplete:{minLength:0,appendTo:this.node},autocomplete_source:S.a.proxy((function(e,t){S.a.ajax({url:"/dashboard/library/autocomplete",dataType:"json",data:{term:e.term,store:this.par.storeId},success:function(e){t(e)}})}),this),onAddTag:S.a.proxy(this.onSearchChange,this),onRemoveTag:S.a.proxy(this.onSearchChange,this)}):setTimeout(S.a.proxy(this.initTagsInput,this),200)},D.prototype._loadStoreAndFileList=function(){this.par.allowStoreChange?(new E.a).getStoresWithPrintFiles(this.storesRe.bind(this)):this.loadFileList(this.par.storeId)},D.prototype.storesRe=function(e){if(e.length){var t,i,n,r=[],a=[];for(t in e){var o=e[t];o.isRemoved()?(n||(n=o),a.push(o)):(i||(i=o),r.push(o))}i=i||n,g.a.clearNode(this.nodeStoreSelect);var s=function(e){return{tag:"option",value:e.storeId,text:e.name}};if(r.length){var l=Object(g.a)({tag:"optgroup",attr:{label:dlang("library","Active stores")}});for(t in r)Object(g.a)(s(r[t])).append(a.length?l:this.nodeStoreSelect);a.length&&l.append(this.nodeStoreSelect)}if(a.length){var c=Object(g.a)({tag:"optgroup",attr:{label:dlang("library","Removed stores")}}).append(this.nodeStoreSelect);for(t in a)Object(g.a)(s(a[t])).append(c)}this.par.storeId||(this.par.storeId=i.storeId),this.nodeStoreSelect.value=this.par.storeId,this.loadFileList(),this.loadFileMover(e)}else this._requireStoreForLibrary()},D.prototype._requireStoreForLibrary=function(){var e=new k.b;e.callback=S.a.proxy(this._onStoreCreatedForLibrary,this),setTimeout((function(){k.a.popup(e,dlang("library","Create a store for storing files"))}),100)},D.prototype._onStoreCreatedForLibrary=function(){this._loadStoreAndFileList()},D.prototype.loadFileList=function(){if(A.m(s.a.EVENT_FILE_DELETED,this._fileDeleted),A.n(s.a.EVENT_FILE_DELETED,this._fileDeleted,this),g.a.clearNode(this.nodeMyFileList),this.par.loadFileList){var e=new n;e.storeId=this.par.storeId,e.search=this.par.search,e.onPickCallback=this.par.onPickCallback,e.withInstructions=this.par.withInstructions,e.isModal=this.par.isModal,(this.par.onPickMultipleCallback||this._getCurrentStore().isRemoved())&&(e.onCheckedCallback=this._onFileChecked.bind(this)),e.perPage=this.par.perPage,this.par.includeSwatches&&this.par.productId&&(e.productId=this.par.productId),this.fileList=new _(e),this.fileList.append(this.nodeMyFileList),this._toggleFileMover()}},D.prototype._loadSampleFileList=function(){g.a.clearNode(this.nodeSampleFileList);var e=new n;e.perPage=this.par.perPage,e.onlySampleFiles=!0,e.withInstructions=!1,e.onPickCallback=this.par.onPickCallback,e.isModal=this.par.isModal,e.includeSwatches=this.par.includeSwatches,this.par.productId&&(e.productId=this.par.productId),this.par.technique&&(e.technique=this.par.technique),new _(e).append(this.nodeSampleFileList)},D.prototype._onFileChecked=function(){var e=this.fileList.getCheckedFileItems();this.par.onPickMultipleCallback&&this.par.onPickMultipleCallback(e),this._fileMover.setFiles(e)},D.prototype._fileDeleted=function(e){this.fileList&&this.fileList.removeFileItemFromList(e)},D.prototype._toggleFileMover=function(){this._getCurrentStore().isRemoved()?g.a.removeClassName(this.nodeFileMover,"hidden"):g.a.addClassName(this.nodeFileMover,"hidden")},D.prototype.loadFileMover=function(e){g.a.clearNode(this.nodeFileMover),this._fileMover=new m(e,this._onFilesMoved.bind(this)),this._fileMover.append(this.nodeFileMover)},D.prototype._onFilesMoved=function(){this.fileList.unCheckAllFileItems(),this._fileMover.setFiles([]),this.par.onPickMultipleCallback&&this.par.onPickMultipleCallback([])},D.prototype.onStoreSelectChange=function(){this.par.storeId=this.nodeStoreSelect.value,this.loadFileList()},D.prototype._getCurrentStore=function(){return(new E.a).getCachedStore(this.par.storeId)},D.prototype.onSearchChange=function(){this.par.search=this.nodeSearch.value,this.loadFileList()},D.prototype._initDropZoneEvents=function(){S()(document).on("dragover"+this.getEventNamespace(),S.a.proxy((function(e){var t,i=S()(this.node),n=D._dropZoneTimeout;n?clearTimeout(n):i.addClass("dropzone-hover");var r=!1,a=e.target;do{if(S()(a).hasClass("dropzone")){r=!0,t=S()(a);break}a=a.parentNode}while(null!=a);i.removeClass("dropzone-hover"),r&&t.addClass("dropzone-hover"),D._dropZoneTimeout=setTimeout((function(){delete D._dropZoneTimeout,i.removeClass("dropzone-hover"),t&&t.removeClass("dropzone-hover")}),250)}),this)),S()(document).on("drop"+this.getEventNamespace()+" dragover"+this.getEventNamespace(),(function(e){e.preventDefault()}))},D.popup=function(e){var t=null;if(e.onPickCallback){var i=e.onPickCallback;e.onPickCallback=function(e){t.remove(),i(e)}}e.isModal=!0;var n=new D(e),r=new L.a.Par;return r.title=PF.Customer.customerId?dlang("library","Store's file library"):dlang("library","File library"),r.nodeClass="file-library-modal",r.modalDialogClass="modal-lg",(t=new L.a(r)).setContent(n),t.show(),t},(globalThis||{}).PFFileLibrary=D},xyjD:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"f",(function(){return h})),i.d(t,"j",(function(){return p})),i.d(t,"d",(function(){return g})),i.d(t,"e",(function(){return f})),i.d(t,"i",(function(){return v})),i.d(t,"b",(function(){return y})),i.d(t,"h",(function(){return b})),i.d(t,"c",(function(){return P})),i.d(t,"k",(function(){return C})),i.d(t,"g",(function(){return T}));var n=i("KLvT"),r=i("Zwo4"),a=i("xRbm"),o=i("xTp9"),s=i("ezUM"),l=i("8GdZ");function c(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function d(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){c(a,n,r,o,s,"next",e)}function s(e){c(a,n,r,o,s,"throw",e)}o(void 0)}))}}var u=Object.freeze({UPDATE_CLIPARTS:"shouldUpdateClipartStorage",UPDATE_COLOR_GRAPHICS:"shouldUpdateColorGraphicStorage",UPDATE_QUICK_DESIGNS:"shouldUpdateQuickDesignStorage"}),h=function(){try{var e=window.localStorage.getItem("generatorVersionMeta");return e?JSON.parse(e):[]}catch(e){return[]}},p=function(e){try{window.localStorage.setItem("generatorVersionMeta",JSON.stringify(e))}catch(e){return}},g=function(e){return"".concat(e.STORAGE_KEY,"-v").concat(e.CACHE_VERSION,"-").concat(PF.LOCALE)},f=function(e){return"".concat(e.STORAGE_KEY,"-recent-").concat(PF.Customer.customerId||"")},_=function(e){try{var t=g(e);window.localStorage.removeItem(t),Object(n.a)().dispatch(r.e(r.i),t)}catch(e){console.log("Local storage not supported")}},m=function(){var e=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(n.a)().dispatch(r.e(r.h));case 3:Object(n.a)().getters[r.e(r.f)].filter((function(e){return 0===e.indexOf("".concat(t.STORAGE_KEY,"-v"))&&e.indexOf("".concat(t.STORAGE_KEY,"-v").concat(t.CACHE_VERSION))<0})).map(function(){var e=d(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.localStorage.removeItem(t),e.next=3,Object(n.a)().dispatch(r.e(r.i),t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn("Could not clear old ".concat(t.STORAGE_KEY," in local storage!"));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),v=function(e,t){m(e);try{var i=g(e);window.localStorage.setItem(i,JSON.stringify(t)),Object(n.a)().dispatch(r.e(r.b),i)}catch(t){console.warn("Could not save ".concat(e.STORAGE_KEY," in local storage!"))}},y=function(){try{_(a.b),_(o.b),_(s.b),_(l.b)}catch(e){console.warn("Could not clear all designer assets from local storage!")}},b=function(e){return Object.values(u).includes(e)},P=function(){var e=d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.e(r.d));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e,t){return Object(n.a)().commit(r.e(r.j),{flag:e,value:t})},T=function(e){return Object(n.a)().getters[r.e(r.g)](e)}},yA1d:function(e,t,i){"use strict";i.d(t,"e",(function(){return B})),i.d(t,"d",(function(){return V})),i.d(t,"f",(function(){return U})),i.d(t,"g",(function(){return H})),i.d(t,"c",(function(){return q})),i.d(t,"b",(function(){return K})),i.d(t,"a",(function(){return Q}));var n=i("TJkW"),r=i("6t3j"),a=i("8vlB"),o=i("edgZ"),s=i("DceF"),l=i("9bv1"),c=i("7QI8"),d=i("6JZw"),u=i("nF4n"),h=function(){};(h.prototype=new d.a).incompleteItemId=0,h.prototype.orderId=0,h.prototype.syncVariantId=null,h.prototype.syncProductId=null,h.prototype.name="",h.prototype.quantity=null,h.prototype.priceRetail=null,h.prototype.externalId=null,h.prototype.previewId=null,h.prototype.retailPriceData=null,h.prototype.createdAt=null,h.prototype.isComplete=null,h.prototype.previewItemFile=null,h.prototype.isGeneratingFiles=null,h.prototype.getSyncProduct=function(){return(new n.a).getCachedSyncProduct(this.syncProductId)},h.prototype.getSyncVariant=function(){return(new n.a).getCachedSyncVariant(this.syncVariantId)},h.prototype.isIgnored=function(){return!!this.syncVariantId&&(this.getSyncProduct().isIgnored||this.getSyncVariant().isIgnored)},h.prototype.shouldBeReviewed=function(){return!this.isIgnored()&&!this.isComplete},h.fromArray=function(e){var t=new h;return t.previewItemFile=c.a.fromArray(e.previewItemFile),delete e.previewItemFile,u.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsOrderLineItemIncomplete=h);var p=i("NXHT"),g=i("mw8R"),f=i("rKkW"),m=i("ehgC"),v=i("n5ho"),y=i("X5Ic"),b=i("y70k"),P=i("5qBa"),C=i("GCEm"),T=i("9Nv7"),I=i("SvWC"),w=i("DD1l"),S=i("GyOi"),E=i("1tjy"),k=i("9Vz/"),O=i("mrkb");function A(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function L(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?A(Object(i),!0).forEach((function(t){N(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):A(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function N(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function D(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function R(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){D(a,n,r,o,s,"next",e)}function s(e){D(a,n,r,o,s,"throw",e)}o(void 0)}))}}var x=["id","customProductId","length","width","height","weight","name","sku","stockProductId","isPackaged","additionalFee","hsCode","retailPrice","originalRetailPrice"],F=["id","environmentId","type","name","price","fulfillmentFee","variantId","productId","urlImage","status","shippingType","createdAt","updatedAt"],M=["itemId","uniqueId","quantity","priceRetail","technique","options","variantId","productTemplateId","name","externalId","syncVariantId","isCopy","designId"];function B(e){if(e instanceof g.a)return e;var t,i=g.a.fromArray(e.order);i.store=m.a.fromArray(e.store);var a=new r.a;for(var c in e.products)a.cacheProduct(y.a.fromArray(e.products[c]));for(var d in e.variants)a.cacheVariant(v.a.fromArray(e.variants[d]));Object(O.b)(),Object(E.b)(e.clipartItems.map((function(e){return f.a.fromArray(e)}))),Object(k.a)(e.colorGraphicItems.map((function(e){return S.a.fromArray(e)})));var u=e.lockedOrderItemIds||[];for(var _ in e.orderItems)(t=p.PFItemsOrderLineItem.fromArray(e.orderItems[_])).setEditable(-1===u.indexOf(t.itemId)),i.items.push(t);for(var P in e.sampleOrderItems)t=p.PFItemsOrderLineItem.fromArray(e.sampleOrderItems[P]),i.sampleItems.push(t);for(var T in e.orderItemsIncomplete){var w=h.fromArray(e.orderItemsIncomplete[T]);i.incompleteItems.push(w)}i.gift=e.gift;var A=new n.a;for(var L in e.syncProducts)A.cacheSyncProduct(l.a.fromArray(e.syncProducts[L]));for(var N in e.syncVariants)A.cacheSyncVariant(s.a.fromArray(e.syncVariants[N]));var D=new o.a;for(var R in e.files){var x=b.a.fromArray(e.files[R]);D.cacheFile(x)}return C.f(m.a.fromArray(e.store)),i.recipient=I.a.fromArray(e.recipient),i.isExemptDigitizationFee=!!e.isExemptDigitizationFee,i.isManualOrder=e.isManualOrder,e.allowedFulfillmentRegions&&(i.allowedFulfillmentRegions=e.allowedFulfillmentRegions),e.sampleLogEntry&&(i.sampleLogEntry=e.sampleLogEntry),i}function V(){return j.apply(this,arguments)}function j(){return(j=R(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)("order/get-draft-for-shopping-cart");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return z.apply(this,arguments)}function z(){return(z=R(regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=J(t),e.next=3,Object(T.a)("order/save-draft"+a.PFRepositoriesOrderRepository.getRef(),i);case 3:return n=e.sent,e.abrupt("return",G(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return function(e){return B(e)}(e)}function H(e){return Y.apply(this,arguments)}function Y(){return(Y=R(regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=J(t),e.next=3,Object(T.a)("order/save-item-to-anonymous-order",i);case 3:return n=e.sent,e.abrupt("return",$(n.order,n.cartItem));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return W.apply(this,arguments)}function W(){return(W=R(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.a)("order/delete-item-from-anonymous-order",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),Object(w.a)(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function K(e){return Z.apply(this,arguments)}function Z(){return(Z=R(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.a)("order/change-anonymous-order-item-quantity",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),Object(w.a)(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function Q(){return X.apply(this,arguments)}function X(){return(X=R(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.a)("order/calculate-estimated-shipping-costs");case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),Object(w.a)(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function $(e,t){return B(e),P.a.fromArray(t)}function J(e){var t,i=[],n=[];if(e.itemsToRemove)for(t in e.itemsToRemove)n.push(e.itemsToRemove[t].itemId);for(t in e.items){var r=e.items[t],a=[];for(var o in r.itemFiles){var s=r.itemFiles[o];s.exists()&&a.push(_.pick(s,["fileId","type","position","options"]))}var l={};if(r.customProductVariant){var c=[];r.customProductVariant&&r.customProductVariant.customProduct&&(c=r.customProductVariant.customProduct.getProductCategoryIdList()),l=L(L({},_.pick(r.customProductVariant,x)),{},{customProduct:L({productCategoryIdList:c},_.pick(r.customProductVariant.customProduct,F))})}i.push(L(L({},_.pick(r,M)),{},{files:a,customProductVariant:l}))}var d={items:JSON.stringify(i)};return e.orderItem&&(d.order=e.orderItem.toArray()),n&&(e.idsToRemove=n),e.hasOwnProperty("giftItem")&&(d.gift=null===e.giftItem?null:e.giftItem.toArray()),e.hasOwnProperty("saveAs")&&(d.saveAs=e.saveAs),e.hasOwnProperty("recalculateDefaults")&&(d.recalculateDefaults=e.recalculateDefaults),d}},yV0Q:function(e,t,i){"use strict";i.d(t,"c",(function(){return n})),i.d(t,"e",(function(){return r})),i.d(t,"d",(function(){return a})),i.d(t,"g",(function(){return o})),i.d(t,"f",(function(){return s})),i.d(t,"a",(function(){return l})),i.d(t,"h",(function(){return c})),i.d(t,"b",(function(){return d}));var n="Gender",r="Female",a=["Male",r],o="Size",s="Height",l="Chest circumference",c="Waist circumference",d="Comment"},ycMH:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("6JZw"),r=i("nF4n"),a=Class({basePrice:null,additionalPrice:null,currency:null,toArrayKeys:["basePrice","additionalPrice","currency"],getReadable:function(e){var t=parseFloat(this.basePrice),i=parseFloat(this.additionalPrice);i=e&&i&&i!==t?prettyMoney(i,this.currency):null;var n=t=prettyMoney(t,this.currency);return i&&(n+=" + "+i+dclang("dashboard","[number] * Quantity (should be as short as possible)","*Qnt")),n}},n.a);a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsShippingPrice=a);var o=Class({USCost:null,CACost:null,EUCost:null,AUCost:null,WWCost:null,rateIdentifier:null,toArrayKeys:["USCost","CACost","WWCost","EUCost","AUCost","rateIdentifier"]},n.a);o.fromArray=function(e){var t=new o;return r.a.O2O(t,e),t.USCost=a.fromArray(e.USCost),t.CACost=a.fromArray(e.CACost),t.WWCost=a.fromArray(e.WWCost),e.EUCost&&(t.EUCost=a.fromArray(e.EUCost)),e.AUCost&&(t.AUCost=a.fromArray(e.AUCost)),t},window&&((globalThis||{}).PFItemsPushedProductShippingCost=o)},zfrb:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("X5Ic"),r=i("rF+z"),a=i("JogF"),o=i("boP+"),s=Class({_templates:null,__construct:function(e){this._templates=e,this._validator=new r.a},getQualityPercent:function(e){if(e.isImageLayer()||e.isLicensedAssetLayer()){if(e.isVector())return 100;var t=e.getDPI()/this._templates.getRequiredDpi()*50;return t>200&&(t=200),t}if(e.isTextLayer()){if(!this._validator.setProductFromDesignerState().setActiveLayer(e).isTextSizeValid())return 0;var i=this._templates.getTemplateByLayer(e),r=Object(o.a)();return null!=r&&r.isEmbroidery()&&i&&i.technique===n.a.TECHNIQUE_EMBROIDERY&&this._templates.areTextLayersOverlapping()?1:null!=r&&r.isDtgShirt()&&e.size<=.275?0:100}if(!e)return console.error("Undefined layer found. Assuming it has 100 percent quality!"),100},shouldSkipUpscale:function(e,t){if(t||e.isLicensedAssetLayer())return!0;if(e.isImageLayer()){return e.getSourceWidth()*e.getSourceHeight()>15e6}return!1},isQualityBad:function(e,t){return t?e>0&&e<50:e>0&&e<25},isQualityBadUpscale:function(e,t){return!t&&(e>=25&&e<50)},isQualityMedium:function(e){return e>=50&&e<=80},getQualityKey:function(e,t,i,n,a){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";if(i&&t&&t.isTextLayer()&&e<100)return 1===e?s.EMBROIDERY_TEXT_OVERLAPPING:s.EMBROIDERY_TEXT_TOO_SMALL;var c=s.QUALITY_GOOD,d=new r.a;d.setActiveLayer(t),d.setActivePlacement(l);var u=Object(o.a)();return this.hasTransparencyProblems(t,u)&&(c=s.QUALITY_TRANSPARENCY),i&&!n&&t&&t.isTextLayerPartiallyOutOfBounds()&&(c=s.QUALITY_EMBROIDERY),!i&&this.isQualityMedium(e)&&(c=s.QUALITY_MEDIUM),"boolean"!=typeof a&&(a=this.shouldSkipUpscale(t,i)),!i&&this.isQualityBadUpscale(e,a)&&(c=s.QUALITY_BAD_UPSCALE),!i&&this.isQualityBad(e,a)&&(c=s.QUALITY_BAD),i&&l&&d.isTextHeightOverUpperLimit()&&(c=s.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT),c},getTemplateQualityPercent:function(e,t){var i=this._templates.getUserTemplate(e,t),n=null;for(var r in i.layers){var a=this.getQualityPercent(i.layers[r]);n=null===n?a:Math.min(n,a)}return n},hasTransparencyProblems:function(e,t){return e&&t&&(t.isDtgShirt()||t.isDtgTote())&&e.isImageLayer()&&e.hasTransparencyIssues()}});s.QUALITY_GOOD=a.g,s.QUALITY_MEDIUM=a.h,s.QUALITY_BAD=a.d,s.QUALITY_BAD_UPSCALE=a.e,s.QUALITY_EMBROIDERY=a.f,s.QUALITY_TRANSPARENCY=a.i,s.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT=a.a,s.TEXT_TOO_SMALL=a.j,s.EMBROIDERY_TEXT_TOO_SMALL=a.c,s.EMBROIDERY_TEXT_OVERLAPPING=a.b,s.UPSCALE_MULTIPLIER=a.k,window&&((globalThis||{}).PFProductPushTemplateQuality=s)},zorP:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=function(){this.stars=null,this.defaultClass="pf-i pf-i-24 pf-text-brown pf-pr-8 pf-keydown-click",this.starType=" pf-i-star",this.nodeStars=[];for(var e=1;e<=5;e++)this.nodeStars.push(tag("div",{className:this.defaultClass+this.starType,onclick:$.proxy(this.setStars,this,e),attr:{role:"button",tabindex:"0","aria-label":this.textual[e-1]},prop:{onmouseover:this.highlightStars.bind(this,e)}}));this.nodeTextual=Object(n.a)({tag:"span",className:"review-stars__textual"}),this.node=Object(n.a)({tag:"div",els:[{tag:"span",className:"review-stars__stars",els:this.nodeStars,prop:{onmouseout:this.highlightStars.bind(this,!1)}},this.nodeTextual]}),this.highlightStars()};r.prototype=new n.a.Base,r.prototype.textual=[dlang("reviews","Terrible"),dlang("reviews","Not impressed"),dlang("reviews","It's fine"),dlang("reviews","Like it"),dlang("reviews","Love it")],r.prototype.getStars=function(){return this.stars},r.prototype.setStars=function(e){this.stars=e,this.highlightStars(this.stars)},r.prototype.highlightStars=function(e){for(var t in e=e||this.stars,this.nodeStars)this.nodeStars[t].className=t<=e-1?this.defaultClass+this.starType:this.defaultClass+this.starType+"-outline";this.nodeTextual.textContent=this.textual[e-1]},(globalThis||{}).PFProductReviewFormStarRating=r},zsu5:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("7QI8"),r=i("X5Ic");function a(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var s=Class({_designData:null,_generatorParams:null,__construct:function(e,t){this._designData=e,this._generatorParams=t,this._alreadyAddedMockupGroups=[]},getGroupedMockupVariants:function(){var e={},t=[],i={},o={},s={},l=this._getTemplateGeneratorVariantIds();Object.values(this._designData.templates).forEach((function(e){t.push(e.templateId),e.parentTemplateId&&t.push(e.parentTemplateId)}));var c,d=a(this._designData.generatorVariants);try{for(d.s();!(c=d.n()).done;){var u=c.value;o[u.size]=!0,i[u.color]=!0,s[u.placementId]=!0}}catch(e){d.e(e)}finally{d.f()}for(var h=0,p=Object.values(this._generatorParams.generatorVariants);h<p.length;h++){var g=p[h];if(!l.includes(g.generatorVariantId)&&(t.includes(g.templateId)&&(!g.size||o[g.size])&&(!g.color||i[g.color])&&(!g.placementId||s[g.placementId])&&!(g.placementId===n.a.TYPE_LABEL_INSIDE&&this._designData.technique!==r.a.TECHNIQUE_CUT_SEW||g.relatedPlacements&&this.isRelatedToOtherPlacements(g)))){var f=g.option||this._getReadablePlacement(g.placementId),_=g.optionGroup||"Default";e[_]=e[_]||[],e[_][f]=e[_][f]||[],e[_][f].push(g)}}return this._sortGroupedMockupVariants(e)},_sortGroupedMockupVariants:function(e){var t=(this._designData.colors||[]).slice(),i=(this._designData.sizes||[]).slice(),n=function(e,t){return function(i,n){var r=t.indexOf(i[e]),a=t.indexOf(n[e]);return r===a?0:r<a?-1:1}},r=this._sortBySequence(e,PF.Config.ProductPush.VariantFilter.OPTION_GROUP_SEQUENCE);for(var a in r){var o=this._sortBySequence(r[a],PF.Config.ProductPush.VariantFilter.OPTION_SEQUENCE);for(var s in o){var l=o[s];l.sort((function(e,r){var a=n("color",t)(e,r),o=0;return a||(o=n("size",i)(e,r)),a+o})),o[s]=l}r[a]=o}return r},_sortBySequence:function(e,t){var i=Object.keys(e);i.sort((function(e,i){return t.indexOf(e)>t.indexOf(i)?1:-1}));var n=[];for(var r in i)n[i[r]]=e[i[r]];return n},getMockupVariantIds:function(){var e=this.getGroupedMockupVariants(),t=[];for(var i in e)for(var n in e[i])for(var r in e[i][n])t.push(e[i][n][r].generatorVariantId);return t},getGroupMockupVariantIds:function(e){var t=this.getGroupedMockupVariants(),i=[];for(var n in t[e])for(var r in t[e][n])i.push(t[e][n][r].generatorVariantId);return i},getDefaultGroupVariantId:function(e){var t=this.getGroupMockupVariantIds(e);if(t.length)return t[0];console.error("Generator variants not found for mockup main group: "+e)},getAdditionalGroupVariantId:function(e,t,i){var n=this.getGroupedMockupVariants(),r=[];for(var a in n[e]){var o=n[e][a];for(var s in o){var l=o[s];t&&i&&l.size===i&&l.color===t?r.push(l.generatorVariantId):(t&&l.color===t||i&&l.size===i)&&r.push(l.generatorVariantId)}}if(r.length>0)return r[0];var c=this.getDefaultGroupVariantId(e);if(c)return c;console.error("Generator variants not found for mockup additional group: "+e)},_getReadablePlacement:function(e){var t=this._generatorParams.availablePlacements;for(var i in t){var n=t[i];if(n.id==e)return n.title}return e},_getTemplateGeneratorVariantIds:function(){var e=this._generatorParams.variantMapping,t=[];for(var i in e){var n=e[i];for(var r in n.templateIds){var a=n.templateIds[r];t.indexOf(a)<0&&t.push(a)}}return t},isRelatedToOtherPlacements:function(e){var t=this._alreadyAddedMockupGroups[e.optionGroup];t||(t=this._alreadyAddedMockupGroups[e.optionGroup]=[]);var i=t[e.option];return i||(i=this._alreadyAddedMockupGroups[e.optionGroup][e.option]=[]),!(!i||!e.relatedPlacements.includes(i))||(this._alreadyAddedMockupGroups[e.optionGroup][e.option]=e.placementId,!1)}});window&&((globalThis||{}).PFProductPushVariantFilter=s)}}]);